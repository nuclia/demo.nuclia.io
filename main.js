!function(t){function e(e){for(var n,s,i=e[0],o=e[1],a=0,u=[];a<i.length;a++)s=i[a],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&u.push(r[s][0]),r[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);for(l&&l(e);u.length;)u.shift()()}var n={},r={0:0};function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise(function(e,s){n=r[t]=[e,s]});e.push(n[2]=i);var o,a=document.createElement("script");a.charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.src=function(t){return s.p+""+({}[t]||t)+".js"}(t);var l=new Error;o=function(e){a.onerror=a.onload=null,clearTimeout(u);var n=r[t];if(0!==n){if(n){var s=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",l.name="ChunkLoadError",l.type=s,l.request=i,n[1](l)}r[t]=void 0}};var u=setTimeout(function(){o({type:"timeout",target:a})},12e4);a.onerror=a.onload=o,document.head.appendChild(a)}return Promise.all(e)},s.m=t,s.c=n,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,(function(e){return t[e]}).bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s.oe=function(t){throw console.error(t),t};var i=window.webpackJsonp=window.webpackJsonp||[],o=i.push.bind(i);i.push=e,i=i.slice();for(var a=0;a<i.length;a++)e(i[a]);var l=o;s(s.s=0)}({"+924":function(t,e,n){"use strict";function r(t,e){var n=t,r=n.length;if(r<=150)return n;e>r&&(e=r);var s=Math.max(e-60,0);s<5&&(s=0);var i=Math.min(s+140,r);return i>r-5&&(i=r),i===r&&(s=Math.max(i-140,0)),n=n.slice(s,i),s>0&&(n="'{snip} "+n),i<r&&(n+=" {snip}"),n}n.d(e,"a",function(){return r}),n("9AQC")},"+zAX":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("8Y7J"),s=n("Fa5o"),i=n("e6bL"),o=n("SVse");let a=(()=>{class t{constructor(t,e,n,r){this.enviromentConf=t,this.apiConfig=e,this.platformLocation=n,this.isBrowser=!1,this.config=this.apiConfig.getConfig(),this.staticConf=this.enviromentConf,this.isBrowser=Object(o.w)(r),this.isBrowser&&this.config.backend.posthog_key&&this.config.backend.posthog_host&&i.a.init(this.config.backend.posthog_key,{api_host:this.config.backend.posthog_host,autocapture:!0,capture_pageview:!0})}getRelativeAPI(t){return t.replace(this.config.backend.api,"")}getAPIURL(){return this.config.backend.api}getAppName(){return this.config.backend.app}getRecaptchaKey(){return this.config.backend.siteKey}getEnvironment(){return this.config.backend.sentry_environment}getAnalyticsKey(){return this.config.backend.analytics}getEditorUrl(){var t;return null===(t=this.config.stashify)||void 0===t?void 0:t.editor}getEmailDomain(){var t;return null===(t=this.config.stashify)||void 0===t?void 0:t.email_domain}getSocialLogin(){return this.staticConf.backend.social_login}getBaseAssetUrl(){return this.staticConf.base_asset_url}getAllowdHostsRedirect(){return this.config.backend.allowed_hosts_redirect||[]}getNewApi(){return!!this.staticConf.backend.new_api}getOAuthLogin(){return!!this.staticConf.backend.oauth_login}getSAMLLogin(){return!!this.config.backend.saml_login}getLocales(){return this.staticConf.locales||[]}getVersion(){return this.config.version}}return t.\u0275fac=function(e){return new(e||t)(r.Zb("staticEnviromentConfiguration"),r.Zb(s.a),r.Zb(o.t),r.Zb(r.C))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"/+cc":function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,(function(e){return t[e]}).bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=n(1),i=n(7),o=i.get,a=i.isArray,l=function(){function t(e,n){var r=n.location,s=void 0===r?0:r,i=n.distance,a=void 0===i?100:i,l=n.threshold,u=void 0===l?.6:l,c=n.maxPatternLength,h=void 0===c?32:c,d=n.caseSensitive,p=void 0!==d&&d,f=n.tokenSeparator,m=void 0===f?/ +/g:f,g=n.findAllMatches,b=void 0!==g&&g,y=n.minMatchCharLength,v=void 0===y?1:y,_=n.id,w=void 0===_?null:_,x=n.keys,k=void 0===x?[]:x,S=n.shouldSort,C=void 0===S||S,I=n.getFn,E=void 0===I?o:I,O=n.sortFn,T=void 0===O?function(t,e){return t.score-e.score}:O,N=n.tokenize,A=void 0!==N&&N,R=n.matchAllTokens,F=void 0!==R&&R,D=n.includeMatches,P=void 0!==D&&D,$=n.includeScore,M=void 0!==$&&$,L=n.verbose,j=void 0!==L&&L;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={location:s,distance:a,threshold:u,maxPatternLength:h,isCaseSensitive:p,tokenSeparator:m,findAllMatches:b,minMatchCharLength:v,id:w,keys:k,includeMatches:P,includeScore:M,shouldSort:C,getFn:E,sortFn:T,verbose:j,tokenize:A,matchAllTokens:F},this.setCollection(e),this._processKeys(k)}var e;return(e=[{key:"setCollection",value:function(t){return this.list=t,t}},{key:"_processKeys",value:function(t){if(this._keyWeights={},this._keyNames=[],t.length&&"string"==typeof t[0])for(var e=0,n=t.length;e<n;e+=1){var r=t[e];this._keyWeights[r]=1,this._keyNames.push(r)}else{for(var s=null,i=null,o=0,a=0,l=t.length;a<l;a+=1){var u=t[a];if(!u.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var c=u.name;if(this._keyNames.push(c),!u.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');var h=u.weight;if(h<0||h>1)throw new Error('"weight" property in key must bein the range of [0, 1)');i=null==i?h:Math.max(i,h),s=null==s?h:Math.min(s,h),this._keyWeights[c]=h,o+=h}if(o>1)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(t,'"'));var n=this._prepareSearchers(t),r=this._search(n.tokenSearchers,n.fullSearcher);return this._computeScore(r),this.options.shouldSort&&this._sort(r),e.limit&&"number"==typeof e.limit&&(r=r.slice(0,e.limit)),this._format(r)}},{key:"_prepareSearchers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=[];if(this.options.tokenize)for(var n=t.split(this.options.tokenSeparator),r=0,i=n.length;r<i;r+=1)e.push(new s(n[r],this.options));return{tokenSearchers:e,fullSearcher:new s(t,this.options)}}},{key:"_search",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=this.list,r={},s=[];if("string"==typeof n[0]){for(var i=0,o=n.length;i<o;i+=1)this._analyze({key:"",value:n[i],record:i,index:i},{resultMap:r,results:s,tokenSearchers:t,fullSearcher:e});return s}for(var a=0,l=n.length;a<l;a+=1)for(var u=n[a],c=0,h=this._keyNames.length;c<h;c+=1){var d=this._keyNames[c];this._analyze({key:d,value:this.options.getFn(u,d),record:u,index:a},{resultMap:r,results:s,tokenSearchers:t,fullSearcher:e})}return s}},{key:"_analyze",value:function(t,e){var n=this,r=t.key,s=t.arrayIndex,i=e.tokenSearchers,o=void 0===i?[]:i,l=e.fullSearcher,u=e.resultMap,c=void 0===u?{}:u,h=e.results,d=void 0===h?[]:h;!function t(e,s,i,u){if(null!=s)if("string"==typeof s){var h=!1,p=-1,f=0;n._log("\nKey: ".concat(""===r?"--":r));var m=l.search(s);if(n._log('Full text: "'.concat(s,'", score: ').concat(m.score)),n.options.tokenize){for(var g=s.split(n.options.tokenSeparator),b=g.length,y=[],v=0,_=o.length;v<_;v+=1){var w=o[v];n._log('\nPattern: "'.concat(w.pattern,'"'));for(var x=!1,k=0;k<b;k+=1){var S=g[k],C=w.search(S),I={};C.isMatch?(I[S]=C.score,h=!0,x=!0,y.push(C.score)):(I[S]=1,n.options.matchAllTokens||y.push(1)),n._log('Token: "'.concat(S,'", score: ').concat(I[S]))}x&&(f+=1)}p=y[0];for(var E=y.length,O=1;O<E;O+=1)p+=y[O];n._log("Token score average:",p/=E)}var T=m.score;p>-1&&(T=(T+p)/2),n._log("Score average:",T);var N=!n.options.tokenize||!n.options.matchAllTokens||f>=o.length;if(n._log("\nCheck Matches: ".concat(N)),(h||m.isMatch)&&N){var A={key:r,arrayIndex:e,value:s,score:T};n.options.includeMatches&&(A.matchedIndices=m.matchedIndices);var R=c[u];R?R.output.push(A):(c[u]={item:i,output:[A]},d.push(c[u]))}}else if(a(s))for(var F=0,D=s.length;F<D;F+=1)t(F,s[F],i,u)}(void 0===s?-1:s,t.value,t.record,t.index)}},{key:"_computeScore",value:function(t){this._log("\n\nComputing score:\n");for(var e=this._keyWeights,n=!!Object.keys(e).length,r=0,s=t.length;r<s;r+=1){for(var i=t[r],o=i.output,a=o.length,l=1,u=0;u<a;u+=1){var c=o[u],h=c.key;l*=Math.pow(0===c.score&&e&&e[h]>0?Number.EPSILON:c.score,n?e[h]:1)}i.score=l,this._log(i)}}},{key:"_sort",value:function(t){this._log("\n\nSorting...."),t.sort(this.options.sortFn)}},{key:"_format",value:function(t){var e=[];if(this.options.verbose){var n=[];this._log("\n\nOutput:\n\n",JSON.stringify(t,function(t,e){if("object"===r(e)&&null!==e){if(-1!==n.indexOf(e))return;n.push(e)}return e},2)),n=null}var s=[];this.options.includeMatches&&s.push(function(t,e){var n=t.output;e.matches=[];for(var r=0,s=n.length;r<s;r+=1){var i=n[r];if(0!==i.matchedIndices.length){var o={indices:i.matchedIndices,value:i.value};i.key&&(o.key=i.key),i.hasOwnProperty("arrayIndex")&&i.arrayIndex>-1&&(o.arrayIndex=i.arrayIndex),e.matches.push(o)}}}),this.options.includeScore&&s.push(function(t,e){e.score=t.score});for(var i=0,o=t.length;i<o;i+=1){var a=t[i];if(this.options.id&&(a.item=this.options.getFn(a.item,this.options.id)[0]),s.length){for(var l={item:a.item},u=0,c=s.length;u<c;u+=1)s[u](a,l);e.push(l)}else e.push(a.item)}return e}},{key:"_log",value:function(){var t;this.options.verbose&&(t=console).log.apply(t,arguments)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();t.exports=l},function(t,e,n){var r=n(2),s=n(3),i=n(6),o=function(){function t(e,n){var r=n.location,s=void 0===r?0:r,o=n.distance,a=void 0===o?100:o,l=n.threshold,u=void 0===l?.6:l,c=n.maxPatternLength,h=void 0===c?32:c,d=n.isCaseSensitive,p=void 0!==d&&d,f=n.tokenSeparator,m=void 0===f?/ +/g:f,g=n.findAllMatches,b=void 0!==g&&g,y=n.minMatchCharLength,v=void 0===y?1:y,_=n.includeMatches,w=void 0!==_&&_;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={location:s,distance:a,threshold:u,maxPatternLength:h,isCaseSensitive:p,tokenSeparator:m,findAllMatches:b,includeMatches:w,minMatchCharLength:v},this.pattern=p?e:e.toLowerCase(),this.pattern.length<=h&&(this.patternAlphabet=i(this.pattern))}var e;return(e=[{key:"search",value:function(t){var e=this.options,n=e.includeMatches;if(e.isCaseSensitive||(t=t.toLowerCase()),this.pattern===t){var i={isMatch:!0,score:0};return n&&(i.matchedIndices=[[0,t.length-1]]),i}var o=this.options;if(this.pattern.length>o.maxPatternLength)return r(t,this.pattern,o.tokenSeparator);var a=this.options;return s(t,this.pattern,this.patternAlphabet,{location:a.location,distance:a.distance,threshold:a.threshold,findAllMatches:a.findAllMatches,minMatchCharLength:a.minMatchCharLength,includeMatches:n})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();t.exports=o},function(t,e){var n=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,s=new RegExp(e.replace(n,"\\$&").replace(r,"|")),i=t.match(s),o=!!i,a=[];if(o)for(var l=0,u=i.length;l<u;l+=1){var c=i[l];a.push([t.indexOf(c),c.length-1])}return{score:o?.5:1,isMatch:o,matchedIndices:a}}},function(t,e,n){var r=n(4),s=n(5);t.exports=function(t,e,n,i){for(var o=i.location,a=i.distance,l=void 0===a?100:a,u=i.threshold,c=i.findAllMatches,h=void 0!==c&&c,d=i.minMatchCharLength,p=void 0===d?1:d,f=i.includeMatches,m=void 0!==f&&f,g=void 0===o?0:o,b=t.length,y=void 0===u?.6:u,v=t.indexOf(e,g),_=e.length,w=[],x=0;x<b;x+=1)w[x]=0;if(-1!==v){var k=r(e,{errors:0,currentLocation:v,expectedLocation:g,distance:l});if(y=Math.min(k,y),-1!==(v=t.lastIndexOf(e,g+_))){var S=r(e,{errors:0,currentLocation:v,expectedLocation:g,distance:l});y=Math.min(S,y)}}v=-1;for(var C=[],I=1,E=_+b,O=1<<(_<=31?_-1:30),T=0;T<_;T+=1){for(var N=0,A=E;N<A;)r(e,{errors:T,currentLocation:g+A,expectedLocation:g,distance:l})<=y?N=A:E=A,A=Math.floor((E-N)/2+N);E=A;var R=Math.max(1,g-A+1),F=h?b:Math.min(g+A,b)+_,D=Array(F+2);D[F+1]=(1<<T)-1;for(var P=F;P>=R;P-=1){var $=P-1,M=n[t.charAt($)];if(M&&(w[$]=1),D[P]=(D[P+1]<<1|1)&M,0!==T&&(D[P]|=(C[P+1]|C[P])<<1|1|C[P+1]),D[P]&O&&(I=r(e,{errors:T,currentLocation:$,expectedLocation:g,distance:l}))<=y){if(y=I,(v=$)<=g)break;R=Math.max(1,2*g-v)}}if(r(e,{errors:T+1,currentLocation:g,expectedLocation:g,distance:l})>y)break;C=D}var L={isMatch:v>=0,score:0===I?.001:I};return m&&(L.matchedIndices=s(w,p)),L}},function(t,e){t.exports=function(t,e){var n=e.errors,r=e.currentLocation,s=e.expectedLocation,i=e.distance,o=void 0===i?100:i,a=(void 0===n?0:n)/t.length,l=Math.abs((void 0===s?0:s)-(void 0===r?0:r));return o?a+l/o:l?1:a}},function(t,e){t.exports=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,s=-1,i=0,o=t.length;i<o;i+=1){var a=t[i];a&&-1===r?r=i:a||-1===r||((s=i-1)-r+1>=e&&n.push([r,s]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}},function(t,e){t.exports=function(t){for(var e={},n=t.length,r=0;r<n;r+=1)e[t.charAt(r)]=0;for(var s=0;s<n;s+=1)e[t.charAt(s)]|=1<<n-s-1;return e}},function(t,e){var n=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},r=function(t){return null==t?"":function(t){if("string"==typeof t)return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)},s=function(t){return"string"==typeof t},i=function(t){return"number"==typeof t};t.exports={get:function(t,e){var o=[];return function t(e,a){if(a){var l=a.indexOf("."),u=a,c=null;-1!==l&&(u=a.slice(0,l),c=a.slice(l+1));var h=e[u];if(null!=h)if(c||!s(h)&&!i(h))if(n(h))for(var d=0,p=h.length;d<p;d+=1)t(h[d],c);else c&&t(h,c);else o.push(r(h))}else o.push(e)}(t,e),o},isArray:n,isString:s,isNum:i,toString:r}}])},"/q54":function(t,e,n){"use strict";n.d(e,"c",function(){return v}),n.d(e,"d",function(){return x}),n.d(e,"e",function(){return k}),n.d(e,"h",function(){return S}),n.d(e,"a",function(){return C}),n.d(e,"b",function(){return N}),n.d(e,"g",function(){return J}),n.d(e,"j",function(){return tt}),n.d(e,"i",function(){return et}),n.d(e,"k",function(){return nt}),n.d(e,"f",function(){return st});var r=n("8Y7J"),s=n("SVse"),i=n("XNiG"),o=n("2Vo4"),a=n("HDdC"),l=n("VRyK"),u=n("7Hc7"),c=n("LRne"),h=(n("xgIS"),n("pLZG")),d=n("lJxs"),p=n("Kj3r"),f=n("eIep"),m=n("1G5W"),g=(n("IzEk"),n("vkgz"));const b={provide:r.b,useFactory:function(t,e){return()=>{if(Object(s.w)(e)){const e=Array.from(t.querySelectorAll(`[class*=${y}]`)),n=/\bflex-layout-.+?\b/g;e.forEach(t=>{t.classList.contains(`${y}ssr`)&&t.parentNode?t.parentNode.removeChild(t):t.className.replace(n,"")})}}},deps:[s.d,r.C],multi:!0},y="flex-layout-";let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:[b]}),t})();class _{constructor(t=!1,e="all",n="",r="",s=0){this.matches=t,this.mediaQuery=e,this.mqAlias=n,this.suffix=r,this.priority=s,this.property=""}clone(){return new _(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let w=(()=>{class t{constructor(){this.stylesheet=new Map}addStyleToElement(t,e,n){const r=this.stylesheet.get(t);r?r.set(e,n):this.stylesheet.set(t,new Map([[e,n]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,e){const n=this.stylesheet.get(t);let r="";if(n){const t=n.get(e);"number"!=typeof t&&"string"!=typeof t||(r=t+"")}return r}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Lb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const x={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},k=new r.r("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>x}),S=new r.r("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),C=new r.r("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function I(t,e){return t=t?t.clone():new _,e&&(t.mqAlias=e.alias,t.mediaQuery=e.mediaQuery,t.suffix=e.suffix,t.priority=e.priority),t}const E="inline",O=["row","column","row-reverse","column-reverse"];function T(t){if(t)switch(t.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":t="wrap-reverse";break;case"no":case"none":case"nowrap":t="nowrap";break;default:t="wrap"}return t}let N=(()=>{class t{constructor(t,e,n,r){this.elementRef=t,this.styleBuilder=e,this.styler=n,this.marshal=r,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new i.a,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(e=>{if(-1!==this.inputs.indexOf(e)){const n=e.split(".").slice(1).join(".");this.setValue(t[e].currentValue,n)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,e){const n=this.styleBuilder,r=n.shouldCache;let s=this.styleCache.get(t);s&&r||(s=n.buildStyles(t,e),r&&this.styleCache.set(t,s)),this.mru=Object.assign({},s),this.applyStyleToElement(s),n.sideEffect(t,s,e)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={}}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,e=!1){if(t){const[n,r]=this.styler.getFlowDirection(t);if(!r&&e){const e=function(t){let[e,n,r]=function(t){t=t?t.toLowerCase():"";let[e,n,r]=t.split(" ");return O.find(t=>t===e)||(e=O[0]),n===E&&(n=r!==E?r:"",r=E),[e,T(n),!!r]}(t);return function(t,e=null,n=!1){return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":t,"flex-wrap":e||null}}(e,n,r)}(n);this.styler.applyStyleToElements(e,[t])}return n.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,e,n=this.nativeElement){this.styler.applyStyleToElement(n,t,e)}setValue(t,e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,e)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return t.\u0275fac=function(t){r.cc()},t.\u0275dir=r.Kb({type:t,features:[r.Cb]}),t})();const A=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],R="(orientation: portrait) and (max-width: 599.98px)",F="(orientation: landscape) and (max-width: 959.98px)",D="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",P="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",$="(orientation: portrait) and (min-width: 840px)",M="(orientation: landscape) and (min-width: 1280px)",L={HANDSET:`${R}, ${F}`,TABLET:`${D} , ${P}`,WEB:`${$}, ${M} `,HANDSET_PORTRAIT:`${R}`,TABLET_PORTRAIT:`${D} `,WEB_PORTRAIT:`${$}`,HANDSET_LANDSCAPE:`${F}`,TABLET_LANDSCAPE:`${P}`,WEB_LANDSCAPE:`${M}`},j=[{alias:"handset",priority:2e3,mediaQuery:L.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:L.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:L.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:L.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:L.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:L.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:L.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:L.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:L.WEB_PORTRAIT,overlapping:!0}],z=/(\.|-|_)/g;function B(t){let e=t.length>0?t.charAt(0):"",n=t.length>1?t.slice(1):"";return e.toUpperCase()+n}const V=new r.r("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const t=Object(r.Y)(C),e=Object(r.Y)(k),n=[].concat.apply([],(t||[]).map(t=>Array.isArray(t)?t:[t]));return function(t,e=[]){const n={};return t.forEach(t=>{n[t.alias]=t}),e.forEach(t=>{n[t.alias]?function(t,...e){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(let n of e)if(null!=n)for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e])}(n[t.alias],t):n[t.alias]=t}),(r=Object.keys(n).map(t=>n[t])).forEach(t=>{t.suffix||(t.suffix=t.alias.replace(z,"|").split("|").map(B).join(""),t.overlapping=!!t.overlapping)}),r;var r}((e.disableDefaultBps?[]:A).concat(e.addOrientationBps?j:[]),n)}});function U(t,e){return(e&&e.priority||0)-(t&&t.priority||0)}function W(t,e){return(t.priority||0)-(e.priority||0)}let H=(()=>{class t{constructor(t){this.findByMap=new Map,this.items=[...t].sort(W)}findByAlias(t){return t?this.findWithPredicate(t,e=>e.alias==t):null}findByQuery(t){return this.findWithPredicate(t,e=>e.mediaQuery==t)}get overlappings(){return this.items.filter(t=>1==t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t.suffix?t.suffix:"")}findWithPredicate(t,e){let n=this.findByMap.get(t);return n||(n=this.items.find(e)||null,this.findByMap.set(t,n)),n||null}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(V))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Zb)(V))},token:t,providedIn:"root"}),t})(),G=(()=>{class t{constructor(t,e,n){this._zone=t,this._platformId=e,this._document=n,this.source=new o.a(new _(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((e,n)=>{e.matches&&t.push(n)}),t}isActive(t){const e=this.registry.get(t);return e?e.matches:this.registerQuery(t).some(t=>t.matches)}observe(t,e=!1){if(t&&t.length){const n=this._observable$.pipe(Object(h.a)(n=>!e||t.indexOf(n.mediaQuery)>-1)),r=new a.a(e=>{const n=this.registerQuery(t);if(n.length){const t=n.pop();n.forEach(t=>{e.next(t)}),this.source.next(t)}e.complete()});return Object(l.a)(r,n)}return this._observable$}registerQuery(t){const e=Array.isArray(t)?t:[t],n=[];return function(t,e){const n=t.filter(t=>!q[t]);if(n.length>0){const t=n.join(", ");try{const r=e.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${t} {.fx-query-test{ }}\n`)),e.head.appendChild(r),n.forEach(t=>q[t]=r)}catch(r){console.error(r)}}}(e,this._document),e.forEach(t=>{const e=e=>{this._zone.run(()=>this.source.next(new _(e.matches,t)))};let r=this.registry.get(t);r||(r=this.buildMQL(t),r.addListener(e),this.pendingRemoveListenerFns.push(()=>r.removeListener(e)),this.registry.set(t,r)),r.matches&&n.push(new _(!0,t))}),n}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function(t,e){return e&&window.matchMedia("all").addListener?window.matchMedia(t):{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,Object(s.w)(this._platformId))}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.A),r.Zb(r.C),r.Zb(s.d))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Zb)(r.A),Object(r.Zb)(r.C),Object(r.Zb)(s.d))},token:t,providedIn:"root"}),t})();const q={},Z="print",K={alias:Z,mediaQuery:Z,priority:1e3};let Y=(()=>{class t{constructor(t,e,n){this.breakpoints=t,this.layoutConfig=e,this._document=n,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.isPrinting=!1,this.queue=new X,this.deactivations=[]}withPrintQuery(t){return[...t,Z]}isPrintEvent(t){return t.mediaQuery.startsWith(Z)}get printAlias(){return this.layoutConfig.printWithBreakpoints||[]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const e=this.breakpoints.findByQuery(t);return(e?[...this.printBreakPoints,e]:this.printBreakPoints).sort(U)}updateEvent(t){let e=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(e=this.getEventBreakpoints(t)[0],t.mediaQuery=e?e.mediaQuery:""),I(t,e)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const e=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new _(!0,Z))),t.updateStyles())},n=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",e),this._document.defaultView.addEventListener("afterprint",n),this.beforePrintEventListeners.push(e),this.afterPrintEventListeners.push(n)}interceptEvents(t){return this.registerBeforeAfterPrintHooks(t),e=>{this.isPrintEvent(e)?e.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(e)),t.updateStyles()):e.matches||!this.isPrinting||this.isPrintingBeforeAfterEvent||(this.stopPrinting(t),t.updateStyles()):this.collectActivations(e)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,e){this.isPrinting=!0,t.activatedBreakpoints=this.queue.addPrintBreakpoints(e)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.queue.clear(),this.isPrinting=!1}collectActivations(t){if(!this.isPrinting||this.isPrintingBeforeAfterEvent)if(t.matches)this.isPrintingBeforeAfterEvent||(this.deactivations=[]);else{const e=this.breakpoints.findByQuery(t.mediaQuery);e&&(this.deactivations.push(e),this.deactivations.sort(U))}}ngOnDestroy(){this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t))}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(H),r.Zb(k),r.Zb(s.d))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Zb)(H),Object(r.Zb)(k),Object(r.Zb)(s.d))},token:t,providedIn:"root"}),t})();class X{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(t){return t.push(K),t.sort(U),t.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(t){t&&void 0===this.printBreakpoints.find(e=>e.mediaQuery===t.mediaQuery)&&(this.printBreakpoints=function(t){return!!t&&t.mediaQuery.startsWith(Z)}(t)?[t,...this.printBreakpoints]:[...this.printBreakpoints,t])}clear(){this.printBreakpoints=[]}}let J=(()=>{class t{constructor(t,e,n){this.breakpoints=t,this.matchMedia=e,this.hook=n,this.filterOverlaps=!1,this.destroyed$=new i.a,this._media$=this.watchActivations(),this.media$=this._media$.pipe(Object(h.a)(t=>t.length>0),Object(d.a)(t=>t[0]))}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}asObservable(){return this._media$}isActive(t){return function(t){return Array.isArray(t)?t:[t]}(t).map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim()).some(t=>{const e=function(t,e){const n=e.findByAlias(t)||e.findByQuery(t);return n?n.mediaQuery:null}(t,this.breakpoints);return null!==e&&this.matchMedia.isActive(e)})}watchActivations(){const t=this.breakpoints.items.map(t=>t.mediaQuery);return this.buildObservable(t)}buildObservable(t){return this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe(Object(h.a)(t=>t.matches),Object(p.a)(0,u.a),Object(f.a)(t=>Object(c.a)(this.findAllActivations())),Object(d.a)(t=>this.filterOverlaps?t.filter(t=>{const e=this.breakpoints.findByQuery(t.mediaQuery);return!e||!e.overlapping}):t),Object(h.a)(t=>t.filter(t=>t.mediaQuery.length>0).length>0),Object(m.a)(this.destroyed$))}findAllActivations(){return this.matchMedia.activations.map(t=>new _(!0,t)).map(t=>this.hook.isPrintEvent(t)?this.hook.updateEvent(t):t).map(t=>I(t,this.breakpoints.findByQuery(t.mediaQuery))).sort(U)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(H),r.Zb(G),r.Zb(Y))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Zb)(H),Object(r.Zb)(G),Object(r.Zb)(Y))},token:t,providedIn:"root"}),t})();function Q(t){for(let e in t){let n=t[e]||"";switch(e){case"display":t.display="flex"===n?["-webkit-flex","flex"]:"inline-flex"===n?["-webkit-inline-flex","inline-flex"]:n;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":t["-webkit-"+e]=n;break;case"flex-direction":n=n||"row",t["-webkit-flex-direction"]=n,t["flex-direction"]=n;break;case"order":t.order=t["-webkit-"+e]=isNaN(+n)?"0":n}}return t}let tt=(()=>{class t{constructor(t,e,n,r){this._serverStylesheet=t,this._serverModuleLoaded=e,this._platformId=n,this.layoutConfig=r}applyStyleToElement(t,e,n=null){let r={};"string"==typeof e&&(r[e]=n,e=r),r=this.layoutConfig.disableVendorPrefixes?e:Q(e),this._applyMultiValueStyleToElement(r,t)}applyStyleToElements(t,e=[]){const n=this.layoutConfig.disableVendorPrefixes?t:Q(t);e.forEach(t=>{this._applyMultiValueStyleToElement(n,t)})}getFlowDirection(t){const e="flex-direction";let n=this.lookupStyle(t,e);return[n||"row",this.lookupInlineStyle(t,e)||Object(s.x)(this._platformId)&&this._serverModuleLoaded?n:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,e){return t.getAttribute(e)||""}lookupInlineStyle(t,e){return Object(s.w)(this._platformId)?t.style.getPropertyValue(e):this._getServerStyle(t,e)}lookupStyle(t,e,n=!1){let r="";return t&&((r=this.lookupInlineStyle(t,e))||(Object(s.w)(this._platformId)?n||(r=getComputedStyle(t).getPropertyValue(e)):this._serverModuleLoaded&&(r=this._serverStylesheet.getStyleForElement(t,e)))),r?r.trim():""}_applyMultiValueStyleToElement(t,e){Object.keys(t).sort().forEach(n=>{const r=t[n],i=Array.isArray(r)?r:[r];i.sort();for(let t of i)t=t?t+"":"",Object(s.w)(this._platformId)||!this._serverModuleLoaded?Object(s.w)(this._platformId)?e.style.setProperty(n,t):this._setServerStyle(e,n,t):this._serverStylesheet.addStyleToElement(e,n,t)})}_setServerStyle(t,e,n){e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const r=this._readStyleAttribute(t);r[e]=n||"",this._writeStyleAttribute(t,r)}_getServerStyle(t,e){return this._readStyleAttribute(t)[e]||""}_readStyleAttribute(t){const e={},n=t.getAttribute("style");if(n){const t=n.split(/;+/g);for(let n=0;n<t.length;n++){const r=t[n].trim();if(r.length>0){const t=r.indexOf(":");if(-1===t)throw new Error(`Invalid CSS style: ${r}`);e[r.substr(0,t).trim()]=r.substr(t+1).trim()}}}return e}_writeStyleAttribute(t,e){let n="";for(const r in e)e[r]&&(n+=r+":"+e[r]+";");t.setAttribute("style",n)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(w),r.Zb(S),r.Zb(r.C),r.Zb(k))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Zb)(w),Object(r.Zb)(S),Object(r.Zb)(r.C),Object(r.Zb)(k))},token:t,providedIn:"root"}),t})();class et{constructor(){this.shouldCache=!0}sideEffect(t,e,n){}}function nt(t,e="1",n="1"){let r=[e,n,t],s=t.indexOf("calc");if(s>0){r[2]=rt(t.substring(s).trim());let e=t.substr(0,s).trim().split(" ");2==e.length&&(r[0]=e[0],r[1]=e[1])}else if(0==s)r[2]=rt(t.trim());else{let s=t.split(" ");r=3===s.length?s:[e,n,t]}return r}function rt(t){return t.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}let st=(()=>{class t{constructor(t,e,n){this.matchMedia=t,this.breakpoints=e,this.hook=n,this.activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new i.a,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?this.activatedBreakpoints[0].alias:""}onMediaChange(t){const e=this.findByQuery(t.mediaQuery);e&&((t=I(t,e)).matches&&-1===this.activatedBreakpoints.indexOf(e)?(this.activatedBreakpoints.push(e),this.activatedBreakpoints.sort(U),this.updateStyles()):t.matches||-1===this.activatedBreakpoints.indexOf(e)||(this.activatedBreakpoints.splice(this.activatedBreakpoints.indexOf(e),1),this.activatedBreakpoints.sort(U),this.updateStyles()))}init(t,e,n,r,s=[]){it(this.updateMap,t,e,n),it(this.clearMap,t,e,r),this.buildElementKeyMap(t,e),this.watchExtraTriggers(t,e,s)}getValue(t,e,n){const r=this.elementMap.get(t);if(r){const t=void 0!==n?r.get(n):this.getActivatedValues(r,e);if(t)return t.get(e)}}hasValue(t,e){const n=this.elementMap.get(t);if(n){const t=this.getActivatedValues(n,e);if(t)return void 0!==t.get(e)||!1}return!1}setValue(t,e,n,r){let s=this.elementMap.get(t);if(s){const i=(s.get(r)||new Map).set(e,n);s.set(r,i),this.elementMap.set(t,s)}else s=(new Map).set(r,(new Map).set(e,n)),this.elementMap.set(t,s);const i=this.getValue(t,e);void 0!==i&&this.updateElement(t,e,i)}trackValue(t,e){return this.subject.asObservable().pipe(Object(h.a)(n=>n.element===t&&n.key===e))}updateStyles(){this.elementMap.forEach((t,e)=>{const n=new Set(this.elementKeyMap.get(e));let r=this.getActivatedValues(t);r&&r.forEach((t,r)=>{this.updateElement(e,r,t),n.delete(r)}),n.forEach(n=>{if(r=this.getActivatedValues(t,n),r){const t=r.get(n);this.updateElement(e,n,t)}else this.clearElement(e,n)})})}clearElement(t,e){const n=this.clearMap.get(t);if(n){const r=n.get(e);r&&(r(),this.subject.next({element:t,key:e,value:""}))}}updateElement(t,e,n){const r=this.updateMap.get(t);if(r){const s=r.get(e);s&&(s(n),this.subject.next({element:t,key:e,value:n}))}}releaseElement(t){const e=this.watcherMap.get(t);e&&(e.forEach(t=>t.unsubscribe()),this.watcherMap.delete(t));const n=this.elementMap.get(t);n&&(n.forEach((t,e)=>n.delete(e)),this.elementMap.delete(t))}triggerUpdate(t,e){const n=this.elementMap.get(t);if(n){const r=this.getActivatedValues(n,e);r&&(e?this.updateElement(t,e,r.get(e)):r.forEach((e,n)=>this.updateElement(t,n,e)))}}buildElementKeyMap(t,e){let n=this.elementKeyMap.get(t);n||(n=new Set,this.elementKeyMap.set(t,n)),n.add(e)}watchExtraTriggers(t,e,n){if(n&&n.length){let r=this.watcherMap.get(t);if(r||(r=new Map,this.watcherMap.set(t,r)),!r.get(e)){const s=Object(l.a)(...n).subscribe(()=>{const n=this.getValue(t,e);this.updateElement(t,e,n)});r.set(e,s)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,e){for(let r=0;r<this.activatedBreakpoints.length;r++){const n=t.get(this.activatedBreakpoints[r].alias);if(n&&(void 0===e||n.has(e)&&null!=n.get(e)))return n}const n=t.get("");return void 0===e||n&&n.has(e)?n:void 0}observeActivations(){const t=this.breakpoints.items.map(t=>t.mediaQuery);this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe(Object(g.a)(this.hook.interceptEvents(this)),Object(h.a)(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(G),r.Zb(H),r.Zb(Y))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Zb)(G),Object(r.Zb)(H),Object(r.Zb)(Y))},token:t,providedIn:"root"}),t})();function it(t,e,n,r){if(void 0!==r){let s=t.get(e);s||(s=new Map,t.set(e,s)),s.set(n,r)}}},"/uUt":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function s(t,e){return n=>n.lift(new i(t,e))}class i{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new o(t,this.compare,this.keySelector))}}class o extends r.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}},0:function(t,e,n){t.exports=n("uDSp")},1:function(t,e){},"1G5W":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("zx2A");function s(t){return e=>e.lift(new i(t))}class i{constructor(t){this.notifier=t}call(t,e){const n=new o(t),s=Object(r.c)(this.notifier,new r.a(n));return s&&!n.seenValue?(n.add(s),e.subscribe(n)):n}}class o extends r.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}},"1O3W":function(t,e,n){"use strict";n.d(e,"a",function(){return U}),n.d(e,"b",function(){return k}),n.d(e,"c",function(){return N}),n.d(e,"d",function(){return H});var r=n("7KAL"),s=n("8Y7J"),i=n("SCoL"),o=n("9gLZ"),a=n("SVse"),l=n("8LU1"),u=n("1z/I"),c=n("XNiG"),h=n("quSY"),d=n("VRyK"),p=n("IzEk"),f=n("1G5W");n("GJmQ"),n("Ht+U");const m=Object(i.f)();class g{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Object(l.c)(-this._previousScrollPosition.left),t.style.top=Object(l.c)(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",s=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),m&&(e.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),m&&(e.scrollBehavior=r,n.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}class b{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class y{enable(){}disable(){}attach(){}}function v(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function _(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class w{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();v(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let x=(()=>{class t{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new y,this.close=t=>new b(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new g(this._viewportRuler,this._document),this.reposition=t=>new w(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=r}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(r.e),s.Zb(r.g),s.Zb(s.A),s.Zb(a.d))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(r.e),Object(s.Zb)(r.g),Object(s.Zb)(s.A),Object(s.Zb)(a.d))},token:t,providedIn:"root"}),t})();class k{constructor(t){if(this.scrollStrategy=new y,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class S{constructor(t,e,n,r,s){this.offsetX=n,this.offsetY=r,this.panelClass=s,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class C{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let I=(()=>{class t{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(a.d))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(a.d))},token:t,providedIn:"root"}),t})(),E=(()=>{class t extends I{constructor(t){super(t),this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEvents.observers.length>0){e[n]._keydownEvents.next(t);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(a.d))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(a.d))},token:t,providedIn:"root"}),t})(),O=(()=>{class t extends I{constructor(t,e){super(t),this._platform=e,this._cursorStyleIsSet=!1,this._clickListener=t=>{const e=t.composedPath?t.composedPath()[0]:t.target,n=this._attachedOverlays.slice();for(let r=n.length-1;r>-1;r--){const s=n[r];if(!(s._outsidePointerEvents.observers.length<1)&&s.hasAttached()){if(s.overlayElement.contains(e))break;s._outsidePointerEvents.next(t)}}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("click",this._clickListener,!0),this._document.body.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=this._document.body.style.cursor,this._document.body.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("click",this._clickListener,!0),this._document.body.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(a.d),s.Zb(i.a))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(a.d),Object(s.Zb)(i.a))},token:t,providedIn:"root"}),t})();const T=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let N=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||T){const e=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const e=this._document.createElement("div");e.classList.add(t),T?e.setAttribute("platform","test"):this._platform.isBrowser||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(a.d),s.Zb(i.a))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(a.d),Object(s.Zb)(i.a))},token:t,providedIn:"root"}),t})();class A{constructor(t,e,n,r,s,i,o,a,l){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=i,this._document=o,this._location=a,this._outsideClickDispatcher=l,this._backdropElement=null,this._backdropClick=new c.a,this._attachments=new c.a,this._detachments=new c.a,this._locationChanges=h.a.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new c.a,this._outsidePointerEvents=new c.a,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Object(p.a)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Object(l.c)(this._config.width),t.height=Object(l.c)(this._config.height),t.minWidth=Object(l.c)(this._config.minWidth),t.minHeight=Object(l.c)(this._config.minHeight),t.maxWidth=Object(l.c)(this._config.maxWidth),t.maxHeight=Object(l.c)(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const r=t.classList;Object(l.a)(e).forEach(t=>{t&&(n?r.add(t):r.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Object(f.a)(Object(d.a)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const R="cdk-overlay-connected-position-bounding-box",F=/([A-Za-z%]+)$/;class D{constructor(t,e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new c.a,this._resizeSubscription=h.a.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(R),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=[];let s;for(let i of this._preferredPositions){let o=this._getOriginPoint(t,i),a=this._getOverlayPoint(o,e,i),l=this._getOverlayFit(a,e,n,i);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(i,o);this._canFitWithFlexibleDimensions(l,a,n)?r.push({position:i,origin:o,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(o,i)}):(!s||s.overlayFit.visibleArea<l.visibleArea)&&(s={overlayFit:l,overlayPoint:a,originPoint:o,position:i,overlayRect:e})}if(r.length){let t=null,e=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>e&&(e=r,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&P(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(R),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,r;if("center"==e.originX)n=t.left+t.width/2;else{const r=this._isRtl()?t.right:t.left,s=this._isRtl()?t.left:t.right;n="start"==e.originX?r:s}return r="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:r}}_getOverlayPoint(t,e,n){let r,s;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,n,r){const s=M(e);let{x:i,y:o}=t,a=this._getOffset(r,"x"),l=this._getOffset(r,"y");a&&(i+=a),l&&(o+=l);let u=0-o,c=o+s.height-n.height,h=this._subtractOverflows(s.width,0-i,i+s.width-n.width),d=this._subtractOverflows(s.height,u,c),p=h*d;return{visibleArea:p,isCompletelyWithinViewport:s.width*s.height===p,fitsInViewportVertically:d===s.height,fitsInViewportHorizontally:h==s.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,s=n.right-e.x,i=$(this._overlayRef.getConfig().minHeight),o=$(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=o&&o<=s;return(t.fitsInViewportVertically||null!=i&&i<=r)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=M(e),s=this._viewportRect,i=Math.max(t.x+r.width-s.width,0),o=Math.max(t.y+r.height-s.height,0),a=Math.max(s.top-n.top-t.y,0),l=Math.max(s.left-n.left-t.x,0);let u=0,c=0;return u=r.width<=s.width?l||-i:t.x<this._viewportMargin?s.left-n.left-t.x:0,c=r.height<=s.height?a||-o:t.y<this._viewportMargin?s.top-n.top-t.y:0,this._previousPushAmount={x:u,y:c},{x:t.x+u,y:t.y+c}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new C(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let s,i,o,a,l,u;if("top"===e.overlayY)i=t.y,s=n.height-i+this._viewportMargin;else if("bottom"===e.overlayY)o=n.height-t.y+2*this._viewportMargin,s=n.height-o+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),r=this._lastBoundingBoxSize.height;s=2*e,i=t.y-e,s>r&&!this._isInitialRender&&!this._growAfterOpen&&(i=t.y-r/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)u=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)l=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),r=this._lastBoundingBoxSize.width;a=2*e,l=t.x-e,a>r&&!this._isInitialRender&&!this._growAfterOpen&&(l=t.x-r/2)}return{top:i,left:l,bottom:o,right:u,width:a,height:s}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=Object(l.c)(n.height),r.top=Object(l.c)(n.top),r.bottom=Object(l.c)(n.bottom),r.width=Object(l.c)(n.width),r.left=Object(l.c)(n.left),r.right=Object(l.c)(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(r.maxHeight=Object(l.c)(t)),s&&(r.maxWidth=Object(l.c)(s))}this._lastBoundingBoxSize=n,P(this._boundingBox.style,r)}_resetBoundingBoxStyles(){P(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){P(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,i=this._overlayRef.getConfig();if(r){const r=this._viewportRuler.getViewportScrollPosition();P(n,this._getExactOverlayY(e,t,r)),P(n,this._getExactOverlayX(e,t,r))}else n.position="static";let o="",a=this._getOffset(e,"x"),u=this._getOffset(e,"y");a&&(o+=`translateX(${a}px) `),u&&(o+=`translateY(${u}px)`),n.transform=o.trim(),i.maxHeight&&(r?n.maxHeight=Object(l.c)(i.maxHeight):s&&(n.maxHeight="")),i.maxWidth&&(r?n.maxWidth=Object(l.c)(i.maxWidth):s&&(n.maxWidth="")),P(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n));let i=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return s.y-=i,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Object(l.c)(s.y),r}_getExactOverlayX(t,e,n){let r,s={left:"",right:""},i=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n)),r=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===r?s.right=this._document.documentElement.clientWidth-(i.x+this._overlayRect.width)+"px":s.left=Object(l.c)(i.x),s}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:_(t,n),isOriginOutsideView:v(t,n),isOverlayClipped:_(e,n),isOverlayOutsideView:v(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Object(l.a)(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof s.l)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function P(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function $(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(F);return n&&"px"!==n?null:parseFloat(e)}return t||null}function M(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}class L{constructor(t,e,n,r,s,i,o){this._preferredPositions=[],this._positionStrategy=new D(n,r,s,i,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,r){const s=new S(t,e,n,r);return this._preferredPositions.push(s),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const j="cdk-global-overlay-wrapper";class z{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(j),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:i,maxHeight:o}=n,a=!("100%"!==r&&"100vw"!==r||i&&"100%"!==i&&"100vw"!==i),l=!("100%"!==s&&"100vh"!==s||o&&"100%"!==o&&"100vh"!==o);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(j),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let B=(()=>{class t{constructor(t,e,n,r){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=r}global(){return new z}connectedTo(t,e,n){return new L(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new D(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(r.g),s.Zb(a.d),s.Zb(i.a),s.Zb(N))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(r.g),Object(s.Zb)(a.d),Object(s.Zb)(i.a),Object(s.Zb)(N))},token:t,providedIn:"root"}),t})(),V=0,U=(()=>{class t{constructor(t,e,n,r,s,i,o,a,l,u,c){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=s,this._injector=i,this._ngZone=o,this._document=a,this._directionality=l,this._location=u,this._outsideClickDispatcher=c}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),s=new k(t);return s.direction=s.direction||this._directionality.value,new A(r,e,n,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id="cdk-overlay-"+V++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(s.g)),new u.d(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(x),s.Zb(N),s.Zb(s.j),s.Zb(B),s.Zb(E),s.Zb(s.s),s.Zb(s.A),s.Zb(a.d),s.Zb(o.b),s.Zb(a.i),s.Zb(O))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})();const W={provide:new s.r("cdk-connected-overlay-scroll-strategy"),deps:[U],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let H=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({providers:[U,W],imports:[[o.a,u.e,r.f],r.f]}),t})()},"1z/I":function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return c}),n.d(e,"e",function(){return d}),n.d(e,"f",function(){return a});var r=n("8Y7J"),s=n("SVse");class i{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class o extends i{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class a extends i{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class l extends i{constructor(t){super(),this.element=t instanceof r.l?t.nativeElement:t}}class u{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof o?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof a?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof l?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class c extends u{constructor(t,e,n,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=s}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),n.detectChanges(),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),this._attachedPortal=t,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let h=(()=>{class t extends u{constructor(t,e,n){super(),this._componentFactoryResolver=t,this._viewContainerRef=e,this._isInitialized=!1,this.attached=new r.n,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");t.setAttachedHost(this),e.parentNode.insertBefore(n,e),this._getRootNode().appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=n}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r=e.createComponent(n,e.length,t.injector||e.injector);return e!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.j),r.Pb(r.R),r.Pb(s.d))},t.\u0275dir=r.Kb({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[r.Bb]}),t})(),d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})()},2:function(t,e){},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2Vo4":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("XNiG"),s=n("9ppp");class i extends r.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new s.a;return this._value}next(t){super.next(this._value=t)}}},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return s});let r=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"2lpH":function(t,e){t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(I){}function r(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function s(t){return!0===(t&&t.__isLong__)}Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=s;var i={},o={};function a(t,e){var n,r,s;return e?(s=0<=(t>>>=0)&&t<256)&&(r=o[t])?r:(n=u(t,(0|t)<0?-1:0,!0),s&&(o[t]=n),n):(s=-128<=(t|=0)&&t<128)&&(r=i[t])?r:(n=u(t,t<0?-1:0,!1),s&&(i[t]=n),n)}function l(t,e){if(isNaN(t))return e?y:b;if(e){if(t<0)return y;if(t>=f)return k}else{if(t<=-m)return S;if(t+1>=m)return x}return t<0?l(-t,e).neg():u(t%p|0,t/p|0,e)}function u(t,e,n){return new r(t,e,n)}r.fromInt=a,r.fromNumber=l,r.fromBits=u;var c=Math.pow;function h(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return b;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(t.substring(1),e,n).neg();for(var s=l(c(n,8)),i=b,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),u=parseInt(t.substring(o,o+a),n);if(a<8){var d=l(c(n,a));i=i.mul(d).add(l(u))}else i=(i=i.mul(s)).add(l(u))}return i.unsigned=e,i}function d(t,e){return"number"==typeof t?l(t,e):"string"==typeof t?h(t,e):u(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}r.fromString=h,r.fromValue=d;var p=4294967296,f=p*p,m=f/2,g=a(1<<24),b=a(0);r.ZERO=b;var y=a(0,!0);r.UZERO=y;var v=a(1);r.ONE=v;var _=a(1,!0);r.UONE=_;var w=a(-1);r.NEG_ONE=w;var x=u(-1,2147483647,!1);r.MAX_VALUE=x;var k=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=k;var S=u(0,-2147483648,!1);r.MIN_VALUE=S;var C=r.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},C.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var e=l(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var s=l(c(t,6),this.unsigned),i=this,o="";;){var a=i.div(s),u=(i.sub(a.mul(s)).toInt()>>>0).toString(t);if((i=a).isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(t){return s(t)||(t=d(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},C.eq=C.equals,C.notEquals=function(t){return!this.eq(t)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(t){return this.comp(t)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(t){return this.comp(t)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(t){return this.comp(t)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(t){return this.comp(t)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(t){if(s(t)||(t=d(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(v)},C.neg=C.negate,C.add=function(t){s(t)||(t=d(t));var e=0,n=0,r=0,i=0;return r+=(i+=(65535&this.low)+(65535&t.low))>>>16,n+=(r+=(this.low>>>16)+(t.low>>>16))>>>16,e+=(n+=(65535&this.high)+(65535&t.high))>>>16,e+=(this.high>>>16)+(t.high>>>16),u((r&=65535)<<16|(i&=65535),(e&=65535)<<16|(n&=65535),this.unsigned)},C.subtract=function(t){return s(t)||(t=d(t)),this.add(t.neg())},C.sub=C.subtract,C.multiply=function(t){if(this.isZero())return b;if(s(t)||(t=d(t)),n)return u(n.mul(this.low,this.high,t.low,t.high),n.get_high(),this.unsigned);if(t.isZero())return b;if(this.eq(S))return t.isOdd()?S:b;if(t.eq(S))return this.isOdd()?S:b;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(g)&&t.lt(g))return l(this.toNumber()*t.toNumber(),this.unsigned);var e=65535&this.high,r=this.low>>>16,i=65535&this.low,o=65535&t.high,a=t.low>>>16,c=65535&t.low,h=0,p=0,f=0,m=0;return f+=(m+=i*c)>>>16,p+=(f+=r*c)>>>16,f&=65535,p+=(f+=i*a)>>>16,h+=(p+=e*c)>>>16,p&=65535,h+=(p+=r*a)>>>16,p&=65535,h+=(p+=i*o)>>>16,h+=(this.high>>>16)*c+e*a+r*o+i*(t.high>>>16),u((f&=65535)<<16|(m&=65535),(h&=65535)<<16|(p&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(t){if(s(t)||(t=d(t)),t.isZero())throw Error("division by zero");var e,r,i;if(n)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?u((this.unsigned?n.div_u:n.div_s)(this.low,this.high,t.low,t.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:b;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return y;if(t.gt(this.shru(1)))return _;i=y}else{if(this.eq(S))return t.eq(v)||t.eq(w)?S:t.eq(S)?v:(e=this.shr(1).div(t).shl(1)).eq(b)?t.isNegative()?v:w:(r=this.sub(t.mul(e)),i=e.add(r.div(t)));if(t.eq(S))return this.unsigned?y:b;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=b}for(r=this;r.gte(t);){e=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(e)/Math.LN2),a=o<=48?1:c(2,o-48),h=l(e),p=h.mul(t);p.isNegative()||p.gt(r);)p=(h=l(e-=a,this.unsigned)).mul(t);h.isZero()&&(h=v),i=i.add(h),r=r.sub(p)}return i},C.div=C.divide,C.modulo=function(t){return s(t)||(t=d(t)),n?u((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,t.low,t.high),n.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return u(~this.low,~this.high,this.unsigned)},C.and=function(t){return s(t)||(t=d(t)),u(this.low&t.low,this.high&t.high,this.unsigned)},C.or=function(t){return s(t)||(t=d(t)),u(this.low|t.low,this.high|t.high,this.unsigned)},C.xor=function(t){return s(t)||(t=d(t)),u(this.low^t.low,this.high^t.high,this.unsigned)},C.shiftLeft=function(t){return s(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):u(0,this.low<<t-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(t){return s(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):u(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(t){if(s(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?u(this.low>>>t|e<<32-t,e>>>t,this.unsigned):u(32===t?e:e>>>t-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},C.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},C.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},r.fromBytes=function(t,e,n){return n?r.fromBytesLE(t,e):r.fromBytesBE(t,e)},r.fromBytesLE=function(t,e){return new r(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},r.fromBytesBE=function(t,e){return new r(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},3:function(t,e){},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class s extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class i extends s{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(s){r=!0,n=!!s&&s||new Error(s)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"3UWI":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("D0XW"),s=n("zx2A");class i{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new o(t,this.durationSelector))}}class o extends s.b{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const r=Object(s.c)(n,new s.a(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var a=n("PqYM");function l(t,e=r.a){return n=()=>Object(a.a)(t,e),function(t){return t.lift(new i(n))};var n}},"3hTW":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("Cfvw"),s=n("lJxs"),i=n("gtzJ"),o=n("8Y7J");let a=(()=>{class t{init(){return Object(r.a)(fetch("assets/deployment/app-config.json").then(function(t){return t.json()})).pipe(Object(s.a)(t=>{t.production&&i.a(e=>{e.addEventProcessor(e=>(e.environment=t.backend.sentry_environment,e.release=t.version,e))}),window.config=t})).toPromise()}getConfig(){return window.config}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Lb({token:t,factory:t.\u0275fac}),t})()},4:function(t,e){},"4I5i":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})()},5:function(t,e){},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("lJxs"),s=n("Cfvw"),i=n("zx2A");function o(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(o((n,i)=>Object(s.a)(t(n,i)).pipe(Object(r.a)((t,r)=>e(n,t,i,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new l(t,this.project,this.concurrent))}}class l extends i.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new i.a(this),n=this.destination;n.add(e);const r=Object(i.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6rDv":function(t,e,n){"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},"7+OI":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC");function s(t){return!!t&&(t instanceof r.a||"function"==typeof t.lift&&"function"==typeof t.subscribe)}},"7Hc7":function(t,e,n){"use strict";n.d(e,"a",function(){return d});let r=1;const s=(()=>Promise.resolve())(),i={};function o(t){return t in i&&(delete i[t],!0)}const a={setImmediate(t){const e=r++;return i[e]=!0,s.then(()=>o(e)&&t()),e},clearImmediate(t){o(t)}};var l=n("3N8a");class u extends l.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=a.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(a.clearImmediate(e),t.scheduled=void 0)}}var c=n("IjjT");class h extends c.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,s=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<s&&(t=e.shift()));if(this.active=!1,n){for(;++r<s&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new h(u)},"7KAL":function(t,e,n){"use strict";n.d(e,"a",function(){return $}),n.d(e,"b",function(){return W}),n.d(e,"c",function(){return U}),n.d(e,"d",function(){return B}),n.d(e,"e",function(){return M}),n.d(e,"f",function(){return H}),n.d(e,"g",function(){return j});var r=n("8LU1"),s=n("8Y7J"),i=n("XNiG"),o=n("LRne"),a=n("HDdC"),l=n("xgIS"),u=n("3N8a");class c extends u.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,s=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<s&&(t=e.shift()));if(this.active=!1,n){for(;++r<s&&(t=e.shift());)t.unsubscribe();throw n}}}const p=new d(c);var f=n("7Hc7"),m=n("quSY"),g=n("7+OI"),b=n("/uUt"),y=n("3UWI"),v=n("pLZG"),_=n("1G5W"),w=n("JX91"),x=n("7o/Q");class k{call(t,e){return e.subscribe(new S(t))}}class S extends x.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var C=n("eIep"),I=n("UXun"),E=n("SCoL"),O=n("SVse"),T=n("9gLZ"),N=n("CtHx");const A=["contentWrapper"],R=["*"],F=new s.r("VIRTUAL_SCROLL_STRATEGY");class D{constructor(t,e,n){this._scrolledIndexChange=new i.a,this.scrolledIndexChange=this._scrolledIndexChange.pipe(Object(b.a)()),this._viewport=null,this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=n}attach(t){this._viewport=t,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(t,e,n){this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=n,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(t,e){this._viewport&&this._viewport.scrollToOffset(t*this._itemSize,e)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const t=this._viewport.getRenderedRange(),e={start:t.start,end:t.end},n=this._viewport.getViewportSize(),r=this._viewport.getDataLength();let s=this._viewport.measureScrollOffset(),i=this._itemSize>0?s/this._itemSize:0;if(e.end>r){const t=Math.ceil(n/this._itemSize),o=Math.max(0,Math.min(i,r-t));i!=o&&(i=o,s=o*this._itemSize,e.start=Math.floor(i)),e.end=Math.max(0,Math.min(r,e.start+t))}const o=s-e.start*this._itemSize;if(o<this._minBufferPx&&0!=e.start){const t=Math.ceil((this._maxBufferPx-o)/this._itemSize);e.start=Math.max(0,e.start-t),e.end=Math.min(r,Math.ceil(i+(n+this._minBufferPx)/this._itemSize))}else{const t=e.end*this._itemSize-(s+n);if(t<this._minBufferPx&&e.end!=r){const n=Math.ceil((this._maxBufferPx-t)/this._itemSize);n>0&&(e.end=Math.min(r,e.end+n),e.start=Math.max(0,Math.floor(i-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(e),this._viewport.setRenderedContentOffset(this._itemSize*e.start),this._scrolledIndexChange.next(Math.floor(i))}}function P(t){return t._scrollStrategy}let $=(()=>{class t{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new D(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=Object(r.e)(t)}get minBufferPx(){return this._minBufferPx}set minBufferPx(t){this._minBufferPx=Object(r.e)(t)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(t){this._maxBufferPx=Object(r.e)(t)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.Kb({type:t,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[s.Db([{provide:F,useFactory:P,deps:[Object(s.X)(()=>t)]}]),s.Cb]}),t})(),M=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new i.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new a.a(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(Object(y.a)(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Object(o.a)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Object(v.a)(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,t)&&e.push(r)}),e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,e){let n=Object(r.d)(e),s=t.getElementRef().nativeElement;do{if(n==s)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const t=this._getWindow();return Object(l.a)(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(s.A),s.Zb(E.a),s.Zb(O.d,8))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(s.A),Object(s.Zb)(E.a),Object(s.Zb)(O.d,8))},token:t,providedIn:"root"}),t})(),L=(()=>{class t{constructor(t,e,n,r){this.elementRef=t,this.scrollDispatcher=e,this.ngZone=n,this.dir=r,this._destroyed=new i.a,this._elementScrolled=new a.a(t=>this.ngZone.runOutsideAngular(()=>Object(l.a)(this.elementRef.nativeElement,"scroll").pipe(Object(_.a)(this._destroyed)).subscribe(t)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const e=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=n?t.end:t.start),null==t.right&&(t.right=n?t.start:t.end),null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),n&&0!=Object(E.d)()?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),2==Object(E.d)()?t.left=t.right:1==Object(E.d)()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const e=this.elementRef.nativeElement;Object(E.f)()?e.scrollTo(t):(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left))}measureScrollOffset(t){const e="left",n="right",r=this.elementRef.nativeElement;if("top"==t)return r.scrollTop;if("bottom"==t)return r.scrollHeight-r.clientHeight-r.scrollTop;const s=this.dir&&"rtl"==this.dir.value;return"start"==t?t=s?n:e:"end"==t&&(t=s?e:n),s&&2==Object(E.d)()?t==e?r.scrollWidth-r.clientWidth-r.scrollLeft:r.scrollLeft:s&&1==Object(E.d)()?t==e?r.scrollLeft+r.scrollWidth-r.clientWidth:-r.scrollLeft:t==e?r.scrollLeft:r.scrollWidth-r.clientWidth-r.scrollLeft}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(s.l),s.Pb(M),s.Pb(s.A),s.Pb(T.b,8))},t.\u0275dir=s.Kb({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),t})(),j=(()=>{class t{constructor(t,e,n){this._platform=t,this._change=new i.a,this._changeListener=t=>{this._change.next(t)},this._document=n,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Object(y.a)(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(E.a),s.Zb(s.A),s.Zb(O.d,8))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(E.a),Object(s.Zb)(s.A),Object(s.Zb)(O.d,8))},token:t,providedIn:"root"}),t})();const z="undefined"!=typeof requestAnimationFrame?p:f.a;let B=(()=>{class t extends L{constructor(t,e,n,r,s,o,l){super(t,o,n,s),this.elementRef=t,this._changeDetectorRef=e,this._scrollStrategy=r,this._detachedSubject=new i.a,this._renderedRangeSubject=new i.a,this._orientation="vertical",this.scrolledIndexChange=new a.a(t=>this._scrollStrategy.scrolledIndexChange.subscribe(e=>Promise.resolve().then(()=>this.ngZone.run(()=>t.next(e))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=m.a.EMPTY,this._viewportChanges=l.change().subscribe(()=>{this.checkViewportSize()})}get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}ngOnInit(){super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.elementScrolled().pipe(Object(w.a)(null),Object(y.a)(0,z)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()}))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(Object(_.a)(this._detachedSubject)).subscribe(t=>{const e=t.length;e!==this._dataLength&&(this._dataLength=e,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){var e,n;((e=this._renderedRange).start!=(n=t).start||e.end!=n.end)&&(this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,e="to-start"){const n="horizontal"==this.orientation,r=n?"X":"Y";let s=`translate${r}(${Number((n&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===e&&(s+=` translate${r}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=s&&(this._renderedContentTransform=s,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,e="auto"){const n={behavior:e};"horizontal"===this.orientation?n.start=t:n.top=t,this.scrollTo(n)}scrollToIndex(t,e="auto"){this._scrollStrategy.scrollToIndex(t,e)}measureScrollOffset(t){return super.measureScrollOffset(t||("horizontal"===this.orientation?"start":"top"))}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){const t=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?t.clientWidth:t.clientHeight}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const e of t)e()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(s.l),s.Pb(s.h),s.Pb(s.A),s.Pb(F,8),s.Pb(T.b,8),s.Pb(M),s.Pb(j))},t.\u0275cmp=s.Jb({type:t,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,e){if(1&t&&s.Lc(A,3),2&t){let t;s.sc(t=s.ec())&&(e._contentWrapper=t.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,e){2&t&&s.Hb("cdk-virtual-scroll-orientation-horizontal","horizontal"===e.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==e.orientation)},inputs:{orientation:"orientation"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[s.Db([{provide:L,useExisting:t}]),s.Bb],ngContentSelectors:R,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,e){1&t&&(s.mc(),s.Vb(0,"div",0,1),s.lc(2),s.Ub(),s.Qb(3,"div",2)),2&t&&(s.Eb(3),s.Cc("width",e._totalContentWidth)("height",e._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\n"],encapsulation:2,changeDetection:0}),t})();function V(t,e,n){if(!n.getBoundingClientRect)return 0;const r=n.getBoundingClientRect();return"horizontal"===t?"start"===e?r.left:r.right:"start"===e?r.top:r.bottom}let U=(()=>{class t{constructor(t,e,n,r,s,o){this._viewContainerRef=t,this._template=e,this._differs=n,this._viewRepeater=r,this._viewport=s,this.viewChange=new i.a,this._dataSourceChanges=new i.a,this.dataStream=this._dataSourceChanges.pipe(Object(w.a)(null),t=>t.lift(new k),Object(C.a)(([t,e])=>this._changeDataSource(t,e)),Object(I.a)(1)),this._differ=null,this._needsUpdate=!1,this._destroyed=new i.a,this.dataStream.subscribe(t=>{this._data=t,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(Object(_.a)(this._destroyed)).subscribe(t=>{this._renderedRange=t,o.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(t){this._cdkVirtualForOf=t,Object(N.e)(t)?this._dataSourceChanges.next(t):this._dataSourceChanges.next(new N.a(Object(g.a)(t)?t:Array.from(t||[])))}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(t){this._needsUpdate=!0,this._cdkVirtualForTrackBy=t?(e,n)=>t(e+(this._renderedRange?this._renderedRange.start:0),n):void 0}set cdkVirtualForTemplate(t){t&&(this._needsUpdate=!0,this._template=t)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(t){this._viewRepeater.viewCacheSize=Object(r.e)(t)}measureRangeSize(t,e){if(t.start>=t.end)return 0;const n=t.start-this._renderedRange.start,r=t.end-t.start;let s,i;for(let o=0;o<r;o++){const t=this._viewContainerRef.get(o+n);if(t&&t.rootNodes.length){s=i=t.rootNodes[0];break}}for(let o=r-1;o>-1;o--){const t=this._viewContainerRef.get(o+n);if(t&&t.rootNodes.length){i=t.rootNodes[t.rootNodes.length-1];break}}return s&&i?V(e,"end",i)-V(e,"start",s):0}ngDoCheck(){if(this._differ&&this._needsUpdate){const t=this._differ.diff(this._renderedItems);t?this._applyChanges(t):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){this._renderedRange&&(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((t,e)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(t,e):e)),this._needsUpdate=!0)}_changeDataSource(t,e){return t&&t.disconnect(this),this._needsUpdate=!0,e?e.connect(this):Object(o.a)()}_updateContext(){const t=this._data.length;let e=this._viewContainerRef.length;for(;e--;){const n=this._viewContainerRef.get(e);n.context.index=this._renderedRange.start+e,n.context.count=t,this._updateComputedContextProperties(n.context),n.detectChanges()}}_applyChanges(t){this._viewRepeater.applyChanges(t,this._viewContainerRef,(t,e,n)=>this._getEmbeddedViewArgs(t,n),t=>t.item),t.forEachIdentityChange(t=>{this._viewContainerRef.get(t.currentIndex).context.$implicit=t.item});const e=this._data.length;let n=this._viewContainerRef.length;for(;n--;){const t=this._viewContainerRef.get(n);t.context.index=this._renderedRange.start+n,t.context.count=e,this._updateComputedContextProperties(t.context)}}_updateComputedContextProperties(t){t.first=0===t.index,t.last=t.index===t.count-1,t.even=t.index%2==0,t.odd=!t.even}_getEmbeddedViewArgs(t,e){return{templateRef:this._template,context:{$implicit:t.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:e}}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(s.R),s.Pb(s.N),s.Pb(s.t),s.Pb(N.d),s.Pb(B,4),s.Pb(s.A))},t.\u0275dir=s.Kb({type:t,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[s.Db([{provide:N.d,useClass:N.c}])]}),t})(),W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({}),t})(),H=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({imports:[[T.a,E.b,W],T.a,W]}),t})()},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("n6bG"),s=n("gRHU"),i=n("quSY"),o=n("2QA8"),a=n("2fFW"),l=n("NJ4a");class u extends i.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.a;break;case 1:if(!t){this.destination=s.a;break}if("object"==typeof t){t instanceof u?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,t,e,n)}}[o.a](){return this}static create(t,e,n){const r=new u(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class c extends u{constructor(t,e,n,i){let o;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?o=e:e&&(o=e.next,n=e.error,i=e.complete,e!==s.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(l.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(l.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(l.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(l.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"8LU1":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return l}),n.d(e,"e",function(){return i});var r=n("8Y7J");function s(t){return null!=t&&"false"!=`${t}`}function i(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function o(t){return Array.isArray(t)?t:[t]}function a(t){return null==t?"":"string"==typeof t?t:`${t}px`}function l(t){return t instanceof r.l?t.nativeElement:t}},"8Y7J":function(t,e,n){"use strict";n.d(e,"a",function(){return dn}),n.d(e,"b",function(){return hu}),n.d(e,"c",function(){return ou}),n.d(e,"d",function(){return su}),n.d(e,"e",function(){return iu}),n.d(e,"f",function(){return sc}),n.d(e,"g",function(){return Zu}),n.d(e,"h",function(){return Xa}),n.d(e,"i",function(){return xu}),n.d(e,"j",function(){return wa}),n.d(e,"k",function(){return fu}),n.d(e,"l",function(){return Ca}),n.d(e,"m",function(){return Nr}),n.d(e,"n",function(){return Ml}),n.d(e,"o",function(){return wi}),n.d(e,"p",function(){return Fn}),n.d(e,"q",function(){return N}),n.d(e,"r",function(){return hn}),n.d(e,"s",function(){return Mi}),n.d(e,"t",function(){return Wa}),n.d(e,"u",function(){return Ga}),n.d(e,"v",function(){return pu}),n.d(e,"w",function(){return ll}),n.d(e,"x",function(){return Yu}),n.d(e,"y",function(){return al}),n.d(e,"z",function(){return Uu}),n.d(e,"A",function(){return Cu}),n.d(e,"B",function(){return Dn}),n.d(e,"C",function(){return cu}),n.d(e,"D",function(){return uu}),n.d(e,"E",function(){return jl}),n.d(e,"F",function(){return Oa}),n.d(e,"G",function(){return Ea}),n.d(e,"H",function(){return Mr}),n.d(e,"I",function(){return Na}),n.d(e,"J",function(){return kr}),n.d(e,"K",function(){return _t}),n.d(e,"L",function(){return Pn}),n.d(e,"M",function(){return Qu}),n.d(e,"N",function(){return rl}),n.d(e,"O",function(){return Ru}),n.d(e,"P",function(){return pn}),n.d(e,"Q",function(){return Aa}),n.d(e,"R",function(){return cl}),n.d(e,"S",function(){return $}),n.d(e,"T",function(){return Gi}),n.d(e,"U",function(){return Wu}),n.d(e,"V",function(){return w}),n.d(e,"W",function(){return Bu}),n.d(e,"X",function(){return p}),n.d(e,"Y",function(){return Nn}),n.d(e,"Z",function(){return zu}),n.d(e,"ab",function(){return nc}),n.d(e,"bb",function(){return Pu}),n.d(e,"cb",function(){return du}),n.d(e,"db",function(){return ki}),n.d(e,"eb",function(){return aa}),n.d(e,"fb",function(){return wr}),n.d(e,"gb",function(){return sr}),n.d(e,"hb",function(){return qn}),n.d(e,"ib",function(){return Kn}),n.d(e,"jb",function(){return Qn}),n.d(e,"kb",function(){return Xn}),n.d(e,"lb",function(){return Yn}),n.d(e,"mb",function(){return Jn}),n.d(e,"nb",function(){return ra}),n.d(e,"ob",function(){return ec}),n.d(e,"pb",function(){return sa}),n.d(e,"qb",function(){return ia}),n.d(e,"rb",function(){return Zn}),n.d(e,"sb",function(){return B}),n.d(e,"tb",function(){return qi}),n.d(e,"ub",function(){return go}),n.d(e,"vb",function(){return fo}),n.d(e,"wb",function(){return mo}),n.d(e,"xb",function(){return na}),n.d(e,"yb",function(){return Ot}),n.d(e,"zb",function(){return c}),n.d(e,"Ab",function(){return Gn}),n.d(e,"Bb",function(){return ji}),n.d(e,"Cb",function(){return wt}),n.d(e,"Db",function(){return ya}),n.d(e,"Eb",function(){return Ss}),n.d(e,"Fb",function(){return Ji}),n.d(e,"Gb",function(){return $o}),n.d(e,"Hb",function(){return Po}),n.d(e,"Ib",function(){return Xl}),n.d(e,"Jb",function(){return Q}),n.d(e,"Kb",function(){return at}),n.d(e,"Lb",function(){return _}),n.d(e,"Mb",function(){return x}),n.d(e,"Nb",function(){return st}),n.d(e,"Ob",function(){return lt}),n.d(e,"Pb",function(){return no}),n.d(e,"Qb",function(){return lo}),n.d(e,"Rb",function(){return ho}),n.d(e,"Sb",function(){return co}),n.d(e,"Tb",function(){return uo}),n.d(e,"Ub",function(){return ao}),n.d(e,"Vb",function(){return oo}),n.d(e,"Wb",function(){return po}),n.d(e,"Xb",function(){return on}),n.d(e,"Yb",function(){return Xo}),n.d(e,"Zb",function(){return Tn}),n.d(e,"ac",function(){return ln}),n.d(e,"bc",function(){return ru}),n.d(e,"cc",function(){return ro}),n.d(e,"dc",function(){return bo}),n.d(e,"ec",function(){return Jl}),n.d(e,"fc",function(){return ke}),n.d(e,"gc",function(){return xe}),n.d(e,"hc",function(){return xo}),n.d(e,"ic",function(){return Al}),n.d(e,"jc",function(){return Rl}),n.d(e,"kc",function(){return Fl}),n.d(e,"lc",function(){return Co}),n.d(e,"mc",function(){return So}),n.d(e,"nc",function(){return so}),n.d(e,"oc",function(){return Io}),n.d(e,"pc",function(){return Cl}),n.d(e,"qc",function(){return Il}),n.d(e,"rc",function(){return El}),n.d(e,"sc",function(){return Kl}),n.d(e,"tc",function(){return eo}),n.d(e,"uc",function(){return Pr}),n.d(e,"vc",function(){return Dr}),n.d(e,"wc",function(){return Fr}),n.d(e,"xc",function(){return Zt}),n.d(e,"yc",function(){return Sr}),n.d(e,"zc",function(){return Cr}),n.d(e,"Ac",function(){return tt}),n.d(e,"Bc",function(){return it}),n.d(e,"Cc",function(){return Do}),n.d(e,"Dc",function(){return yo}),n.d(e,"Ec",function(){return Jo}),n.d(e,"Fc",function(){return to}),n.d(e,"Gc",function(){return nu}),n.d(e,"Hc",function(){return qo}),n.d(e,"Ic",function(){return Zo}),n.d(e,"Jc",function(){return Ko}),n.d(e,"Kc",function(){return Yo}),n.d(e,"Lc",function(){return Yl});var r=n("XNiG"),s=n("quSY"),i=n("HDdC"),o=n("VRyK"),a=n("w1tV");function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function u(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function c(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(c).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=l({__forward_ref__:l});function p(t){return t.__forward_ref__=p,t.toString=function(){return c(this())},t}function f(t){return m(t)?t():t}function m(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===p}class g extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function b(t){return"string"==typeof t?t:null==t?"":String(t)}function y(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():b(t)}function v(t,e){const n=e?` in ${e}`:"";throw new g("201",`No provider for ${y(t)} found${n}`)}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}const w=_;function x(t){return{providers:t.providers||[],imports:t.imports||[]}}function k(t){return S(t,I)||S(t,O)}function S(t,e){return t.hasOwnProperty(e)?t[e]:null}function C(t){return t&&(t.hasOwnProperty(E)||t.hasOwnProperty(T))?t[E]:null}const I=l({"\u0275prov":l}),E=l({"\u0275inj":l}),O=l({ngInjectableDef:l}),T=l({ngInjectorDef:l});var N=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let A;function R(t){const e=A;return A=t,e}function F(t,e,n){const r=k(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void v(c(t),"Injector")}function D(t){return{toString:t}.toString()}var P=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),$=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const M="undefined"!=typeof globalThis&&globalThis,L="undefined"!=typeof window&&window,j="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,z="undefined"!=typeof global&&global,B=M||z||L||j,V={},U=[],W=[],H=l({"\u0275cmp":l}),G=l({"\u0275dir":l}),q=l({"\u0275pipe":l}),Z=l({"\u0275mod":l}),K=l({"\u0275loc":l}),Y=l({"\u0275fac":l}),X=l({__NG_ELEMENT_ID__:l});let J=0;function Q(t){return D(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||W,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||$.Emulated,id:"c",styles:t.styles||W,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,s=t.features,i=t.pipes;return n.id+=J++,n.inputs=ot(t.inputs,e),n.outputs=ot(t.outputs),s&&s.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=i?()=>("function"==typeof i?i():i).map(nt):null,n})}function tt(t,e,n){const r=t.\u0275cmp;r.directiveDefs=()=>e.map(et),r.pipeDefs=()=>n.map(nt)}function et(t){return ut(t)||function(t){return t[G]||null}(t)}function nt(t){return function(t){return t[q]||null}(t)}const rt={};function st(t){const e={type:t.type,bootstrap:t.bootstrap||W,declarations:t.declarations||W,imports:t.imports||W,exports:t.exports||W,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&D(()=>{rt[t.id]=t.type}),e}function it(t,e){return D(()=>{const n=ct(t,!0);n.declarations=e.declarations||W,n.imports=e.imports||W,n.exports=e.exports||W})}function ot(t,e){if(null==t)return V;const n={};for(const r in t)if(t.hasOwnProperty(r)){let s=t[r],i=s;Array.isArray(s)&&(i=s[1],s=s[0]),n[s]=r,e&&(e[s]=i)}return n}const at=Q;function lt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[H]||null}function ct(t,e){const n=t[Z]||null;if(!n&&!0===e)throw new Error(`Type ${c(t)} does not have '\u0275mod' property.`);return n}const ht=20,dt=10;function pt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ft(t){return Array.isArray(t)&&!0===t[1]}function mt(t){return 0!=(8&t.flags)}function gt(t){return 2==(2&t.flags)}function bt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class _t{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function wt(){return xt}function xt(t){return t.type.prototype.ngOnChanges&&(t.setInput=St),kt}function kt(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===V)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function St(t,e,n,r){const s=Ct(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:V,current:null}),i=s.current||(s.current={}),o=s.previous,a=this.declaredInputs[n],l=o[a];i[a]=new _t(l&&l.currentValue,e,o===V),t[r]=e}function Ct(t){return t.__ngSimpleChanges__||null}wt.ngInherit=!0;const It="http://www.w3.org/2000/svg";let Et;function Ot(t){Et=t}function Tt(){return void 0!==Et?Et:"undefined"!=typeof document?document:void 0}function Nt(t){return!!t.listen}const At={createRenderer:(t,e)=>Tt()};function Rt(t){for(;Array.isArray(t);)t=t[0];return t}function Ft(t,e){return Rt(e[t])}function Dt(t,e){return Rt(e[t.index])}function Pt(t,e){return t.data[e]}function $t(t,e){return t[e]}function Mt(t,e){const n=e[t];return pt(n)?n:n[0]}function Lt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function jt(t){return 4==(4&t[2])}function zt(t){return 128==(128&t[2])}function Bt(t,e){return null==e?null:t[e]}function Vt(t){t[18]=0}function Ut(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Wt={lFrame:me(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ht(){return Wt.bindingsEnabled}function Gt(){return Wt.lFrame.lView}function qt(){return Wt.lFrame.tView}function Zt(t){Wt.lFrame.contextLView=t}function Kt(){let t=Yt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Yt(){return Wt.lFrame.currentTNode}function Xt(t,e){const n=Wt.lFrame;n.currentTNode=t,n.isParent=e}function Jt(){return Wt.lFrame.isParent}function Qt(){Wt.lFrame.isParent=!1}function te(){return Wt.isInCheckNoChangesMode}function ee(t){Wt.isInCheckNoChangesMode=t}function ne(){const t=Wt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function re(){return Wt.lFrame.bindingIndex}function se(){return Wt.lFrame.bindingIndex++}function ie(t){const e=Wt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function oe(t,e){const n=Wt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ae(e)}function ae(t){Wt.lFrame.currentDirectiveIndex=t}function le(t){const e=Wt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function ue(){return Wt.lFrame.currentQueryIndex}function ce(t){Wt.lFrame.currentQueryIndex=t}function he(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function de(t,e,n){if(n&N.SkipSelf){let r=e,s=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=he(s),null===r)||(s=s[15],10&r.type)););if(null===r)return!1;e=r,t=s}const r=Wt.lFrame=fe();return r.currentTNode=e,r.lView=t,!0}function pe(t){const e=fe(),n=t[1];Wt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function fe(){const t=Wt.lFrame,e=null===t?null:t.child;return null===e?me(t):e}function me(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ge(){const t=Wt.lFrame;return Wt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const be=ge;function ye(){const t=ge();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ve(){return Wt.lFrame.selectedIndex}function _e(t){Wt.lFrame.selectedIndex=t}function we(){const t=Wt.lFrame;return Pt(t.tView,t.selectedIndex)}function xe(){Wt.lFrame.currentNamespace=It}function ke(){Wt.lFrame.currentNamespace=null}function Se(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:s,ngAfterViewInit:i,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),s&&((t.contentHooks||(t.contentHooks=[])).push(n,s),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,s)),i&&(t.viewHooks||(t.viewHooks=[])).push(-n,i),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Ce(t,e,n){Oe(t,e,3,n)}function Ie(t,e,n,r){(3&t[2])===n&&Oe(t,e,n,r)}function Ee(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Oe(t,e,n,r){const s=null!=r?r:-1,i=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<i;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<s||-1==s)&&(Te(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Te(t,e,n,r){const s=n[r]<0,i=n[r+1],o=t[s?-n[r]:n[r]];if(s){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{i.call(o)}finally{}}}else try{i.call(o)}finally{}}const Ne=-1;class Ae{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Re(t,e,n){const r=Nt(t);let s=0;for(;s<n.length;){const i=n[s];if("number"==typeof i){if(0!==i)break;s++;const o=n[s++],a=n[s++],l=n[s++];r?t.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=i,a=n[++s];De(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),s++}}return s}function Fe(t){return 3===t||4===t||6===t}function De(t){return 64===t.charCodeAt(0)}function Pe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const s=e[r];"number"==typeof s?n=s:0===n||$e(t,n,s,null,-1===n||2===n?e[++r]:null)}}return t}function $e(t,e,n,r,s){let i=0,o=t.length;if(-1===e)o=-1;else for(;i<t.length;){const n=t[i++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=i-1;break}}}for(;i<t.length;){const e=t[i];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==s&&(t[i+1]=s));if(r===t[i+1])return void(t[i+2]=s)}i++,null!==r&&i++,null!==s&&i++}-1!==o&&(t.splice(o,0,e),i=o+1),t.splice(i++,0,n),null!==r&&t.splice(i++,0,r),null!==s&&t.splice(i++,0,s)}function Me(t){return t!==Ne}function Le(t){return 32767&t}function je(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let ze=!0;function Be(t){const e=ze;return ze=t,e}let Ve=0;function Ue(t,e){const n=He(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,We(r.data,t),We(e,null),We(r.blueprint,null));const s=Ge(t,e),i=t.injectorIndex;if(Me(s)){const t=Le(s),n=je(s,e),r=n[1].data;for(let s=0;s<8;s++)e[i+s]=n[t+s]|r[t+s]}return e[i+8]=s,i}function We(t,e){t.push(0,0,0,0,0,0,0,0,e)}function He(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ge(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,s=e;for(;null!==s;){const t=s[1],e=t.type;if(r=2===e?t.declTNode:1===e?s[6]:null,null===r)return Ne;if(n++,s=s[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ne}function qe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(X)&&(r=n[X]),null==r&&(r=n[X]=Ve++);const s=255&r;e.data[t+(s>>5)]|=1<<s}(t,e,n)}function Ze(t,e,n){if(n&N.Optional)return t;v(e,"NodeInjector")}function Ke(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const s=t[9],i=R(void 0);try{return s?s.get(e,r,n&N.Optional):F(e,r,n&N.Optional)}finally{R(i)}}return Ze(r,e,n)}function Ye(t,e,n,r=N.Default,s){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(X)?t[X]:void 0;return"number"==typeof e?e>=0?255&e:Je:e}(n);if("function"==typeof i){if(!de(e,t,r))return r&N.Host?Ze(s,n,r):Ke(e,n,r,s);try{const t=i();if(null!=t||r&N.Optional)return t;v(n)}finally{be()}}else if("number"==typeof i){let s=null,o=He(t,e),a=Ne,l=r&N.Host?e[16][6]:null;for((-1===o||r&N.SkipSelf)&&(a=-1===o?Ge(t,e):e[o+8],a!==Ne&&rn(r,!1)?(s=e[1],o=Le(a),e=je(a,e)):o=-1);-1!==o;){const t=e[1];if(nn(i,o,t.data)){const t=Qe(o,e,n,s,r,l);if(t!==Xe)return t}a=e[o+8],a!==Ne&&rn(r,e[1].data[o+8]===l)&&nn(i,o,e)?(s=t,o=Le(a),e=je(a,e)):o=-1}}}return Ke(e,n,r,s)}const Xe={};function Je(){return new sn(Kt(),Gt())}function Qe(t,e,n,r,s,i){const o=e[1],a=o.data[t+8],l=tn(a,o,n,null==r?gt(a)&&ze:r!=o&&0!=(3&a.type),s&N.Host&&i===a);return null!==l?en(e,o,l,a):Xe}function tn(t,e,n,r,s){const i=t.providerIndexes,o=e.data,a=1048575&i,l=t.directiveStart,u=i>>20,c=s?a+u:t.directiveEnd;for(let h=r?a:a+u;h<c;h++){const t=o[h];if(h<l&&n===t||h>=l&&t.type===n)return h}if(s){const t=o[l];if(t&&yt(t)&&t.type===n)return l}return null}function en(t,e,n,r){let s=t[n];const i=e.data;if(s instanceof Ae){const o=s;o.resolving&&function(t,e){throw new g("200",`Circular dependency in DI detected for ${t}`)}(y(i[n]));const a=Be(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?R(o.injectImpl):null;de(t,r,N.Default);try{s=t[n]=o.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=e.type.prototype;if(r){const r=xt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}s&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,s),i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i))}(n,i[n],e)}finally{null!==l&&R(l),Be(a),o.resolving=!1,be()}}return s}function nn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function rn(t,e){return!(t&N.Self||t&N.Host&&e)}class sn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ye(this._tNode,this._lView,t,void 0,e)}}function on(t){return D(()=>{const e=t.prototype.constructor,n=e[Y]||an(e),r=Object.prototype;let s=Object.getPrototypeOf(t.prototype).constructor;for(;s&&s!==r;){const t=s[Y]||an(s);if(t&&t!==n)return t;s=Object.getPrototypeOf(s)}return t=>new t})}function an(t){return m(t)?()=>{const e=an(f(t));return e&&e()}:vt(t)}function ln(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const s=n[r];if(Fe(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(s===e)return n[r+1];r+=2}}}return null}(Kt(),t)}const un="__parameters__";function cn(t,e,n){return D(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function s(...t){if(this instanceof s)return r.apply(this,t),this;const e=new s(...t);return n.annotation=e,n;function n(t,n,r){const s=t.hasOwnProperty(un)?t[un]:Object.defineProperty(t,un,{value:[]})[un];for(;s.length<=r;)s.push(null);return(s[r]=s[r]||[]).push(e),t}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s})}class hn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const dn=new hn("AnalyzeForEntryComponents"),pn=Function;function fn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),fn(r,e)):e!==t&&e.push(r)}return e}function mn(t,e){t.forEach(t=>Array.isArray(t)?mn(t,e):e(t))}function gn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function bn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function yn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function vn(t,e,n){let r=wn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let s=t.length;if(s==e)t.push(n,r);else if(1===s)t.push(r,t[0]),t[0]=n;else{for(s--,t.push(t[s-1],t[s]);s>e;)t[s]=t[s-2],s--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function _n(t,e){const n=wn(t,e);if(n>=0)return t[1|n]}function wn(t,e){return function(t,e,n){let r=0,s=t.length>>1;for(;s!==r;){const n=r+(s-r>>1),i=t[n<<1];if(e===i)return n<<1;i>e?s=n:r=n+1}return~(s<<1)}(t,e)}const xn={},kn=/\n/gm,Sn="__source",Cn=l({provide:String,useValue:l});let In;function En(t){const e=In;return In=t,e}function On(t,e=N.Default){if(void 0===In)throw new Error("inject() must be called from an injection context");return null===In?F(t,void 0,e):In.get(t,e&N.Optional?null:void 0,e)}function Tn(t,e=N.Default){return(A||On)(f(t),e)}const Nn=Tn;function An(t){const e=[];for(let n=0;n<t.length;n++){const r=f(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const s=r[e],i=s.__NG_DI_FLAG__;"number"==typeof i?-1===i?t=s.token:n|=i:t=s}e.push(Tn(t,n))}else e.push(Tn(r))}return e}function Rn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Fn=Rn(cn("Inject",t=>({token:t})),-1),Dn=Rn(cn("Optional"),8),Pn=Rn(cn("SkipSelf"),4);let $n,Mn;function Ln(t){var e;return(null===(e=function(){if(void 0===$n&&($n=null,B.trustedTypes))try{$n=B.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return $n}())||void 0===e?void 0:e.createHTML(t))||t}function jn(t){var e;return(null===(e=function(){if(void 0===Mn&&(Mn=null,B.trustedTypes))try{Mn=B.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Mn}())||void 0===e?void 0:e.createHTML(t))||t}class zn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Bn extends zn{getTypeName(){return"HTML"}}class Vn extends zn{getTypeName(){return"Style"}}class Un extends zn{getTypeName(){return"Script"}}class Wn extends zn{getTypeName(){return"URL"}}class Hn extends zn{getTypeName(){return"ResourceURL"}}function Gn(t){return t instanceof zn?t.changingThisBreaksApplicationSecurity:t}function qn(t,e){const n=Zn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Zn(t){return t instanceof zn&&t.getTypeName()||null}function Kn(t){return new Bn(t)}function Yn(t){return new Vn(t)}function Xn(t){return new Un(t)}function Jn(t){return new Wn(t)}function Qn(t){return new Hn(t)}class tr{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Ln(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class er{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Ln(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Ln(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const nr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,rr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function sr(t){return(t=String(t)).match(nr)||t.match(rr)?t:"unsafe:"+t}function ir(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function or(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const ar=ir("area,br,col,hr,img,wbr"),lr=ir("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ur=ir("rp,rt"),cr=or(ur,lr),hr=or(ar,or(lr,ir("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),or(ur,ir("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),cr),dr=ir("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pr=ir("srcset"),fr=or(dr,pr,ir("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ir("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),mr=ir("script,style,template");class gr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!hr.hasOwnProperty(e))return this.sanitizedSomething=!0,!mr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let s=0;s<n.length;s++){const t=n.item(s),e=t.name,i=e.toLowerCase();if(!fr.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;dr[i]&&(o=sr(o)),pr[i]&&(r=o,o=(r=String(r)).split(",").map(t=>sr(t.trim())).join(", ")),this.buf.push(" ",e,'="',vr(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();hr.hasOwnProperty(e)&&!ar.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(vr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const br=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yr=/([^\#-~ |!])/g;function vr(t){return t.replace(/&/g,"&amp;").replace(br,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(yr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let _r;function wr(t,e){let n=null;try{_r=_r||function(t){const e=new er(t);return function(){try{return!!(new window.DOMParser).parseFromString(Ln(""),"text/html")}catch(t){return!1}}()?new tr(e):e}(t);let r=e?String(e):"";n=_r.getInertBodyElement(r);let s=5,i=r;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,r=i,i=n.innerHTML,n=_r.getInertBodyElement(r)}while(r!==i);return Ln((new gr).sanitizeChildren(xr(n)||n))}finally{if(n){const t=xr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function xr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var kr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Sr(t){const e=Ir();return e?jn(e.sanitize(kr.HTML,t)||""):qn(t,"HTML")?jn(Gn(t)):wr(Tt(),b(t))}function Cr(t){const e=Ir();return e?e.sanitize(kr.URL,t)||"":qn(t,"URL")?Gn(t):sr(b(t))}function Ir(){const t=Gt();return t&&t[12]}function Er(t){return t.ngDebugContext}function Or(t){return t.ngOriginalError}function Tr(t,...e){t.error(...e)}class Nr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Tr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Er(t)?Er(t):this._findContext(Or(t)):null}_findOriginalError(t){let e=Or(t);for(;e&&Or(e);)e=Or(e);return e}}function Ar(t,e){t.__ngContext__=e}const Rr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(B))();function Fr(t){return{name:"window",target:t.ownerDocument.defaultView}}function Dr(t){return{name:"document",target:t.ownerDocument}}function Pr(t){return{name:"body",target:t.ownerDocument.body}}function $r(t){return t instanceof Function?t():t}var Mr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Lr(t,e){return(void 0)(t,e)}function jr(t){const e=t[3];return ft(e)?e[3]:e}function zr(t){return Vr(t[13])}function Br(t){return Vr(t[4])}function Vr(t){for(;null!==t&&!ft(t);)t=t[4];return t}function Ur(t,e,n,r,s){if(null!=r){let i,o=!1;ft(r)?i=r:pt(r)&&(o=!0,r=r[0]);const a=Rt(r);0===t&&null!==n?null==s?Xr(e,n,a):Yr(e,n,a,s||null,!0):1===t&&null!==n?Yr(e,n,a,s||null,!0):2===t?function(t,e,n){const r=Qr(t,e);r&&function(t,e,n,r){Nt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=i&&function(t,e,n,r,s){const i=n[7];i!==Rt(n)&&Ur(e,t,r,i,s);for(let o=dt;o<n.length;o++){const s=n[o];as(s[1],s,t,e,r,i)}}(e,t,i,n,s)}}function Wr(t,e,n){return Nt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Hr(t,e){const n=t[9],r=n.indexOf(e),s=e[3];1024&e[2]&&(e[2]&=-1025,Ut(s,-1)),n.splice(r,1)}function Gr(t,e){if(t.length<=dt)return;const n=dt+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&Hr(i,r),e>0&&(t[n-1][4]=r[4]);const o=bn(t,dt+e);as(r[1],s=r,s[11],2,null,null),s[0]=null,s[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var s;return r}function qr(t,e){if(!(256&e[2])){const n=e[11];Nt(n)&&n.destroyNode&&as(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Zr(t[1],t);for(;e;){let n=null;if(pt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)pt(e)&&Zr(e[1],e),e=e[3];null===e&&(e=t),pt(e)&&Zr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Zr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ae)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let s=-1;if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const t=n[i+1],o="function"==typeof t?t(e):Rt(e[t]),a=r[s=n[i+2]],l=n[i+3];"boolean"==typeof l?o.removeEventListener(n[i],a,l):l>=0?r[s=l]():r[s=-l].unsubscribe(),i+=2}else{const t=r[s=n[i+1]];n[i].call(t)}if(null!==r){for(let t=s+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Nt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ft(e[3])){n!==e[3]&&Hr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Kr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===$.None||e===$.Emulated)return null}return Dt(r,n)}(t,e.parent,n)}function Yr(t,e,n,r,s){Nt(t)?t.insertBefore(e,n,r,s):e.insertBefore(n,r,s)}function Xr(t,e,n){Nt(t)?t.appendChild(e,n):e.appendChild(n)}function Jr(t,e,n,r,s){null!==r?Yr(t,e,n,r,s):Xr(t,e,n)}function Qr(t,e){return Nt(t)?t.parentNode(e):e.parentNode}function ts(t,e,n){return es(t,e,n)}let es=function(t,e,n){return 40&t.type?Dt(t,n):null};function ns(t,e,n,r){const s=Kr(t,r,e),i=e[11],o=ts(r.parent||e[6],r,e);if(null!=s)if(Array.isArray(n))for(let a=0;a<n.length;a++)Jr(i,s,n[a],o,!1);else Jr(i,s,n,o,!1)}function rs(t,e){if(null!==e){const n=e.type;if(3&n)return Dt(e,t);if(4&n)return is(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return rs(t,n);{const n=t[e.index];return ft(n)?is(-1,n):Rt(n)}}if(32&n)return Lr(e,t)()||Rt(t[e.index]);{const n=ss(t,e);return null!==n?Array.isArray(n)?n[0]:rs(jr(t[16]),n):rs(t,e.next)}}return null}function ss(t,e){return null!==e?t[16][6].projection[e.projection]:null}function is(t,e){const n=dt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return rs(t,r)}return e[7]}function os(t,e,n,r,s,i,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===e&&(a&&Ar(Rt(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)os(t,e,n.child,r,s,i,!1),Ur(e,t,s,a,i);else if(32&l){const o=Lr(n,r);let l;for(;l=o();)Ur(e,t,s,l,i);Ur(e,t,s,a,i)}else 16&l?ls(t,e,r,n,s,i):Ur(e,t,s,a,i);n=o?n.projectionNext:n.next}}function as(t,e,n,r,s,i){os(n,r,t.firstChild,e,s,i,!1)}function ls(t,e,n,r,s,i){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)Ur(e,t,s,a[l],i);else os(t,e,a,o[3],s,i,!0)}function us(t,e,n){Nt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function cs(t,e,n){Nt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function hs(t,e,n){let r=t.length;for(;;){const s=t.indexOf(e,n);if(-1===s)return s;if(0===s||t.charCodeAt(s-1)<=32){const n=e.length;if(s+n===r||t.charCodeAt(s+n)<=32)return s}n=s+1}}const ds="ng-template";function ps(t,e,n){let r=0;for(;r<t.length;){let s=t[r++];if(n&&"class"===s){if(s=t[r],-1!==hs(s.toLowerCase(),e,0))return!0}else if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}}return!1}function fs(t){return 4===t.type&&t.value!==ds}function ms(t,e,n){return e===(4!==t.type||n?t.value:ds)}function gs(t,e,n){let r=4;const s=t.attrs||[],i=function(t){for(let e=0;e<t.length;e++)if(Fe(t[e]))return e;return t.length}(s);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!ms(t,l,n)||""===l&&1===e.length){if(bs(r))return!1;o=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!ps(t.attrs,u,n)){if(bs(r))return!1;o=!0}continue}const c=ys(8&r?"class":l,s,fs(t),n);if(-1===c){if(bs(r))return!1;o=!0;continue}if(""!==u){let t;t=c>i?"":s[c+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==hs(e,u,0)||2&r&&u!==t){if(bs(r))return!1;o=!0}}}}else{if(!o&&!bs(r)&&!bs(l))return!1;if(o&&bs(l))continue;o=!1,r=l|1&r}}return bs(r)||o}function bs(t){return 0==(1&t)}function ys(t,e,n,r){if(null===e)return-1;let s=0;if(r||!n){let n=!1;for(;s<e.length;){const r=e[s];if(r===t)return s;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++s];for(;"string"==typeof t;)t=e[++s];continue}if(4===r)break;if(0===r){s+=4;continue}}s+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function vs(t,e,n=!1){for(let r=0;r<e.length;r++)if(gs(t,e[r],n))return!0;return!1}function _s(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function ws(t,e){return t?":not("+e.trim()+")":e}function xs(t){let e=t[0],n=1,r=2,s="",i=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];s+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?s+="."+o:4&r&&(s+=" "+o);else""===s||bs(o)||(e+=ws(i,s),s=""),r=o,i=i||!bs(r);n++}return""!==s&&(e+=ws(i,s)),e}const ks={};function Ss(t){Cs(qt(),Gt(),ve()+t,te())}function Cs(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Ce(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Ie(e,r,0,n)}_e(n)}function Is(t,e){return t<<17|e<<2}function Es(t){return t>>17&32767}function Os(t){return 2|t}function Ts(t){return(131068&t)>>2}function Ns(t,e){return-131069&t|e<<2}function As(t){return 1|t}function Rs(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r],i=n[r+1];if(-1!==i){const n=t.data[i];ce(s),n.contentQueries(2,e[i],i)}}}function Fs(t,e,n,r,s,i,o,a,l,u){const c=e.blueprint.slice();return c[0]=s,c[2]=140|r,Vt(c),c[3]=c[15]=t,c[8]=n,c[10]=o||t&&t[10],c[11]=a||t&&t[11],c[12]=l||t&&t[12]||null,c[9]=u||t&&t[9]||null,c[6]=i,c[16]=2==e.type?t[16]:c,c}function Ds(t,e,n,r,s){let i=t.data[e];if(null===i)i=function(t,e,n,r,s){const i=Yt(),o=Jt(),a=t.data[e]=function(t,e,n,r,s,i){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?i:i&&i.parent,n,e,r,s);return null===t.firstChild&&(t.firstChild=a),null!==i&&(o?null==i.child&&null!==a.parent&&(i.child=a):null===i.next&&(i.next=a)),a}(t,e,n,r,s),Wt.lFrame.inI18n&&(i.flags|=64);else if(64&i.type){i.type=n,i.value=r,i.attrs=s;const t=function(){const t=Wt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();i.injectorIndex=null===t?-1:t.injectorIndex}return Xt(i,!0),i}function Ps(t,e,n,r){if(0===n)return-1;const s=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return s}function $s(t,e,n){pe(e);try{const r=t.viewQuery;null!==r&&di(1,r,n);const s=t.template;null!==s&&js(t,e,s,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Rs(t,e),t.staticViewQueries&&di(2,t.viewQuery,n);const i=t.components;null!==i&&function(t,e){for(let n=0;n<e.length;n++)ai(t,e[n])}(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ye()}}function Ms(t,e,n,r){const s=e[2];if(256==(256&s))return;pe(e);const i=te();try{Vt(e),Wt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&js(t,e,n,2,r);const o=3==(3&s);if(!i)if(o){const n=t.preOrderCheckHooks;null!==n&&Ce(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Ie(e,n,0,null),Ee(e,0)}if(function(t){for(let e=zr(t);null!==e;e=Br(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ut(r,1),n[2]|=1024}}}(e),function(t){for(let e=zr(t);null!==e;e=Br(e))for(let t=dt;t<e.length;t++){const n=e[t],r=n[1];zt(n)&&Ms(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Rs(t,e),!i)if(o){const n=t.contentCheckHooks;null!==n&&Ce(e,n)}else{const n=t.contentHooks;null!==n&&Ie(e,n,1),Ee(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)_e(~r);else{const s=r,i=n[++t],o=n[++t];oe(i,s),o(2,e[s])}}}finally{_e(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)ii(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&di(2,l,r),!i)if(o){const n=t.viewCheckHooks;null!==n&&Ce(e,n)}else{const n=t.viewHooks;null!==n&&Ie(e,n,2),Ee(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ut(e[3],-1))}finally{ye()}}function Ls(t,e,n,r){const s=e[10],i=!te(),o=jt(e);try{i&&!o&&s.begin&&s.begin(),o&&$s(t,e,r),Ms(t,e,n,r)}finally{i&&!o&&s.end&&s.end()}}function js(t,e,n,r,s){const i=ve(),o=2&r;try{_e(-1),o&&e.length>ht&&Cs(t,e,ht,te()),n(r,s)}finally{_e(i)}}function zs(t,e,n){if(mt(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const e=t.data[s];e.contentQueries&&e.contentQueries(1,n[s],s)}}}function Bs(t,e,n){Ht()&&(function(t,e,n,r){const s=n.directiveStart,i=n.directiveEnd;t.firstCreatePass||Ue(n,e),Ar(r,e);const o=n.initialInputs;for(let a=s;a<i;a++){const r=t.data[a],i=yt(r);i&&ei(e,n,r);const l=en(e,t,a,n);Ar(l,e),null!==o&&ni(0,a-s,l,r,0,o),i&&(Mt(n.index,e)[8]=l)}}(t,e,n,Dt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,s=n.directiveEnd,i=n.index,o=Wt.lFrame.currentDirectiveIndex;try{_e(i);for(let n=r;n<s;n++){const r=t.data[n],s=e[n];ae(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ys(r,s)}}finally{_e(-1),ae(o)}}(t,e,n))}function Vs(t,e,n=Dt){const r=e.localNames;if(null!==r){let s=e.index+1;for(let i=0;i<r.length;i+=2){const o=r[i+1],a=-1===o?n(e,t):t[o];t[s++]=a}}}function Us(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ws(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ws(t,e,n,r,s,i,o,a,l,u){const c=ht+r,h=c+s,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ks);return n}(c,h),p="function"==typeof u?u():u;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function Hs(t,e,n,r){const s=fi(e);null===n?s.push(r):(s.push(n),t.firstCreatePass&&mi(t).push(r,s.length-1))}function Gs(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const s=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,s):n[r]=[e,s]}return n}function qs(t,e,n,r,s,i,o,a){const l=Dt(e,n);let u,c=e.inputs;var h;!a&&null!=c&&(u=c[r])?(yi(t,n,u,r,s),gt(e)&&function(t,e){const n=Mt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,s=null!=o?o(s,e.value||"",r):s,Nt(i)?i.setProperty(l,r,s):De(r)||(l.setProperty?l.setProperty(r,s):l[r]=s))}function Zs(t,e,n,r){let s=!1;if(Ht()){const i=function(t,e,n){const r=t.directiveRegistry;let s=null;if(r)for(let i=0;i<r.length;i++){const o=r[i];vs(n,o.selectors,!1)&&(s||(s=[]),qe(Ue(n,e),t,o.type),yt(o)?(Xs(t,n),s.unshift(o)):s.push(o))}return s}(t,e,n),o=null===r?null:{"":-1};if(null!==i){s=!0,Qs(n,t.data.length,i.length);for(let t=0;t<i.length;t++){const e=i[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,l=Ps(t,e,i.length,null);for(let s=0;s<i.length;s++){const u=i[s];n.mergedAttrs=Pe(n.mergedAttrs,u.hostAttrs),ti(t,n,e,l,u),Js(l,u,o),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const c=u.type.prototype;!r&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!c.ngOnChanges&&!c.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(t,e){const n=e.directiveEnd,r=t.data,s=e.attrs,i=[];let o=null,a=null;for(let l=e.directiveStart;l<n;l++){const t=r[l],n=t.inputs,u=null===s||fs(e)?null:ri(n,s);i.push(u),o=Gs(n,l,o),a=Gs(t.outputs,l,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=i,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const s=n[e[t+1]];if(null==s)throw new g("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],s)}}}(n,r,o)}return n.mergedAttrs=Pe(n.mergedAttrs,n.attrs),s}function Ks(t,e,n,r,s,i){const o=i.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const i=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=i&&n.push(i),n.push(r,s,o)}}function Ys(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Xs(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Js(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function Qs(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ti(t,e,n,r,s){t.data[r]=s;const i=s.factory||(s.factory=vt(s.type)),o=new Ae(i,yt(s),null);t.blueprint[r]=o,n[r]=o,Ks(t,e,0,r,Ps(t,n,s.hostVars,ks),s)}function ei(t,e,n){const r=Dt(e,t),s=Us(n),i=t[10],o=li(t,Fs(t,s,null,n.onPush?64:16,r,e,i,i.createRenderer(r,n),null,null));t[e.index]=o}function ni(t,e,n,r,s,i){const o=i[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const s=o[e++],i=o[e++],a=o[e++];null!==t?r.setInput(n,a,s,i):n[i]=a}}}function ri(t,e){let n=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;t.hasOwnProperty(s)&&(null===n&&(n=[]),n.push(s,t[s],e[r+1])),r+=2}else r+=2;else r+=4}return n}function si(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function ii(t,e){const n=Mt(e,t);if(zt(n)){const t=n[1];80&n[2]?Ms(t,n,t.template,n[8]):n[5]>0&&oi(n)}}function oi(t){for(let n=zr(t);null!==n;n=Br(n))for(let t=dt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ms(t,e,t.template,e[8])}else e[5]>0&&oi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Mt(e[n],t);zt(r)&&r[5]>0&&oi(r)}}function ai(t,e){const n=Mt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),$s(r,n,n[8])}function li(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function ui(t){for(;t;){t[2]|=64;const e=jr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function ci(t,e,n){const r=e[10];r.begin&&r.begin();try{Ms(t,e,t.template,n)}catch(s){throw bi(e,s),s}finally{r.end&&r.end()}}function hi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Lt(n),s=r[1];Ls(s,r,s.template,n)}}(t[8])}function di(t,e,n){ce(0),e(t,n)}const pi=(()=>Promise.resolve(null))();function fi(t){return t[7]||(t[7]=[])}function mi(t){return t.cleanup||(t.cleanup=[])}function gi(t,e,n){return(null===t||yt(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function bi(t,e){const n=t[9],r=n?n.get(Nr,null):null;r&&r.handleError(e)}function yi(t,e,n,r,s){for(let i=0;i<n.length;){const o=n[i++],a=n[i++],l=e[o],u=t.data[o];null!==u.setInput?u.setInput(l,s,r,a):l[a]=s}}function vi(t,e,n){const r=Ft(e,t);!function(t,e,n){Nt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function _i(t,e,n){let r=n?t.styles:null,s=n?t.classes:null,i=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?i=t:1==i?s=h(s,t):2==i&&(r=h(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=s:t.classesWithoutHost=s}const wi=new hn("INJECTOR",-1);class xi{get(t,e=xn){if(e===xn){const e=new Error(`NullInjectorError: No provider for ${c(t)}!`);throw e.name="NullInjectorError",e}return e}}const ki=new hn("Set Injector scope."),Si={},Ci={},Ii=[];let Ei;function Oi(){return void 0===Ei&&(Ei=new xi),Ei}function Ti(t,e=null,n=null,r){return new Ni(t,n,e||Oi(),r)}class Ni{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];e&&mn(e,n=>this.processProvider(n,t,e)),mn([t],t=>this.processInjectorType(t,[],s)),this.records.set(wi,Fi(void 0,this));const i=this.records.get(ki);this.scope=null!=i?i.value:null,this.source=r||("object"==typeof t?null:c(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=xn,n=N.Default){this.assertNotDestroyed();const r=En(this);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(s=t)||"object"==typeof s&&s instanceof hn)&&k(t);e=n&&this.injectableDefInScope(n)?Fi(Ai(t),Si):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?Oi():this.parent).get(t,e=n&N.Optional&&e===xn?null:e)}catch(i){if("NullInjectorError"===i.name){if((i.ngTempTokenPath=i.ngTempTokenPath||[]).unshift(c(t)),r)throw i;return function(t,e,n,r){const s=t.ngTempTokenPath;throw e[Sn]&&s.unshift(e[Sn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let s=c(e);if(Array.isArray(e))s=e.map(c).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):c(r)))}s=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${t.replace(kn,"\n  ")}`}("\n"+t.message,s,n,r),t.ngTokenPath=s,t.ngTempTokenPath=null,t}(i,t,"R3InjectorError",this.source)}throw i}finally{En(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(c(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=f(t)))return!1;let r=C(t);const s=null==r&&t.ngModule||void 0,i=void 0===s?t:s,o=-1!==n.indexOf(i);if(void 0!==s&&(r=C(s)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(i);try{mn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];mn(r,t=>this.processProvider(t,n,r||Ii))}}this.injectorDefTypes.add(i);const a=vt(i)||(()=>new i);this.records.set(i,Fi(a,Si));const l=r.providers;if(null!=l&&!o){const e=t;mn(l,t=>this.processProvider(t,e,l))}return void 0!==s&&void 0!==t.providers}processProvider(t,e,n){let r=Pi(t=f(t))?t:f(t&&t.provide);const s=function(t,e,n){return Di(t)?Fi(void 0,t.useValue):Fi(Ri(t),Si)}(t);if(Pi(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Fi(void 0,Si,!0),e.factory=()=>An(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,s)}hydrate(t,e){var n;return e.value===Si&&(e.value=Ci,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Ai(t){const e=k(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof hn)throw new Error(`Token ${c(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=yn(e,"?");throw new Error(`Can't resolve all parameters for ${c(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[O]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Ri(t,e,n){let r;if(Pi(t)){const e=f(t);return vt(e)||Ai(e)}if(Di(t))r=()=>f(t.useValue);else if((s=t)&&s.useFactory)r=()=>t.useFactory(...An(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Tn(f(t.useExisting));else{const e=f(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||Ai(e);r=()=>new e(...An(t.deps))}var s;return r}function Fi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Di(t){return null!==t&&"object"==typeof t&&Cn in t}function Pi(t){return"function"==typeof t}const $i=function(t,e,n){return function(t,e=null,n=null,r){const s=Ti(t,e,n,r);return s._resolveInjectorDefTypes(),s}({name:n},e,t,n)};let Mi=(()=>{class t{static create(t,e){return Array.isArray(t)?$i(t,e,""):$i(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=xn,t.NULL=new xi,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>Tn(wi)}),t.__NG_ELEMENT_ID__=-1,t})();function Li(t,e){Se(Lt(t)[1],Kt())}function ji(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let s;if(yt(t))s=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");s=e.\u0275dir}if(s){if(n){r.push(s);const e=t;e.inputs=zi(t.inputs),e.declaredInputs=zi(t.declaredInputs),e.outputs=zi(t.outputs);const n=s.hostBindings;n&&Ui(t,n);const i=s.viewQuery,o=s.contentQueries;if(i&&Bi(t,i),o&&Vi(t,o),u(t.inputs,s.inputs),u(t.declaredInputs,s.declaredInputs),u(t.outputs,s.outputs),yt(s)&&s.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(s.data.animation)}}const e=s.features;if(e)for(let r=0;r<e.length;r++){const s=e[r];s&&s.ngInherit&&s(t),s===ji&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const s=t[r];s.hostVars=e+=s.hostVars,s.hostAttrs=Pe(s.hostAttrs,n=Pe(n,s.hostAttrs))}}(r)}function zi(t){return t===V?{}:t===W?[]:t}function Bi(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Vi(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,s)=>{e(t,r,s),n(t,r,s)}:e}function Ui(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Wi=null;function Hi(){if(!Wi){const t=B.Symbol;if(t&&t.iterator)Wi=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Wi=n)}}}return Wi}class Gi{constructor(t){this.wrapped=t}static wrap(t){return new Gi(t)}static unwrap(t){return Gi.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Gi}}function qi(t){return!!Zi(t)&&(Array.isArray(t)||!(t instanceof Map)&&Hi()in t)}function Zi(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ki(t,e,n){return t[e]=n}function Yi(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Xi(t,e,n,r){const s=Yi(t,e,n);return Yi(t,e+1,r)||s}function Ji(t,e,n,r){const s=Gt();return Yi(s,se(),e)&&(qt(),function(t,e,n,r,s,i){const o=Dt(t,e);!function(t,e,n,r,s,i,o){if(null==i)Nt(t)?t.removeAttribute(e,s,n):e.removeAttribute(s);else{const a=null==o?b(i):o(i,r||"",s);Nt(t)?t.setAttribute(e,s,a,n):n?e.setAttributeNS(n,s,a):e.setAttribute(s,a)}}(e[11],o,i,t.value,n,r,s)}(we(),s,t,e,n,r)),Ji}function Qi(t,e,n,r){return Yi(t,se(),n)?e+b(n)+r:ks}function to(t,e,n,r,s,i,o,a){const l=Gt(),u=qt(),c=t+ht,h=u.firstCreatePass?function(t,e,n,r,s,i,o,a,l){const u=e.consts,c=Ds(e,t,4,o||null,Bt(u,a));Zs(e,n,c,Bt(u,l)),Se(e,c);const h=c.tViews=Ws(2,c,r,s,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,n,r,s,i,o):u.data[c];Xt(h,!1);const d=l[11].createComment("");ns(u,l,d,h),Ar(d,l),li(l,l[c]=si(d,l,d,h)),bt(h)&&Bs(u,l,h),null!=o&&Vs(l,h,a)}function eo(t){return $t(Wt.lFrame.contextLView,ht+t)}function no(t,e=N.Default){const n=Gt();return null===n?Tn(t,e):Ye(Kt(),n,f(t),e)}function ro(){throw new Error("invalid")}function so(t,e,n){const r=Gt();return Yi(r,se(),e)&&qs(qt(),we(),r,t,e,r[11],n,!1),so}function io(t,e,n,r,s){const i=s?"class":"style";yi(t,n,e.inputs[i],i,r)}function oo(t,e,n,r){const s=Gt(),i=qt(),o=ht+t,a=s[11],l=s[o]=Wr(a,e,Wt.lFrame.currentNamespace),u=i.firstCreatePass?function(t,e,n,r,s,i,o){const a=e.consts,l=Ds(e,t,2,s,Bt(a,i));return Zs(e,n,l,Bt(a,o)),null!==l.attrs&&_i(l,l.attrs,!1),null!==l.mergedAttrs&&_i(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,i,s,0,e,n,r):i.data[o];Xt(u,!0);const c=u.mergedAttrs;null!==c&&Re(a,l,c);const h=u.classes;null!==h&&cs(a,l,h);const d=u.styles;null!==d&&us(a,l,d),64!=(64&u.flags)&&ns(i,s,l,u),0===Wt.lFrame.elementDepthCount&&Ar(l,s),Wt.lFrame.elementDepthCount++,bt(u)&&(Bs(i,s,u),zs(i,u,s)),null!==r&&Vs(s,u)}function ao(){let t=Kt();Jt()?Qt():(t=t.parent,Xt(t,!1));const e=t;Wt.lFrame.elementDepthCount--;const n=qt();n.firstCreatePass&&(Se(n,t),mt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&io(n,e,Gt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&io(n,e,Gt(),e.stylesWithoutHost,!1)}function lo(t,e,n,r){oo(t,e,n,r),ao()}function uo(t,e,n){const r=Gt(),s=qt(),i=t+ht,o=s.firstCreatePass?function(t,e,n,r,s){const i=e.consts,o=Bt(i,r),a=Ds(e,t,8,"ng-container",o);return null!==o&&_i(a,o,!0),Zs(e,n,a,Bt(i,s)),null!==e.queries&&e.queries.elementStart(e,a),a}(i,s,r,e,n):s.data[i];Xt(o,!0);const a=r[i]=r[11].createComment("");ns(s,r,a,o),Ar(a,r),bt(o)&&(Bs(s,r,o),zs(s,o,r)),null!=n&&Vs(r,o)}function co(){let t=Kt();const e=qt();Jt()?Qt():(t=t.parent,Xt(t,!1)),e.firstCreatePass&&(Se(e,t),mt(t)&&e.queries.elementEnd(t))}function ho(t,e,n){uo(t,e,n),co()}function po(){return Gt()}function fo(t){return!!t&&"function"==typeof t.then}function mo(t){return!!t&&"function"==typeof t.subscribe}const go=mo;function bo(t,e,n=!1,r){const s=Gt(),i=qt(),o=Kt();return vo(i,s,s[11],o,t,e,n,r),bo}function yo(t,e,n=!1,r){const s=Kt(),i=Gt(),o=qt();return vo(o,i,gi(le(o.data),s,i),s,t,e,n,r),yo}function vo(t,e,n,r,s,i,o=!1,a){const l=bt(r),u=t.firstCreatePass&&mi(t),c=fi(e);let h=!0;if(3&r.type){const d=Dt(r,e),p=a?a(d):V,f=p.target||d,m=c.length,g=a?t=>a(Rt(t[r.index])).target:r.index;if(Nt(n)){let o=null;if(!a&&l&&(o=function(t,e,n,r){const s=t.cleanup;if(null!=s)for(let i=0;i<s.length-1;i+=2){const t=s[i];if(t===n&&s[i+1]===r){const t=e[7],n=s[i+2];return t.length>n?t[n]:null}"string"==typeof t&&(i+=2)}return null}(t,e,s,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=i,o.__ngLastListenerFn__=i,h=!1;else{i=wo(r,e,0,i,!1);const t=n.listen(p.name||f,s,i);c.push(i,t),u&&u.push(s,g,m,m+1)}}else i=wo(r,e,0,i,!0),f.addEventListener(s,i,o),c.push(i),u&&u.push(s,g,m,o)}else i=wo(r,e,0,i,!1);const d=r.outputs;let p;if(h&&null!==d&&(p=d[s])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(i),o=c.length;c.push(i,t),u&&u.push(s,r.index,o,-(o+1))}}}function _o(t,e,n,r){try{return!1!==n(r)}catch(s){return bi(t,s),!1}}function wo(t,e,n,r,s){return function n(i){if(i===Function)return r;const o=2&t.flags?Mt(t.index,e):e;0==(32&e[2])&&ui(o);let a=_o(e,0,r,i),l=n.__ngNextListenerFn__;for(;l;)a=_o(e,0,l,i)&&a,l=l.__ngNextListenerFn__;return s&&!1===a&&(i.preventDefault(),i.returnValue=!1),a}}function xo(t=1){return function(t){return(Wt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Wt.lFrame.contextLView))[8]}(t)}function ko(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let s=0;s<e.length;s++){const i=e[s];if("*"!==i){if(null===r?vs(t,i,!0):_s(r,i))return s}else n=s}return n}function So(t){const e=Gt()[16][6];if(!e.projection){const n=e.projection=yn(t?t.length:1,null),r=n.slice();let s=e.child;for(;null!==s;){const e=t?ko(s,t):0;null!==e&&(r[e]?r[e].projectionNext=s:n[e]=s,r[e]=s),s=s.next}}}function Co(t,e=0,n){const r=Gt(),s=qt(),i=Ds(s,ht+t,16,null,n||null);null===i.projection&&(i.projection=e),Qt(),64!=(64&i.flags)&&function(t,e,n){ls(e[11],0,e,n,Kr(t,n,e),ts(n.parent||e[6],n,e))}(s,r,i)}function Io(t,e,n){return Eo(t,"",e,"",n),Io}function Eo(t,e,n,r,s){const i=Gt(),o=Qi(i,e,n,r);return o!==ks&&qs(qt(),we(),i,t,o,i[11],s,!1),Eo}function Oo(t,e,n,r,s){const i=t[n+1],o=null===e;let a=r?Es(i):Ts(i),l=!1;for(;0!==a&&(!1===l||o);){const n=t[a+1];To(t[a],e)&&(l=!0,t[a+1]=r?As(n):Os(n)),a=r?Es(n):Ts(n)}l&&(t[n+1]=r?Os(i):As(i))}function To(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&wn(t,e)>=0}const No={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ao(t){return t.substring(No.key,No.keyEnd)}function Ro(t,e){const n=No.textEnd;return n===e?-1:(e=No.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,No.key=e,n),Fo(t,e,n))}function Fo(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Do(t,e,n){return Lo(t,e,n,!1),Do}function Po(t,e){return Lo(t,e,null,!0),Po}function $o(t){!function(t,e,n,r){const s=qt(),i=ie(2);s.firstUpdatePass&&zo(s,null,i,r);const o=Gt();if(n!==ks&&Yi(o,i,n)){const a=s.data[ve()];if(Go(a,r)&&!jo(s,i)){let t=a.classesWithoutHost;null!==t&&(n=h(t,n||"")),io(s,a,o,n,r)}else!function(t,e,n,r,s,i,o,a){s===ks&&(s=U);let l=0,u=0,c=0<s.length?s[0]:null,h=0<i.length?i[0]:null;for(;null!==c||null!==h;){const o=l<s.length?s[l+1]:void 0,d=u<i.length?i[u+1]:void 0;let p,f=null;c===h?(l+=2,u+=2,o!==d&&(f=h,p=d)):null===h||null!==c&&c<h?(l+=2,f=c):(u+=2,f=h,p=d),null!==f&&Uo(t,e,n,r,f,p,true,a),c=l<s.length?s[l]:null,h=u<i.length?i[u]:null}}(s,a,o,o[11],o[i+1],o[i+1]=function(t,e,n){if(null==n||""===n)return U;const r=[],s=Gn(n);if(Array.isArray(s))for(let i=0;i<s.length;i++)t(r,s[i],!0);else if("object"==typeof s)for(const i in s)s.hasOwnProperty(i)&&t(r,i,s[i]);else"string"==typeof s&&e(r,s);return r}(t,e,n),0,i)}}(vn,Mo,t,!0)}function Mo(t,e){for(let n=function(t){return function(t){No.key=0,No.keyEnd=0,No.value=0,No.valueEnd=0,No.textEnd=t.length}(t),Ro(t,Fo(t,0,No.textEnd))}(e);n>=0;n=Ro(e,n))vn(t,Ao(e),!0)}function Lo(t,e,n,r){const s=Gt(),i=qt(),o=ie(2);i.firstUpdatePass&&zo(i,t,o,r),e!==ks&&Yi(s,o,e)&&Uo(i,i.data[ve()],s,s[11],t,s[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=c(Gn(t)))),t}(e,n),r,o)}function jo(t,e){return e>=t.expandoStartIndex}function zo(t,e,n,r){const s=t.data;if(null===s[n+1]){const i=s[ve()],o=jo(t,n);Go(i,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const s=le(t);let i=r?e.residualClasses:e.residualStyles;if(null===s)0===(r?e.classBindings:e.styleBindings)&&(n=Vo(n=Bo(null,t,e,n,r),e.attrs,r),i=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==s)if(n=Bo(s,t,e,n,r),null===i){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ts(r))return t[Es(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Bo(null,t,e,n[1],r),n=Vo(n,e.attrs,r),function(t,e,n,r){t[Es(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else i=function(t,e,n){let r;const s=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<s;i++)r=Vo(r,t[i].hostAttrs,n);return Vo(r,e.attrs,n)}(t,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),n}(s,i,e,r),function(t,e,n,r,s,i){let o=i?e.classBindings:e.styleBindings,a=Es(o),l=Ts(o);t[r]=n;let u,c=!1;if(Array.isArray(n)){const t=n;u=t[1],(null===u||wn(t,u)>0)&&(c=!0)}else u=n;if(s)if(0!==l){const e=Es(t[a+1]);t[r+1]=Is(e,a),0!==e&&(t[e+1]=Ns(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Is(a,0),0!==a&&(t[a+1]=Ns(t[a+1],r)),a=r;else t[r+1]=Is(l,0),0===a?a=r:t[l+1]=Ns(t[l+1],r),l=r;c&&(t[r+1]=Os(t[r+1])),Oo(t,u,r,!0),Oo(t,u,r,!1),function(t,e,n,r,s){const i=s?t.residualClasses:t.residualStyles;null!=i&&"string"==typeof e&&wn(i,e)>=0&&(n[r+1]=As(n[r+1]))}(e,u,t,r,i),o=Is(a,l),i?e.classBindings=o:e.styleBindings=o}(s,i,e,n,o,r)}}function Bo(t,e,n,r,s){let i=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(i=e[a],r=Vo(r,i.hostAttrs,s),i!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Vo(t,e,n){const r=n?1:2;let s=-1;if(null!==e)for(let i=0;i<e.length;i++){const o=e[i];"number"==typeof o?s=o:s===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),vn(t,o,!!n||e[++i]))}return void 0===t?null:t}function Uo(t,e,n,r,s,i,o,a){if(!(3&e.type))return;const l=t.data,u=l[a+1];Ho(1==(1&u)?Wo(l,e,n,s,Ts(u),o):void 0)||(Ho(i)||2==(2&u)&&(i=Wo(l,null,n,s,a,o)),function(t,e,n,r,s){const i=Nt(t);if(e)s?i?t.addClass(n,r):n.classList.add(r):i?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Mr.DashCase;if(null==s)i?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const o="string"==typeof s&&s.endsWith("!important");o&&(s=s.slice(0,-10),e|=Mr.Important),i?t.setStyle(n,r,s,e):n.style.setProperty(r,s,o?"important":"")}}}(r,o,Ft(ve(),n),s,i))}function Wo(t,e,n,r,s,i){const o=null===e;let a;for(;s>0;){const e=t[s],i=Array.isArray(e),l=i?e[1]:e,u=null===l;let c=n[s+1];c===ks&&(c=u?U:void 0);let h=u?_n(c,r):l===r?c:void 0;if(i&&!Ho(h)&&(h=_n(e,r)),Ho(h)&&(a=h,o))return a;const d=t[s+1];s=o?Es(d):Ts(d)}if(null!==e){let t=i?e.residualClasses:e.residualStyles;null!=t&&(a=_n(t,r))}return a}function Ho(t){return void 0!==t}function Go(t,e){return 0!=(t.flags&(e?16:32))}function qo(t,e=""){const n=Gt(),r=qt(),s=t+ht,i=r.firstCreatePass?Ds(r,s,1,e,null):r.data[s],o=n[s]=function(t,e){return Nt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);ns(r,n,o,i),Xt(i,!1)}function Zo(t){return Ko("",t,""),Zo}function Ko(t,e,n){const r=Gt(),s=Qi(r,t,e,n);return s!==ks&&vi(r,ve(),s),Ko}function Yo(t,e,n,r,s){const i=Gt(),o=function(t,e,n,r,s,i){const o=Xi(t,re(),n,s);return ie(2),o?e+b(n)+r+b(s)+i:ks}(i,t,e,n,r,s);return o!==ks&&vi(i,ve(),o),Yo}function Xo(t,e,n){const r=Gt();return Yi(r,se(),e)&&qs(qt(),we(),r,t,e,r[11],n,!0),Xo}function Jo(t,e,n){const r=Gt();if(Yi(r,se(),e)){const s=qt(),i=we();qs(s,i,r,t,e,gi(le(s.data),i,r),n,!0)}return Jo}const Qo=void 0;var ta=["en",[["a","p"],["AM","PM"],Qo],[["AM","PM"],Qo,Qo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qo,"{1} 'at' {0}",Qo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ea={};function na(t,e,n){"string"!=typeof e&&(n=e,e=t[aa.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ea[e]=t,n&&(ea[e][aa.ExtraData]=n)}function ra(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=oa(e);if(n)return n;const r=e.split("-")[0];if(n=oa(r),n)return n;if("en"===r)return ta;throw new Error(`Missing locale data for the locale "${t}".`)}function sa(t){return ra(t)[aa.CurrencyCode]||null}function ia(t){return ra(t)[aa.PluralCase]}function oa(t){return t in ea||(ea[t]=B.ng&&B.ng.common&&B.ng.common.locales&&B.ng.common.locales[t]),ea[t]}var aa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const la="en-US";let ua=la;function ca(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ua=t.toLowerCase().replace(/_/g,"-"))}function ha(t,e,n,r,s){if(t=f(t),Array.isArray(t))for(let i=0;i<t.length;i++)ha(t[i],e,n,r,s);else{const i=qt(),o=Gt();let a=Pi(t)?t:f(t.provide),l=Ri(t);const u=Kt(),c=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(Pi(t)||!t.multi){const r=new Ae(l,s,no),p=fa(a,e,s?c:c+d,h);-1===p?(qe(Ue(u,o),i,a),da(i,t,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,s&&(u.providerIndexes+=1048576),n.push(r),o.push(r)):(n[p]=r,o[p]=r)}else{const p=fa(a,e,c+d,h),f=fa(a,e,c,c+d),m=p>=0&&n[p],g=f>=0&&n[f];if(s&&!g||!s&&!m){qe(Ue(u,o),i,a);const c=function(t,e,n,r,s){const i=new Ae(t,n,no);return i.multi=[],i.index=e,i.componentProviders=0,pa(i,s,r&&!n),i}(s?ga:ma,n.length,s,r,l);!s&&g&&(n[f].providerFactory=c),da(i,t,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,s&&(u.providerIndexes+=1048576),n.push(c),o.push(c)}else da(i,t,p>-1?p:f,pa(n[s?f:p],l,!s&&r));!s&&r&&g&&n[f].componentProviders++}}}function da(t,e,n,r){const s=Pi(e);if(s||e.useClass){const i=(e.useClass||e).prototype.ngOnDestroy;if(i){const o=t.destroyHooks||(t.destroyHooks=[]);if(!s&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,i]):o[t+1].push(r,i)}else o.push(n,i)}}}function pa(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function fa(t,e,n,r){for(let s=n;s<r;s++)if(e[s]===t)return s;return-1}function ma(t,e,n,r){return ba(this.multi,[])}function ga(t,e,n,r){const s=this.multi;let i;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=en(n,n[1],this.providerFactory.index,r);i=e.slice(0,t),ba(s,i);for(let n=t;n<e.length;n++)i.push(e[n])}else i=[],ba(s,i);return i}function ba(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ya(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=qt();if(r.firstCreatePass){const s=yt(t);ha(n,r.data,r.blueprint,s,!0),ha(e,r.data,r.blueprint,s,!1)}}(n,r?r(t):t,e)}}class va{}class _a{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${c(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let wa=(()=>{class t{}return t.NULL=new _a,t})();function xa(...t){}function ka(t,e){return new Ca(Dt(t,e))}const Sa=function(){return ka(Kt(),Gt())};let Ca=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Sa,t})();function Ia(t){return t instanceof Ca?t.nativeElement:t}class Ea{}let Oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ta(),t})();const Ta=function(){const t=Gt(),e=Mt(Kt().index,t);return function(t){return t[11]}(pt(e)?e:t)};let Na=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class Aa{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ra=new Aa("11.2.12");class Fa{constructor(){}supports(t){return qi(t)}create(t){return new Pa(t)}}const Da=(t,e)=>e;class Pa{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Da}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const i=!n||e&&e.currentIndex<ja(n,r,s)?e:n,o=ja(i,r,s),a=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(e=e._next,null==i.previousIndex)r++;else{s||(s=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<s.length?s[n]:s[n]=0,i=r+n;e<=i&&i<t&&(s[n]=r+1)}s[i.previousIndex]=e-t}}o!==a&&t(i,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!qi(t))throw new Error(`Error trying to diff '${c(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,s=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==s&&Object.is(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,n,r,e)),Object.is(s.item,n)||this._addIdentityChange(s,n)):(s=this._mismatch(s,n,r,e),i=!0),s=s._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Hi()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==s&&Object.is(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,t,r,e)),Object.is(s.item,t)||this._addIdentityChange(s,t)):(s=this._mismatch(s,t,r,e),i=!0),s=s._next,e++}),this.length=e;return this._truncate(s),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new $a(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new La),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new La),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class $a{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ma{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class La{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ma,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ja(t,e,n){const r=t.previousIndex;if(null===r)return r;let s=0;return n&&r<n.length&&(s=n[r]),r+e+s}class za{constructor(){}supports(t){return t instanceof Map||Zi(t)}create(){return new Ba}}class Ba{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Zi(t)))throw new Error(`Error trying to diff '${c(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,s=n._next;return r&&(r._next=s),s&&(s._prev=r),n._next=null,n._prev=null,n}const n=new Va(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Va{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ua(){return new Wa([new Fa])}let Wa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ua()),deps:[[t,new Pn,new Dn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Ua}),t})();function Ha(){return new Ga([new za])}let Ga=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ha()),deps:[[t,new Pn,new Dn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Ha}),t})();function qa(t,e,n,r,s=!1){for(;null!==n;){const i=e[n.index];if(null!==i&&r.push(Rt(i)),ft(i))for(let t=dt;t<i.length;t++){const e=i[t],n=e[1].firstChild;null!==n&&qa(e[1],e,n,r)}const o=n.type;if(8&o)qa(t,e,n.child,r);else if(32&o){const t=Lr(n,e);let s;for(;s=t();)r.push(s)}else if(16&o){const t=ss(e,n);if(Array.isArray(t))r.push(...t);else{const n=jr(e[16]);qa(n[1],n,t,r,!0)}}n=s?n.projectionNext:n.next}return r}class Za{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return qa(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ft(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Gr(t,n),bn(e,n))}this._attachedToViewContainer=!1}qr(this._lView[1],this._lView)}onDestroy(t){Hs(this._lView[1],this._lView,null,t)}markForCheck(){ui(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ci(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){ee(!0);try{ci(t,e,n)}finally{ee(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,as(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ka extends Za{constructor(t){super(t),this._view=t}detectChanges(){hi(this._view)}checkNoChanges(){!function(t){ee(!0);try{hi(t)}finally{ee(!1)}}(this._view)}get context(){return null}}const Ya=Ja;let Xa=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ya,t.__ChangeDetectorRef__=!0,t})();function Ja(t=!1){return function(t,e,n){if(!n&&gt(t)){const n=Mt(t.index,e);return new Za(n,n)}return 47&t.type?new Za(e[16],e):null}(Kt(),Gt(),t)}const Qa=[new za],tl=new Wa([new Fa]),el=new Ga(Qa),nl=function(){return ol(Kt(),Gt())};let rl=(()=>{class t{}return t.__NG_ELEMENT_ID__=nl,t})();const sl=rl,il=class extends sl{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Fs(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),$s(e,n,t),new Za(n)}};function ol(t,e){return 4&t.type?new il(e,t,ka(t,e)):null}class al{}class ll{}const ul=function(){return ml(Kt(),Gt())};let cl=(()=>{class t{}return t.__NG_ELEMENT_ID__=ul,t})();const hl=cl,dl=class extends hl{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return ka(this._hostTNode,this._hostLView)}get injector(){return new sn(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ge(this._hostTNode,this._hostLView);if(Me(t)){const e=je(t,this._hostLView),n=Le(t);return new sn(e[1].data[n+8],e)}return new sn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=pl(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-dt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,s){const i=n||this.parentInjector;if(!s&&null==t.ngModule&&i){const t=i.get(al,null);t&&(s=t)}const o=t.create(i,r,void 0,s);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(ft(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new dl(e,e[6],e[3]);r.detach(r.indexOf(t))}}const s=this._adjustIndex(e),i=this._lContainer;!function(t,e,n,r){const s=dt+r,i=n.length;r>0&&(n[s-1][4]=e),r<i-dt?(e[4]=n[s],gn(n,dt+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,i,s);const o=is(s,i),a=n[11],l=Qr(a,i[7]);return null!==l&&function(t,e,n,r,s,i){r[0]=s,r[6]=e,as(t,r,n,1,s,i)}(r,i[6],a,n,l,o),t.attachToViewContainerRef(),gn(fl(i),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=pl(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Gr(this._lContainer,e);n&&(bn(fl(this._lContainer),e),qr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Gr(this._lContainer,e);return n&&null!=bn(fl(this._lContainer),e)?new Za(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function pl(t){return t[8]}function fl(t){return t[8]||(t[8]=[])}function ml(t,e){let n;const r=e[t.index];if(ft(r))n=r;else{let s;if(8&t.type)s=Rt(r);else{const n=e[11];s=n.createComment("");const r=Dt(t,e);Yr(n,Qr(n,r),s,function(t,e){return Nt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=si(r,e,s,t),li(e,n)}return new dl(n,t,e)}const gl={};class bl extends wa{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new _l(e,this.ngModule)}}function yl(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const vl=new hn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Rr});class _l extends va{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(xs).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return yl(this.componentDef.inputs)}get outputs(){return yl(this.componentDef.outputs)}create(t,e,n,r){const s=(r=r||this.ngModule)?function(t,e){return{get:(n,r,s)=>{const i=t.get(n,gl,s);return i!==gl||r===gl?i:e.get(n,r,s)}}}(t,r.injector):t,i=s.get(Ea,At),o=s.get(Na,null),a=i.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=n?function(t,e,n){if(Nt(t))return t.selectRootElement(e,n===$.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Wr(i.createRenderer(null,this.componentDef),l,function(t){const e=t.toLowerCase();return"svg"===e?It:"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),c=this.componentDef.onPush?576:528,h={components:[],scheduler:Rr,clean:pi,playerHandler:null,flags:0},d=Ws(0,null,null,1,0,null,null,null,null,null),p=Fs(null,d,h,c,null,null,i,a,o,s);let f,m;pe(p);try{const t=function(t,e,n,r,s,i){const o=n[1];n[20]=t;const a=Ds(o,20,2,"#host",null),l=a.mergedAttrs=e.hostAttrs;null!==l&&(_i(a,l,!0),null!==t&&(Re(s,t,l),null!==a.classes&&cs(s,t,a.classes),null!==a.styles&&us(s,t,a.styles)));const u=r.createRenderer(t,e),c=Fs(n,Us(e),null,e.onPush?64:16,n[20],a,r,u,null,null);return o.firstCreatePass&&(qe(Ue(a,n),o,e.type),Xs(o,a),Qs(a,n.length,1)),li(n,c),n[20]=c}(u,this.componentDef,p,i,a);if(u)if(n)Re(a,u,["ng-version",Ra.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,s=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===s?""!==i&&e.push(i,t[++r]):8===s&&n.push(i);else{if(!bs(s))break;s=i}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Re(a,u,t),e&&e.length>0&&cs(a,u,e.join(" "))}if(m=Pt(d,ht),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}f=function(t,e,n,r,s){const i=n[1],o=function(t,e,n){const r=Kt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ti(t,r,e,Ps(t,e,1,null),n));const s=en(e,t,r.directiveStart,r);Ar(s,e);const i=Dt(r,e);return i&&Ar(i,e),s}(i,n,e);if(r.components.push(o),t[8]=o,s&&s.forEach(t=>t(o,e)),e.contentQueries){const t=Kt();e.contentQueries(1,o,t.directiveStart)}const a=Kt();return!i.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(_e(a.index),Ks(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ys(e,o)),o}(t,this.componentDef,p,h,[Li]),$s(d,p,null)}finally{ye()}return new wl(this.componentType,f,ka(m,p),p,m)}}class wl extends class{}{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new Ka(r),this.componentType=t}get injector(){return new sn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const xl=new Map;class kl extends al{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new bl(this);const n=ct(t),r=t[K]||null;r&&ca(r),this._bootstrapComponents=$r(n.bootstrap),this._r3Injector=Ti(t,e,[{provide:al,useValue:this},{provide:wa,useValue:this.componentFactoryResolver}],c(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Mi.THROW_IF_NOT_FOUND,n=N.Default){return t===Mi||t===al||t===wi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Sl extends ll{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),s=r.id;null!==s&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${c(e)} vs ${c(e.name)}`)}(s,xl.get(s),n),xl.set(s,n));const i=$r(r.imports);for(const o of i)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new kl(this.moduleType,t)}}function Cl(t,e,n){const r=ne()+t,s=Gt();return s[r]===ks?Ki(s,r,n?e.call(n):e()):function(t,e){return t[e]}(s,r)}function Il(t,e,n,r){return Tl(Gt(),ne(),t,e,n,r)}function El(t,e,n,r,s){return Nl(Gt(),ne(),t,e,n,r,s)}function Ol(t,e){const n=t[e];return n===ks?void 0:n}function Tl(t,e,n,r,s,i){const o=e+n;return Yi(t,o,s)?Ki(t,o+1,i?r.call(i,s):r(s)):Ol(t,o+1)}function Nl(t,e,n,r,s,i,o){const a=e+n;return Xi(t,a,s,i)?Ki(t,a+2,o?r.call(o,s,i):r(s,i)):Ol(t,a+2)}function Al(t,e){const n=qt();let r;const s=t+ht;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new g("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[s]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(s,r.onDestroy)):r=n.data[s];const i=r.factory||(r.factory=vt(r.type)),o=R(no);try{const t=Be(!1),e=i();return Be(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Gt(),s,e),e}finally{R(o)}}function Rl(t,e,n){const r=t+ht,s=Gt(),i=$t(s,r);return Pl(s,Dl(s,r)?Tl(s,ne(),e,i.transform,n,i):i.transform(n))}function Fl(t,e,n,r){const s=t+ht,i=Gt(),o=$t(i,s);return Pl(i,Dl(i,s)?Nl(i,ne(),e,o.transform,n,r,o):o.transform(n,r))}function Dl(t,e){return t[1].data[e].pure}function Pl(t,e){return Gi.isWrapped(e)&&(e=Gi.unwrap(e),t[re()]=ks),e}function $l(t){return e=>{setTimeout(t,void 0,e)}}const Ml=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,i,o;let a=t,l=e||(()=>null),u=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),l=null===(i=e.error)||void 0===i?void 0:i.bind(e),u=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(l=$l(l),a&&(a=$l(a)),u&&(u=$l(u)));const c=super.subscribe({next:a,error:l,complete:u});return t instanceof s.a&&t.add(c),c}};function Ll(){return this._results[Hi()]()}class jl{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Hi(),n=jl.prototype;n[e]||(n[e]=Ll)}get changes(){return this._changes||(this._changes=new Ml)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=fn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let s=t[r],i=e[r];if(n&&(s=n(s),i=n(i)),i!==s)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class zl{constructor(t){this.queryList=t,this.matches=null}clone(){return new zl(this.queryList)}setDirty(){this.queryList.setDirty()}}class Bl{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Bl(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==eu(t,e).matches&&this.queries[e].setDirty()}}class Vl{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Ul{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new Ul(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Wl{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Wl(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,Hl(e,s)),this.matchTNodeWithReadOption(t,e,tn(e,t,s,!1,!1))}else n===rl?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,tn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ca||r===cl||r===rl&&4&e.type)this.addMatch(e.index,-2);else{const n=tn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Hl(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Gl(t,e,n,r){return-1===n?function(t,e){return 11&t.type?ka(t,e):4&t.type?ol(t,e):null}(e,t):-2===n?function(t,e,n){return n===Ca?ka(e,t):n===rl?ol(e,t):n===cl?ml(e,t):void 0}(t,e,r):en(t,t[1],n,e)}function ql(t,e,n,r){const s=e[19].queries[r];if(null===s.matches){const r=t.data,i=n.matches,o=[];for(let t=0;t<i.length;t+=2){const s=i[t];o.push(s<0?null:Gl(e,r[s],i[t+1],n.metadata.read))}s.matches=o}return s.matches}function Zl(t,e,n,r){const s=t.queries.getByIndex(n),i=s.matches;if(null!==i){const o=ql(t,e,s,n);for(let t=0;t<i.length;t+=2){const n=i[t];if(n>0)r.push(o[t/2]);else{const s=i[t+1],o=e[-n];for(let t=dt;t<o.length;t++){const e=o[t];e[17]===e[3]&&Zl(e[1],e,s,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];Zl(n[1],n,s,r)}}}}}return r}function Kl(t){const e=Gt(),n=qt(),r=ue();ce(r+1);const s=eu(n,r);if(t.dirty&&jt(e)===(2==(2&s.metadata.flags))){if(null===s.matches)t.reset([]);else{const i=s.crossesNgTemplate?Zl(n,e,r,[]):ql(n,e,s,r);t.reset(i,Ia),t.notifyOnChanges()}return!0}return!1}function Yl(t,e,n){const r=qt();r.firstCreatePass&&(tu(r,new Vl(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Ql(r,Gt(),e)}function Xl(t,e,n,r){const s=qt();if(s.firstCreatePass){const i=Kt();tu(s,new Vl(e,n,r),i.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(s,t),2==(2&n)&&(s.staticContentQueries=!0)}Ql(s,Gt(),n)}function Jl(){return t=Gt(),e=ue(),t[19].queries[e].queryList;var t,e}function Ql(t,e,n){const r=new jl(4==(4&n));Hs(t,e,r,r.destroy),null===e[19]&&(e[19]=new Bl),e[19].queries.push(new zl(r))}function tu(t,e,n){null===t.queries&&(t.queries=new Ul),t.queries.track(new Wl(e,n))}function eu(t,e){return t.queries.getByIndex(e)}function nu(t,e){return ol(t,e)}function ru(t=N.Default){const e=Ja(!0);if(null!=e||t&N.Optional)return e;v("ChangeDetectorRef")}const su=new hn("Application Initializer");let iu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=xa,this.reject=xa,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();fo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Tn(su,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const ou=new hn("AppId"),au={provide:ou,useFactory:function(){return`${lu()}${lu()}${lu()}`},deps:[]};function lu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uu=new hn("Platform Initializer"),cu=new hn("Platform ID"),hu=new hn("appBootstrapListener");let du=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const pu=new hn("LocaleId"),fu=new hn("DefaultCurrencyCode");class mu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const gu=function(t){return new Sl(t)},bu=gu,yu=function(t){return Promise.resolve(gu(t))},vu=function(t){const e=gu(t),n=$r(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new _l(n)),t},[]);return new mu(e,n)},_u=vu,wu=function(t){return Promise.resolve(vu(t))};let xu=(()=>{class t{constructor(){this.compileModuleSync=bu,this.compileModuleAsync=yu,this.compileModuleAndAllComponentsSync=_u,this.compileModuleAndAllComponentsAsync=wu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const ku=(()=>Promise.resolve(0))();function Su(t){"undefined"==typeof Zone?ku.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Cu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ml(!1),this.onMicrotaskEmpty=new Ml(!1),this.onStable=new Ml(!1),this.onError=new Ml(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=B.requestAnimationFrame,e=B.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(B,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ou(t),Eu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ou(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,s,i,o,a)=>{try{return Tu(t),n.invokeTask(s,i,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||t.shouldCoalesceRunChangeDetection)&&e(),Nu(t)}},onInvoke:(n,r,s,i,o,a,l)=>{try{return Tu(t),n.invoke(s,i,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Nu(t)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,Ou(t),Eu(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Cu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Cu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,i=s.scheduleEventTask("NgZoneEvent: "+r,t,Iu,xa,xa);try{return s.runTask(i,e,n)}finally{s.cancelTask(i)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Iu={};function Eu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ou(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Tu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Nu(t){t._nesting--,Eu(t)}class Au{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ml,this.onMicrotaskEmpty=new Ml,this.onStable=new Ml,this.onError=new Ml}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Ru=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Cu.assertNotInAngularZone(),Su(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Su(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Tn(Cu))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),Fu=(()=>{class t{constructor(){this._applications=new Map,Mu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Mu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class Du{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Pu(t){Mu=t}let $u,Mu=new Du,Lu=!0,ju=!1;function zu(){return ju=!0,Lu}function Bu(){if(ju)throw new Error("Cannot enable prod mode after platform setup.");Lu=!1}const Vu=new hn("AllowMultipleToken");class Uu{constructor(t,e){this.name=t,this.token=e}}function Wu(t,e,n=[]){const r=`Platform: ${e}`,s=new hn(r);return(e=[])=>{let i=Hu();if(!i||i.injector.get(Vu,!1))if(t)t(n.concat(e).concat({provide:s,useValue:!0}));else{const t=n.concat(e).concat({provide:s,useValue:!0},{provide:ki,useValue:"platform"});!function(t){if($u&&!$u.destroyed&&!$u.injector.get(Vu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");$u=t.get(Gu);const e=t.get(uu,null);e&&e.forEach(t=>t())}(Mi.create({providers:t,name:r}))}return function(t){const e=Hu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(s)}}function Hu(){return $u&&!$u.destroyed?$u:null}let Gu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Au:("zone.js"===t?void 0:t)||new Cu({enableLongStackTrace:zu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Cu,useValue:n}];return n.run(()=>{const e=Mi.create({providers:r,parent:this.injector,name:t.moduleType.name}),s=t.create(e),i=s.injector.get(Nr,null);if(!i)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{i.handleError(t)}});s.onDestroy(()=>{Ku(this._modules,s),t.unsubscribe()})}),function(t,e,n){try{const r=n();return fo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(i,n,()=>{const t=s.injector.get(iu);return t.runInitializers(),t.donePromise.then(()=>(ca(s.injector.get(pu,la)||la),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,e=[]){const n=qu({},e);return function(t,e,n){const r=new Sl(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Zu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${c(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Tn(Mi))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function qu(t,e){return Array.isArray(e)?e.reduce(qu,t):Object.assign(Object.assign({},t),e)}let Zu=(()=>{class t{constructor(t,e,n,r,s){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new i.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),u=new i.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Cu.assertNotInAngularZone(),Su(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Cu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(o.a)(l,u.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof va?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(al),s=n.create(Mi.NULL,[],e||n.selector,r),i=s.location.nativeElement,o=s.injector.get(Ru,null),a=o&&s.injector.get(Fu);return o&&a&&a.registerApplication(i,o),s.onDestroy(()=>{this.detachView(s.hostView),Ku(this.components,s),a&&a.unregisterApplication(i)}),this._loadComponent(s),s}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ku(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(hu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Tn(Cu),Tn(Mi),Tn(Nr),Tn(wa),Tn(iu))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Ku(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Yu{}class Xu{}const Ju={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Qu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Ju}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>tc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),s="NgFactory";return void 0===r&&(r="default",s=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+s]).then(t=>tc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Tn(xu),Tn(Xu,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function tc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const ec=function(t){return null},nc=Wu(null,"core",[{provide:cu,useValue:"unknown"},{provide:Gu,deps:[Mi]},{provide:Fu,deps:[]},{provide:du,deps:[]}]),rc=[{provide:Zu,useClass:Zu,deps:[Cu,Mi,Nr,wa,iu]},{provide:vl,deps:[Cu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:iu,useClass:iu,deps:[[new Dn,su]]},{provide:xu,useClass:xu,deps:[]},au,{provide:Wa,useFactory:function(){return tl},deps:[]},{provide:Ga,useFactory:function(){return el},deps:[]},{provide:pu,useFactory:function(t){return ca(t=t||"undefined"!=typeof $localize&&$localize.locale||la),t},deps:[[new Fn(pu),new Dn,new Pn]]},{provide:fu,useValue:"USD"}];let sc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Tn(Zu))},t.\u0275mod=st({type:t}),t.\u0275inj=x({providers:rc}),t})()},"8sFK":function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return c});var r=n("SCoL"),s=n("8Y7J"),i=n("8LU1"),o=n("EY2u"),a=n("XNiG");n("xgIS"),n("3UWI"),n("1G5W"),n("SVse");const l=Object(r.e)({passive:!0});let u=(()=>{class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return o.a;const e=Object(i.d)(t),n=this._monitoredElements.get(e);if(n)return n.subject;const r=new a.a,s="cdk-text-field-autofilled",u=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(s)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(s)&&(e.classList.remove(s),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!1}))):(e.classList.add(s),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",u,l),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:r,unlisten:()=>{e.removeEventListener("animationstart",u,l)}}),r}stopMonitoring(t){const e=Object(i.d)(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(r.a),s.Zb(s.A))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(r.a),Object(s.Zb)(s.A))},token:t,providedIn:"root"}),t})(),c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({imports:[[r.b]]}),t})()},"9/Zf":function(t,e,n){"use strict";(function(t){function r(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}n.d(e,"c",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"a",function(){return a}),n.d(e,"d",function(){return d}),n("9AQC"),n("+924");var s={};function i(){return r()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:s}function o(){var t=i(),e=t.crypto||t.msCrypto;if(void 0!==e&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function a(t){var e=i();if(!("console"in e))return t();var n=e.console,r={};["debug","info","warn","error","log","assert"].forEach(function(t){t in e.console&&n[t].__sentry_original__&&(r[t]=n[t],n[t]=n[t].__sentry_original__)});var s=t();return Object.keys(r).forEach(function(t){n[t]=r[t]}),s}var l=Date.now(),u=0,c={now:function(){var t=Date.now()-l;return t<u&&(t=u),u=t,t},timeOrigin:l},h=function(){if(r())try{return t.require("perf_hooks").performance}catch(n){return c}var e=i().performance;return e&&e.now?(void 0===e.timeOrigin&&(e.timeOrigin=e.timing&&e.timing.navigationStart||l),e):c}();function d(){return(h.timeOrigin+h.now())/1e3}}).call(this,n("3UD+")(t))},"9AQC":function(t,e,n){"use strict";function r(t){return"[object String]"===Object.prototype.toString.call(t)}function s(t){return"[object Object]"===Object.prototype.toString.call(t)}function i(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function o(t){return Boolean(t&&t.then&&"function"==typeof t.then)}n.d(e,"c",function(){return r}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return i}),n.d(e,"d",function(){return o})},"9BqC":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("8Y7J"),s=n("SVse"),i=n("ura0"),o=n("VDRc"),a=n("tHmd"),l=n("TSSN");function u(t,e){if(1&t){const t=r.Wb();r.Vb(0,"div",11),r.dc("click",function(){return r.xc(t),r.hc().toggleOpen()}),r.Ub()}}function c(t,e){if(1&t&&r.Qb(0,"svg-icon",12),2&t){const t=r.hc();r.nc("src",t.selectedValue.icon)}}function h(t,e){if(1&t&&(r.Vb(0,"span",13),r.Hc(1),r.ic(2,"translate"),r.Ub()),2&t){const t=r.hc();r.Hb("text-truncate",!t.allowTwoLines)("allow-two-lines",t.allowTwoLines),r.Eb(1),r.Ic(r.jc(2,5,t.selectedValue.value))}}function d(t,e){if(1&t&&r.Qb(0,"svg-icon",17),2&t){const t=r.hc().$implicit;r.nc("src",t.icon)}}function p(t,e){if(1&t){const t=r.Wb();r.Vb(0,"div",14),r.dc("click",function(){r.xc(t);const n=e.$implicit;return r.hc().setSelectedValue(n)}),r.Fc(1,d,1,1,"svg-icon",15),r.Vb(2,"span",16),r.Hc(3),r.ic(4,"translate"),r.Ub(),r.Ub()}if(2&t){const t=e.$implicit,n=r.hc();r.Hb("simple-select-option-selected",n.selectedValue&&t.key===n.selectedValue.key),r.Eb(1),r.nc("ngIf",t.icon),r.Eb(2),r.Jc(" ",r.jc(4,4,t.value)," ")}}function f(t,e){if(1&t){const t=r.Wb();r.Vb(0,"div",18),r.dc("click",function(){return r.xc(t),r.hc().reset()}),r.Vb(1,"span",19),r.Hc(2),r.ic(3,"translate"),r.Ub(),r.Ub()}2&t&&(r.Eb(2),r.Ic(r.jc(3,1,"generic.delete")))}let m=(()=>{class t{constructor(t){this.cd=t,this.options=[],this.defaultValue=null,this.showReset=!1,this.theme="standard",this.allowTwoLines=!1,this.changeSelected=new r.n,this.isOpen=!1}set value(t){void 0!==t&&(this.selectedValue=this.options.find(e=>e.key===t))}ngOnInit(){this.defaultValue&&(this.selectedValue=this.defaultValue,this.cd.markForCheck())}toggleOpen(){this.isOpen=!this.isOpen}setSelectedValue(t){this.selectedValue=t,this.changeSelected.emit(t),this.cd.markForCheck()}reset(){this.selectedValue=void 0,this.changeSelected.emit(void 0),this.cd.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.h))},t.\u0275cmp=r.Jb({type:t,selectors:[["stf-simple-select"]],inputs:{options:"options",defaultValue:"defaultValue",showReset:"showReset",theme:"theme",allowTwoLines:"allowTwoLines",value:"value"},outputs:{changeSelected:"changeSelected"},decls:11,vars:12,consts:[[1,"simple-select-wrapper",3,"ngClass"],["class","overlay",3,"click",4,"ngIf"],["fxLayout","column",1,"simple-select",3,"click"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","5px",1,"simple-select__trigger"],["fxFlex","1 1 auto","fxLayout","row","fxLayoutAlign","start center",1,"min-width-0"],["fxFlex","0 0 auto","class","simple-select-icon",3,"src",4,"ngIf"],["fxFlex","1 1 auto",3,"text-truncate","allow-two-lines",4,"ngIf"],["fxFlex","0 0 auto"],[1,"simple-select-options"],["class","simple-select-option","fxLayout","row","fxLayoutAlign","start center",3,"simple-select-option-selected","click",4,"ngFor","ngForOf"],["class","simple-select-option reset","fxLayout","row","fxLayoutAlign","start center",3,"click",4,"ngIf"],[1,"overlay",3,"click"],["fxFlex","0 0 auto",1,"simple-select-icon",3,"src"],["fxFlex","1 1 auto"],["fxLayout","row","fxLayoutAlign","start center",1,"simple-select-option",3,"click"],["class","simple-select-option-icon","fxFlex","0 0 auto",3,"src",4,"ngIf"],["fxFlex","1 1 auto",1,"simple-select-option-text","text-truncate"],["fxFlex","0 0 auto",1,"simple-select-option-icon",3,"src"],["fxLayout","row","fxLayoutAlign","start center",1,"simple-select-option","reset",3,"click"],[1,"simple-select-option-text"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Fc(1,u,1,0,"div",1),r.Vb(2,"div",2),r.dc("click",function(){return e.toggleOpen()}),r.Vb(3,"div",3),r.Vb(4,"span",4),r.Fc(5,c,1,1,"svg-icon",5),r.Fc(6,h,3,7,"span",6),r.Ub(),r.Qb(7,"div",7),r.Ub(),r.Vb(8,"div",8),r.Fc(9,p,5,6,"div",9),r.Fc(10,f,4,3,"div",10),r.Ub(),r.Ub(),r.Ub()),2&t&&(r.nc("ngClass","theme-"+e.theme),r.Eb(1),r.nc("ngIf",e.isOpen),r.Eb(4),r.nc("ngIf",null==e.selectedValue?null:e.selectedValue.icon),r.Eb(1),r.nc("ngIf",null==e.selectedValue?null:e.selectedValue.value),r.Eb(1),r.Hb("arrow-down",!e.isOpen)("arrow-up",e.isOpen),r.Eb(1),r.Hb("simple-select-options-open",e.isOpen),r.Eb(1),r.nc("ngForOf",e.options),r.Eb(1),r.nc("ngIf",e.showReset&&(null==e.selectedValue||null==e.selectedValue.value?null:e.selectedValue.value.length)>0))},directives:[s.l,i.a,s.n,o.d,o.c,o.e,o.b,s.m,a.b],pipes:[l.c],styles:[".simple-select-wrapper.theme-standard[_ngcontent-%COMP%]{height:36px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%]{height:100%;position:relative}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .simple-select__trigger[_ngcontent-%COMP%]{border-radius:5px;box-shadow:3px 3px 6px rgba(0,0,0,.1607843137254902);cursor:pointer;height:100%;line-height:1.13;padding:6px 12px;position:relative}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .simple-select__trigger[_ngcontent-%COMP%]   .allow-two-lines[_ngcontent-%COMP%]{-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden;text-overflow:ellipsis}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .simple-select-icon[_ngcontent-%COMP%]{margin-right:8px}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .simple-select-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .simple-select-options[_ngcontent-%COMP%]{background:var(--stf-gray-background);border-radius:5px;border-top:0;box-shadow:3px 3px 6px rgba(0,0,0,.1607843137254902);display:block;left:0;opacity:0;pointer-events:none;position:absolute;right:0;top:110%;transition:all .5s;visibility:hidden;z-index:100}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .simple-select-options-open[_ngcontent-%COMP%]{opacity:1;pointer-events:all;visibility:visible}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .simple-select-option[_ngcontent-%COMP%]{cursor:pointer;padding:6px 12px;position:relative;transition:all .5s}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .simple-select-option[_ngcontent-%COMP%]:hover{background-color:#b2b2b2;cursor:pointer}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .simple-select-option-selected[_ngcontent-%COMP%]{background-color:#b2b2b2;color:#fff}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .simple-select-option-icon[_ngcontent-%COMP%]{margin-right:8px}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .simple-select-option-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .simple-select-option-text[_ngcontent-%COMP%]{line-height:1.13}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .arrow-down[_ngcontent-%COMP%]{border-left:5px solid transparent;border-right:5px solid transparent;border-top:8px solid var(--stf-black);height:0;width:0}.simple-select-wrapper.theme-standard[_ngcontent-%COMP%]   .arrow-up[_ngcontent-%COMP%]{border-bottom:8px solid var(--stf-black);border-left:5px solid transparent;border-right:5px solid transparent;height:0;width:0}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%]{height:100%}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select__trigger[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select__trigger[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select__trigger[_ngcontent-%COMP%]{border-radius:4px;cursor:pointer;height:100%;line-height:1.13;padding:0 12px}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select__trigger[_ngcontent-%COMP%]   .allow-two-lines[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select__trigger[_ngcontent-%COMP%]   .allow-two-lines[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select__trigger[_ngcontent-%COMP%]   .allow-two-lines[_ngcontent-%COMP%]{@limit-lines (2)}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select-icon[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select-icon[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select-icon[_ngcontent-%COMP%]{margin-right:8px}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select-options[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select-options[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select-options[_ngcontent-%COMP%]{background:#fff;box-shadow:var(--stf-shadow-dropdown);left:0;opacity:0;pointer-events:none;position:absolute;right:0;top:calc(100% + 6px);transition:all .3s;visibility:hidden;z-index:100}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select-options-open[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select-options-open[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select-options-open[_ngcontent-%COMP%]{opacity:1;pointer-events:all;visibility:visible}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select-option[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select-option[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select-option[_ngcontent-%COMP%]{cursor:pointer;padding:8px 20px 8px 10px}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select-option[_ngcontent-%COMP%]:hover, .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select-option[_ngcontent-%COMP%]:hover, .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select-option[_ngcontent-%COMP%]:hover{background-color:#f2f2f2;cursor:pointer}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select-option.reset[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select-option.reset[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select-option.reset[_ngcontent-%COMP%]{background-color:var(--stf-gray-lightest)}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select-option-icon[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select-option-icon[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select-option-icon[_ngcontent-%COMP%]{margin-right:8px}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select-option-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select-option-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select-option-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select-option-text[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select-option-text[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select-option-text[_ngcontent-%COMP%]{line-height:1.13}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .arrow-down[_ngcontent-%COMP%], .simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .arrow-up[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .arrow-down[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .arrow-up[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .arrow-down[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .arrow-up[_ngcontent-%COMP%]{border-left:4px solid transparent;border-right:4px solid transparent;height:0;width:0}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .arrow-down[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .arrow-down[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .arrow-down[_ngcontent-%COMP%]{border-top:5px solid var(--stf-black)}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .arrow-up[_ngcontent-%COMP%], .simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .arrow-up[_ngcontent-%COMP%], .simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .arrow-up[_ngcontent-%COMP%]{border-bottom:5px solid var(--stf-black)}.simple-select-wrapper.theme-light[_ngcontent-%COMP%]{height:25px}.simple-select-wrapper.theme-light[_ngcontent-%COMP%]   .simple-select__trigger[_ngcontent-%COMP%]{background-color:#fff;box-shadow:var(--stf-shadow-button)}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]{height:40px}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select__trigger[_ngcontent-%COMP%]{background-color:#f7f7f8;box-shadow:1px 1px 2px rgba(0,0,0,.16);font-weight:var(--stf-font-weight-bold);padding-left:25px}.simple-select-wrapper.theme-bold[_ngcontent-%COMP%]   .simple-select-option[_ngcontent-%COMP%]{padding:10px 20px 10px 25px}.simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]{height:26px}.simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select__trigger[_ngcontent-%COMP%]{border:1.5px solid var(--stf-black);font-weight:var(--stf-font-weight-semibold)}.simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select-option[_ngcontent-%COMP%]{border-bottom:1px solid #f9f9f9;padding:10px 20px 10px 10px}.simple-select-wrapper.theme-bordered[_ngcontent-%COMP%]   .simple-select-option[_ngcontent-%COMP%]:last-child{border-bottom:0}"],changeDetection:0}),t})()},"9gLZ":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o});var r=n("8Y7J"),s=n("SVse");const i=new r.r("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(r.Y)(s.d)}});let o=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new r.n,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(i,8))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Zb)(i,8))},token:t,providedIn:"root"}),t})(),a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})()},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},"9s9I":function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"d",function(){return h}),n.d(e,"a",function(){return d}),n.d(e,"c",function(){return p});var r=n("SVse"),s=n("TSSN"),i=(n("iInd"),n("ZFy/")),o=n("tHmd"),a=n("8Y7J");let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Nb({type:t}),t.\u0275inj=a.Mb({imports:[[r.c,s.b,i.b,o.a]]}),t})();var u=n("s7LF"),c=n("8sFK");let h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Nb({type:t}),t.\u0275inj=a.Mb({imports:[[r.c,c.b,o.a,u.n],c.b]}),t})();n("u9T3"),n("Tj54"),n("Dxy4"),n("iELJ");let d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Nb({type:t}),t.\u0275inj=a.Mb({imports:[[r.c]]}),t})();n("2Vo4"),n("ehcP"),n("rJgo");let p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Nb({type:t}),t.\u0275inj=a.Mb({imports:[[r.c]]}),t})();n("1O3W");var f=n("GS7A");const m=Object(f.g)([Object(f.n)({opacity:"{{opacity}}",transform:"scale({{scale}}) translate3d({{x}}, {{y}}, {{z}})"}),Object(f.e)("{{duration}} {{delay}} cubic-bezier(0.0, 0.0, 0.2, 1)",Object(f.n)("*"))],{params:{duration:"200ms",delay:"0ms",opacity:"0",scale:"1",x:"0",y:"0",z:"0"}});Object(f.p)("animate",[Object(f.o)("void => *",[Object(f.q)(m)])]),Object(f.p)("animateStagger",[Object(f.m)("50",Object(f.n)("*")),Object(f.m)("100",Object(f.n)("*")),Object(f.m)("200",Object(f.n)("*")),Object(f.o)("void => 50",Object(f.j)("@*",[Object(f.l)("50ms",[Object(f.f)()])],{optional:!0})),Object(f.o)("void => 100",Object(f.j)("@*",[Object(f.l)("100ms",[Object(f.f)()])],{optional:!0})),Object(f.o)("void => 200",Object(f.j)("@*",[Object(f.l)("200ms",[Object(f.f)()])],{optional:!0}))]),Object(f.p)("fadeInOut",[Object(f.m)("0",Object(f.n)({display:"none",opacity:0})),Object(f.m)("1",Object(f.n)({display:"block",opacity:1})),Object(f.o)("1 => 0",Object(f.e)("300ms ease-out")),Object(f.o)("0 => 1",Object(f.e)("300ms ease-in"))]),Object(f.p)("slideInOut",[Object(f.m)("0",Object(f.n)({height:"0px",display:"none"})),Object(f.m)("1",Object(f.n)({height:"*",display:"block"})),Object(f.o)("1 => 0",Object(f.e)("300ms ease-out")),Object(f.o)("0 => 1",Object(f.e)("300ms ease-in"))]),Object(f.p)("slideIn",[Object(f.o)("void => left",[Object(f.n)({transform:"translateX(100%)"}),Object(f.e)("300ms ease-in",Object(f.n)({transform:"translateX(0)"}))]),Object(f.o)("left => void",[Object(f.n)({transform:"translateX(0)"}),Object(f.e)("300ms ease-in",Object(f.n)({transform:"translateX(-100%)"}))]),Object(f.o)("void => right",[Object(f.n)({transform:"translateX(-100%)"}),Object(f.e)("300ms ease-in",Object(f.n)({transform:"translateX(0)"}))]),Object(f.o)("right => void",[Object(f.n)({transform:"translateX(0)"}),Object(f.e)("300ms ease-in",Object(f.n)({transform:"translateX(100%)"}))])]),Object(f.p)("slideInLeft",[Object(f.m)("void",Object(f.n)({transform:"translateX(-100%)",display:"none"})),Object(f.m)("*",Object(f.n)({transform:"translateX(0)",display:"flex"})),Object(f.o)("void => *",Object(f.e)("300ms")),Object(f.o)("* => void",Object(f.e)("300ms"))]),Object(f.p)("slideInRight",[Object(f.m)("void",Object(f.n)({transform:"translateX(100%)",display:"none"})),Object(f.m)("*",Object(f.n)({transform:"translateX(0)",display:"flex"})),Object(f.o)("void => *",Object(f.e)("300ms")),Object(f.o)("* => void",Object(f.e)("300ms"))]),Object(f.p)("slideInTop",[Object(f.m)("void",Object(f.n)({transform:"translateY(-100%)",display:"none"})),Object(f.m)("*",Object(f.n)({transform:"translateY(0)",display:"flex"})),Object(f.o)("void => *",Object(f.e)("300ms")),Object(f.o)("* => void",Object(f.e)("300ms"))]),Object(f.p)("slideInBottom",[Object(f.m)("void",Object(f.n)({transform:"translateY(100%)",display:"none"})),Object(f.m)("*",Object(f.n)({transform:"translateY(0)",display:"flex"})),Object(f.o)("void => *",Object(f.e)("300ms")),Object(f.o)("* => void",Object(f.e)("300ms"))]),Object(f.p)("expandCollapse",[Object(f.m)("void",Object(f.n)({height:"0px"})),Object(f.m)("*",Object(f.n)({height:"*"})),Object(f.o)("void => *",Object(f.e)("300ms ease-out")),Object(f.o)("* => void",Object(f.e)("300ms ease-in"))]),Object(f.p)("routerTransitionLeft",[Object(f.o)("* => *",[Object(f.j)("content > :enter, content > :leave",[Object(f.n)({position:"absolute",top:0,bottom:0,left:0,right:0})],{optional:!0}),Object(f.j)("content > :enter",[Object(f.n)({transform:"translateX(100%)",opacity:0})],{optional:!0}),Object(f.k)([Object(f.h)([Object(f.j)("content > :leave",[Object(f.n)({transform:"translateX(0)",opacity:1}),Object(f.e)("600ms cubic-bezier(0.0, 0.0, 0.2, 1)",Object(f.n)({transform:"translateX(-100%)",opacity:0}))],{optional:!0}),Object(f.j)("content > :enter",[Object(f.n)({transform:"translateX(100%)"}),Object(f.e)("600ms cubic-bezier(0.0, 0.0, 0.2, 1)",Object(f.n)({transform:"translateX(0%)",opacity:1}))],{optional:!0})]),Object(f.j)("content > :leave",Object(f.f)(),{optional:!0}),Object(f.j)("content > :enter",Object(f.f)(),{optional:!0})])])]),Object(f.p)("routerTransitionRight",[Object(f.o)("* => *",[Object(f.j)("content > :enter, content > :leave",[Object(f.n)({position:"absolute",top:0,bottom:0,left:0,right:0})],{optional:!0}),Object(f.j)("content > :enter",[Object(f.n)({transform:"translateX(-100%)",opacity:0})],{optional:!0}),Object(f.k)([Object(f.h)([Object(f.j)("content > :leave",[Object(f.n)({transform:"translateX(0)",opacity:1}),Object(f.e)("600ms cubic-bezier(0.0, 0.0, 0.2, 1)",Object(f.n)({transform:"translateX(100%)",opacity:0}))],{optional:!0}),Object(f.j)("content > :enter",[Object(f.n)({transform:"translateX(-100%)"}),Object(f.e)("600ms cubic-bezier(0.0, 0.0, 0.2, 1)",Object(f.n)({transform:"translateX(0%)",opacity:1}))],{optional:!0})]),Object(f.j)("content > :leave",Object(f.f)(),{optional:!0}),Object(f.j)("content > :enter",Object(f.f)(),{optional:!0})])])]),Object(f.p)("routerTransitionUp",[Object(f.o)("* => *",[Object(f.j)("content > :enter, content > :leave",[Object(f.n)({position:"absolute",top:0,bottom:0,left:0,right:0})],{optional:!0}),Object(f.j)("content > :enter",[Object(f.n)({transform:"translateY(100%)",opacity:0})],{optional:!0}),Object(f.h)([Object(f.j)("content > :leave",[Object(f.n)({transform:"translateY(0)",opacity:1}),Object(f.e)("600ms cubic-bezier(0.0, 0.0, 0.2, 1)",Object(f.n)({transform:"translateY(-100%)",opacity:0}))],{optional:!0}),Object(f.j)("content > :enter",[Object(f.n)({transform:"translateY(100%)"}),Object(f.e)("600ms cubic-bezier(0.0, 0.0, 0.2, 1)",Object(f.n)({transform:"translateY(0%)",opacity:1}))],{optional:!0})]),Object(f.j)("content > :leave",Object(f.f)(),{optional:!0}),Object(f.j)("content > :enter",Object(f.f)(),{optional:!0})])]),Object(f.p)("routerTransitionDown",[Object(f.o)("* => *",[Object(f.j)("content > :enter, content > :leave",[Object(f.n)({position:"absolute",top:0,bottom:0,left:0,right:0})],{optional:!0}),Object(f.j)("content > :enter",[Object(f.n)({transform:"translateY(-100%)",opacity:0})],{optional:!0}),Object(f.k)([Object(f.h)([Object(f.j)("content > :leave",[Object(f.n)({transform:"translateY(0)",opacity:1}),Object(f.e)("600ms cubic-bezier(0.0, 0.0, 0.2, 1)",Object(f.n)({transform:"translateY(100%)",opacity:0}))],{optional:!0}),Object(f.j)("content > :enter",[Object(f.n)({transform:"translateY(-100%)"}),Object(f.e)("600ms cubic-bezier(0.0, 0.0, 0.2, 1)",Object(f.n)({transform:"translateY(0%)",opacity:1}))],{optional:!0})]),Object(f.j)("content > :leave",Object(f.f)(),{optional:!0}),Object(f.j)("content > :enter",Object(f.f)(),{optional:!0})])])]),Object(f.p)("routerTransitionFade",[Object(f.o)("* => *",Object(f.h)([Object(f.j)("content > :enter, content > :leave ",[Object(f.n)({position:"absolute",top:0,bottom:0,left:0,right:0})],{optional:!0}),Object(f.j)("content > :enter",[Object(f.n)({opacity:0})],{optional:!0}),Object(f.j)("content > :leave",[Object(f.n)({opacity:1}),Object(f.e)("300ms cubic-bezier(0.0, 0.0, 0.2, 1)",Object(f.n)({opacity:0}))],{optional:!0}),Object(f.j)("content > :enter",[Object(f.n)({opacity:0}),Object(f.e)("300ms cubic-bezier(0.0, 0.0, 0.2, 1)",Object(f.n)({opacity:1}))],{optional:!0}),Object(f.j)("content > :enter",Object(f.f)(),{optional:!0}),Object(f.j)("content > :leave",Object(f.f)(),{optional:!0})]))]),n("BCSS"),n("8LU1"),n("mrSG"),n("cUpR"),new a.r("config")},B9Yq:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},BCSS:function(t,e,n){"use strict";n.d(e,"a",function(){return w});var r=n("8LU1"),s=n("s7LF"),i=n("XNiG"),o=n("cp0P"),a=n("1G5W"),l=n("IzEk"),u=n("8Y7J");let c=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=u.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=n("SCoL"),d=n("8sFK"),p=n("TSSN"),f=n("SVse");const m=["realInput"];function g(t,e){if(1&t&&u.Qb(0,"small",6),2&t){const t=u.hc();u.nc("innerHTML",t.errorHelp,u.yc)}}function b(t,e){if(1&t&&(u.Vb(0,"small",7),u.Hc(1),u.Ub()),2&t){const t=u.hc();u.nc("id",t.helpId),u.Eb(1),u.Ic(t.help)}}const y=["*"];let v=0;const _=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let w=(()=>{class t{constructor(t,e,n,r,s){this._platform=t,this.ngZone=e,this._autofillMonitor=n,this._defaultErrorStateMatcher=r,this.translate=s,this._uid="stf-input-"+v++,this.id=this._uid,this._value="",this._required=!1,this._small_widget=!1,this._noAutocapitalize=!1,this._noAutocomplete=!1,this._type="text",this._isNativeSelect=!1,this.controlType="stf-input",this._disabled=!1,this._readonly=!1,this._underline=!1,this._isLessen=!1,this._withIcon=!1,this._noSpellcheck=!1,this.isLabelHidden=!1,this.valueChange=new u.n,this.keyUp=new u.n,this.keyDown=new u.n,this.blur=new u.n,this.enterPressed=new u.n,this.label_float=!1,this.focused=!1,this.autofilled=!1,this.errorState=!1,this.stateChanges=new i.a,this.unsubscribeAll=new i.a}get value(){return this._value}set value(t){t!==this.value&&(this._value=t,this.label_float=""!==t,this.stateChanges.next())}get required(){return this._required}set required(t){this._required=Object(r.b)(t)}get small_widget(){return this._small_widget}set small_widget(t){this._small_widget=Object(r.b)(t)}get noAutocapitalize(){return this._noAutocapitalize}set noAutocapitalize(t){this._noAutocapitalize=t}get noAutocomplete(){return this._noAutocomplete}set noAutocomplete(t){this._noAutocomplete=t}get type(){return this._type}set type(t){this._type=t||"text",this._validateType()}get disabled(){return this._disabled}set disabled(t){this._disabled=Object(r.b)(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Object(r.b)(t)}get underline(){return this._underline}set underline(t){this._underline=Object(r.b)(t)}get isLessen(){return this._isLessen}set isLessen(t){this._isLessen=Object(r.b)(t)}get withIcon(){return this._withIcon}set withIcon(t){this._withIcon=Object(r.b)(t)}get noSpellcheck(){return this._noSpellcheck}set noSpellcheck(t){this._noSpellcheck=Object(r.b)(t)}get empty(){var t;return!(null===(t=this.element)||void 0===t?void 0:t.nativeElement.value)&&!this._isBadInput()&&!this.autofilled}ngOnInit(){this.validator&&this.validator.statusChanges.pipe(Object(a.a)(this.unsubscribeAll)).subscribe(t=>{"VALID"===t?this.errorHelp="":this.updateError()}),this.help&&(this.helpId=`${this.id}-help`),""!==this.value&&null!=this.value&&(this.label_float=!0)}updateError(){if(this.validator&&this.validator.errors){this.errorHelp="";const t=Object.keys(this.validator.errors).map(t=>this.translate.get(this.validation_messages[t]).pipe(Object(l.a)(1)));Object(o.a)(t).subscribe(t=>{let e=!0;t.forEach(t=>{e||(this.errorHelp+="<br/>"),this.errorHelp+=t,e=!1})})}}ngAfterViewInit(){var t;this._platform.isBrowser&&this._autofillMonitor.monitor(null===(t=this.element)||void 0===t?void 0:t.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.label_float=!0,this.stateChanges.next()})}ngAfterViewChecked(){var t;this._platform.IOS&&this.ngZone.runOutsideAngular(()=>{var t;null===(t=this.element)||void 0===t||t.nativeElement.addEventListener("keyup",t=>{const e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})});const e=null===(t=this.element)||void 0===t?void 0:t.nativeElement;this._isNativeSelect="select"===e.nodeName.toLowerCase(),this._isNativeSelect&&(this.controlType=e.multiple?"stf-native-select-multiple":"stf-native-select")}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){var t;this.stateChanges.complete(),this.unsubscribeAll&&(this.unsubscribeAll.next(),this.unsubscribeAll.complete()),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(null===(t=this.element)||void 0===t?void 0:t.nativeElement)}_isBadInput(){var t;const e=(null===(t=this.element)||void 0===t?void 0:t.nativeElement).validity;return e&&e.badInput}change(t){null==t&&(t=""),this.valueChange.emit(t),this.value=t,this.label_float=!this.empty,this.onChange&&this.onChange(t),this.onTouched&&this.onTouched(t)}onKeyUp(t){this.keyUp.emit(t)}onKeyDown(t,e){this.keyDown.emit(e)}onEnterPressed(t){t.preventDefault(),this.enterPressed.emit(t)}writeValue(t){this.value=t}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}_focusChanged(t){t?this.label_float=!0:(this.blur.emit(this._value),this.empty&&(this.label_float=!1)),t===this.focused||this.readonly||(this.focused=t,this.stateChanges.next())}_validateType(){if(_.indexOf(this._type)>-1)throw Error(`Input type "${this._type}" isn't supported by matInput.`)}}return t.\u0275fac=function(e){return new(e||t)(u.Pb(h.a),u.Pb(u.A),u.Pb(d.a),u.Pb(c),u.Pb(p.d))},t.\u0275cmp=u.Jb({type:t,selectors:[["stf-input"]],viewQuery:function(t,e){if(1&t&&u.Lc(m,3),2&t){let t;u.sc(t=u.ec())&&(e.element=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&u.Hb("stf-label-float",e.label_float)},inputs:{id:"id",ariaLabel:"ariaLabel",name:"name",errorStateMatcher:"errorStateMatcher",value:"value",required:"required",small_widget:"small_widget",noAutocapitalize:"noAutocapitalize",noAutocomplete:"noAutocomplete",type:"type",placeholder:"placeholder",help:"help",disabled:"disabled",readonly:"readonly",underline:"underline",isLessen:"isLessen",withIcon:"withIcon",noSpellcheck:"noSpellcheck",isLabelHidden:"isLabelHidden",validation_messages:"validation_messages",validator:"validator"},outputs:{valueChange:"valueChange",keyUp:"keyUp",keyDown:"keyDown",blur:"blur",enterPressed:"enterPressed"},features:[u.Db([{provide:s.i,useExisting:Object(u.X)(()=>t),multi:!0}]),u.Cb],ngContentSelectors:y,decls:8,vars:34,consts:[[1,"stf-input-infix"],[1,"stf-input-control",3,"type","disabled","required","value","onchange","change","keyup","keydown","keydown.enter","focus","blur"],["realInput",""],[1,"stf-input-label",3,"for"],["class","stf-input-help stf-input-help-error",3,"innerHTML",4,"ngIf"],["class","stf-input-help",3,"id",4,"ngIf"],[1,"stf-input-help","stf-input-help-error",3,"innerHTML"],[1,"stf-input-help",3,"id"]],template:function(t,e){1&t&&(u.mc(),u.Vb(0,"div"),u.Vb(1,"div",0),u.Vb(2,"input",1,2),u.dc("onchange",function(t){return e.change(t.target.value)})("change",function(t){return e.change(t.target.value)})("keyup",function(t){return e.onKeyUp(t.target.value)})("keydown",function(t){return e.onKeyDown(null==t.target?null:t.target.value,t)})("keydown.enter",function(t){return e.onEnterPressed(t)})("focus",function(){return e._focusChanged(!0)})("blur",function(){return e._focusChanged(!1)}),u.Ub(),u.Vb(4,"label",3),u.lc(5),u.Ub(),u.Fc(6,g,1,1,"small",4),u.Fc(7,b,2,2,"small",5),u.Ub(),u.Ub()),2&t&&(u.Gb("stf-field stf-input-"+e.type),u.Hb("stf-field-required",e.required)("stf-field-disabled",e.disabled)("stf-small",e.small_widget),u.Eb(1),u.Hb("stf-small",e.small_widget),u.Eb(1),u.Hb("stf-input-control__underline",e.underline)("stf-input-control__with-icon",e._withIcon)("stf-input-control__lessen",e._isLessen||e.placeholder&&e.placeholder.length>0),u.nc("type",e.type)("disabled",e.disabled)("required",e.required)("value",e.value),u.Fb("id",e.id)("aria-label",e.ariaLabel||null)("aria-describedby",e.helpId||null)("placeholder",e.placeholder)("aria-invalid",e.errorState)("aria-required",e.required)("readonly",e.readonly&&!e._isNativeSelect||null)("spellcheck",e._noSpellcheck?"false":null)("autocomplete",e._noAutocomplete?"off":null)("autocapitalize",e._noAutocapitalize?"off":null)("name",e.name),u.Eb(2),u.nc("for",e.id),u.Eb(2),u.nc("ngIf",e.errorHelp),u.Eb(1),u.nc("ngIf",e.help))},directives:[f.n],styles:[".stf-input-email,.stf-input-number,.stf-input-password,.stf-input-tel,.stf-input-text,.stf-input-url{position:relative}.stf-input-email .stf-input-infix,.stf-input-number .stf-input-infix,.stf-input-password .stf-input-infix,.stf-input-tel .stf-input-infix,.stf-input-text .stf-input-infix,.stf-input-url .stf-input-infix{background-color:var(--stf-input-background);position:relative}.stf-input-email .stf-input-infix.stf-small,.stf-input-number .stf-input-infix.stf-small,.stf-input-password .stf-input-infix.stf-small,.stf-input-tel .stf-input-infix.stf-small,.stf-input-text .stf-input-infix.stf-small,.stf-input-url .stf-input-infix.stf-small{background-color:transparent;padding:10px 16px 7px}.stf-input-email .stf-input-infix.stf-small input,.stf-input-number .stf-input-infix.stf-small input,.stf-input-password .stf-input-infix.stf-small input,.stf-input-tel .stf-input-infix.stf-small input,.stf-input-text .stf-input-infix.stf-small input,.stf-input-url .stf-input-infix.stf-small input{background-color:transparent!important;font-size:15px;padding:6px 6px 3px 4px}.stf-input-email .stf-input-infix.stf-small .stf-input-label,.stf-input-number .stf-input-infix.stf-small .stf-input-label,.stf-input-password .stf-input-infix.stf-small .stf-input-label,.stf-input-tel .stf-input-infix.stf-small .stf-input-label,.stf-input-text .stf-input-infix.stf-small .stf-input-label,.stf-input-url .stf-input-infix.stf-small .stf-input-label{color:var(--stf-gray-light);font-weight:var(--stf-font-weight-light)}.stf-input-email .stf-input-infix.stf-small input:-internal-autofill-previewed,.stf-input-email .stf-input-infix.stf-small input:-internal-autofill-selected,.stf-input-number .stf-input-infix.stf-small input:-internal-autofill-previewed,.stf-input-number .stf-input-infix.stf-small input:-internal-autofill-selected,.stf-input-password .stf-input-infix.stf-small input:-internal-autofill-previewed,.stf-input-password .stf-input-infix.stf-small input:-internal-autofill-selected,.stf-input-tel .stf-input-infix.stf-small input:-internal-autofill-previewed,.stf-input-tel .stf-input-infix.stf-small input:-internal-autofill-selected,.stf-input-text .stf-input-infix.stf-small input:-internal-autofill-previewed,.stf-input-text .stf-input-infix.stf-small input:-internal-autofill-selected,.stf-input-url .stf-input-infix.stf-small input:-internal-autofill-previewed,.stf-input-url .stf-input-infix.stf-small input:-internal-autofill-selected{-webkit-box-shadow:0 0 0 1000px var(--stf-white) inset}.stf-input-email .stf-input-control,.stf-input-number .stf-input-control,.stf-input-password .stf-input-control,.stf-input-tel .stf-input-control,.stf-input-text .stf-input-control,.stf-input-url .stf-input-control{-webkit-appearance:none;background:transparent;border:0;color:var(--stf-black);display:flex;font-size:var(--stf-font-size-regular);font-weight:var(--stf-font-weight-regular);line-height:1.25;margin:0;max-width:100%;outline:0;padding:20px var(--stf-input-padding-horizontal) 9px;text-align:inherit;text-overflow:ellipsis;width:100%}.stf-input-email .stf-input-control:focus,.stf-input-number .stf-input-control:focus,.stf-input-password .stf-input-control:focus,.stf-input-tel .stf-input-control:focus,.stf-input-text .stf-input-control:focus,.stf-input-url .stf-input-control:focus{outline:none}.stf-input-email .stf-input-control:-ms-input-placeholder,.stf-input-number .stf-input-control:-ms-input-placeholder,.stf-input-password .stf-input-control:-ms-input-placeholder,.stf-input-tel .stf-input-control:-ms-input-placeholder,.stf-input-text .stf-input-control:-ms-input-placeholder,.stf-input-url .stf-input-control:-ms-input-placeholder{color:var(--stf-input-label-color)}.stf-input-email .stf-input-control::placeholder,.stf-input-number .stf-input-control::placeholder,.stf-input-password .stf-input-control::placeholder,.stf-input-tel .stf-input-control::placeholder,.stf-input-text .stf-input-control::placeholder,.stf-input-url .stf-input-control::placeholder{color:var(--stf-input-label-color)}.stf-input-email .stf-input-control::-moz-placeholder,.stf-input-number .stf-input-control::-moz-placeholder,.stf-input-password .stf-input-control::-moz-placeholder,.stf-input-tel .stf-input-control::-moz-placeholder,.stf-input-text .stf-input-control::-moz-placeholder,.stf-input-url .stf-input-control::-moz-placeholder{color:var(--stf-input-label-color)}.stf-input-email .stf-input-control__underline,.stf-input-number .stf-input-control__underline,.stf-input-password .stf-input-control__underline,.stf-input-tel .stf-input-control__underline,.stf-input-text .stf-input-control__underline,.stf-input-url .stf-input-control__underline{border-bottom:1px solid var(--stf-black)}.stf-input-email .stf-input-control__lessen,.stf-input-number .stf-input-control__lessen,.stf-input-password .stf-input-control__lessen,.stf-input-tel .stf-input-control__lessen,.stf-input-text .stf-input-control__lessen,.stf-input-url .stf-input-control__lessen{padding:15px var(--stf-input-padding-horizontal) 14px}.stf-input-email .stf-input-control__with-icon,.stf-input-number .stf-input-control__with-icon,.stf-input-password .stf-input-control__with-icon,.stf-input-tel .stf-input-control__with-icon,.stf-input-text .stf-input-control__with-icon,.stf-input-url .stf-input-control__with-icon{padding-right:calc(var(--stf-input-padding-horizontal) * 2.4)}.stf-input-email .stf-input-control__with-icon:not(.stf-input-text .stf-input-control__with-icon__lessen,.stf-input-email .stf-input-control__with-icon__lessen,.stf-input-password .stf-input-control__with-icon__lessen,.stf-input-number .stf-input-control__with-icon__lessen,.stf-input-tel .stf-input-control__with-icon__lessen,.stf-input-url .stf-input-control__with-icon__lessen)::-webkit-credentials-auto-fill-button,.stf-input-number .stf-input-control__with-icon:not(.stf-input-text .stf-input-control__with-icon__lessen,.stf-input-email .stf-input-control__with-icon__lessen,.stf-input-password .stf-input-control__with-icon__lessen,.stf-input-number .stf-input-control__with-icon__lessen,.stf-input-tel .stf-input-control__with-icon__lessen,.stf-input-url .stf-input-control__with-icon__lessen)::-webkit-credentials-auto-fill-button,.stf-input-password .stf-input-control__with-icon:not(.stf-input-text .stf-input-control__with-icon__lessen,.stf-input-email .stf-input-control__with-icon__lessen,.stf-input-password .stf-input-control__with-icon__lessen,.stf-input-number .stf-input-control__with-icon__lessen,.stf-input-tel .stf-input-control__with-icon__lessen,.stf-input-url .stf-input-control__with-icon__lessen)::-webkit-credentials-auto-fill-button,.stf-input-tel .stf-input-control__with-icon:not(.stf-input-text .stf-input-control__with-icon__lessen,.stf-input-email .stf-input-control__with-icon__lessen,.stf-input-password .stf-input-control__with-icon__lessen,.stf-input-number .stf-input-control__with-icon__lessen,.stf-input-tel .stf-input-control__with-icon__lessen,.stf-input-url .stf-input-control__with-icon__lessen)::-webkit-credentials-auto-fill-button,.stf-input-text .stf-input-control__with-icon:not(.stf-input-text .stf-input-control__with-icon__lessen,.stf-input-email .stf-input-control__with-icon__lessen,.stf-input-password .stf-input-control__with-icon__lessen,.stf-input-number .stf-input-control__with-icon__lessen,.stf-input-tel .stf-input-control__with-icon__lessen,.stf-input-url .stf-input-control__with-icon__lessen)::-webkit-credentials-auto-fill-button,.stf-input-url .stf-input-control__with-icon:not(.stf-input-text .stf-input-control__with-icon__lessen,.stf-input-email .stf-input-control__with-icon__lessen,.stf-input-password .stf-input-control__with-icon__lessen,.stf-input-number .stf-input-control__with-icon__lessen,.stf-input-tel .stf-input-control__with-icon__lessen,.stf-input-url .stf-input-control__with-icon__lessen)::-webkit-credentials-auto-fill-button{margin-bottom:7px}.stf-input-email .stf-input-label,.stf-input-number .stf-input-label,.stf-input-password .stf-input-label,.stf-input-tel .stf-input-label,.stf-input-text .stf-input-label,.stf-input-url .stf-input-label{color:var(--stf-input-label-color);display:inline-block;left:var(--stf-input-padding-horizontal);max-width:calc(100% - 40px);overflow:hidden;pointer-events:none;position:absolute;text-overflow:ellipsis;top:14px;touch-action:none;transform-origin:left;transition:transform var(--stf-input-label-duration);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.stf-input-email .stf-input-help-error,.stf-input-number .stf-input-help-error,.stf-input-password .stf-input-help-error,.stf-input-tel .stf-input-help-error,.stf-input-text .stf-input-help-error,.stf-input-url .stf-input-help-error{cursor:defalut;left:var(--stf-input-padding-horizontal);position:relative;top:-9px}.stf-input-email .stf-small .stf-input-label,.stf-input-number .stf-small .stf-input-label,.stf-input-password .stf-small .stf-input-label,.stf-input-tel .stf-small .stf-input-label,.stf-input-text .stf-small .stf-input-label,.stf-input-url .stf-small .stf-input-label{left:19px;top:15px}.stf-input-email.stf-input-disabled .stf-input-infix,.stf-input-number.stf-input-disabled .stf-input-infix,.stf-input-password.stf-input-disabled .stf-input-infix,.stf-input-tel.stf-input-disabled .stf-input-infix,.stf-input-text.stf-input-disabled .stf-input-infix,.stf-input-url.stf-input-disabled .stf-input-infix{background-color:var(--stf-white);border:2px solid var(--stf-gray-disabled)}stf-input.ng-invalid:not(.ng-untouched) .stf-input-infix.stf-small .stf-input-label{color:#f54731}stf-input.ng-invalid:not(.ng-untouched) .stf-input-infix.stf-small input{background-color:#fae0dd;-webkit-box-shadow:inset 0 0 0 1000px #fae0dd}stf-input.ng-invalid:not(.ng-untouched) .stf-input-infix{background-color:#fae0dd}stf-input.ng-invalid:not(.ng-untouched) .stf-input-infix .stf-input-label{color:#f54731}stf-input.ng-invalid:not(.ng-untouched) .stf-input-infix input{-webkit-box-shadow:inset 0 0 0 1000px #fae0dd}.stf-label-float .stf-input-label{color:var(--stf-input-label-color);transform:translateY(-13px) scale(.75)}.stf-field-disabled .stf-input-label{opacity:.5}.stf-label-float .stf-small .stf-input-label{color:var(--stf-gray-dark);transform:translateY(-17px) scale(.75)}input:-internal-autofill-previewed,input:-internal-autofill-selected{-webkit-text-fill-color:#333;background-color:transparent!important;background-image:none!important;-webkit-box-shadow:0 0 0 1000px var(--stf-input-background) inset;color:#000!important}"],encapsulation:2}),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),s=n("SeVD"),i=n("quSY"),o=n("kJWO"),a=n("jZKg"),l=n("Lhse"),u=n("c2HN"),c=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.a]}(t))return function(t,e){return new r.a(n=>{const r=new i.a;return r.add(e.schedule(()=>{const s=t[o.a]();r.add(s.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(u.a)(t))return function(t,e){return new r.a(n=>{const r=new i.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(c.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[l.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new i.a;let s;return r.add(()=>{s&&"function"==typeof s.return&&s.return()}),r.add(e.schedule(()=>{s=t[l.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=s.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(s.a)(t))}},CtHx:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return l}),n.d(e,"d",function(){return c}),n.d(e,"e",function(){return o});var r=n("7+OI"),s=n("LRne"),i=(n("XNiG"),n("8Y7J"));function o(t){return t&&"function"==typeof t.connect}class a extends class{}{constructor(t){super(),this._data=t}connect(){return Object(r.a)(this._data)?this._data:Object(s.a)(this._data)}disconnect(){}}class l{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(t,e,n,r,s){t.forEachOperation((t,i,o)=>{let a,l;null==t.previousIndex?(a=this._insertView(()=>n(t,i,o),o,e,r(t)),l=a?1:0):null==o?(this._detachAndCacheView(i,e),l=3):(a=this._moveView(i,o,e,r(t)),l=2),s&&s({context:null==a?void 0:a.context,operation:l,record:t})})}detach(){for(const t of this._viewCache)t.destroy();this._viewCache=[]}_insertView(t,e,n,r){const s=this._insertViewFromCache(e,n);if(s)return void(s.context.$implicit=r);const i=t();return n.createEmbeddedView(i.templateRef,i.context,i.index)}_detachAndCacheView(t,e){const n=e.detach(t);this._maybeCacheView(n,e)}_moveView(t,e,n,r){const s=n.get(t);return n.move(s,e),s.context.$implicit=r,s}_maybeCacheView(t,e){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(t);else{const n=e.indexOf(t);-1===n?t.destroy():e.remove(n)}}_insertViewFromCache(t,e){const n=this._viewCache.pop();return n&&e.insert(n,t),n||null}}let u=(()=>{class t{constructor(){this._listeners=[]}notify(t,e){for(let n of this._listeners)n(t,e)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(e=>t!==e)}}ngOnDestroy(){this._listeners=[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(i.Lb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const c=new i.r("_ViewRepeater")},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("3N8a");const s=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},DHPt:function(t,e,n){"use strict";function r(t){var e=this;if(e instanceof r||(e=new r),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){e.push(t)});else if(arguments.length>0)for(var n=0,s=arguments.length;n<s;n++)e.push(arguments[n]);return e}function s(t,e,n){var r=e===t.head?new a(n,null,e,t):new a(n,e,e.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r}function i(t,e){t.tail=new a(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function o(t,e){t.head=new a(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function a(t,e,n,r){if(!(this instanceof a))return new a(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}t.exports=r,r.Node=a,r.create=r,r.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e},r.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},r.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},r.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)i(this,arguments[t]);return this.length},r.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)o(this,arguments[t]);return this.length},r.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},r.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},r.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;null!==n;r++)t.call(e,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;null!==n;r--)t.call(e,n.value,r,this),n=n.prev},r.prototype.get=function(t){for(var e=0,n=this.head;null!==n&&e<t;e++)n=n.next;if(e===t&&null!==n)return n.value},r.prototype.getReverse=function(t){for(var e=0,n=this.tail;null!==n&&e<t;e++)n=n.prev;if(e===t&&null!==n)return n.value},r.prototype.map=function(t,e){e=e||this;for(var n=new r,s=this.head;null!==s;)n.push(t.call(e,s.value,this)),s=s.next;return n},r.prototype.mapReverse=function(t,e){e=e||this;for(var n=new r,s=this.tail;null!==s;)n.push(t.call(e,s.value,this)),s=s.prev;return n},r.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var s=0;null!==r;s++)n=t(n,r.value,s),r=r.next;return n},r.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var s=this.length-1;null!==r;s--)n=t(n,r.value,s),r=r.prev;return n},r.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;null!==n;e++)t[e]=n.value,n=n.next;return t},r.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;null!==n;e++)t[e]=n.value,n=n.prev;return t},r.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new r;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var s=0,i=this.head;null!==i&&s<t;s++)i=i.next;for(;null!==i&&s<e;s++,i=i.next)n.push(i.value);return n},r.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new r;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var s=this.length,i=this.tail;null!==i&&s>e;s--)i=i.prev;for(;null!==i&&s>t;s--,i=i.prev)n.push(i.value);return n},r.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,r=this.head;null!==r&&n<t;n++)r=r.next;var i=[];for(n=0;r&&n<e;n++)i.push(r.value),r=this.removeNode(r);for(null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev),n=2;n<arguments.length;n++)r=s(this,r,arguments[n]);return i},r.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};try{n("6rDv")(r)}catch(l){}},Dxy4:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return p});var r=n("UhP/"),s=n("omvX"),i=n("8Y7J"),o=n("YEUz");const a=["mat-button",""],l=["*"],u=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class c{constructor(t){this._elementRef=t}}const h=Object(r.d)(Object(r.f)(Object(r.e)(c)));let d=(()=>{class t extends h{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of u)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,e){t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(i.Pb(i.l),i.Pb(o.d),i.Pb(s.a,8))},t.\u0275cmp=i.Jb({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){if(1&t&&i.Lc(r.b,1),2&t){let t;i.sc(t=i.ec())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(i.Fb("disabled",e.disabled||null),i.Hb("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[i.Bb],attrs:a,ngContentSelectors:l,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(i.mc(),i.Vb(0,"span",0),i.lc(1),i.Ub(),i.Qb(2,"span",1),i.Qb(3,"span",2)),2&t&&(i.Eb(2),i.Hb("mat-button-ripple-round",e.isRoundButton||e.isIconButton),i.nc("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[r.b],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Nb({type:t}),t.\u0275inj=i.Mb({imports:[[r.c,r.a],r.a]}),t})()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return l});var r=n("XNiG"),s=n("HDdC"),i=(n("7o/Q"),n("quSY")),o=n("x+ZX");class a extends s.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i.a,t.add(this.source.subscribe(new u(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.a.EMPTY)),t}refCount(){return Object(o.a)()(this)}}const l=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class u extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return i});var r=n("HDdC");const s=new r.a(t=>t.complete());function i(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):s}},EhIR:function(t,e,n){(function(t){var r;!function(t,s,i){function o(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function a(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function l(t,e){var n=new o(t),r=e&&e.state,s=n.next;return s.int32=function(){return 4294967296*n.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,r&&("object"==typeof r&&a(r,n),s.state=function(){return a(n,{})}),s}s&&s.exports?s.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(e,n,e,s))||(s.exports=r):this.alea=l}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},Fa5o:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("Cfvw"),s=n("lJxs"),i=n("gtzJ"),o=n("8Y7J");let a=(()=>{class t{init(){return Object(r.a)(fetch("assets/deployment/app-config.json").then(function(t){return t.json()})).pipe(Object(s.a)(t=>{t.production&&i.a(e=>{e.addEventProcessor(e=>(e.environment=t.backend.sentry_environment,e.release=t.version,e))}),window.config=t})).toPromise()}getConfig(){return window.config}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Lb({token:t,factory:t.\u0275fac}),t})()},G1b6:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("8Y7J"),s=n("M1BV"),i=n("2Vo4"),o=n("cUpR");let a=(()=>{class t{constructor(t,e,n){this._ref=t,this.apiService=e,this.sanitizer=n,this._latestValue=null,this._latestReturnedValue=null,this._result=new i.a(null),this.result=this._result.asObservable(),this._obj=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t,e=!0){const n=this.internalTransform(t,e);return this.asyncTrasnform(n)}internalTransform(t,e){return t?(this.previousUrl!==t&&(this.previousUrl=t,this._internalSubscription=this.apiService.getFile(t).subscribe(t=>{this._result.next(e?this.sanitizer.bypassSecurityTrustUrl(t):t)})),this.result):this.result}asyncTrasnform(t){return this._obj?t!==this._obj?(this._dispose(),this.asyncTrasnform(t)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,r.T.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(t){const e=this;this._obj=t,this._subscription=t.subscribe({next:function(n){return e._updateLatestValue(t,n)},error:t=>{throw t}})}_dispose(){var t,e;null===(t=this._subscription)||void 0===t||t.unsubscribe(),null===(e=this._internalSubscription)||void 0===e||e.unsubscribe(),this._internalSubscription=void 0,this._latestValue=null,this._latestReturnedValue=null,this._subscription=void 0,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.bc(),r.Pb(s.a),r.Pb(o.b))},t.\u0275pipe=r.Ob({name:"getfile",type:t,pure:!1}),t})()},G8sH:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return s});class r{constructor(t){this.user=t}get first_name(){return this.user.ext.first_name}get type(){return this.user.ext.type}get id(){return this.user.sub}get iat(){return this.user.iat}get exp(){return this.user.exp}get identifier(){return""}get session(){return""}}class s{constructor(t){this.data=t}get access_token(){return this.data.token}get refresh_token(){}}},GBY4:function(t,e,n){"use strict";var r=n("RA0T"),s=n("nFlj"),i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function l(t){return(t||"").toString().replace(a,"")}var u=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],c={hash:1,query:1};function h(t){var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var n,r={},s=typeof(t=t||e.location||{});if("blob:"===t.protocol)r=new p(unescape(t.pathname),{});else if("string"===s)for(n in r=new p(t,{}),c)delete r[n];else if("object"===s){for(n in t)n in c||(r[n]=t[n]);void 0===r.slashes&&(r.slashes=i.test(t.href))}return r}function d(t){t=l(t);var e=o.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function p(t,e,n){if(t=l(t),!(this instanceof p))return new p(t,e,n);var i,o,a,c,f,m,g=u.slice(),b=typeof e,y=this,v=0;for("object"!==b&&"string"!==b&&(n=e,e=null),n&&"function"!=typeof n&&(n=s.parse),e=h(e),i=!(o=d(t||"")).protocol&&!o.slashes,y.slashes=o.slashes||i&&e.slashes,y.protocol=o.protocol||e.protocol||"",t=o.rest,o.slashes||(g[3]=[/(.*)/,"pathname"]);v<g.length;v++)"function"!=typeof(c=g[v])?(m=c[1],(a=c[0])!=a?y[m]=t:"string"==typeof a?~(f=t.indexOf(a))&&("number"==typeof c[2]?(y[m]=t.slice(0,f),t=t.slice(f+c[2])):(y[m]=t.slice(f),t=t.slice(0,f))):(f=a.exec(t))&&(y[m]=f[1],t=t.slice(0,f.index)),y[m]=y[m]||i&&c[3]&&e[m]||"",c[4]&&(y[m]=y[m].toLowerCase())):t=c(t);n&&(y.query=n(y.query)),i&&e.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==e.pathname)&&(y.pathname=function(t,e){if(""===t)return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=n.length,s=n[r-1],i=!1,o=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),o++):o&&(0===r&&(i=!0),n.splice(r,1),o--);return i&&n.unshift(""),"."!==s&&".."!==s||n.push(""),n.join("/")}(y.pathname,e.pathname)),r(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(c=y.auth.split(":"),y.username=c[0]||"",y.password=c[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}p.prototype={set:function(t,e,n){var i=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||s.parse)(e)),i[t]=e;break;case"port":i[t]=e,r(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,/:\d+$/.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(e){var o="pathname"===t?"/":"#";i[t]=e.charAt(0)!==o?o+e:e}else i[t]=e;break;default:i[t]=e}for(var a=0;a<u.length;a++){var l=u[a];l[4]&&(i[l[1]]=i[l[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(t){t&&"function"==typeof t||(t=s.stringify);var e,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var i=r+(n.slashes?"//":"");return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.host+n.pathname,(e="object"==typeof n.query?t(n.query):n.query)&&(i+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(i+=n.hash),i}},p.extractProtocol=d,p.location=h,p.trimLeft=l,p.qs=s,t.exports=p},GJmQ:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function s(t,e=!1){return n=>n.lift(new i(t,e))}class i{constructor(t,e){this.predicate=t,this.inclusive=e}call(t,e){return e.subscribe(new o(t,this.predicate,this.inclusive))}}class o extends r.a{constructor(t,e,n){super(t),this.predicate=e,this.inclusive=n,this.index=0}_next(t){const e=this.destination;let n;try{n=this.predicate(t,this.index++)}catch(r){return void e.error(r)}this.nextOrComplete(t,n)}nextOrComplete(t,e){const n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())}}},GS7A:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return _}),n.d(e,"e",function(){return a}),n.d(e,"f",function(){return m}),n.d(e,"g",function(){return f}),n.d(e,"h",function(){return l}),n.d(e,"i",function(){return d}),n.d(e,"j",function(){return b}),n.d(e,"k",function(){return u}),n.d(e,"l",function(){return y}),n.d(e,"m",function(){return h}),n.d(e,"n",function(){return c}),n.d(e,"o",function(){return p}),n.d(e,"p",function(){return o}),n.d(e,"q",function(){return g}),n.d(e,"r",function(){return w}),n.d(e,"s",function(){return x});class r{}class s{}const i="*";function o(t,e){return{type:7,name:t,definitions:e,options:{}}}function a(t,e=null){return{type:4,styles:e,timings:t}}function l(t,e=null){return{type:3,steps:t,options:e}}function u(t,e=null){return{type:2,steps:t,options:e}}function c(t){return{type:6,styles:t,offset:null}}function h(t,e,n){return{type:0,name:t,styles:e,options:n}}function d(t){return{type:5,steps:t}}function p(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function f(t,e=null){return{type:8,animation:t,options:e}}function m(t=null){return{type:9,options:t}}function g(t,e=null){return{type:10,animation:t,options:e}}function b(t,e,n=null){return{type:11,selector:t,animation:e,options:n}}function y(t,e){return{type:12,timings:t,animation:e}}function v(t){Promise.resolve(null).then(t)}class _{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){v(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class w{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?v(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==s&&this._onFinish()}),t.onDestroy(()=>{++n==s&&this._onDestroy()}),t.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}const x="!"},GXSh:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("qJj6"),s=n("8Y7J");let i=(()=>{class t{constructor(t){this.config=t}transform(t){return(this.config.getBaseAssetUrl()||"")+t}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(r.a))},t.\u0275pipe=s.Ob({name:"assetUrl",type:t,pure:!0}),t})()},GyhO:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("LRne"),s=n("bHdf");function i(...t){return Object(s.a)(1)(Object(r.a)(...t))}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("7o/Q"),s=n("2QA8"),i=n("gRHU"),o=n("kJWO"),a=n("mCNh"),l=n("2fFW");let u=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[s.a])return t[s.a]()}return t||e||n?new r.a(t,e,n):new r.a(i.a)}(t,e,n);if(a.add(o?o.call(a,this.source):this.source||l.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),l.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){l.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:s}=t;if(e||s)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=c(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(s){n(s),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.a](){return this}pipe(...t){return 0===t.length?this:Object(a.b)(t)(this)}toPromise(t){return new(t=c(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function c(t){if(t||(t=l.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},"Ht+U":function(t,e,n){"use strict";n.d(e,"a",function(){return m}),n.d(e,"b",function(){return d}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return s}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return f}),n.d(e,"i",function(){return h}),n.d(e,"j",function(){return o}),n.d(e,"k",function(){return r}),n.d(e,"l",function(){return c}),n.d(e,"m",function(){return g}),n.d(e,"n",function(){return p}),n.d(e,"o",function(){return b});const r=9,s=13,i=27,o=32,a=35,l=36,u=37,c=38,h=39,d=40,p=48,f=57,m=65,g=90;function b(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}},HyWp:function(t,e,n){"use strict";const r=n("DHPt"),s=Symbol("max"),i=Symbol("length"),o=Symbol("lengthCalculator"),a=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),h=Symbol("lruList"),d=Symbol("cache"),p=Symbol("updateAgeOnGet"),f=()=>1,m=(t,e,n)=>{const r=t[d].get(e);if(r){const e=r.value;if(g(t,e)){if(y(t,r),!t[a])return}else n&&(t[p]&&(r.value.now=Date.now()),t[h].unshiftNode(r));return e.value}},g=(t,e)=>{if(!e||!e.maxAge&&!t[l])return!1;const n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[l]&&n>t[l]},b=t=>{if(t[i]>t[s])for(let e=t[h].tail;t[i]>t[s]&&null!==e;){const n=e.prev;y(t,e),e=n}},y=(t,e)=>{if(e){const n=e.value;t[u]&&t[u](n.key,n.value),t[i]-=n.length,t[d].delete(n.key),t[h].removeNode(e)}};class v{constructor(t,e,n,r,s){this.key=t,this.value=e,this.length=n,this.now=r,this.maxAge=s||0}}const _=(t,e,n,r)=>{let s=n.value;g(t,s)&&(y(t,n),t[a]||(s=void 0)),s&&e.call(r,s.value,s.key,t)};t.exports=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[s]=t.max||1/0;const e=t.length||f;if(this[o]="function"!=typeof e?f:e,this[a]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[l]=t.maxAge||0,this[u]=t.dispose,this[c]=t.noDisposeOnSet||!1,this[p]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[s]=t||1/0,b(this)}get max(){return this[s]}set allowStale(t){this[a]=!!t}get allowStale(){return this[a]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[l]=t,b(this)}get maxAge(){return this[l]}set lengthCalculator(t){"function"!=typeof t&&(t=f),t!==this[o]&&(this[o]=t,this[i]=0,this[h].forEach(t=>{t.length=this[o](t.value,t.key),this[i]+=t.length})),b(this)}get lengthCalculator(){return this[o]}get length(){return this[i]}get itemCount(){return this[h].length}rforEach(t,e){e=e||this;for(let n=this[h].tail;null!==n;){const r=n.prev;_(this,t,n,e),n=r}}forEach(t,e){e=e||this;for(let n=this[h].head;null!==n;){const r=n.next;_(this,t,n,e),n=r}}keys(){return this[h].toArray().map(t=>t.key)}values(){return this[h].toArray().map(t=>t.value)}reset(){this[u]&&this[h]&&this[h].length&&this[h].forEach(t=>this[u](t.key,t.value)),this[d]=new Map,this[h]=new r,this[i]=0}dump(){return this[h].map(t=>!g(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[h]}set(t,e,n){if((n=n||this[l])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,a=this[o](e,t);if(this[d].has(t)){if(a>this[s])return y(this,this[d].get(t)),!1;const o=this[d].get(t).value;return this[u]&&(this[c]||this[u](t,o.value)),o.now=r,o.maxAge=n,o.value=e,this[i]+=a-o.length,o.length=a,this.get(t),b(this),!0}const p=new v(t,e,a,r,n);return p.length>this[s]?(this[u]&&this[u](t,e),!1):(this[i]+=p.length,this[h].unshift(p),this[d].set(t,this[h].head),b(this),!0)}has(t){if(!this[d].has(t))return!1;const e=this[d].get(t).value;return!g(this,e)}get(t){return m(this,t,!0)}peek(t){return m(this,t,!1)}pop(){const t=this[h].tail;return t?(y(this,t),t.value):null}del(t){y(this,this[d].get(t))}load(t){this.reset();const e=Date.now();for(let n=t.length-1;n>=0;n--){const r=t[n],s=r.e||0;if(0===s)this.set(r.k,r.v);else{const t=s-e;t>0&&this.set(r.k,r.v,t)}}}prune(){this[d].forEach((t,e)=>m(this,e,!1))}}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IJgD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("XNiG"),s=n("2Vo4"),i=n("1G5W"),o=n("Oh6u"),a=n("8Y7J");let l=(()=>{class t{constructor(t){this.searchService=t,this.search=new r.a,this.searchParagraph=new r.a,this.unsubscribeAll=new r.a,this.searchTermSubject=new s.a(""),this.selectedSubject=new s.a(null),this.showAutocompleteSubject=new s.a(!1),this.autocompletesSubject=new s.a([]),this.searchTerm=this.searchTermSubject.asObservable(),this.selected=this.selectedSubject.asObservable(),this.showAutocomplete=this.showAutocompleteSubject.asObservable(),this.autocompletes=this.autocompletesSubject.asObservable(),this.initAutocomplete()}initAutocomplete(){this.searchService.autocomplete_render.pipe(Object(i.a)(this.unsubscribeAll)).subscribe(t=>{const e=t.append?this.autocompletesSubject.getValue():[];for(const r of t.items)for(const t of r.values)this.searchService.addValueAutocompleteRender(e,r.name,t);this.autocompletesSubject.next(e);const n=this.showAutocompleteSubject.getValue();this.showAutocompleteSubject.next(!n&&e.length>0)})}onEnterPressed(){const t=this.selectedSubject.getValue();if(this.showAutocompleteSubject.getValue()&&t){const e=this.autocompletesSubject.getValue()[t.sectionIndex].values[t.index].value;this.setSearchTerm(e),this.clearSelected(),this.startSearch(e)}else this.startSearch(this.searchTermSubject.getValue())}onClickAutocomplete(t,e){if(e.name===o.a.PARAGRAPH){const e=this.searchTermSubject.getValue().trim();this.setSearchTerm(e),this.clearSelected(),this.startSearchParagraph(e,t.id)}else this.setSearchTerm(t.value),this.clearSelected(),this.startSearch(t.value)}closeAutocomplete(){this.showAutocompleteSubject.next(!1)}clearSelected(){this.selectedSubject.next(null)}clearAutocompletes(){this.autocompletesSubject.next([]),this.showAutocompleteSubject.next(!1)}setSearchTerm(t){this.searchTermSubject.next(t)}startSearch(t){this.closeAutocomplete(),this.search.next(t)}startSearchParagraph(t,e){this.closeAutocomplete(),this.searchParagraph.next({searchTerm:t,resourceId:e})}onKeyUp(t){this.setSearchTerm(t)}onKeyDown(t){const e=t.target.selectionStart,n=t.target.value,r=t.key;if(1===n.length&&(this.closeAutocomplete(),this.clearSelected()),"Escape"===r&&(this.closeAutocomplete(),this.clearSelected()),1===r.length||"Backspace"===r){this.clearSelected();let s="";s="Backspace"===t.key?n.substr(0,e-1)+n.substr(e):n.substr(0,e)+r+n.substr(e);const i=s.split(" ");let o=0,a="",l=0;for(const t of i)if(o=o+t.length+1,l+=1,o>=e){a=t;break}this.searchService.typeahead(s,a,l,i,r)}"ArrowDown"!==t.key&&"ArrowUp"!==t.key||this.onArrowPressed(t)}onArrowPressed(t){const e=this.showAutocompleteSubject.getValue(),n=this.autocompletesSubject.getValue(),r=this.selectedSubject.getValue();if("ArrowDown"===t.key&&e){if(r){const t=Object.assign({},r);t.index+=1,n[t.sectionIndex].values.length-1<t.index&&(t.sectionIndex+=1,n.length-1<t.sectionIndex&&(t.sectionIndex=0),t.index=0),this.selectedSubject.next(t)}else this.selectedSubject.next({sectionIndex:0,index:0});t.stopPropagation(),t.preventDefault()}if("ArrowUp"===t.key&&e){if(r){const t=Object.assign({},r);t.index-=1,t.index<0&&(t.sectionIndex-=1,t.sectionIndex<0&&(t.sectionIndex=n.length-1),t.index=n[t.sectionIndex].values.length-1),this.selectedSubject.next(t)}t.stopPropagation(),t.preventDefault()}}}return t.\u0275fac=function(e){return new(e||t)(a.Zb(o.h))},t.\u0275prov=a.Lb({token:t,factory:t.\u0275fac}),t})()},IheW:function(t,e,n){"use strict";n.d(e,"a",function(){return I}),n.d(e,"b",function(){return B}),n.d(e,"c",function(){return d});var r=n("8Y7J"),s=n("LRne"),i=n("HDdC"),o=n("bOdf"),a=n("pLZG"),l=n("lJxs"),u=n("SVse");class c{}class h{}class d{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),s=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(s):this.headers.set(r,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof d?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new d;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof d?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===s.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class p{encodeKey(t){return f(t)}encodeValue(t){return f(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function f(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class m{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new p,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[s,i]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],o=n.get(s)||[];o.push(i),n.set(s,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new m({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function g(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function b(t){return"undefined"!=typeof Blob&&t instanceof Blob}function y(t){return"undefined"!=typeof FormData&&t instanceof FormData}class v{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.params&&(this.params=s.params)),this.headers||(this.headers=new d),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new m,this.urlWithParams=e}serializeBody(){return null===this.body?null:g(this.body)||b(this.body)||y(this.body)||"string"==typeof this.body?this.body:this.body instanceof m?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||y(this.body)?null:b(this.body)?this.body.type||null:g(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof m?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,i=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,o=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(l=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),l)),new v(e,n,s,{params:l,headers:a,reportProgress:o,responseType:r,withCredentials:i})}}var _=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class w{constructor(t,e=200,n="OK"){this.headers=t.headers||new d,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class x extends w{constructor(t={}){super(t),this.type=_.ResponseHeader}clone(t={}){return new x({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class k extends w{constructor(t={}){super(t),this.type=_.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new k({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class S extends w{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function C(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let I=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof v)r=t;else{let s,i;s=n.headers instanceof d?n.headers:new d(n.headers),n.params&&(i=n.params instanceof m?n.params:new m({fromObject:n.params})),r=new v(t,e,void 0!==n.body?n.body:null,{headers:s,params:i,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(s.a)(r).pipe(Object(o.a)(t=>this.handler.handle(t)));if(t instanceof v||"events"===n.observe)return i;const u=i.pipe(Object(a.a)(t=>t instanceof k));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return u.pipe(Object(l.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return u.pipe(Object(l.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return u.pipe(Object(l.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return u.pipe(Object(l.a)(t=>t.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new m).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,C(n,e))}post(t,e,n={}){return this.request("POST",t,C(n,e))}put(t,e,n={}){return this.request("PUT",t,C(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(c))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();class E{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const O=new r.r("HTTP_INTERCEPTORS");let T=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const N=/^\)\]\}',?\n/;class A{}let R=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),F=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new i.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let s=null;const i=()=>{if(null!==s)return s;const e=1223===n.status?204:n.status,r=n.statusText||"OK",i=new d(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return s=new x({headers:i,status:e,statusText:r,url:o}),s},o=()=>{let{headers:r,status:s,statusText:o,url:a}=i(),l=null;204!==s&&(l=void 0===n.response?n.responseText:n.response),0===s&&(s=l?200:0);let u=s>=200&&s<300;if("json"===t.responseType&&"string"==typeof l){const t=l;l=l.replace(N,"");try{l=""!==l?JSON.parse(l):null}catch(c){l=t,u&&(u=!1,l={error:c,text:l})}}u?(e.next(new k({body:l,headers:r,status:s,statusText:o,url:a||void 0})),e.complete()):e.error(new S({error:l,headers:r,status:s,statusText:o,url:a||void 0}))},a=t=>{const{url:r}=i(),s=new S({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(s)};let l=!1;const u=r=>{l||(e.next(i()),l=!0);let s={type:_.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(s.total=r.total),"text"===t.responseType&&n.responseText&&(s.partialText=n.responseText),e.next(s)},c=t=>{let n={type:_.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",c)),n.send(r),e.next({type:_.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",c)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(A))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const D=new r.r("XSRF_COOKIE_NAME"),P=new r.r("XSRF_HEADER_NAME");class ${}let M=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(u.B)(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(u.d),r.Zb(r.C),r.Zb(D))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),L=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb($),r.Zb(P))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),j=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(O,[]);this.chain=t.reduceRight((t,e)=>new E(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(h),r.Zb(r.s))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),z=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:L,useClass:T}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:D,useValue:e.cookieName}:[],e.headerName?{provide:P,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:[L,{provide:O,useExisting:L,multi:!0},{provide:$,useClass:M},{provide:D,useValue:"XSRF-TOKEN"},{provide:P,useValue:"X-XSRF-TOKEN"}]}),t})(),B=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:[I,{provide:c,useClass:j},F,{provide:h,useExisting:F},R,{provide:A,useExisting:R}],imports:[[z.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})()},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return s});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class s extends r{constructor(t,e=r.now){super(t,()=>s.delegate&&s.delegate!==this?s.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return s.delegate&&s.delegate!==this?s.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},IzEk:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7o/Q"),s=n("4I5i"),i=n("EY2u");function o(t){return e=>0===t?Object(i.b)():e.lift(new a(t))}class a{constructor(t){if(this.total=t,this.total<0)throw new s.a}call(t,e){return e.subscribe(new l(t,this.total))}}class l extends r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}},J66h:function(t,e,n){var r;!function(n,s){t.exports=function(n){"use strict";var s,i=(n=n||{}).Base64,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t.charAt(n)]=n;return e}(o),l=String.fromCharCode,u=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?l(192|e>>>6)+l(128|63&e):l(224|e>>>12&15)+l(128|e>>>6&63)+l(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return l(240|e>>>18&7)+l(128|e>>>12&63)+l(128|e>>>6&63)+l(128|63&e)},c=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,h=function(t){return t.replace(c,u)},d=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[o.charAt(n>>>18),o.charAt(n>>>12&63),e>=2?"=":o.charAt(n>>>6&63),e>=1?"=":o.charAt(63&n)].join("")},p=n.btoa&&"function"==typeof n.btoa?function(t){return n.btoa(t)}:function(t){if(t.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return t.replace(/[\s\S]{1,3}/g,d)},f=function(t){return p(h(String(t)))},m=function(t){return t.replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,"")},g=function(t,e){return e?m(f(t)):f(t)};n.Uint8Array&&(s=function(t,e){for(var n="",r=0,s=t.length;r<s;r+=3){var i=t[r+1],a=t[r+2],l=t[r]<<16|i<<8|a;n+=o.charAt(l>>>18)+o.charAt(l>>>12&63)+(void 0!==i?o.charAt(l>>>6&63):"=")+(void 0!==a?o.charAt(63&l):"=")}return e?m(n):n});var b,y=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,v=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return l(55296+(e>>>10))+l(56320+(1023&e));case 3:return l((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return l((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},_=function(t){return t.replace(y,v)},w=function(t){var e=t.length,n=e%4,r=(e>0?a[t.charAt(0)]<<18:0)|(e>1?a[t.charAt(1)]<<12:0)|(e>2?a[t.charAt(2)]<<6:0)|(e>3?a[t.charAt(3)]:0),s=[l(r>>>16),l(r>>>8&255),l(255&r)];return s.length-=[0,0,2,1][n],s.join("")},x=n.atob&&"function"==typeof n.atob?function(t){return n.atob(t)}:function(t){return t.replace(/\S{1,4}/g,w)},k=function(t){return x(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},S=function(t){return String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},C=function(t){return function(t){return _(x(t))}(S(t))};if(n.Uint8Array&&(b=function(t){return Uint8Array.from(k(S(t)),function(t){return t.charCodeAt(0)})}),n.Base64={VERSION:"2.6.4",atob:k,btoa:p,fromBase64:C,toBase64:g,utob:h,encode:g,encodeURI:function(t){return g(t,!0)},btou:_,decode:C,noConflict:function(){var t=n.Base64;return n.Base64=i,t},fromUint8Array:s,toUint8Array:b},"function"==typeof Object.defineProperty){var I=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",I(function(){return C(this)})),Object.defineProperty(String.prototype,"toBase64",I(function(t){return g(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",I(function(){return g(this,!0)}))}}return n.Meteor&&(Base64=n.Base64),t.exports?t.exports.Base64=n.Base64:void 0===(r=(function(){return n.Base64}).apply(e,[]))||(t.exports=r),{Base64:n.Base64}}(n)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this)},JIr8:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("zx2A");function s(t){return function(e){const n=new i(t),r=e.lift(n);return n.caught=r}}class i{constructor(t){this.selector=t}call(t,e){return e.subscribe(new o(t,this.selector,this.caught))}}class o extends r.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const s=new r.a(this);this.add(s);const i=Object(r.c)(n,s);i!==s&&this.add(i)}}}},JX91:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("GyhO"),s=n("z+Ro");function i(...t){const e=t[t.length-1];return Object(s.a)(e)?(t.pop(),n=>Object(r.a)(t,n,e)):e=>Object(r.a)(t,e)}},"Ju5/":function(t,e,n){"use strict";var r=n("XqMk"),s="object"==typeof self&&self&&self.Object===Object&&self,i=r.a||s||Function("return this")();e.a=i},Kj3r:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q"),s=n("D0XW");function i(t,e=s.a){return n=>n.lift(new o(t,e))}class o{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new a(t,this.dueTime,this.scheduler))}}class a extends r.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(l,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function l(t){t.debouncedNext()}},Kqap:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function s(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new i(t,e,n))}}class i{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new o(t,this.accumulator,this.seed,this.hasSeed))}}class o extends r.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},L3Qv:function(t,e,n){"use strict";e.a=function(){return!1}},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("z+Ro"),s=n("yCtX"),i=n("jZKg");function o(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(i.a)(t,e)):Object(s.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return s});const s=r()},M1BV:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("IheW"),s=n("HDdC"),i=n("LRne"),o=n("JIr8"),a=n("qJj6"),l=n("PjsD"),u=n("8Y7J");let c=(()=>{class t{constructor(t,e,n){this.http=t,this.config=e,this.authService=n}createHeaders(t=!0){let e=new r.c;if(e=e.set("Content-Type","application/json"),e=e.set("Accept","application/json"),t){let t="";t="Bearer "+this.authService.getToken(),e=e.set("Authorization",t)}return e}get(t,e,n,r){r&&(t=this.config.getAPIURL()+t);const s={headers:this.createHeaders(e)};return n&&(s.responseType=n),this.http.get(t,s)}getFile(t){return new s.a(e=>{let n=null;return this.http.get(t,{headers:this.createHeaders(!0),responseType:"blob"}).pipe(Object(o.a)(t=>404===t.status?Object(i.a)("notfound"):Object(i.a)("error"))).subscribe(t=>{n="error"===t||"notfound"===t?"/assets/images/default_image.jpg":URL.createObjectURL(t),e.next(n)}),()=>{n&&(URL.revokeObjectURL(n),n=null)}})}post(t,e,n,r,s,i,o){let a=this.createHeaders(n);if(s&&(a=a.set("Content-Type",s)),o)for(const u of o)a=a.set(u[0],u[1]);i&&(t=this.config.getAPIURL()+t);const l={headers:a};return r&&(l.responseType=r),this.http.post(t,e,l)}put(t,e,n,r){const s=this.createHeaders(n);return r&&(t=this.config.getAPIURL()+t),this.http.put(t,e,{headers:s})}head(t,e,n){const r=this.createHeaders(e);return n&&(t=this.config.getAPIURL()+t),this.http.head(t,{headers:r})}delete(t,e,n){const r=this.createHeaders(e);return n&&(t=this.config.getAPIURL()+t),this.http.delete(t,{headers:r})}patch(t,e,n,r,s,i){let o=this.createHeaders(n);if(r&&(o=o.set("Content-Type",r)),i)for(const a of i)o=o.set(a[0],a[1]);return s&&(t=this.config.getAPIURL()+t),this.http.patch(t,e,{headers:o})}getBlob(t,e){let n=this.createHeaders(e);return n=n.set("Accept","*/*"),this.http.get(t,{headers:n,responseType:"blob"})}getFileText(t,e){let n=this.createHeaders(e);return n=n.set("Accept","*/*"),this.http.get(t,{headers:n,responseType:"text"})}uploadFile(t,e,n,r,s){const i=[["X-UPLOAD-FILENAME",n]];if(e.byteLength&&i.push(["X-UPLOAD-SIZE",e.byteLength.toString()]),n.split(".").length>1){const t=n.split(".").splice(-1)[0];i.push(["X-UPLOAD-EXTENSION",t])}return this.patch(t,e,!0,r,s,i)}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(r.a),u.Zb(a.a),u.Zb(l.a))},t.\u0275prov=u.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},NXyV:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),s=n("Cfvw"),i=n("EY2u");function o(t){return new r.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(s.a)(n):Object(i.b)()).subscribe(e)})}},NrYi:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("8Y7J");function s(t,e){1&t&&(r.Vb(0,"div",6),r.Vb(1,"h2",7),r.Hc(2),r.ic(3,"translate"),r.Ub(),r.Ub()),2&t&&(r.Eb(2),r.Jc(" ",r.jc(3,1,"search.title.results")," "))}function i(t,e){if(1&t){const t=r.Wb();r.Tb(0),r.Vb(1,"stf-resource-list-item",8),r.dc("clickItem",function(e){return r.xc(t),r.hc(2).onClickItem(e)}),r.Ub(),r.Sb()}if(2&t){const t=e.$implicit,n=e.index,s=r.hc(2);r.Eb(1),r.nc("item",t)("position",n+s.page*s.size)("searchTerm",s.searchTerm)}}function o(t,e){1&t&&(r.Vb(0,"div",9),r.Vb(1,"h2",7),r.Hc(2),r.ic(3,"translate"),r.Ub(),r.Ub()),2&t&&(r.Eb(2),r.Jc(" ",r.jc(3,1,"search.title.other_results")," "))}function a(t,e){if(1&t){const t=r.Wb();r.Tb(0),r.Vb(1,"stf-resource-grid-item",10),r.dc("clickItem",function(e){return r.xc(t),r.hc(2).onClickItem(e)}),r.Ub(),r.Sb()}if(2&t){const t=e.$implicit,n=e.index,s=r.hc(2);r.Eb(1),r.nc("item",t)("position",n+s.page*s.size)}}function l(t,e){1&t&&(r.Tb(0),r.Qb(1,"stf-no-results"),r.Sb())}function u(t,e){if(1&t&&(r.Tb(0),r.Fc(1,s,4,3,"div",1),r.Vb(2,"div",2),r.Fc(3,i,2,3,"ng-container",3),r.Ub(),r.Fc(4,o,4,3,"div",4),r.Vb(5,"div",5),r.Fc(6,a,2,2,"ng-container",3),r.Ub(),r.Fc(7,l,2,0,"ng-container",0),r.Sb()),2&t){const t=r.hc();r.Eb(1),r.nc("ngIf",t.showTitles&&t.results.fullResults.length>0),r.Eb(2),r.nc("ngForOf",t.results.fullResults),r.Eb(1),r.nc("ngIf",t.showTitles&&t.results.fullResults.length>0&&t.results.simpleResults.length>0),r.Eb(2),r.nc("ngForOf",t.getSimpleResults()),r.Eb(1),r.nc("ngIf",0===t.results.results.length)}}let c=(()=>{class t{constructor(){this.page=0,this.size=10,this.showTitles=!0,this.clickItem=new r.n}ngOnInit(){}getSimpleResults(){var t;return(null===(t=this.results)||void 0===t?void 0:t.simpleResults.concat(this.results.extraResults))||[]}onClickItem(t){this.clickItem.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Jb({type:t,selectors:[["stf-search-grid"]],inputs:{results:"results",page:"page",size:"size",searchTerm:"searchTerm",showTitles:"showTitles"},outputs:{clickItem:"clickItem"},decls:1,vars:1,consts:[[4,"ngIf"],["class","search-list-title-container",4,"ngIf"],[1,"search-list-container"],[4,"ngFor","ngForOf"],["class","search-grid-title-container",4,"ngIf"],[1,"search-grid-container"],[1,"search-list-title-container"],[1,"search-header-title"],[3,"item","position","searchTerm","clickItem"],[1,"search-grid-title-container"],[3,"item","position","clickItem"]],template:function(t,e){1&t&&r.Fc(0,u,8,5,"ng-container",0),2&t&&r.nc("ngIf",e.results)},styles:[".search-header-title[_ngcontent-%COMP%]{font-size:var(--stf-font-size-title);font-weight:var(--stf-font-weight-bold);margin:0}.search-list-title-container[_ngcontent-%COMP%]{margin:16px 0 20px}.grid-item-selected[_ngcontent-%COMP%]{background-color:var(--stf-gray-background)}mat-form-field[_ngcontent-%COMP%]{width:100%}.search-grid-type-icon[_ngcontent-%COMP%]{fill:rgba(34,31,32,.30196078431372547);cursor:pointer;height:100%;margin:0 8px;width:25px}.search-grid-type-icon-active[_ngcontent-%COMP%]{fill:#221f20}.search-grid-title-container[_ngcontent-%COMP%]{margin:52px 0 16px}.search-grid-container[_ngcontent-%COMP%]{grid-gap:20px 30px;display:grid;grid-template-columns:repeat(4,minmax(0,1fr))}@media (max-width:1200px){.search-grid-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (max-width:992px){.search-grid-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (max-width:540px){.search-grid-container[_ngcontent-%COMP%]{grid-template-columns:minmax(0,1fr)}}.search-grid-container__full-width[_ngcontent-%COMP%]{grid-column-end:5;grid-column-start:1}@media (max-width:1200px){.search-grid-container__full-width[_ngcontent-%COMP%]{grid-column-end:4}}@media (max-width:992px){.search-grid-container__full-width[_ngcontent-%COMP%]{grid-column-end:3}}@media (max-width:540px){.search-grid-container__full-width[_ngcontent-%COMP%]{grid-column-end:2}}"]}),t})()},Oh6u:function(t,e,n){"use strict";n.d(e,"a",function(){return VM}),n.d(e,"h",function(){return UM}),n.d(e,"i",function(){return HM}),n.d(e,"j",function(){return Mn}),n.d(e,"f",function(){return ZM}),n.d(e,"e",function(){return Wn}),n.d(e,"k",function(){return oj}),n.d(e,"l",function(){return aj}),n.d(e,"d",function(){return Ot}),n.d(e,"b",function(){return Qt}),n.d(e,"g",function(){return se}),n.d(e,"c",function(){return qW});var r={};n.r(r),n.d(r,"shuffle",function(){return Jn}),n.d(r,"shuffleCombo",function(){return Qn}),n.d(r,"clamp",function(){return tr}),n.d(r,"nearestLargerEven",function(){return er}),n.d(r,"sum",function(){return nr}),n.d(r,"randUniform",function(){return rr}),n.d(r,"distSquared",function(){return sr}),n.d(r,"assert",function(){return ir}),n.d(r,"assertShapesMatch",function(){return or}),n.d(r,"assertNonNull",function(){return ar}),n.d(r,"flatten",function(){return lr}),n.d(r,"sizeFromShape",function(){return ur}),n.d(r,"isScalarShape",function(){return cr}),n.d(r,"arraysEqual",function(){return hr}),n.d(r,"isInt",function(){return dr}),n.d(r,"tanh",function(){return pr}),n.d(r,"sizeToSquarishShape",function(){return fr}),n.d(r,"createShuffledIndices",function(){return mr}),n.d(r,"rightPad",function(){return gr}),n.d(r,"repeatedTry",function(){return br}),n.d(r,"inferFromImplicitShape",function(){return yr}),n.d(r,"parseAxisParam",function(){return vr}),n.d(r,"squeezeShape",function(){return _r}),n.d(r,"getTypedArrayFromDType",function(){return wr}),n.d(r,"getArrayFromDType",function(){return xr}),n.d(r,"checkConversionForErrors",function(){return kr}),n.d(r,"isValidDtype",function(){return Sr}),n.d(r,"hasEncodingLoss",function(){return Cr}),n.d(r,"isTypedArray",function(){return Ir}),n.d(r,"bytesPerElement",function(){return Er}),n.d(r,"bytesFromStringArray",function(){return Or}),n.d(r,"isString",function(){return Tr}),n.d(r,"isBoolean",function(){return Nr}),n.d(r,"isNumber",function(){return Ar}),n.d(r,"inferDtype",function(){return Rr}),n.d(r,"isFunction",function(){return Fr}),n.d(r,"nearestDivisor",function(){return Dr}),n.d(r,"computeStrides",function(){return Pr}),n.d(r,"toNestedArray",function(){return Mr}),n.d(r,"makeOnesTypedArray",function(){return Lr}),n.d(r,"makeZerosTypedArray",function(){return jr}),n.d(r,"makeZerosNestedTypedArray",function(){return zr}),n.d(r,"assertNonNegativeIntegerDimensions",function(){return Br}),n.d(r,"locToIndex",function(){return Vr}),n.d(r,"indexToLoc",function(){return Ur}),n.d(r,"isPromise",function(){return Wr}),n.d(r,"hexToLong",function(){return ca}),n.d(r,"fingerPrint64",function(){return wa}),n.d(r,"createScalarValue",function(){return xa}),n.d(r,"toTypedArray",function(){return ka}),n.d(r,"now",function(){return Sa}),n.d(r,"fetch",function(){return Ca}),n.d(r,"encodeString",function(){return Ia}),n.d(r,"decodeString",function(){return Ea});var s={};n.r(s),n.d(s,"makeTypesMatch",function(){return Xa}),n.d(s,"assertTypesMatch",function(){return Ja}),n.d(s,"isTensorInList",function(){return Qa}),n.d(s,"getTensorsInContainer",function(){return tl});var i={};n.r(i),n.d(i,"isMobile",function(){return ll}),n.d(i,"isBrowser",function(){return ul});var o={};n.r(o),n.d(o,"copyModel",function(){return au}),n.d(o,"listModels",function(){return iu}),n.d(o,"moveModel",function(){return lu}),n.d(o,"removeModel",function(){return ou}),n.d(o,"browserFiles",function(){return bu}),n.d(o,"browserHTTPRequest",function(){return Iu}),n.d(o,"concatenateArrayBuffers",function(){return Il}),n.d(o,"decodeWeights",function(){return xl}),n.d(o,"encodeWeights",function(){return wl}),n.d(o,"fromMemory",function(){return Tu}),n.d(o,"getLoadHandlers",function(){return Dl}),n.d(o,"getModelArtifactsInfoForJSON",function(){return Ol}),n.d(o,"getSaveHandlers",function(){return Fl}),n.d(o,"http",function(){return Cu}),n.d(o,"isHTTPScheme",function(){return ku}),n.d(o,"loadWeights",function(){return _u}),n.d(o,"registerLoadRouter",function(){return Rl}),n.d(o,"registerSaveRouter",function(){return Al}),n.d(o,"weightsLoaderFactory",function(){return wu}),n.d(o,"withSaveHandler",function(){return Nu});var a={};n.r(a),n.d(a,"fromPixelsAsync",function(){return Fu}),n.d(a,"toPixels",function(){return Du}),n.d(a,"fromPixels",function(){return Pu});var l={};n.r(l),n.d(l,"assertParamsValid",function(){return $u}),n.d(l,"maskToAxes",function(){return Mu}),n.d(l,"computeOutShape",function(){return Lu}),n.d(l,"stridesWithElidedDims",function(){return ju}),n.d(l,"getNormalizedAxes",function(){return Vu}),n.d(l,"startIndicesWithElidedDims",function(){return Uu}),n.d(l,"stopIndicesWithElidedDims",function(){return Wu}),n.d(l,"stridesForAxis",function(){return Hu}),n.d(l,"startForAxis",function(){return Gu}),n.d(l,"stopForAxis",function(){return qu}),n.d(l,"isSliceContinous",function(){return Zu}),n.d(l,"computeFlatOffset",function(){return Ku}),n.d(l,"parseSliceParams",function(){return Yu}),n.d(l,"sliceInfo",function(){return Xu});var u={};n.r(u),n.d(u,"Serializable",function(){return Ju}),n.d(u,"SerializationMap",function(){return Qu}),n.d(u,"registerClass",function(){return tc});var c={};n.r(c),n.d(c,"conv2d",function(){return Fd}),n.d(c,"depthwiseConv2d",function(){return $d}),n.d(c,"matMul",function(){return Ld});var h={};n.r(h),n.d(h,"segOpComputeOptimalWindowSize",function(){return mf}),n.d(h,"computeOutShape",function(){return gf}),n.d(h,"collectGatherOpShapeInfo",function(){return bf});var d={};n.r(d),n.d(d,"axesAreInnerMostDims",function(){return Sh}),n.d(d,"combineLocations",function(){return Ch}),n.d(d,"computeOutAndReduceShapes",function(){return Ih}),n.d(d,"expandShapeToKeepDim",function(){return Eh}),n.d(d,"assertAxesAreInnerMostDims",function(){return Oh}),n.d(d,"getAxesPermutation",function(){return Th}),n.d(d,"getUndoAxesPermutation",function(){return Nh}),n.d(d,"getInnerMostAxes",function(){return Ah}),n.d(d,"getBroadcastDims",function(){return Jc}),n.d(d,"getReductionAxes",function(){return Qc}),n.d(d,"assertAndGetBroadcastShape",function(){return th}),n.d(d,"assertParamsConsistent",function(){return Op}),n.d(d,"computeOutShape",function(){return Tp}),n.d(d,"computeDilation2DInfo",function(){return mc}),n.d(d,"computePool2DInfo",function(){return gc}),n.d(d,"computePool3DInfo",function(){return bc}),n.d(d,"computeConv2DInfo",function(){return yc}),n.d(d,"computeConv3DInfo",function(){return vc}),n.d(d,"computeDefaultPad",function(){return _c}),n.d(d,"tupleValuesAreOne",function(){return Cc}),n.d(d,"eitherStridesOrDilationsAreOne",function(){return Ic}),n.d(d,"convertConv2DDataFormat",function(){return Ec}),n.d(d,"getFusedDyActivation",function(){return Td}),n.d(d,"getFusedBiasGradient",function(){return Nd}),n.d(d,"applyActivation",function(){return Ad}),n.d(d,"shouldFuse",function(){return Rd}),n.d(d,"PARALLELIZE_THRESHOLD",function(){return Np}),n.d(d,"computeOptimalWindowSize",function(){return Ap}),n.d(d,"slice_util",function(){return l}),n.d(d,"upcastType",function(){return Ka}),n.d(d,"getImageCenter",function(){return Rp}),n.d(d,"getReshaped",function(){return Fp}),n.d(d,"getPermuted",function(){return Dp}),n.d(d,"getReshapedPermuted",function(){return Pp}),n.d(d,"getSliceBeginCoords",function(){return $p}),n.d(d,"getSliceSize",function(){return Mp}),n.d(d,"prepareAndValidate",function(){return Lp}),n.d(d,"validateUpdateShape",function(){return jp}),n.d(d,"validateInput",function(){return zp}),n.d(d,"calculateShapes",function(){return Bp}),n.d(d,"SELU_SCALEALPHA",function(){return Vp}),n.d(d,"SELU_SCALE",function(){return Up}),n.d(d,"ERF_P",function(){return Wp}),n.d(d,"ERF_A1",function(){return Hp}),n.d(d,"ERF_A2",function(){return Gp}),n.d(d,"ERF_A3",function(){return qp}),n.d(d,"ERF_A4",function(){return Zp}),n.d(d,"ERF_A5",function(){return Kp}),n.d(d,"warn",function(){return Yp}),n.d(d,"log",function(){return Xp}),n.d(d,"mergeRealAndImagArrays",function(){return Jp}),n.d(d,"splitRealAndImagArrays",function(){return Qp}),n.d(d,"complexWithEvenIndex",function(){return tf}),n.d(d,"complexWithOddIndex",function(){return ef}),n.d(d,"getComplexWithIndex",function(){return nf}),n.d(d,"assignToTypedArray",function(){return rf}),n.d(d,"exponents",function(){return sf}),n.d(d,"exponent",function(){return of}),n.d(d,"decodeEinsumEquation",function(){return lf}),n.d(d,"getEinsumPermutation",function(){return uf}),n.d(d,"checkEinsumDimSizes",function(){return cf}),n.d(d,"getEinsumComputePath",function(){return hf}),n.d(d,"isIdentityPermutation",function(){return df}),n.d(d,"prepareSplitSize",function(){return ff}),n.d(d,"segment_util",function(){return h}),n.d(d,"fromUint8ToStringArray",function(){return yf}),n.d(d,"fromStringArrayToUint8",function(){return vf});var p={};n.r(p),n.d(p,"nonMaxSuppressionV3Impl",function(){return Hd}),n.d(p,"nonMaxSuppressionV4Impl",function(){return Gd}),n.d(p,"nonMaxSuppressionV5Impl",function(){return qd}),n.d(p,"whereImpl",function(){return _f});var f={};n.r(f),n.d(f,"json",function(){return vx});var m={};n.r(m),n.d(m,"json",function(){return _x});var g={};n.r(g),n.d(g,"json",function(){return wx});var b={};n.r(b),n.d(b,"json",function(){return xx});var y={};n.r(y),n.d(y,"json",function(){return kx});var v={};n.r(v),n.d(v,"json",function(){return Sx});var _={};n.r(_),n.d(_,"json",function(){return Cx});var w={};n.r(w),n.d(w,"json",function(){return Ix});var x={};n.r(x),n.d(x,"json",function(){return Ex});var k={};n.r(k),n.d(k,"json",function(){return Ox});var S={};n.r(S),n.d(S,"json",function(){return Tx});var C={};n.r(C),n.d(C,"json",function(){return Nx});var I={};n.r(I),n.d(I,"json",function(){return Ax});var E={};n.r(E),n.d(E,"json",function(){return Rx});var O={};n.r(O),n.d(O,"json",function(){return Fx});var T={};n.r(T),n.d(T,"json",function(){return Dx});var N={};n.r(N),n.d(N,"json",function(){return Px});var A={};n.r(A),n.d(A,"json",function(){return $x});var R={};n.r(R),n.d(R,"json",function(){return Mx});var F={};n.r(F),n.d(F,"simpleAbsImpl",function(){return Qk}),n.d(F,"addImpl",function(){return Wk}),n.d(F,"bincountImpl",function(){return $S}),n.d(F,"bincountReduceImpl",function(){return MS}),n.d(F,"ceilImpl",function(){return zS}),n.d(F,"concatImpl",function(){return GS}),n.d(F,"equalImpl",function(){return OC}),n.d(F,"expImpl",function(){return jC}),n.d(F,"expm1Impl",function(){return WC}),n.d(F,"floorImpl",function(){return aI}),n.d(F,"gatherNdImpl",function(){return mI}),n.d(F,"gatherV2Impl",function(){return bI}),n.d(F,"greaterImpl",function(){return vI}),n.d(F,"greaterEqualImpl",function(){return xI}),n.d(F,"lessImpl",function(){return RI}),n.d(F,"lessEqualImpl",function(){return PI}),n.d(F,"linSpaceImpl",function(){return LI}),n.d(F,"logImpl",function(){return zI}),n.d(F,"maxImpl",function(){return eE}),n.d(F,"maximumImpl",function(){return sE}),n.d(F,"minimumImpl",function(){return fE}),n.d(F,"multiplyImpl",function(){return _C}),n.d(F,"negImpl",function(){return SE}),n.d(F,"notEqualImpl",function(){return RE}),n.d(F,"prodImpl",function(){return HE}),n.d(F,"rangeImpl",function(){return qE}),n.d(F,"rsqrtImpl",function(){return iO}),n.d(F,"sliceImpl",function(){return RS}),n.d(F,"sparseFillEmptyRowsImpl",function(){return CO}),n.d(F,"sparseReshapeImpl",function(){return EO}),n.d(F,"sparseSegmentReductionImpl",function(){return TO}),n.d(F,"squaredDifferenceImpl",function(){return MO}),n.d(F,"stridedSliceImpl",function(){return VO}),n.d(F,"stringNGramsImpl",function(){return HO}),n.d(F,"stringSplitImpl",function(){return ZO}),n.d(F,"stringToHashBucketFastImpl",function(){return YO}),n.d(F,"subImpl",function(){return YC}),n.d(F,"tileImpl",function(){return eT}),n.d(F,"topKImpl",function(){return nT}),n.d(F,"transposeImpl",function(){return oS}),n.d(F,"uniqueImpl",function(){return aT});var D={};n.r(D),n.d(D,"Upload",function(){return JL}),n.d(D,"canStoreURLs",function(){return CL}),n.d(D,"defaultOptions",function(){return XL}),n.d(D,"isSupported",function(){return ej}),n.d(D,"enableDebugLog",function(){return lL}),n.d(D,"HttpStack",function(){return NL});var P=n("QpMS"),$=n("HyWp"),M=n("2Vo4"),L=n("z6cu"),j=n("LRne"),z=n("lJxs"),B=n("JIr8"),V=n("vkgz"),U=n("5+tZ"),W=n("pLZG"),H=n("EY2u"),G=n("w1tV"),q=n("zx2A");class Z{constructor(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}call(t,e){return e.subscribe(new K(t,this.project,this.concurrent,this.scheduler))}}class K extends q.b{constructor(t,e,n,r){super(t),this.project=e,this.concurrent=n,this.scheduler=r,this.index=0,this.active=0,this.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(this.buffer=[])}static dispatch(t){const{subscriber:e,result:n,value:r,index:s}=t;e.subscribeToProjection(n,r,s)}_next(t){const e=this.destination;if(e.closed)return void this._complete();const n=this.index++;if(this.active<this.concurrent){e.next(t);try{const{project:e}=this,r=e(t,n);this.scheduler?this.destination.add(this.scheduler.schedule(K.dispatch,0,{subscriber:this,result:r,value:t,index:n})):this.subscribeToProjection(r,t,n)}catch(r){e.error(r)}}else this.buffer.push(t)}subscribeToProjection(t,e,n){this.active++,this.destination.add(Object(q.c)(t,new q.a(this)))}_complete(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this._next(t)}notifyComplete(){const t=this.buffer;this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()}}var Y=n("IzEk"),X=n("/+cc");class J{constructor(t){this.elements=[],t&&Array.isArray(t)&&(this.elements=t)}len(){if(void 0!==this.elements)return this.elements.length}build_clusters(t=!1,e=[]){const n={};if(this.elements.map(t=>{t.value in e||(t.value in n?n[t.value].push(t):n[t.value]=[t])}),t)for(const r in n)n[r].sort((t,e)=>void 0===t.title?-1:t.title.localeCompare(e.title));return n}}class Q{constructor(t){this.loading=!1,this.vocabulary=[],this.options=t?{shouldSort:!0,includeScore:!0,includeMatches:!0,threshold:0,location:0,distance:0,maxPatternLength:32,minMatchCharLength:3,keys:["word"]}:{shouldSort:!0,includeScore:!0,includeMatches:!0,threshold:0,location:0,distance:5,maxPatternLength:32,minMatchCharLength:3,keys:["word"]}}addEntities(t,e){let n=[];n=Array.from(void 0===e?new Set(t.elements.map(t=>t.value)):new Set(t.elements.map(t=>t.title)));for(const r of n)this.vocabulary.push({word:r});this.load()}load(){this.fuse=new X(this.vocabulary,this.options)}empty(){return!this.loading&&0===this.vocabulary.length}search(t){return void 0===this.fuse?[]:this.fuse.search(t)}}var tt=n("8Y7J");class et{constructor(t){this.editor=t,this.editor=t}}var nt=Math.ceil,rt=Math.max,st=function(t,e){return t===e||t!=t&&e!=e},it=n("Ju5/"),ot=it.a.Symbol,at=Object.prototype,lt=at.hasOwnProperty,ut=at.toString,ct=ot?ot.toStringTag:void 0,ht=Object.prototype.toString,dt=ot?ot.toStringTag:void 0,pt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":dt&&dt in Object(t)?function(t){var e=lt.call(t,ct),n=t[ct];try{t[ct]=void 0;var r=!0}catch(i){}var s=ut.call(t);return r&&(e?t[ct]=n:delete t[ct]),s}(t):function(t){return ht.call(t)}(t)},ft=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},mt=function(t){if(!ft(t))return!1;var e=pt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},gt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},bt=function(t){return null!=t&&gt(t.length)&&!mt(t)},yt=/^(?:0|[1-9]\d*)$/,vt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&yt.test(t))&&t>-1&&t%1==0&&t<e},_t=function(t){return null!=t&&"object"==typeof t},wt=/^\s+|\s+$/g,xt=/^[-+]0x[0-9a-f]+$/i,kt=/^0b[01]+$/i,St=/^0o[0-7]+$/i,Ct=parseInt,It=function(t){return t?1/0===(t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||_t(t)&&"[object Symbol]"==pt(t)}(t))return NaN;if(ft(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ft(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(wt,"");var n=kt.test(t);return n||St.test(t)?Ct(t.slice(2),n?2:8):xt.test(t)?NaN:+t}(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};const Et="stashify_content.interfaces.behaviors.IFollow",Ot="file";class Tt{constructor(t){this.language=t.language,this.metadata=t.metadata,this.useful=t.useful,this.status=t.status}}class Nt{constructor(t){this.items=t.items}}class At{constructor(t){null===t?(this.len=0,this.buckets=0):(this.len=t.len,this.buckets=t.buckets)}}class Rt{constructor(t){this.messages=new At(t.messages),this.solutions=t.solutions}}class Ft{constructor(t){this.contributors=t.contributors,this.creation_date=new Date(t.creation_date),this.creators=t.creators,this.description=t.description,this.effective_date=new Date(t.effective_date),this.expiration_date=new Date(t.expiration_date),this.modification_date=new Date(t.modification_date),this.publisher=t.publisher,this.tags=t.tags,this.title=t.title}}class Dt{constructor(t){this.classifications={},this.related=[],this.classifications=t.classifications,this.related=t.related}}class Pt{constructor(){this.ocr="",this.ocr_list=[],this.inception="",this.inception_list=[],this.description="",this.transcript=[],this.text=[]}allTranscripts(){return this.transcript.concat(this.ocr_list).concat(this.inception_list)}addSentences(t,e){const n=0===this.transcript.length,r=0===this.ocr.length,s=0===this.ocr_list.length,i=0===this.inception.length,o=0===this.inception_list.length,a=0===this.description.length;for(const l of e){let e,u=[];void 0!==l.start_seconds?(e=Array.isArray(l.start_seconds)?l.start_seconds[0]:l.start_seconds,u=Array.isArray(l.start_seconds)?l.start_seconds.slice(1):[]):e=null!==l.start_second?l.start_second:0;const c={start:e,extraStarts:u,end:l.end_second,start_position:l.start_position,end_position:l.end_position,text:t.substring(l.start_position,l.end_position),mode:l.mode};"transcript"===l.mode&&n&&this.transcript.push(c),"ocr"===l.mode&&(void 0===l.start_seconds?r&&(this.ocr=t.substring(l.start_position,l.end_position)):s&&this.ocr_list.push(c)),"inception"===l.mode&&(void 0===l.start_seconds?i&&(this.inception=t.substring(l.start_position,l.end_position)):o&&this.inception_list.push(c)),"description"===l.mode&&a&&(this.description=t.substring(l.start_position,l.end_position))}}}class $t{constructor(t){this.ftb=t.ftb,this.ftc=t.ftc,this.ftf=t.ftf,this.ftf_pages_positions=t.ftf_pages_positions,this.fth=t.fth,this.ftl=t.ftl,this.fts=t.fts}}class Mt{constructor(t){this.tabs={},Object.keys(t).forEach((e,n)=>{this.tabs[e]=t[e].map((t,e)=>({columns:t,tabIndex:n,rowIndex:e}))})}getRowByOrder(t){let e,n=0;for(const r in this.tabs){const s=this.tabs[r];let i=0;for(;void 0===e&&i<s.length;)t-2===n&&(e=s[i]),i++,n++;n++}return e}getTotalRows(){let t=0;return Object.values(this.tabs).forEach(e=>{t+=e.length}),t}}class Lt{constructor(t){this.tags=t.tags,this.url=t.url}}class jt{constructor(t){this.files={},this.files=t.files,this.generated=t.generated,this.pages_previews=t.pages_previews||null,this.previews=t.previews||null,this.pages_rows_previews=null,t.pages_rows_previews&&(this.pages_rows_previews={},Object.keys(t.pages_rows_previews).forEach(e=>{this.pages_rows_previews[e]=new Mt(t.pages_rows_previews[e])}))}}class zt{constructor(t){this.links={},this.link_images={},this.link_thumbnails={},this.links=t.links,this.link_images=t.link_images,this.link_thumbnails=t.link_thumbnails,this.previews=t.previews}}class Bt{constructor(t){this.following=t.following}}class Vt{constructor(t){this.body=t.body,this.order=t.order,this.origin=t.origin,this.init=t.init,this.final=t.final,this.pages=t.pages,this.source=t.source}getInitPage(){if(this.pages&&this.pages.length>0)return parseInt(this.pages[0])}isFtf(){var t;return"ftf"===(null===(t=this.source)||void 0===t?void 0:t.slice(0,3))}isFtl(){return"ftl"===this.source}}function Ut(t,e,n){const r={init:e,final:n};let s=t,i=t.match(/\[STFIMAGE=([a-zA-Z0-9.]+)\]/g);if(i&&i.length>0){let t=i[0].replace("]","").split("=")[1];r.image=t,s=s.replace(i[0],"")}else r.text=!0;return[r,s]}function Wt(t,e,n,r){let s,i;if("ftf-"===t.slice(0,4)){let o=t.slice(4);r[o]&&r[o].forEach((t,r)=>{e>=t[0]&&e<=t[1]&&(s=r),n>=t[0]&&n<=t[1]&&(i=r)})}return void 0!==s&&void 0!==i?(o=s,a=i+1,l&&"number"!=typeof l&&function(t,e,n){if(!ft(n))return!1;var r=typeof e;return!!("number"==r?bt(n)&&vt(e,n.length):"string"==r&&e in n)&&st(n[e],t)}(o,a,l)&&(a=l=void 0),o=It(o),void 0===a?(a=o,o=0):a=It(a),function(t,e,n,r){for(var s=-1,i=rt(nt((e-t)/(n||1)),0),o=Array(i);i--;)o[++s]=t,t+=n;return o}(o,a,l=void 0===l?o<a?1:-1:It(l))):void 0!==s?[s]:void 0;var o,a,l}function*Ht(t,e){let n="",r=0,s=0,i=0;for(let o of t.split("\n")){let t=o.length+1;if(o=o.trim(),o.length>4)if([".","!","?",":",";"].indexOf(o.slice(-1))>-1){let e=n+o;r+=1,i+=t;let[a,l]=Ut(e.trim(),s,i);yield[l,r,a],n="",s=i}else if(n.length>1e3){r+=1;let[e,a]=Ut(n.trim(),s,i);yield[a,r,e],n=o,s=i,i+=t}else n=[n,o].join(" ").trim(),i+=t;else if(""===o&&n.length>4){r+=1;let[e,o]=Ut(n.trim(),s,i);yield[o,r,e],n="",s=i,i+=1+t}else n+=o,i+=t}if(n.length>0){r+=1;let[t,e]=Ut(n.trim(),s,i);yield[e,r,t]}}class Gt{constructor(t){var e,n,r,s;this.hasMainLink=!1,this.hasMainFile=!1,this.raw=t,this.creation_date=new Date(t.creation_date),this.icon=t.icon,this.id=t["@name"],this.modification_date=new Date(t.modification_date),this.title=t.title,this.url=t["@id"],this.uuid=t["@uid"],this.thumbnail=t.thumbnail,this.write=t.write,this.delete=t.delete,"guillotina.behaviors.dublincore.IDublinCore"in t&&(this.dublincore=new Ft(t["guillotina.behaviors.dublincore.IDublinCore"])),"stashify_content.interfaces.behaviors.IConversation"in t&&(this.conversation=new Rt(t["stashify_content.interfaces.behaviors.IConversation"])),"stashify_content.interfaces.behaviors.IExtractedText"in t&&(this.extracted_text=new $t(t["stashify_content.interfaces.behaviors.IExtractedText"])),"stashify_content.interfaces.behaviors.IMetadata"in t&&(this.metadata=new Tt(t["stashify_content.interfaces.behaviors.IMetadata"])),"stashify_content.interfaces.behaviors.IOrigin"in t&&(this.origin=new Lt(t["stashify_content.interfaces.behaviors.IOrigin"])),"stashify_content.interfaces.behaviors.IFiles"in t&&(this.files=new jt(t["stashify_content.interfaces.behaviors.IFiles"])),"stashify_content.interfaces.behaviors.ILinks"in t&&(this.links=new zt(t["stashify_content.interfaces.behaviors.ILinks"])),this.stashify_metadata=new Dt("stashify_content.interfaces.behaviors.IStashifyMetadata"in t?t["stashify_content.interfaces.behaviors.IStashifyMetadata"]:{classifications:{},related:[]}),"stashify_content.interfaces.behaviors.IExtractedMetadata"in t&&(this.extracted_metadata=t["stashify_content.interfaces.behaviors.IExtractedMetadata"]),"stashify_content.interfaces.behaviors.IStashifyHTML"in t&&(this.html=t["stashify_content.interfaces.behaviors.IStashifyHTML"]),"stashify_content.interfaces.behaviors.IStashifyLayout"in t&&(this.layout=t["stashify_content.interfaces.behaviors.IStashifyLayout"]),Et in t&&(this.stashify_follow=new Bt(t[Et])),(null===(e=this.links)||void 0===e?void 0:e.links)&&(this.hasMainLink=!0),(null===(n=this.files)||void 0===n?void 0:n.files)&&Ot in(null===(r=this.files)||void 0===r?void 0:r.files)&&(this.hasMainFile=!0,this.mainExtension=null===(s=this.getMainFile())||void 0===s?void 0:s.extension.toLowerCase())}get description(){var t,e;return(null===(t=this.dublincore)||void 0===t?void 0:t.description)?this.dublincore.description:null===(e=this.extracted_metadata)||void 0===e?void 0:e.summary}isMainFileMedia(){return!!this.mainExtension&&(this.isVideo()||this.isAudio())}isMainPDFPreview(){var t,e;return!!this.mainExtension&&["doc","docx","rtf","ppt","pptx","odt","odp","xls","xlsx"].includes(this.mainExtension)&&!!(null===(e=null===(t=this.files)||void 0===t?void 0:t.previews)||void 0===e?void 0:e[Ot])}hasSpreadsheetData(){var t,e;return!!this.mainExtension&&!!(null===(e=null===(t=this.files)||void 0===t?void 0:t.pages_rows_previews)||void 0===e?void 0:e[Ot])}getSpreadsheetTabs(){if(this.hasSpreadsheetData())return this.files.pages_rows_previews[Ot]}isImagePreview(){return!!this.mainExtension&&["png","jpeg","jpg"].includes(this.mainExtension)}isImportedVideo(){var t,e,n;return void 0!==(null===(t=this.extracted_text)||void 0===t?void 0:t.ftf)&&(void 0!==(null===(e=this.extracted_text.ftf)||void 0===e?void 0:e.video)||void 0!==(null===(n=this.extracted_text.ftf)||void 0===n?void 0:n["video.dot.srt"]))}getImportedVideoFileKey(){return"media/video+srt"===this.icon?"video.dot.srt":"video"}getImportedSubtitlesUrl(t){if(this.isImportedVideo()){const e=this.extracted_text.ftf["video.dot.srt"];if(e&&e.language===t)return this.url+"/@download/files/video.dot.srt"}}getDescription(){return this.description}getSummary(){var t;return null===(t=this.extracted_metadata)||void 0===t?void 0:t.summary}ftf_text(){var t,e;let n="";const r=/\[image:\s([a-zA-Z0-9.]+)\]/g;if(null===(t=this.extracted_text)||void 0===t?void 0:t.ftf)for(const[s,i]of Object.entries(null===(e=this.extracted_text)||void 0===e?void 0:e.ftf))if(i.text){let t=i.text.match(r);if(t)for(const e of t){let t=e.replace("]","").split(" ")[1];i.nested&&i.nested.hasOwnProperty(t)&&(i.text=i.text.replace(`[image: ${t}]`,`[STFIMAGE=${t}] ${i.nested[t]} \n\n `))}n+=i.text,n+=" \n "}return n}ftl_text(){var t,e;let n="";if(null===(t=this.extracted_text)||void 0===t?void 0:t.ftl){const t=[];for(const n of Object.values(null===(e=this.extracted_text)||void 0===e?void 0:e.ftl))t.push(n.text);n=t.join(" \n ")}return n}all_text(){var t,e,n,r;return[this.title,null===(t=this.extracted_text)||void 0===t?void 0:t.fts,this.ftf_text(),this.ftl_text(),null===(e=this.extracted_text)||void 0===e?void 0:e.ftc,null===(n=this.extracted_text)||void 0===n?void 0:n.fth,null===(r=this.extracted_text)||void 0===r?void 0:r.ftb].join(" \n ")}paragraphs(){const t=[];if(!this.extracted_text)return t;for(const[e,n]of function*(t,e){if(t&&(yield[t,"title"]),e.fts&&(yield[e.fts,"fts"]),e.ftf)for(const[n,r]of Object.entries(e.ftf))r.text&&(yield[r.text,`ftf-${n}`]);if(e.ftl)for(const[n,r]of Object.entries(e.ftl))r.text&&(yield[r.text,"ftl"]);e.ftc&&(yield[e.ftc,"ftc"]),e.fth&&(yield[e.fth,"fth"]),e.ftb&&(yield[e.ftb,"ftb"])}(this.title,this.extracted_text))for(const[r,s,i]of Ht(e))i.source=n,i.order=s,this.hasSegmentedPdf()&&"ftf-"===n.slice(0,4)&&(i.page=Wt(n,i.init,i.final,this.extracted_text.ftf_pages_positions)),t.push({p:r,c:s,e:i});return t}getTags(){var t;let e=[];if(null===(t=this.stashify_metadata)||void 0===t?void 0:t.classifications)for(const[n,r]of Object.entries(this.stashify_metadata.classifications))e=e.concat(r);return e}getTextFromMainFile(){var t,e,n,r;let s=Ot;if(this.isImportedVideo()&&(s=this.getImportedVideoFileKey()),(null===(t=this.extracted_text)||void 0===t?void 0:t.ftf)&&s in(null===(e=this.extracted_text)||void 0===e?void 0:e.ftf)){const t=null===(n=this.extracted_text)||void 0===n?void 0:n.ftf[s].text,e=null===(r=this.extracted_text)||void 0===r?void 0:r.ftf[s].sentences,i=new Pt;return e&&e.length>0?i.addSentences(t,e):i.text=this.paragraphs(),i}return null}getMainLink(){var t,e;if(null===(t=this.links)||void 0===t?void 0:t.links)return Object.keys(null===(e=this.links)||void 0===e?void 0:e.links).pop()}getMainLinkImage(){var t,e;if(null===(t=this.links)||void 0===t?void 0:t.link_images){const t=Object.keys(null===(e=this.links)||void 0===e?void 0:e.link_images).pop();if(t)return this.url+"/@download/link_images/"+t}}getMainLinkPdf(){var t,e;if(null===(t=this.links)||void 0===t?void 0:t.previews){const t=Object.keys(null===(e=this.links)||void 0===e?void 0:e.previews).pop();if(t)return this.url+"/@download/previews/"+t}}isMainLinkEmbed(){var t,e,n;if(null===(t=this.extracted_text)||void 0===t?void 0:t.ftl){const t=Object.keys(null===(e=this.extracted_text)||void 0===e?void 0:e.ftl).pop();if(t)return null===(n=this.extracted_text)||void 0===n?void 0:n.ftl[t].embed}}isYoutubeLink(){var t,e,n,r,s;if(null===(t=this.extracted_text)||void 0===t?void 0:t.ftl){const t=Object.keys(null===(e=this.extracted_text)||void 0===e?void 0:e.ftl).pop();if(t&&"youtube"===(null===(n=this.extracted_text)||void 0===n?void 0:n.ftl[t].type))return null===(s=null===(r=this.extracted_text)||void 0===r?void 0:r.ftl[t].embed)||void 0===s?void 0:s.split("/").pop()}}getPagesText(t){var e;return null===(e=this.extracted_text)||void 0===e?void 0:e.ftf[t].metadata["pdf:charsPerPage"]}getTextFromMainLink(){var t,e,n,r,s,i;if(null===(t=this.extracted_text)||void 0===t?void 0:t.ftl){const t=Object.keys(null===(e=this.extracted_text)||void 0===e?void 0:e.ftl).pop();if(t){const e=null===(n=this.extracted_text)||void 0===n?void 0:n.ftl[t].text,o=null===(r=this.extracted_text)||void 0===r?void 0:r.ftl[t].stf_text,a=null===(s=this.extracted_text)||void 0===s?void 0:s.ftl[t].sentences,l=null===(i=this.extracted_text)||void 0===i?void 0:i.ftl[t].stf_sentences,u=new Pt;return a&&u.addSentences(e,a),l&&o&&u.addSentences(o,l),void 0===a&&void 0===l&&(u.text=this.paragraphs()),u}}return null}getTextFromLayout(){var t;return null===(t=this.extracted_text)||void 0===t?void 0:t.ftb}getTextFromHTML(){var t;return null===(t=this.extracted_text)||void 0===t?void 0:t.fth}getTextFromConversation(){var t;return null===(t=this.extracted_text)||void 0===t?void 0:t.ftc}getSubtitlesUrl(t){return this.isImportedVideo()?this.getImportedSubtitlesUrl(t):void 0}haveText(){var t,e,n,r,s,i;return(null===(t=this.extracted_text)||void 0===t?void 0:t.ftf)||(null===(e=this.extracted_text)||void 0===e?void 0:e.ftb)||(null===(n=this.extracted_text)||void 0===n?void 0:n.ftc)||(null===(r=this.extracted_text)||void 0===r?void 0:r.ftl)||(null===(s=this.extracted_text)||void 0===s?void 0:s.fts)||(null===(i=this.extracted_text)||void 0===i?void 0:i.fth)}haveLayout(){return this.html||this.layout||this.conversation}getMainFile(){var t;return null===(t=this.files)||void 0===t?void 0:t.files[Ot]}isImage(){return this.icon.indexOf("image")>-1}canChangeThumbnail(){return void 0!==this.html||void 0!==this.files}getThumbnailPath(){return this.html?"/htmlthumbnail":this.files?`/file_thumbnails/${Ot}`:void 0}getMainFileMetadata(){var t,e,n;if(this.hasMainFile)return null===(n=null===(e=null===(t=this.extracted_text)||void 0===t?void 0:t.ftf)||void 0===e?void 0:e[Ot])||void 0===n?void 0:n.metadata}isVideo(){return"video"===this.icon.slice(0,5)}isAudio(){return"audio"===this.icon.slice(0,5)}hasSegmentedPdf(){var t,e,n,r;return!!(null===(n=null===(e=null===(t=this.files)||void 0===t?void 0:t.pages_previews)||void 0===e?void 0:e[Ot])||void 0===n?void 0:n.length)&&void 0!==(null===(r=this.extracted_text)||void 0===r?void 0:r.ftf_pages_positions)&&Object.keys(this.extracted_text.ftf_pages_positions).length>0}getTotalPdfPages(){var t,e;return this.hasSegmentedPdf()?Object.keys((null===(e=null===(t=this.extracted_text)||void 0===t?void 0:t.ftf_pages_positions)||void 0===e?void 0:e[Ot])||{}).length:0}getFirstAuthor(){var t,e;return null===(e=null===(t=this.dublincore)||void 0===t?void 0:t.creators)||void 0===e?void 0:e[0]}getOriginLink(){var t,e;return(null===(t=this.origin)||void 0===t?void 0:t.url)?null===(e=this.origin)||void 0===e?void 0:e.url:void 0}}class qt{constructor(t){this.items=new Array(0),this.page=t.page,this.page_size=t.page_size,this.total=t.total;for(const e of t.items)this.items.push(new Gt(e))}}class Zt{constructor(t){this.facets=t.facets,this.results=t.results,this.total=t.total}hasResults(){return void 0!==this.results&&void 0!==this.total&&this.total>0}}class Kt{constructor(t){t&&(this.possible_answer=t.possible_answer,this.possible_results_text=t.possible_results_text,this.similar_questions=t.similar_questions)}}class Yt{constructor(t){t&&(this.answer=t.answer)}}class Xt{constructor(t){this.classes=t.classes}}class Jt{constructor(t,e={}){this.payload={},t.forEach(t=>{this.updatePayload(t,e)})}updatePayload(t,e){if(t.bhr&&t.field){void 0===this.payload[t.bhr]&&(this.payload[t.bhr]={});const n=e[t.bhr];if(n){const e=this.patchValue(t,this.payload[t.bhr][t.field]||n[t.field]);this.payload[t.bhr][t.field]=e}else{void 0===this.payload["@behaviors"]?this.payload["@behaviors"]=[t.bhr]:-1===this.payload["@behaviors"].indexOf(t.bhr)&&this.payload["@behaviors"].push(t.bhr);const e=this.patchValue(t,{});this.payload[t.bhr][t.field]=e}}}patchValue(t,e){return"stashify_content.interfaces.behaviors.IStashifyMetadata"===t.bhr&&"classifications"===t.field?"set"===t.op?t.value:this.patchClassifications(t,e):"guillotina.behaviors.dublincore.IDublinCore"!==t.bhr||"title"!==t.field&&"description"!==t.field||"set"!==t.op?"stashify_content.interfaces.behaviors.IStashifyHTML"===t.bhr&&"html"===t.field&&"set"===t.op||"stashify_content.interfaces.behaviors.IMetadata"===t.bhr&&"language"===t.field&&"set"===t.op?t.value:void 0:t.value}patchClassifications(t,e){if(null===e&&(e={}),"add"===t.op&&t.key){const n=e[t.key];void 0===n?e[t.key]=[t.value]:-1===n.indexOf(t.value)&&n.push(t.value)}if("del"===t.op&&t.key){const n=e[t.key];if(n){const e=n.indexOf(t.value);e>-1&&n.splice(e,1)}}return e}}class Qt{constructor(){this.paragraphs=[],this.vector=[]}loadBrain(t){this.id=t.id,this.title=t.title,this.modified=t.modified,this.summary=t.summary,this.created=t.created,this.thumbnail=t.thumbnail,this.icon=t.icon,this.origin=t.origin,this.users=t.users,this.tags=t.tags}addParagraph(t){this.paragraphs.push(t)}addVector(t){this.vector.push(t)}}class te{constructor(t,e){e?(this.id=t["@name"],this.url=t["@id"],this.contributors=t.contributors,this.readers=t.readers,this.owners=t.owners,this.creation=t.creation_date,this.state=t.state):(this.id=t["@name"],this.url=t["@id"],this.length=t.length,this.state=t.state,this.creation="",this.admin=t.admin,this.contrib=t.admcontribin,this.description=t["guillotina.behaviors.dublincore.IDublinCore"].description,this.parent=t.parent),this.title=t.title,this.logo=this.url+"/@logo"}created_date(){return this.creation}getReceiverEmail(t,e){return`${t}/${e}/${this.id}@flaps.email`}}class ee{constructor(t){this.items={},this.type=t.type,this.max_stashes=t.max_stashes,this.count=t.items.length;let e=0;for(const n in t.items)t.items.hasOwnProperty(n)&&(e+=1,this.items[n]=new te(t.items[n],!0));this.count=e}}var ne=n("VVxe"),re=n.n(ne);class se{static deepCopy(t){if(null==t||"object"!=typeof t)return t;if(t instanceof Date){const e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array){const e=[];for(let n=0,r=t.length;n<r;n++)e[n]=this.deepCopy(t[n]);return e}if(t instanceof Object){const e={};for(const n in t)t.hasOwnProperty(n)&&(e[n]=this.deepCopy(t[n]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")}static filterArrayByString(t,e){return""===e?t:(e=e.toLowerCase(),t.filter(t=>this.searchInObj(t,e)))}static searchInObj(t,e){for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n];if("string"==typeof r){if(this.searchInString(r,e))return!0}else if(Array.isArray(r)&&this.searchInArray(r,e))return!0;if("object"==typeof r&&this.searchInObj(r,e))return!0}return!1}static searchInArray(t,e){for(const n of t){if("string"==typeof n&&this.searchInString(n,e))return!0;if("object"==typeof n&&this.searchInObj(n,e))return!0}return!1}static searchInString(t,e){return t.toLowerCase().includes(e)}static generateGUID(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()}static toggleInArray(t,e){-1===e.indexOf(t)?e.push(t):e.splice(e.indexOf(t),1)}static handleize(t){return t.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}static generateGuillotinaIdFromText(t){let e=re()(t);return e=e.toLowerCase().replace(/[^\w]+/g,""),e}static get REGEX(){return{email:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}}static get ICONS_PATH(){return"assets/icons/"}static languageList(){return["aa","ab","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lv","mg","mh","mi","mk","ml","mn","mo","mr","ms","mt","my","na","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","sg","sh","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"]}static supportedLanguages(){return["ca","es","en"]}}class ie{constructor(t){this.id=t.id||se.generateGUID(),this.name=t.name||"",this.description=t.description||"",this.idAttachmentCover=t.idAttachmentCover||"",this.idMembers=t.idMembers||[],this.idLabels=t.idLabels||[],this.attachments=t.attachments||[],this.subscribed=t.subscribed||!0,this.checklists=t.checklists||[],this.checkItems=t.checkItems||0,this.checkItemsChecked=t.checkItemsChecked||0,this.comments=t.comments||[],this.activities=t.activities||[],this.due=t.due||""}}class oe{constructor(t,e){this.id=t.id,this.name=t.name,this.color=t.color,this.idCards=[...t.idCards],this.cards=[],this.primary=t.primary,this.secondary=t.secondary,e&&this.idCards.forEach(t=>{const n=e.find(e=>e.id===t);n&&this.cards.push(new ie(n))})}}class ae{constructor(t){this.id=t.id||se.generateGUID(),this.name=t.name||"",this.color="",this.idCards=t.idCards?[...t.idCards]:[],this.cards=[],this.primary=t.primary||!1,this.secondary=t.secondary||!1}}class le{constructor(t){null==t?(this.lists=[],this.cards=[]):(null!==t.cards&&(this.cards=t.cards),null!==t.lists&&(this.lists=t.lists.map(t=>new oe(t,this.cards||[])),this.boardLists=t.lists.map(t=>new ae(t))))}deserializeTag(t){const e=t.split("/");if(e.length>0){const t=e[e.length-1],n=this.getTagsListIdById(t),r=this.getTagsNameById(t);if(t&&n&&r)return{id:t,list:n,display:r}}return null}getTagsNameById(t){if(this.cards){const e=this.cards.find(e=>e.id===t);if(e)return e.name}return null}getTagsListIdById(t){if(this.lists){const e=this.lists.find(e=>e.idCards.includes(t));if(e)return e.id}return null}getOntologyList(t){const e=[],n=null==t?void 0:t.toLocaleLowerCase(),r={};if(null==this.cards)return e;if(null==this.lists)return e;for(const s of this.cards)r[s.id]=s.name;for(const s of this.lists){const t={name:s.name,id:s.id,values:[]};for(const e of s.idCards)(void 0===n||r[e].toLocaleLowerCase().includes(n))&&t.values.push({value:r[e],id:e});t.values.length>0&&e.push(t)}return e}getPrimaryList(){var t,e;let n=null===(t=this.lists)||void 0===t?void 0:t.find(t=>t.primary);return void 0===n&&(n=null===(e=this.lists)||void 0===e?void 0:e[0]),n||null}getNonPrimaryLists(){let t=this.lists;const e=this.getPrimaryList();return e&&(t=null==t?void 0:t.filter(t=>t.id!==e.id)),t||[]}getSecondaryLists(){var t;let e=null===(t=this.lists)||void 0===t?void 0:t.filter(t=>t.secondary);const n=this.getPrimaryList();return n&&(e=null==e?void 0:e.filter(t=>t.id!==n.id)),e||[]}}class ue{constructor(t){this.elements={},this.ontologies=t,this.elements={};for(const e of t)this.elements[e.id]={color:e.color,title:e.name}}}class ce{constructor(t,e,n,r,s){this.lists=t,this.cards=e,this.members=n,this.labels=r,this.service=s}export(){return{lists:this.lists,cards:this.cards}}}var he=n("iInd"),de=function(t,e){for(var n=t.length;n--;)if(st(t[n][0],e))return n;return-1},pe=Array.prototype.splice;function fe(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}fe.prototype.clear=function(){this.__data__=[],this.size=0},fe.prototype.delete=function(t){var e=this.__data__,n=de(e,t);return!(n<0||(n==e.length-1?e.pop():pe.call(e,n,1),--this.size,0))},fe.prototype.get=function(t){var e=this.__data__,n=de(e,t);return n<0?void 0:e[n][1]},fe.prototype.has=function(t){return de(this.__data__,t)>-1},fe.prototype.set=function(t,e){var n=this.__data__,r=de(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var me,ge=fe,be=it.a["__core-js_shared__"],ye=(me=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||""))?"Symbol(src)_1."+me:"",ve=Function.prototype.toString,_e=function(t){if(null!=t){try{return ve.call(t)}catch(e){}try{return t+""}catch(e){}}return""},we=/^\[object .+?Constructor\]$/,xe=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!ft(t)||(e=t,ye&&ye in e))&&(mt(t)?xe:we).test(_e(t));var e}(n)?n:void 0},Se=ke(it.a,"Map"),Ce=ke(Object,"create"),Ie=Object.prototype.hasOwnProperty,Ee=Object.prototype.hasOwnProperty;function Oe(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Oe.prototype.clear=function(){this.__data__=Ce?Ce(null):{},this.size=0},Oe.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Oe.prototype.get=function(t){var e=this.__data__;if(Ce){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Ie.call(e,t)?e[t]:void 0},Oe.prototype.has=function(t){var e=this.__data__;return Ce?void 0!==e[t]:Ee.call(e,t)},Oe.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ce&&void 0===e?"__lodash_hash_undefined__":e,this};var Te=Oe,Ne=function(t,e){var n,r,s=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?s["string"==typeof e?"string":"hash"]:s.map};function Ae(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ae.prototype.clear=function(){this.size=0,this.__data__={hash:new Te,map:new(Se||ge),string:new Te}},Ae.prototype.delete=function(t){var e=Ne(this,t).delete(t);return this.size-=e?1:0,e},Ae.prototype.get=function(t){return Ne(this,t).get(t)},Ae.prototype.has=function(t){return Ne(this,t).has(t)},Ae.prototype.set=function(t,e){var n=Ne(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var Re=Ae;function Fe(t){var e=this.__data__=new ge(t);this.size=e.size}Fe.prototype.clear=function(){this.__data__=new ge,this.size=0},Fe.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Fe.prototype.get=function(t){return this.__data__.get(t)},Fe.prototype.has=function(t){return this.__data__.has(t)},Fe.prototype.set=function(t,e){var n=this.__data__;if(n instanceof ge){var r=n.__data__;if(!Se||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Re(r)}return n.set(t,e),this.size=n.size,this};var De=Fe;function Pe(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Re;++e<n;)this.add(t[e])}Pe.prototype.add=Pe.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Pe.prototype.has=function(t){return this.__data__.has(t)};var $e=Pe,Me=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Le=function(t,e,n,r,s,i){var o=1&n,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=i.get(t);if(u&&i.get(e))return u==e;var c=-1,h=!0,d=2&n?new $e:void 0;for(i.set(t,e),i.set(e,t);++c<a;){var p=t[c],f=e[c];if(r)var m=o?r(f,p,c,e,t,i):r(p,f,c,t,e,i);if(void 0!==m){if(m)continue;h=!1;break}if(d){if(!Me(e,function(t,e){if(!d.has(e)&&(p===t||s(p,t,n,r,i)))return d.push(e)})){h=!1;break}}else if(p!==f&&!s(p,f,n,r,i)){h=!1;break}}return i.delete(t),i.delete(e),h},je=it.a.Uint8Array,ze=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n},Be=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n},Ve=ot?ot.prototype:void 0,Ue=Ve?Ve.valueOf:void 0,We=Array.isArray,He=Object.prototype.propertyIsEnumerable,Ge=Object.getOwnPropertySymbols,qe=Ge?function(t){return null==t?[]:(t=Object(t),function(e,n){for(var r=-1,s=null==e?0:e.length,i=0,o=[];++r<s;){var a=e[r];He.call(t,a)&&(o[i++]=a)}return o}(Ge(t)))}:function(){return[]},Ze=function(t){return _t(t)&&"[object Arguments]"==pt(t)},Ke=Object.prototype,Ye=Ke.hasOwnProperty,Xe=Ke.propertyIsEnumerable,Je=Ze(function(){return arguments}())?Ze:function(t){return _t(t)&&Ye.call(t,"callee")&&!Xe.call(t,"callee")},Qe=n("WOAq"),tn={};tn["[object Float32Array]"]=tn["[object Float64Array]"]=tn["[object Int8Array]"]=tn["[object Int16Array]"]=tn["[object Int32Array]"]=tn["[object Uint8Array]"]=tn["[object Uint8ClampedArray]"]=tn["[object Uint16Array]"]=tn["[object Uint32Array]"]=!0,tn["[object Arguments]"]=tn["[object Array]"]=tn["[object ArrayBuffer]"]=tn["[object Boolean]"]=tn["[object DataView]"]=tn["[object Date]"]=tn["[object Error]"]=tn["[object Function]"]=tn["[object Map]"]=tn["[object Number]"]=tn["[object Object]"]=tn["[object RegExp]"]=tn["[object Set]"]=tn["[object String]"]=tn["[object WeakMap]"]=!1;var en,nn=n("xutz"),rn=nn.a&&nn.a.isTypedArray,sn=rn?(en=rn,function(t){return en(t)}):function(t){return _t(t)&&gt(t.length)&&!!tn[pt(t)]},on=Object.prototype.hasOwnProperty,an=Object.prototype,ln=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),un=Object.prototype.hasOwnProperty,cn=function(t){return bt(t)?function(t,e){var n=We(t),r=!n&&Je(t),s=!n&&!r&&Object(Qe.a)(t),i=!n&&!r&&!s&&sn(t),o=n||r||s||i,a=o?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],l=a.length;for(var u in t)!e&&!on.call(t,u)||o&&("length"==u||s&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||vt(u,l))||a.push(u);return a}(t):function(t){if((e=t)!==("function"==typeof(n=e&&e.constructor)&&n.prototype||an))return ln(t);var e,n,r=[];for(var s in Object(t))un.call(t,s)&&"constructor"!=s&&r.push(s);return r}(t)},hn=function(t){return function(t,e,n){var r=e(t);return We(t)?r:function(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}(r,n(t))}(t,cn,qe)},dn=Object.prototype.hasOwnProperty,pn=ke(it.a,"DataView"),fn=ke(it.a,"Promise"),mn=ke(it.a,"Set"),gn=ke(it.a,"WeakMap"),bn="[object Map]",yn="[object Promise]",vn="[object Set]",_n="[object WeakMap]",wn="[object DataView]",xn=_e(pn),kn=_e(Se),Sn=_e(fn),Cn=_e(mn),In=_e(gn),En=pt;(pn&&En(new pn(new ArrayBuffer(1)))!=wn||Se&&En(new Se)!=bn||fn&&En(fn.resolve())!=yn||mn&&En(new mn)!=vn||gn&&En(new gn)!=_n)&&(En=function(t){var e=pt(t),n="[object Object]"==e?t.constructor:void 0,r=n?_e(n):"";if(r)switch(r){case xn:return wn;case kn:return bn;case Sn:return yn;case Cn:return vn;case In:return _n}return e});var On=En,Tn="[object Arguments]",Nn="[object Array]",An="[object Object]",Rn=Object.prototype.hasOwnProperty,Fn=function t(e,n,r,s,i){return e===n||(null==e||null==n||!_t(e)&&!_t(n)?e!=e&&n!=n:function(t,e,n,r,s,i){var o=We(t),a=We(e),l=o?Nn:On(t),u=a?Nn:On(e),c=(l=l==Tn?An:l)==An,h=(u=u==Tn?An:u)==An,d=l==u;if(d&&Object(Qe.a)(t)){if(!Object(Qe.a)(e))return!1;o=!0,c=!1}if(d&&!c)return i||(i=new De),o||sn(t)?Le(t,e,n,r,s,i):function(t,e,n,r,s,i,o){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new je(t),new je(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return st(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=ze;case"[object Set]":if(a||(a=Be),t.size!=e.size&&!(1&r))return!1;var l=o.get(t);if(l)return l==e;r|=2,o.set(t,e);var u=Le(a(t),a(e),r,s,i,o);return o.delete(t),u;case"[object Symbol]":if(Ue)return Ue.call(t)==Ue.call(e)}return!1}(t,e,l,n,r,s,i);if(!(1&n)){var p=c&&Rn.call(t,"__wrapped__"),f=h&&Rn.call(e,"__wrapped__");if(p||f){var m=p?t.value():t,g=f?e.value():e;return i||(i=new De),s(m,g,n,r,i)}}return!!d&&(i||(i=new De),function(t,e,n,r,s,i){var o=1&n,a=hn(t),l=a.length;if(l!=hn(e).length&&!o)return!1;for(var u=l;u--;){var c=a[u];if(!(o?c in e:dn.call(e,c)))return!1}var h=i.get(t);if(h&&i.get(e))return h==e;var d=!0;i.set(t,e),i.set(e,t);for(var p=o;++u<l;){var f=t[c=a[u]],m=e[c];if(r)var g=o?r(m,f,c,e,t,i):r(f,m,c,t,e,i);if(!(void 0===g?f===m||s(f,m,n,r,i):g)){d=!1;break}p||(p="constructor"==c)}if(d&&!p){var b=t.constructor,y=e.constructor;b==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(d=!1)}return i.delete(t),i.delete(e),d}(t,e,n,r,s,i))}(e,n,r,s,t,i))},Dn=n("SVse"),Pn=n("fwsW");const $n="STATE_DATA";let Mn=(()=>{class t{constructor(t,e,n,r){this.conf=t,this.storage=e,this.router=n,this.isBrowser=!1,this.accountSubject=new M.a(null),this.account=this.accountSubject.asObservable(),this.stashSubject=new M.a(null),this.stash=this.stashSubject.asObservable(),this.stateDataSubject=new M.a(null),this.stateData=this.stateDataSubject.asObservable(),this.config=new et(this.conf.getEditorUrl()),this.local=new P.f(this.storage),this.isBrowser=Object(Dn.w)(r),this.router.events.pipe(Object(W.a)(t=>t instanceof he.c)).subscribe(()=>{let t=this.router.routerState.snapshot.root,e={};do{e=Object.assign(Object.assign({},e),t.params),t=t.firstChild}while(t);if("account"in e){const t={db:e.db,account:e.account,stash:e.stash};n=t,r=this.getStateData(),Fn(n,r)||this.setStateData(t)}var n,r})}create(){return this.local.create()}dbGetStateData(){return this.isBrowser?this.local.getStoredState($n):Promise.resolve(void 0)}dbSetStateData(t){return this.local.storeLocalState($n,t)}dbDelStateData(){this.isBrowser&&this.local.removeStoredState($n)}getStateData(){return this.stateDataSubject.getValue()}setStateData(t){this.dbSetStateData(t),this.stateDataSubject.next(t)}getAccount(){return this.accountSubject.getValue()}setAccount(t,e){this.accountSubject.next(t),e&&this.stashSubject.next(null)}cleanAccount(){this.accountSubject.next(null),this.stashSubject.next(null)}getStash(){return this.stashSubject.getValue()}setStash(t){this.stashSubject.next(t)}cleanStash(){this.stashSubject.next(null)}getStashUrl(t){var e,n;return this.getStash()?t?null===(e=this.getStash())||void 0===e?void 0:e.url.replace(this.conf.getAPIURL(),""):null===(n=this.getStash())||void 0===n?void 0:n.url:void 0}getContextUrl(t=!1){var e,n;return this.getStash()&&!t?null===(e=this.getStash())||void 0===e?void 0:e.url:this.getAccount()?null===(n=this.getAccount())||void 0===n?void 0:n.url:void 0}onStash(){return!!this.getStash()}onAccount(){return!!this.getAccount()}getContextPath(){const t=this.getContextUrl();if(null==t)throw Error("Invalid context url");return this.conf.getRelativeAPI(t)}getStashWebUrl(){var t,e,n;return`/at/${null===(t=this.getStateData())||void 0===t?void 0:t.db}/${null===(e=this.getStateData())||void 0===e?void 0:e.account}/${null===(n=this.getStateData())||void 0===n?void 0:n.stash}`}}return t.\u0275fac=function(e){return new(e||t)(tt.Zb(P.e),tt.Zb(Pn.b),tt.Zb(he.e),tt.Zb(tt.C))},t.\u0275prov=tt.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ln=new $({max:50,maxAge:36e5});let jn=(()=>{class t{constructor(t,e,n){this.api=t,this.router=e,this.state=n,this.customEntitiesObservable=null,this.customEntitiesFullUrl="",this.namedEntitiesObservable=null,this.namedEntitiesFullUrl="",Ln.reset()}getNamedEntities(t,e,n){let r="";return r=t&&e&&n?`/${t}/${e}/${n}/@namedEntities`:`${this.state.getStashUrl(!0)}/@namedEntities`,r!==this.namedEntitiesFullUrl&&(this.namedEntitiesFullUrl=r,this.namedEntitiesObservable=this.getAllNamedEntities(r).pipe(Object(G.a)())),this.getObservable(this.namedEntitiesObservable,this.namedEntitiesFullUrl)}getAllNamedEntities(t){const e=[];return this.getNamedEntitiesPage(t,0).pipe(function(t,e=Number.POSITIVE_INFINITY,n){return e=(e||0)<1?Number.POSITIVE_INFINITY:e,r=>r.lift(new Z(t,e,n))}(e=>!0===e.next?this.getNamedEntitiesPage(t,e.page+1):Object(H.b)()),Object(V.a)(t=>{Array.prototype.push.apply(e,t.entities)}),Object(W.a)(t=>!1===t.next),Object(Y.a)(1),Object(z.a)(()=>({entities:e})))}getNamedEntitiesPage(t,e){return 0!==e&&(t+="?page="+e),this.api.get(t,!0,void 0,!0)}getCustomEntities(t,e,n){let r="";return r=t&&e&&n?`/${t}/${e}/${n}/@customEntities`:`${this.state.getStashUrl(!0)}/@customEntities`,r!==this.customEntitiesFullUrl&&(this.customEntitiesFullUrl=r,this.customEntitiesObservable=this.api.get(r,!0,void 0,!0).pipe(Object(G.a)())),this.getObservable(this.customEntitiesObservable,this.customEntitiesFullUrl)}getObservable(t,e){const n=Ln.get(e);return n?Object(j.a)(n):t.pipe(Object(z.a)(t=>{const n=new J(t.entities);return Ln.set(e,n),n}),Object(B.a)((t,e)=>404===t.status||500===t.status?Object(j.a)(new J([])):Object(L.a)("Error HTTP "+t.status)))}}return t.\u0275fac=function(e){return new(e||t)(tt.Zb(P.a),tt.Zb(he.e),tt.Zb(Mn))},t.\u0275prov=tt.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var zn=n("XNiG");const Bn="ontology",Vn="tools/tags",Un=new $({max:50,maxAge:36e5});let Wn=(()=>{class t{constructor(t,e){this.api=t,this.state=e,this.ontologyChanged=new zn.a,Un.reset()}getOntology(t,e,n){let r="";r=t&&e&&n?"/"+t+"/"+e+"/"+n+"/"+Bn:this.state.getStashUrl(!0)+"/"+Bn;const s=Un.get(r);return s?Object(j.a)(s):this.api.get(r,!0,void 0,!0).pipe(Object(z.a)(t=>{const e=new le(t);return Un.set(r,e),e}),Object(B.a)((t,e)=>Object(L.a)("Error HTTP "+t.status)))}tagsToLabel(t,e,n){let r="";return r=t&&e&&n?`/${t}/${e}/${n}/@tags_to_label`:`${this.state.getStashUrl(!0)}/@tags_to_label`,this.api.post(r,{},!0,void 0,void 0,!0).pipe(Object(z.a)(t=>t),Object(B.a)(t=>(console.log("post ongology err",t),Object(j.a)("Error"))))}convertToTags(t){const e=[],n={};if(t.cards)for(const r of t.cards)n[r.id]=r.name;if(t.lists)for(const r of t.lists)for(const t of r.idCards)e.push({display:r.name+":"+n[t],id:t,list:r.id});return e}convert(t){const e=[],n=[];let r=new ce([],[],e,n,this);return void 0!==t.boardLists&&void 0!==t.cards&&(r=new ce(t.boardLists,t.cards,e,n,this)),r}update(t){const e=this.state.getStashUrl(!0)+"/"+Bn;return Un.set(e,void 0),this.api.patch(e,t.export(),!0,void 0,!0).pipe(Object(V.a)(()=>{this.ontologyChanged.next()}),Object(z.a)(t=>new le(t)))}deleteOntology(t){return this.api.delete(t,!0)}getTags(){const t=this.state.getStashUrl(!0)+"/"+Vn;return this.api.get(t,!0,void 0,!0)}loadInit(){const t=this.state.getStashUrl(!0)+"/"+Vn;return this.api.get(t,!0,void 0,!0)}}return t.\u0275fac=function(e){return new(e||t)(tt.Zb(P.a),tt.Zb(Mn))},t.\u0275prov=tt.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Hn=n("cp0P"),Gn=n("PZkE"),qn=n("eIep"),Zn=n("Cfvw");class Kn{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class Yn{refCount(t){return Xn("refCount")}incRef(t){return Xn("incRef")}timerAvailable(){return!0}time(t){return Xn("time")}read(t){return Xn("read")}readSync(t){return Xn("readSync")}numDataIds(){return Xn("numDataIds")}disposeData(t,e){return Xn("disposeData")}write(t,e,n){return Xn("write")}move(t,e,n,r,s){return Xn("move")}memory(){return Xn("memory")}floatPrecision(){return Xn("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return Xn("dispose")}}function Xn(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function Jn(t){let e=t.length,n=0,r=0;for(;e>0;)r=Math.random()*e|0,e--,n=t[e],t[e]=t[r],t[r]=n}function Qn(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n,r,s=t.length,i=0;for(;s>0;)i=Math.random()*s|0,s--,n=t[s],r=e[s],t[s]=t[i],e[s]=e[i],t[i]=n,e[i]=r}function tr(t,e,n){return Math.max(t,Math.min(e,n))}function er(t){return t%2==0?t:t+1}function nr(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function rr(t,e){const n=Math.random();return e*n+(1-n)*t}function sr(t,e){let n=0;for(let r=0;r<t.length;r++){const s=Number(t[r])-Number(e[r]);n+=s*s}return n}function ir(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function or(t,e,n=""){ir(hr(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function ar(t){ir(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function lr(t,e=[],n=!1){if(null==e&&(e=[]),Array.isArray(t)||Ir(t)&&!n)for(let r=0;r<t.length;++r)lr(t[r],e,n);else e.push(t);return e}function ur(t){if(0===t.length)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function cr(t){return 0===t.length}function hr(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function dr(t){return t%1==0}function pr(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function fr(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function mr(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return Jn(e),e}function gr(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function br(t,e=(t=>0),n){return new Promise((r,s)=>{let i=0;const o=()=>{if(t())return void r();i++;const a=e(i);null!=n&&i>=n?s():setTimeout(o,a)};o()})}function yr(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(-1===t[i]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(-1===r){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(0===n)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function vr(t,e){const n=e.length;return ir((t=null==t?e.map((t,e)=>e):[].concat(t)).every(t=>t>=-n&&t<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),ir(t.every(t=>dr(t)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(t=>t<0?n+t:t)}function _r(t,e){const n=[],r=[],s=null!=e&&Array.isArray(e)&&0===e.length,i=null==e||s?null:vr(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(null!=i){if(i[o]===a&&1!==t[a])throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(null==i[o]||i[o]>a)&&1===t[a]&&(n.push(t[a]),r.push(a)),i[o]<=a&&o++}1!==t[a]&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function wr(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error(`Unknown data type ${t}`);n=new Uint8Array(e)}return n}function xr(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error(`Unknown data type ${t}`);n=new Array(e)}return n}function kr(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function Sr(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function Cr(t,e){return!("complex64"===e||"float32"===e&&"complex64"!==t||"int32"===e&&"float32"!==t&&"complex64"!==t||"bool"===e&&"bool"===t)}function Ir(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function Er(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error(`Unknown dtype ${t}`)}function Or(t){if(null==t)return 0;let e=0;return t.forEach(t=>e+=t.length),e}function Tr(t){return"string"==typeof t||t instanceof String}function Nr(t){return"boolean"==typeof t}function Ar(t){return"number"==typeof t}function Rr(t){return Array.isArray(t)?Rr(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":Ar(t)?"float32":Tr(t)?"string":Nr(t)?"bool":"float32"}function Fr(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Dr(t,e){for(let n=e;n<t;++n)if(t%n==0)return n;return t}function Pr(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function $r(t,e,n,r=!1){const s=new Array;if(1===e.length){const i=e[0]*(r?2:1);for(let e=0;e<i;e++)s[e]=n[t+e]}else{const i=e[0],o=e.slice(1),a=o.reduce((t,e)=>t*e)*(r?2:1);for(let e=0;e<i;e++)s[e]=$r(t+e*a,o,n,r)}return s}function Mr(t,e,n=!1){if(0===t.length)return e[0];const r=t.reduce((t,e)=>t*e)*(n?2:1);if(0===r)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return $r(0,t,e,n)}function Lr(t,e){const n=jr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function jr(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function zr(t,e){const n=t.reduce((t,e)=>t*e,1);if(null==e||"float32"===e)return Mr(t,new Float32Array(n));if("int32"===e)return Mr(t,new Int32Array(n));if("bool"===e)return Mr(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Br(t){t.forEach(e=>{ir(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Vr(t,e,n){if(0===e)return 0;if(1===e)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function Ur(t,e,n){if(0===e)return[];if(1===e)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function Wr(t){return t&&t.then&&"function"==typeof t.then}class Hr{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Gr,this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`),this.platformName=t,this.platform=e}registerFlag(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){const e=this.urlFlags[t];console.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags||(this.flags[t]=await this.evaluateFlag(t)),this.flags[t]}get(t){if(t in this.flags)return this.flags[t];const e=this.evaluateFlag(t);if(Wr(e))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const t=this.getQueryParams(this.global.location.search);"tfjsflags"in t&&t.tfjsflags.split(",").forEach(t=>{const[e,n]=t.split(":");this.urlFlags[e]=function(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}(e,n)})}}function Gr(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...n)=>(function(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}(e,n[0],n[1]),n.join("="))),e}function qr(){return Kr}let Zr,Kr=null;function Yr(){if(null==Zr){let t;if("undefined"!=typeof window)t=window;else if("undefined"!=typeof global)t=global;else if("undefined"!=typeof process)t=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");t=self}Zr=t}return Zr}function Xr(t,e){const n=function(){const t=Yr();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Jr="Abs",Qr="Acos",ts="Acosh",es="Add",ns="AddN",rs="All",ss="Any",is="ArgMax",os="ArgMin",as="Asin",ls="Asinh",us="Atan",cs="Atanh",hs="Atan2",ds="AvgPool",ps="AvgPoolGrad",fs="AvgPool3D",ms="AvgPool3DGrad",gs="BatchMatMul",bs="BatchToSpaceND",ys="Bincount",vs="Cast",_s="Ceil",ws="ClipByValue",xs="Complex",ks="ComplexAbs",Ss="Concat",Cs="Conv2D",Is="Conv2DBackpropFilter",Es="Conv2DBackpropInput",Os="Conv3D",Ts="Conv3DBackpropFilterV2",Ns="Conv3DBackpropInputV2",As="Cos",Rs="Cosh",Fs="Cumsum",Ds="CropAndResize",Ps="DenseBincount",$s="DepthToSpace",Ms="DepthwiseConv2dNative",Ls="DepthwiseConv2dNativeBackpropFilter",js="DepthwiseConv2dNativeBackpropInput",zs="Diag",Bs="Dilation2D",Vs="Dilation2DBackpropInput",Us="Dilation2DBackpropFilter",Ws="RealDiv",Hs="Einsum",Gs="Elu",qs="EluGrad",Zs="Erf",Ks="Equal",Ys="Exp",Xs="ExpandDims",Js="Expm1",Qs="FFT",ti="Fill",ei="FlipLeftRight",ni="Floor",ri="FloorDiv",si="FusedBatchNorm",ii="GatherV2",oi="GatherNd",ai="Greater",li="GreaterEqual",ui="Identity",ci="IFFT",hi="Imag",di="IsFinite",pi="IsInf",fi="IsNan",mi="LeakyRelu",gi="Less",bi="LessEqual",yi="LinSpace",vi="Log",_i="Log1p",wi="LogicalAnd",xi="LogicalNot",ki="LogicalOr",Si="LRN",Ci="LRNGrad",Ii="Max",Ei="Maximum",Oi="MaxPool",Ti="MaxPoolGrad",Ni="MaxPool3D",Ai="MaxPool3DGrad",Ri="MaxPoolWithArgmax",Fi="Mean",Di="Min",Pi="Minimum",$i="MirrorPad",Mi="Mod",Li="Multinomial",ji="Multiply",zi="Neg",Bi="NotEqual",Vi="NonMaxSuppressionV3",Ui="NonMaxSuppressionV4",Wi="NonMaxSuppressionV5",Hi="OnesLike",Gi="OneHot",qi="Pack",Zi="PadV2",Ki="Pow",Yi="Prelu",Xi="Prod",Ji="Range",Qi="Real",to="Reciprocal",eo="Relu",no="Reshape",ro="ResizeNearestNeighbor",so="ResizeNearestNeighborGrad",io="ResizeBilinear",oo="ResizeBilinearGrad",ao="Relu6",lo="Reverse",uo="Round",co="Rsqrt",ho="ScatterNd",po="Select",fo="Selu",mo="Slice",go="Sin",bo="Sinh",yo="Sign",vo="Sigmoid",_o="Softplus",wo="Sqrt",xo="Sum",ko="SpaceToBatchND",So="SplitV",Co="Softmax",Io="SparseFillEmptyRows",Eo="SparseReshape",Oo="SparseSegmentMean",To="SparseSegmentSum",No="SparseToDense",Ao="SquaredDifference",Ro="Square",Fo="StridedSlice",Do="StringNGrams",Po="StringSplit",$o="StringToHashBucketFast",Mo="Sub",Lo="Tan",jo="Tanh",zo="Tile",Bo="TopK",Vo="Transform",Uo="Transpose",Wo="Unique",Ho="Unpack",Go="UnsortedSegmentSum",qo="ZerosLike",Zo="Step",Ko="FromPixels",Yo="RotateWithOffset",Xo="_FusedMatMul",Jo="FusedConv2D",Qo="FusedDepthwiseConv2D",ta=Xr("kernelRegistry",()=>new Map),ea=Xr("gradRegistry",()=>new Map);function na(t,e){const n=aa(t,e);return ta.get(n)}function ra(t){return ea.get(t)}function sa(t){const e=ta.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,o]=s,[a]=i.split("_");a===t&&n.push(o)}return n}function ia(t){const{kernelName:e,backendName:n}=t,r=aa(e,n);ta.has(r)&&console.warn(`The kernel '${e}' for backend '${n}' is already registered`),ta.set(r,t)}function oa(t){const{kernelName:e}=t;ea.has(e)&&qr().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${e}'`),ea.set(e,t)}function aa(t,e){return`${e}_${t}`}var la=n("2lpH");const ua=n.n(la).a||la;function ca(t){return ua.fromString(t,!0,16)}const ha=ca("c3a5c85c97cb3127"),da=ca("b492b66fbe98f273"),pa=ca("9ae16a3b2f90404f");function fa(t){return t.xor(t.shru(47))}function ma(t,e,n){const r=t.slice(e,e+n);return ua.fromBytes(Array.from(r),!0,!0)}function ga(t,e){return ma(t,e,8)}function ba(t,e){return ma(t,e,4)}function ya(t,e){return 0===e?t:t.shru(e).or(t.shl(64-e))}function va(t,e,n=ca("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function _a(t,e,n,r){return function(t,e,n,r,s,i){s=s.add(t),i=ya(i.add(s).add(r),21);const o=s;return s=(s=s.add(e)).add(n),i=i.add(ya(s,44)),[s.add(r),i.add(o)]}(ga(t,e),ga(t,e+8),ga(t,e+16),ga(t,e+24),n,r)}function wa(t,e=t.length){const n=ua.fromNumber(81,!0);if(e<=32)return e<=16?function(t,e=t.length){if(e>=8){const n=pa.add(2*e),r=ga(t,0).add(pa),s=ga(t,e-8);return va(ya(s,37).mul(n).add(r),ya(r,25).add(s).mul(n),n)}if(e>=4){const n=pa.add(2*e);return va(ba(t,0).shl(3).add(e),ba(t,e-4),n)}if(e>0){const n=e+(t[e-1]<<2);return fa(pa.mul(t[0]+(t[e>>1]<<8)).xor(ha.mul(n))).mul(pa)}return pa}(t,e):function(t,e=t.length){const n=pa.add(2*e),r=ga(t,0).mul(da),s=ga(t,8),i=ga(t,e-8).mul(n),o=ga(t,e-16).mul(pa);return va(ya(r.add(s),43).add(ya(i,30)).add(o),r.add(ya(s.add(pa),18)).add(i),n)}(t,e);if(e<=64)return function(t,e=t.length){const n=pa.add(2*e),r=ga(t,0).mul(pa),s=ga(t,8),i=ga(t,e-8).mul(n),o=ga(t,e-16).mul(pa),a=ya(r.add(s),43).add(ya(i,30)).add(o),l=va(a,r.add(ya(s.add(pa),18)).add(i),n),u=ga(t,16).mul(n),c=ga(t,24),h=a.add(ga(t,e-32)).mul(n),d=l.add(ga(t,e-24)).mul(n);return va(ya(u.add(c),43).add(ya(h,30)).add(d),u.add(ya(c.add(r),18)).add(h),n)}(t,e);let r=n,s=n.mul(da).add(113),i=fa(s.mul(pa).add(113)).mul(pa),o=[ua.UZERO,ua.UZERO],a=[ua.UZERO,ua.UZERO];r=r.mul(pa).add(ga(t,0));let l=0;const u=64*(e-1>>6),c=u+(e-1&63)-63;do{r=ya(r.add(s).add(o[0]).add(ga(t,l+8)),37).mul(da),s=ya(s.add(o[1]).add(ga(t,l+48)),42).mul(da),r=r.xor(a[1]),s=s.add(o[0]).add(ga(t,l+40)),i=ya(i.add(a[0]),33).mul(da),o=_a(t,l,o[1].mul(da),r.add(a[0])),a=_a(t,l+32,i.add(a[1]),s.add(ga(t,l+16))),[i,r]=[r,i],l+=64}while(l!==u);const h=da.add(i.and(255).shl(1));return l=c,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=ya(r.add(s).add(o[0]).add(ga(t,l+8)),37).mul(h),s=ya(s.add(o[1]).add(ga(t,l+48)),42).mul(h),r=r.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(ga(t,l+40))),i=ya(i.add(a[0]),33).mul(h),o=_a(t,l,o[1].mul(h),r.add(a[0])),a=_a(t,l+32,i.add(a[1]),s.add(ga(t,l+16))),[i,r]=[r,i],va(va(o[0],a[0],h).add(fa(s).mul(ha)).add(i),va(o[1],a[1],h).add(r),h)}function xa(t,e){return"string"===e?Ia(t):ka([t],e)}function ka(t,e){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=lr(t)),qr().getBool("DEBUG")&&kr(t,e),function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){const e=new Uint8Array(t.length);for(let n=0;n<e.length;++n)0!==Math.round(t[n])&&(e[n]=1);return e}throw new Error(`Unknown data type ${e}`)}function Sa(){return qr().platform.now()}function Ca(t,e){return qr().platform.fetch(t,e)}function Ia(t,e="utf-8"){return e=e||"utf-8",qr().platform.encode(t,e)}function Ea(t,e="utf-8"){return e=e||"utf-8",qr().platform.decode(t,e)}class Oa{constructor(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new Na)}profileKernel(t,e,n){let r;const s=()=>{r=n()};let i;const o=Sa();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(s);else{s();for(const t of r)t.dataSync();i=Promise.resolve({kernelMs:Sa()-o})}if(qr().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let a=0;a<r.length;a++){const e=r[a];e.data().then(n=>{Ta(n,e.dtype,t)})}return{kernelName:t,outputs:r,inputs:e,timeMs:i.then(t=>t.kernelMs),extraInfo:i.then(t=>null!=t.getExtraProfileInfo?t.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:e,outputs:n,timeMs:r,inputs:s,extraInfo:i}=t;n.forEach(t=>{Promise.all([t.data(),r,i]).then(n=>{this.logger.logKernelProfile(e,t,n[0],n[1],s,n[2])})})}}function Ta(t,e,n){if("float32"!==e)return!1;for(let r=0;r<t.length;r++){const e=t[r];if(isNaN(e)||!isFinite(e))return console.warn(`Found ${e} in the result of '${n}'`),!0}return!1}class Na{logKernelProfile(t,e,n,r,s,i){const o="number"==typeof r?gr(`${r}ms`,9):r.error,a=gr(t,25),l=e.rank,u=e.size,c=gr(e.shape.toString(),14);let h="";for(const d in s){const t=s[d];if(null!=t){const n=t.shape||e.shape,r=n.length;h+=`${d}: ${r}D ${r>0?n:""} `}}console.log(`%c${a}\t%c${o}\t%c${l}D ${c}\t%c${u}\t%c${h}\t%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function Aa(t,e,n,r){const s=Pr(e),i=function(t,e,n,r){const s=ur(e),i=r[r.length-1],o=new Array(i).fill(0),a=e.length,l="complex64"===n?Pa(t):t;if(a>1)for(let u=0;u<s/i;u++){const t=u*i;for(let e=0;e<i;e++)o[e]=Math.max(o[e],Ra(l[t+e],0,n).length)}return o}(t,e,n,s),o=e.length,a=Da(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(t=>"    "+t).join("\n")),l.join("\n")}function Ra(t,e,n){let r;return r=Array.isArray(t)?`${parseFloat(t[0].toFixed(7))} + ${parseFloat(t[1].toFixed(7))}j`:Tr(t)?`'${t}'`:"bool"===n?Fa(t):parseFloat(t.toFixed(7)).toString(),gr(r,e)}function Fa(t){return 0===t?"false":"true"}function Da(t,e,n,r,s,i=!0){const o="complex64"===n?2:1,a=e[0],l=e.length;if(0===l)return"complex64"===n?[Ra(Pa(t)[0],0,n)]:"bool"===n?[Fa(t[0])]:[t[0].toString()];if(1===l){if(a>20){let e=Array.from(t.slice(0,3*o)),r=Array.from(t.slice((a-3)*o,a*o));return"complex64"===n&&(e=Pa(e),r=Pa(r)),["["+e.map((t,e)=>Ra(t,s[e],n)).join(", ")+", ..., "+r.map((t,e)=>Ra(t,s[a-3+e],n)).join(", ")+"]"]}return["["+("complex64"===n?Pa(t):Array.from(t)).map((t,e)=>Ra(t,s[e],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),h=r[0]*o,d=[];if(a>20){for(let e=0;e<3;e++){const r=e*h;d.push(...Da(t.slice(r,r+h),u,n,c,s,!1))}d.push("...");for(let e=a-3;e<a;e++){const r=e*h;d.push(...Da(t.slice(r,r+h),u,n,c,s,e===a-1))}}else for(let m=0;m<a;m++){const e=m*h;d.push(...Da(t.slice(e,e+h),u,n,c,s,m===a-1))}const p=2===l?",":"";d[0]="["+d[0]+p;for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(i?"":f),d}function Pa(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}class $a{constructor(t,e,n){if(this.dtype=e,this.shape=t.slice(),this.size=ur(t),null!=n){const t=n.length;ir(t===this.size,()=>`Length of values '${t}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||xr(e,this.size),this.strides=Pr(t)}set(t,...e){0===e.length&&(e=[0]),ir(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);const n=this.locToIndex(e);this.values[n]=t}get(...t){0===t.length&&(t=[0]);let e=0;for(const r of t){if(r<0||r>=this.shape[e])throw new Error(`Requested out of range element at ${t}.   Buffer shape=${this.shape}`);e++}let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.values[n]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let e=t[t.length-1];for(let n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];const e=new Array(this.shape.length);for(let n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return Ma().makeTensor(this.values,this.shape,this.dtype)}}let Ma=null,La=null,ja=null;class za{constructor(t,e,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=ur(t),this.strides=Pr(t),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return La.buffer(this.shape,this.dtype,t)}bufferSync(){return La.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return Mr(this.shape,t,"complex64"===this.dtype)}arraySync(){return Mr(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const t=Ma().read(this.dataId);if("string"===this.dtype){const n=await t;try{return n.map(t=>Ea(t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataSync(){this.throwIfDisposed();const t=Ma().readSync(this.dataId);if("string"===this.dtype)try{return t.map(t=>Ea(t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await Ma().read(this.dataId);return"string"===this.dtype?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(Ma().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return La.print(this,t)}clone(){return this.throwIfDisposed(),La.clone(this)}toString(t=!1){return Aa(this.dataSync(),this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),La.cast(this,t)}variable(t=!0,e,n){return this.throwIfDisposed(),Ma().makeVariable(this,t,e,n)}}function Ba(){return Xr("Tensor",()=>za)}Object.defineProperty(za,Symbol.hasInstance,{value:t=>!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed}),Ba();class Va extends za{constructor(t,e,n,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=n}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!hr(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);Ma().disposeTensor(this),this.dataId=t.dataId,Ma().incRef(this,null)}dispose(){Ma().disposeVariable(this),this.isDisposedInternal=!0}}var Ua,Wa,Ha,Ga,qa;Object.defineProperty(Va,Symbol.hasInstance,{value:t=>t instanceof za&&null!=t.assign&&t.assign instanceof Function}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(Ua||(Ua={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(Wa||(Wa={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(Ha||(Ha={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(Ga||(Ga={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(qa||(qa={}));const Za={float32:Ga,int32:Wa,bool:Ha,complex64:qa};function Ka(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Za[t][e]}function Ya(t){return Ka(t,"int32")}function Xa(t,e){if(t.dtype===e.dtype)return[t,e];const n=Ka(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Ja(t,e){ir(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function Qa(t,e){return e.some(e=>e.id===t.id)}function tl(t){const e=[];return el(t,e,new Set),e}function el(t,e,n){if(null==t)return;if(t instanceof za)return void e.push(t);if(r=t,!Array.isArray(r)&&"object"!=typeof r)return;var r;const s=t;for(const i in s){const t=s[i];n.has(t)||(n.add(t),el(t,e,n))}}function nl(t){return null!=t.kernelName}class rl{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class sl{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new rl}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e];if(await this.initializeBackend(n).success)return void(await this.setBackend(n))}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:t,asyncInit:e}=this.initializeBackendsAndReturnBest();if(e)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;{const{asyncInit:e}=this.initializeBackend(t);if(e)return null}}return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,e,n=1){return t in this.registryFactory?(console.warn(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:e,priority:n},!0)}async setBackend(t){if(null==this.registryFactory[t])throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,null==this.registry[t]){this.backendInstance=null;const{success:e,asyncInit:n}=this.initializeBackend(t);if(!(n?await e:e))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Oa(this.backendInstance),!0}setupRegisteredKernels(){sa(this.backendName).forEach(t=>{null!=t.setupFunc&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){sa(t).forEach(e=>{null!=e.disposeFunc&&e.disposeFunc(this.registry[t])})}initializeBackend(t){const e=this.registryFactory[t];if(null==e)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const n=e.factory();if(!n||n instanceof Yn||"function"!=typeof n.then)return this.registry[t]=n,{success:!0,asyncInit:!1};{const e=++this.pendingBackendInitId,r=n.then(n=>!(e<this.pendingBackendInitId||(this.registry[t]=n,this.pendingBackendInit=null,0))).catch(n=>(e<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,e)=>this.registryFactory[e].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e],{success:r,asyncInit:s}=this.initializeBackend(n);if(s||r)return{name:n,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,e){const n=this.state.tensorInfo.get(e),r=n.backend,s=this.readSync(e),i=r.refCount(e);r.disposeData(e,!0),n.backend=t,t.move(e,s,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,e){let n,r=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=e(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(t,e,n){t();try{const t=n();return e(),t}catch(r){throw e(),r}}nextTensorId(){return sl.nextTensorId++}nextVariableId(){return sl.nextVariableId++}clone(t){const e=ol.runKernel(ui,{x:t});return this.addTapeNode(this.state.activeScope.name,{x:t},[e],t=>({x:()=>ol.runKernel(vs,{x:t},{dtype:"float32"})}),[],{}),e}runKernel(t,e,n){if(null==na(t,this.backendName))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:e,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,e,n){const r=this.backend.numDataIds();let s=0;n.forEach(t=>{s+="complex64"===t.dtype?3:1});const i=r-e-s-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${i} data ids) after running '${t}'`)}runKernelFunc(t){let e,n=[];const r=this.isTapeOn(),s=this.state.numBytes,i=this.state.numTensors;let o,a;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const l=nl(t)?t.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(nl(t)){const{kernelName:e,inputs:s,attrs:i}=t,l=na(e,this.backendName);ir(null!=l,()=>`Cannot find registered kernel '${e}' for backend '${this.backendName}'`),o=()=>{const t=this.backend.numDataIds();a=l.kernelFunc({inputs:s,attrs:i,backend:this.backend});const o=Array.isArray(a)?a:[a];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(e,t,o);const u=o.map(t=>{if(null!=t.rank)return t;const{dataId:e,shape:n,dtype:r}=t;return this.makeTensorFromDataId(e,n,r)});if(r){const t=this.getTensorsForGradient(e,s,u);n=this.saveTensorsForBackwardMode(t)}return u}}else{const{forwardFunc:e}=t,s=t=>{r&&(n=t.map(t=>this.keep(this.clone(t))))};o=()=>{const t=this.backend.numDataIds();a=this.tidy(()=>e(this.backend,s));const n=Array.isArray(a)?a:[a];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,t,n),n}}const{inputs:u,attrs:c}=t,h=nl(t)?null:t.backwardsFunc;let d;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(l,u,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),e=d.outputs):e=o()}),r&&this.addTapeNode(l,u,e,h,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(t=>null!=u[t]?u[t].shape:null),outputShapes:e.map(t=>t.shape),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(a)?e:e[0]}saveTensorsForBackwardMode(t){return t.map(t=>this.keep(this.clone(t)))}getTensorsForGradient(t,e,n){const r=ra(t);if(null!=r){const t=r.inputsToSave||[],s=r.outputsToSave||[];let i;r.saveAllInputs?(ir(Array.isArray(e),()=>"saveAllInputs is true, expected inputs to be an array."),i=Object.keys(e).map(t=>e[t])):i=t.map(t=>e[t]);const o=n.filter((t,e)=>s[e]);return i.concat(o)}return[]}makeTensor(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;let s=t;"string"===(n=n||"float32")&&Tr(t[0])&&(s=t.map(t=>Ia(t)));const i=r.write(s,e,n),o=new za(e,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){const t=this.state.tensorInfo.get(i),e=Or(s);this.state.numBytes+=e-t.bytes,t.bytes=e}return o}makeTensorFromDataId(t,e,n,r){const s=new za(e,n=n||"float32",t,this.nextTensorId());return this.trackTensor(s,r),s}makeVariable(t,e=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.cast(r));const s=new Va(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[s.name])throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(t,e){this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(n=t.size*Er(t.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:n})),t instanceof Va||this.track(t)}incRef(t,e){this.trackTensor(t,e),this.backend.incRef(t.dataId)}removeDataId(t,e){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===e&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const e=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,"string"===t.dtype&&(this.state.numStringTensors--,this.state.numBytes-=e.bytes),"complex64"!==t.dtype&&"string"!==t.dtype){const e=t.size*Er(t.dtype);this.state.numBytes-=e}e.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,e.backend)}disposeVariables(){for(const t in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[t])}disposeVariable(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const e=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(t=>t.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(t,e,n,r,s,i){const o={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:s},a=ra(t);null!=a&&(r=a.gradFunc),null!=r&&(o.gradient=t=>(t=t.map((t,e)=>{if(null==t){const t=n[e],r=jr(t.size,t.dtype);return this.makeTensor(r,t.shape,t.dtype)}return t}),r(t.length>1?t:t[0],s,i))),this.state.activeTape.push(o)}keep(t){return t.kept=!0,t}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}endScope(t){const e=tl(t),n=new Set(e.map(t=>t.id));for(let s=0;s<this.state.activeScope.track.length;s++){const t=this.state.activeScope.track[s];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],e.forEach(t=>{t.kept||t.scopeId!==r.id||this.track(t)})}gradients(t,e,n,r=!1){if(ir(e.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));ir(s instanceof za,()=>"The result y returned by f() must be a tensor.");const i=function(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const n=t[l],i=n.inputs;for(const t in i){const o=i[t];let a=!1;for(let t=0;t<e.length;t++)if(r[o.id]){n.outputs.forEach(t=>r[t.id]=!0),a=!0,s[n.id]=!0;break}if(a)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const e=t[l],n=e.inputs;for(let t=0;t<e.outputs.length;t++)if(i[e.outputs[t].id]){for(const t in n)i[n[t].id]=!0,o[e.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const e=t[l];if(s[e.id]&&o[e.id]){const t={};for(const s in e.inputs){const n=e.inputs[s];r[n.id]&&(t[s]=n)}const n=Object.assign({},e);n.inputs=t,n.outputs=e.outputs,a.push(n)}}return a}(this.state.activeTape,e,s);if(!r&&0===i.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const t={};t[s.id]=null==n?function(t){const e=Lr(ur(t),"float32");return ol.makeTensor(e,t,"float32")}(s.shape):n,function(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],o=[];if(i.outputs.forEach(e=>{const n=t[e.id];o.push(null!=n?n:null)}),null==i.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(o);for(const e in i.inputs){if(!(e in a))throw new Error(`Cannot backprop through input ${e}. Available gradients found: ${Object.keys(a)}.`);const s=n(()=>a[e]());if("float32"!==s.dtype)throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${e} must have 'float32' dtype, but has '${s.dtype}'`);const o=i.inputs[e];if(!hr(s.shape,o.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${e}' has shape '${s.shape}', which does not match the shape of the input '${o.shape}'`);if(null==t[o.id])t[o.id]=s;else{const e=t[o.id];t[o.id]=r(e,s),e.dispose()}}}}(t,i,t=>this.tidy(t),al);const r=e.map(e=>t[e.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(t=>{for(const e of t.saved)e.dispose()}),this.state.activeTape=null),{value:s,grads:r}})}customGrad(t){return ir(Fr(t),()=>"The f passed in customGrad(f) must be a function."),(...e)=>{let n;ir(e.every(t=>t instanceof za),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const r={};return e.forEach((t,e)=>{r[e]=t}),this.runKernelFunc({forwardFunc:(r,s)=>(n=t(...e,s),ir(n.value instanceof za,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),ir(Fr(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),backwardsFunc:(t,r)=>{const s=n.gradFunc(t,r),i=Array.isArray(s)?s:[s];ir(i.length===e.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),ir(i.every(t=>t instanceof za),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const o={};return i.forEach((t,e)=>{o[e]=()=>t}),o},inputs:r})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}async time(t){const e=Sa(),n=await this.backend.time(t);return n.wallMs=Sa()-e,n}track(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new rl;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function il(){const t=Yr();if(null==t._tfengine){const e=new Hr(t);t._tfengine=new sl(e)}return Kr=t._tfengine.ENV,Ma=()=>t._tfengine,t._tfengine}sl.nextTensorId=0,sl.nextVariableId=0;const ol=il();function al(t,e){return ol.runKernel(es,{a:t,b:e})}function ll(t){if(t||"undefined"!=typeof navigator&&null!=navigator){if(t||(t=navigator),"ReactNative"===t.product)return!0;const e=t.userAgent||t.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function ul(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}const cl=qr();function hl(t,e){let n=t;if(Ir(t))return"string"===e?[]:[t.length];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Ir(n)&&"string"!==e;)r.push(n.length),n=n[0];return Array.isArray(t)&&qr().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&dl(t,r,[]),r}function dl(t,e,n){if(n=n||[],!Array.isArray(t)&&!Ir(t))return void ir(0===e.length,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);ir(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),ir(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)dl(t[s],r,n.concat(s))}function pl(t,e,n,r){if("string_or_numeric"!==t){if(null==t)throw new Error("Expected dtype cannot be null.");if("numeric"!==t&&t!==e||"numeric"===t&&"string"===e)throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function fl(t,e,n,r="numeric"){if(t instanceof za)return pl(r,t.dtype,e,n),t;let s=Rr(t);if("string"!==s&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),pl(r,s,e,n),null==t||!Ir(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${null==t?"null":t.constructor.name}'`);const i=hl(t,s);Ir(t)||Array.isArray(t)||(t=[t]);const o="string"!==s?ka(t,s):lr(t,[],!0);return ol.makeTensor(o,i,s)}function ml(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((t,s)=>fl(t,`${e}[${s}]`,n,r))}function gl(t){const e=Object.keys(t);if(1!==e.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const s=(...t)=>{ol.startScope(n);try{const e=r(...t);return Wr(e)&&console.error("Cannot return a Promise inside of tidy."),ol.endScope(e),e}catch(e){throw ol.endScope(null),e}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}cl.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),cl.registerFlag("IS_BROWSER",()=>ul()),cl.registerFlag("IS_NODE",()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node),cl.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),cl.registerFlag("PROD",()=>!1),cl.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>cl.getBool("DEBUG")),cl.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),cl.registerFlag("IS_TEST",()=>!1),cl.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),cl.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);const bl=gl({complex_:function(t,e){const n=fl(t,"real","complex"),r=fl(e,"imag","complex");return or(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`),ol.runKernel(xs,{real:n,imag:r})}});function yl(t,e,n,r){if(null==r&&(r=Rr(t)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ir(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){Br(e);const t=ur(e),r=ur(n);ir(t===r,()=>`Based on the provided shape, [${e}], the tensor should have ${t} values but has ${r}`);for(let s=0;s<n.length;++s){const t=n[s],r=s!==n.length-1||t!==ur(e.slice(s));ir(n[s]===e[s]||!r,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return Ir(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==r?ka(t,r):lr(t,[],!0),ol.makeTensor(t,e,r)}function vl(t,e,n){return yl(t,e,hl(t,n),n)}const _l={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};async function wl(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);for(let i=0;i<s.length;++i){const o=s[i],a=Array.isArray(t)?t[i].tensor:t[o];if("float32"!==a.dtype&&"int32"!==a.dtype&&"bool"!==a.dtype&&"string"!==a.dtype&&"complex64"!==a.dtype)throw new Error(`Unsupported dtype in weight '${o}': ${a.dtype}`);const l={name:o,shape:a.shape,dtype:a.dtype};if("string"===a.dtype){const t=new Promise(async t=>{const e=await a.bytes(),n=e.reduce((t,e)=>t+e.length,0)+4*e.length,r=new Uint8Array(n);let s=0;for(let i=0;i<e.length;i++){const t=e[i],n=new Uint8Array(new Uint32Array([t.length]).buffer);r.set(n,s),s+=4,r.set(t,s),s+=t.length}t(r)});r.push(t)}else r.push(a.data());null!=e&&(l.group=e),n.push(l)}return{data:kl(await Promise.all(r)),specs:n}}function xl(t,e){const n={};let r,s=0;for(const i of e){const e=i.name,o=i.dtype,a=i.shape,l=ur(a);let u;if("quantization"in i){const n=i.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${i.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${i.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==o)throw new Error(`Weight ${i.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${o}.`)}const a=_l[n.dtype],c=t.slice(s,s+l*a),h="uint8"===n.dtype?new Uint8Array(c):new Uint16Array(c);if("float32"===o)if("uint8"===n.dtype||"uint16"===n.dtype){u=new Float32Array(h.length);for(let t=0;t<h.length;t++)u[t]=h[t]*n.scale+n.min}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===r&&(r=Tl()),u=r(h)}else{if("int32"!==o)throw new Error(`Unsupported dtype in weight '${e}': ${o}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);u=new Int32Array(h.length);for(let t=0;t<h.length;t++)u[t]=Math.round(h[t]*n.scale+n.min)}s+=l*a}else if("string"===o){const e=ur(i.shape);u=[];for(let n=0;n<e;n++){const e=new Uint32Array(t.slice(s,s+4))[0];s+=4;const n=new Uint8Array(t.slice(s,s+e));u.push(n),s+=e}}else{const r=_l[o],i=t.slice(s,s+l*r);if("float32"===o)u=new Float32Array(i);else if("int32"===o)u=new Int32Array(i);else if("bool"===o)u=new Uint8Array(i);else{if("complex64"!==o)throw new Error(`Unsupported dtype in weight '${e}': ${o}`);{u=new Float32Array(i);const t=new Float32Array(u.length/2),r=new Float32Array(u.length/2);for(let e=0;e<t.length;e++)t[e]=u[2*e],r[e]=u[2*e+1];const s=vl(t,a,"float32"),o=vl(r,a,"float32");n[e]=bl(s,o),s.dispose(),o.dispose()}}s+=l*r}"complex64"!==o&&(n[e]=vl(u,a,o))}return n}function kl(t){if(null===t)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(t=>{if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${t.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(t=>{r.set(new Uint8Array(t.buffer),s),s+=t.byteLength}),r.buffer}const Sl="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Cl(t){return Sl?Buffer.byteLength(t):new Blob([t]).size}function Il(t){if(1===t.length)return t[0];let e=0;t.forEach(t=>{e+=t.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(t=>{n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function El(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);const e=t.split("/");return e[e.length-1]}function Ol(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:Cl(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:Cl(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}function Tl(){const t=function(){const t=t=>{let e=t<<13,n=0;for(;0==(8388608&e);)n-=8388608,e<<=1;return e&=-8388609,n+=947912704,e|n},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}(),e=function(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}(),n=function(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}();return r=>{const s=new ArrayBuffer(4*r.length),i=new Uint32Array(s);for(let o=0;o<r.length;o++){const s=r[o];i[o]=t[n[s>>10]+(1023&s)]+e[s>>10]}return new Float32Array(s)}}class Nl{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==Nl.instance&&(Nl.instance=new Nl),Nl.instance}static registerSaveRouter(t){Nl.getInstance().saveRouters.push(t)}static registerLoadRouter(t){Nl.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return Nl.getHandlers(t,"save")}static getLoadHandlers(t,e){return Nl.getHandlers(t,"load",e)}static getHandlers(t,e,n){const r=[];return("load"===e?Nl.getInstance().loadRouters:Nl.getInstance().saveRouters).forEach(e=>{const s=e(t,n);null!==s&&r.push(s)}),r}}const Al=t=>Nl.registerSaveRouter(t),Rl=t=>Nl.registerLoadRouter(t),Fl=t=>Nl.getSaveHandlers(t),Dl=(t,e)=>Nl.getLoadHandlers(t,e),Pl="tensorflowjs",$l="models_store",Ml="model_info_store";function Ll(){if(!qr().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t="undefined"==typeof window?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function jl(t){const e=t.result;e.createObjectStore($l,{keyPath:"modelPath"}),e.createObjectStore(Ml,{keyPath:"modelPath"})}class zl{constructor(t){if(this.indexedDB=Ll(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,e){return new Promise((t,n)=>{const r=this.indexedDB.open(Pl,1);r.onupgradeneeded=()=>jl(r),r.onsuccess=()=>{const s=r.result;if(null==e){const e=s.transaction($l,"readonly"),r=e.objectStore($l).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return s.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));t(r.result.modelArtifacts)},r.onerror=t=>(s.close(),n(r.error)),e.oncomplete=()=>s.close()}else{const r=Ol(e),i=s.transaction(Ml,"readwrite");let o=i.objectStore(Ml);const a=o.put({modelPath:this.modelPath,modelArtifactsInfo:r});let l;a.onsuccess=()=>{l=s.transaction($l,"readwrite");const a=l.objectStore($l).put({modelPath:this.modelPath,modelArtifacts:e,modelArtifactsInfo:r});a.onsuccess=()=>t({modelArtifactsInfo:r}),a.onerror=t=>{o=i.objectStore(Ml);const e=o.delete(this.modelPath);e.onsuccess=()=>(s.close(),n(a.error)),e.onerror=t=>(s.close(),n(a.error))}},a.onerror=t=>(s.close(),n(a.error)),i.oncomplete=()=>{null==l?s.close():l.oncomplete=()=>s.close()}}},r.onerror=t=>n(r.error)})}}zl.URL_SCHEME="indexeddb://";const Bl=t=>{return qr().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(zl.URL_SCHEME)?(e=t.slice(zl.URL_SCHEME.length),new zl(e)):null;var e};Nl.registerSaveRouter(Bl),Nl.registerLoadRouter(Bl);class Vl{constructor(){this.indexedDB=Ll()}async listModels(){return new Promise((t,e)=>{const n=this.indexedDB.open(Pl,1);n.onupgradeneeded=()=>jl(n),n.onsuccess=()=>{const r=n.result,s=r.transaction(Ml,"readonly"),i=s.objectStore(Ml).getAll();i.onsuccess=()=>{const e={};for(const t of i.result)e[t.modelPath]=t.modelArtifactsInfo;t(e)},i.onerror=t=>(r.close(),e(i.error)),s.oncomplete=()=>r.close()},n.onerror=t=>e(n.error)})}async removeModel(t){var e;return t=(e=t).startsWith(zl.URL_SCHEME)?e.slice(zl.URL_SCHEME.length):e,new Promise((e,n)=>{const r=this.indexedDB.open(Pl,1);r.onupgradeneeded=()=>jl(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(Ml,"readwrite"),o=i.objectStore(Ml),a=o.get(t);let l;a.onsuccess=()=>{if(null==a.result)return s.close(),n(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const r=o.delete(t),i=()=>{l=s.transaction($l,"readwrite");const r=l.objectStore($l).delete(t);r.onsuccess=()=>e(a.result.modelArtifactsInfo),r.onerror=t=>n(a.error)};r.onsuccess=i,r.onerror=t=>(i(),s.close(),n(a.error))}},a.onerror=t=>(s.close(),n(a.error)),i.oncomplete=()=>{null==l?s.close():l.oncomplete=()=>s.close()}},r.onerror=t=>n(r.error)})}}const Ul="/",Wl="tensorflowjs_models",Hl="info",Gl="model_topology",ql="weight_specs",Zl="weight_data",Kl="model_metadata";function Yl(t){return{info:[Wl,t,Hl].join(Ul),topology:[Wl,t,Gl].join(Ul),weightSpecs:[Wl,t,ql].join(Ul),weightData:[Wl,t,Zl].join(Ul),modelMetadata:[Wl,t,Kl].join(Ul)}}function Xl(t){const e=t.split(Ul);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Ul)}class Jl{constructor(t){if(!qr().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Yl(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),s=Ol(t);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(t){if(Sl)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}(t.weightData));const e={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};return null!=t.signature&&(e.signature=t.signature),null!=t.userDefinedMetadata&&(e.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(e.modelInitializer=t.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(e)),{modelArtifactsInfo:s}}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(null==t)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const e={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);e.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);e.weightSpecs=r;const s=this.LS.getItem(this.keys.modelMetadata);if(null!=s){const t=JSON.parse(s);e.format=t.format,e.generatedBy=t.generatedBy,e.convertedBy=t.convertedBy,null!=t.signature&&(e.signature=t.signature),null!=t.userDefinedMetadata&&(e.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(e.modelInitializer=t.modelInitializer)}const i=this.LS.getItem(this.keys.weightData);if(null==i)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return e.weightData=function(t){if(Sl){const e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}(i),e}}Jl.URL_SCHEME="localstorage://";const Ql=t=>{return qr().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Jl.URL_SCHEME)?(e=t.slice(Jl.URL_SCHEME.length),new Jl(e)):null;var e};Nl.registerSaveRouter(Ql),Nl.registerLoadRouter(Ql);class tu{constructor(){ir(qr().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),ir("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},e=Wl+Ul,n=Ul+Hl;for(let r=0;r<this.LS.length;++r){const s=this.LS.key(r);s.startsWith(e)&&s.endsWith(n)&&(t[Xl(s)]=JSON.parse(this.LS.getItem(s)))}return t}async removeModel(t){var e;const n=Yl(t=(e=t).startsWith(Jl.URL_SCHEME)?e.slice(Jl.URL_SCHEME.length):e);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${t}'`);const r=JSON.parse(this.LS.getItem(n.info));return this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),r}}const eu="://";class nu{constructor(){this.managers={}}static getInstance(){return null==nu.instance&&(nu.instance=new nu),nu.instance}static registerManager(t,e){ir(null!=t,()=>"scheme must not be undefined or null."),t.endsWith(eu)&&(t=t.slice(0,t.indexOf(eu))),ir(t.length>0,()=>"scheme must not be an empty string.");const n=nu.getInstance();ir(null==n.managers[t],()=>`A model store manager is already registered for scheme '${t}'.`),n.managers[t]=e}static getManager(t){const e=this.getInstance().managers[t];if(null==e)throw new Error(`Cannot find model manager for scheme '${t}'`);return e}static getSchemes(){return Object.keys(this.getInstance().managers)}}function ru(t){if(-1===t.indexOf(eu))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${nu.getSchemes().join(",")}`);return{scheme:t.split(eu)[0],path:t.split(eu)[1]}}async function su(t,e,n=!1){ir(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Nl.getLoadHandlers(t);ir(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),ir(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],i=Nl.getSaveHandlers(e);ir(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),ir(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],a=ru(t).scheme,l=ru(t).path,u=a===ru(t).scheme,c=await s.load();n&&u&&await nu.getManager(a).removeModel(l);const h=await o.save(c);return n&&!u&&await nu.getManager(a).removeModel(l),h.modelArtifactsInfo}async function iu(){const t=nu.getSchemes(),e={};for(const n of t){const t=await nu.getManager(n).listModels();for(const r in t)e[n+eu+r]=t[r]}return e}async function ou(t){const e=ru(t);return nu.getManager(e.scheme).removeModel(e.path)}async function au(t,e){return su(t,e,!1)}async function lu(t,e){return su(t,e,!0)}class uu{fetch(t,e){return fetch(t,e)}now(){return performance.now()}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,e){return new TextDecoder(e).decode(t)}}if(qr().get("IS_BROWSER")){qr().setPlatform("browser",new uu);try{nu.registerManager(Jl.URL_SCHEME,new tu)}catch(ZW){}try{nu.registerManager(zl.URL_SCHEME,new Vl)}catch(ZW){}}let cu;function hu(t,e="float32",n){return e=e||"float32",Br(t),new $a(t,e,n)}qr().get("IS_NODE")&&qr().setPlatform("node",new class{constructor(){this.util=n(2),this.textEncoder=new this.util.TextEncoder}fetch(t,e){return null!=qr().global.fetch?qr().global.fetch(t,e):(null==cu&&(cu=n(1)),cu(t,e))}now(){const t=process.hrtime();return 1e3*t[0]+t[1]/1e6}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(t)}decode(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)}});const du=gl({cast_:function(t,e){const n=fl(t,"x","cast");if(!Sr(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return ol.runKernel(vs,{x:n},{dtype:e})}}),pu=gl({clone_:function(t){const e=fl(t,"x","clone","string_or_numeric");return ol.runKernel(ui,{x:e})}});function fu(t){return new Promise(t=>setTimeout(t)).then(t)}il(),La={buffer:hu,cast:du,clone:pu,print:function(t,e=!1){console.log(t.toString(e))}};class mu{constructor(t){if(!qr().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(mu.URL_SCHEME)&&(t=t.slice(mu.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}async save(t){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}]};null!=t.signature&&(n.signature=t.signature),null!=t.userDefinedMetadata&&(n.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(n.modelInitializer=t.modelInitializer);const r=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),s=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(s.download=this.modelTopologyFileName,s.href=r,await fu(()=>s.dispatchEvent(new MouseEvent("click"))),null!=t.weightData){const t=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;t.download=this.weightDataFileName,t.href=e,await fu(()=>t.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Ol(t)}}}}mu.URL_SCHEME="downloads://";class gu{constructor(t){if(null==t||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.files=t}async load(){const t=this.files[0],e=this.files.slice(1);return new Promise((n,r)=>{const s=new FileReader;s.onload=s=>{const i=JSON.parse(s.target.result),o=i.modelTopology;if(null==o)return void r(new Error(`modelTopology field is missing from file ${t.name}`));0===e.length&&n({modelTopology:o});const a=i.weightsManifest;if(null==a)return void r(new Error(`weightManifest field is missing from file ${t.name}`));let l;try{l=this.checkManifestAndWeightFiles(a,e)}catch(ZW){return void r(ZW)}const u=[],c=[],h=[];a.forEach(t=>{t.paths.forEach(t=>{c.push(t),h.push(null)}),u.push(...t.weights)}),a.forEach(t=>{t.paths.forEach(t=>{const e=new FileReader;e.onload=e=>{const r=e.target.result,s=c.indexOf(t);if(h[s]=r,-1===h.indexOf(null)){const t={modelTopology:o,weightSpecs:u,weightData:Il(h),format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy};null!=i.signature&&(t.signature=i.signature),null!=i.userDefinedMetadata&&(t.userDefinedMetadata=i.userDefinedMetadata),null!=i.modelInitializer&&(t.modelInitializer=i.modelInitializer),n(t)}},e.onerror=e=>r(`Failed to weights data from file of path '${t}'.`),e.readAsArrayBuffer(l[t])})})},s.onerror=e=>r(`Failed to read model topology and weights manifest JSON from file '${t.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),s.readAsText(t)})}checkManifestAndWeightFiles(t,e){const n=[],r=e.map(t=>El(t.name)),s={};for(const i of t)i.paths.forEach(t=>{const i=El(t);if(-1!==n.indexOf(i))throw new Error(`Duplicate file basename found in weights manifest: '${i}'`);if(n.push(i),-1===r.indexOf(i))throw new Error(`Weight file with basename '${i}' is not provided.`);s[t]=e[r.indexOf(i)]});if(n.length!==e.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${e.length}).`);return s}}function bu(t){return new gu(t)}function yu(t,e,n,r){!function(t){ir(null!=t&&Array.isArray(t)&&t.length>0,()=>"promises must be a none empty array")}(t),function(t,e){ir(t>=0&&t<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${t}`),ir(e>=0&&e<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${e}`),ir(e>=t,()=>`startFraction must be no more than endFraction, but got startFraction ${t} and endFraction ${e}`)}(n=null==n?0:n,r=null==r?1:r);let s=0;return Promise.all(t.map(i=>(i.then(i=>{const o=n+ ++s/t.length*(r-n);return e(o),i}),i)))}async function vu(t,e){null==e&&(e={});const n=null==e.fetchFunc?qr().platform.fetch:e.fetchFunc,r=t.map(t=>n(t,e.requestInit,{isBinary:!0})),s=(null==e.onProgress?await Promise.all(r):await yu(r,e.onProgress,0,.5)).map(t=>t.arrayBuffer());return null==e.onProgress?await Promise.all(s):await yu(s,e.onProgress,.5,1)}async function _u(t,e="",n,r){return wu(t=>vu(t,{requestInit:r}))(t,e,n)}function wu(t){return async(e,n="",r)=>{const s=e.map(()=>!1),i={},o=null!=r?r.map(()=>!1):[],a=[];if(e.forEach((t,e)=>{let n=0;t.weights.forEach(t=>{const l=_l["quantization"in t?t.quantization.dtype:t.dtype]*ur(t.shape),u=()=>{s[e]=!0,null==i[e]&&(i[e]=[]),i[e].push({manifestEntry:t,groupOffset:n,sizeBytes:l})};null!=r?r.forEach((e,n)=>{e===t.name&&(u(),o[n]=!0)}):u(),a.push(t.name),n+=l})}),!o.every(t=>t)){const t=r.filter((t,e)=>!o[e]);throw new Error(`Could not find weights in manifest with names: ${t.join(", ")}. \nManifest JSON has weights with names: ${a.join(", ")}.`)}const l=s.reduce((t,e,n)=>(e&&t.push(n),t),[]),u=[];l.forEach(t=>{e[t].paths.forEach(t=>{const e=n+(n.endsWith("/")?"":"/")+t;u.push(e)})});const c=await t(u),h={};let d=0;return l.forEach(t=>{const n=e[t].paths.length;let r=0;for(let e=0;e<n;e++)r+=c[d+e].byteLength;const s=new ArrayBuffer(r),o=new Uint8Array(s);let a=0;for(let e=0;e<n;e++){const t=new Uint8Array(c[d+e]);o.set(t,a),a+=t.byteLength}i[t].forEach(t=>{const e=xl(s.slice(t.groupOffset,t.groupOffset+t.sizeBytes),[t.manifestEntry]);for(const n in e)h[n]=e[n]}),d+=n}),h}}Nl.registerSaveRouter(t=>qr().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(mu.URL_SCHEME)?function(t="model"){return new mu(t)}(t.slice(mu.URL_SCHEME.length)):null);class xu{constructor(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,this.weightUrlConverter=e.weightUrlConverter,null!=e.fetchFunc?(ir("function"==typeof e.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=e.fetchFunc):this.fetch=qr().platform.fetch,ir(null!=t&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&ir(2===t.length,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);e.body=new FormData;const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:[{paths:["./model.weights.bin"],weights:t.weightSpecs}]};null!=t.signature&&(n.signature=t.signature),null!=t.userDefinedMetadata&&(n.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(n.modelInitializer=t.modelInitializer),e.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin");const r=await this.fetch(this.path,e);if(r.ok)return{modelArtifactsInfo:Ol(t),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let e;try{e=await t.json()}catch(p){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=e.modelTopology,r=e.weightsManifest,s=e.generatedBy,i=e.convertedBy,o=e.format,a=e.signature,l=e.userDefinedMetadata;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);let u,c;if(null!=r){const t=await this.loadWeights(r);[u,c]=t}const h={modelTopology:n,weightSpecs:u,weightData:c,generatedBy:s,convertedBy:i,format:o};null!=a&&(h.signature=a),null!=l&&(h.userDefinedMetadata=l);const d=e.modelInitializer;return d&&(h.modelInitializer=d),h}async loadWeights(t){const e=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}(e),s=this.weightPathPrefix||n,i=[];for(const l of t)i.push(...l.weights);const o=[],a=[];for(const l of t)for(const t of l.paths)null!=this.weightUrlConverter?a.push(this.weightUrlConverter(t)):o.push(s+t+r);return this.weightUrlConverter&&o.push(...await Promise.all(a)),[i,Il(await vu(o,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress}))]}}function ku(t){return null!=t.match(xu.URL_SCHEME_REGEX)}xu.URL_SCHEME_REGEX=/^https?:\/\//;const Su=(t,e)=>{if("undefined"==typeof fetch&&(null==e||null==e.fetchFunc))return null;{let n=!0;if(n=Array.isArray(t)?t.every(t=>ku(t)):ku(t),n)return Cu(t,e)}return null};function Cu(t,e){return new xu(t,e)}function Iu(t,e){return Cu(t,e)}Nl.registerSaveRouter(Su),Nl.registerLoadRouter(Su);class Eu{constructor(t){this.modelArtifacts=t}async load(){return this.modelArtifacts}}class Ou{constructor(t){this.saveHandler=t}async save(t){return this.saveHandler(t)}}function Tu(t,e,n,r){return 1===arguments.length?null!=t.modelTopology||null!=t.weightSpecs?new Eu(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Eu({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Eu({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function Nu(t){return new Ou(t)}let Au;function Ru(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,i=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&t instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement)s=!0;else if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)i=!0;else if(null!=t.getContext)o=!0;else{if(!("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);a=!0}if(s){const e=2;if(s&&t.readyState<e)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=na(Ko,ol.backendName))return ol.runKernel(Ko,{pixels:t},{numChannels:e});const[l,u]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let c,h;if(o?c=t.getContext("2d").getImageData(0,0,l,u).data:r||n?c=t.data:(i||s||a)&&(null==Au&&(Au=document.createElement("canvas").getContext("2d")),Au.canvas.width=l,Au.canvas.height=u,Au.drawImage(t,0,0,l,u),c=Au.getImageData(0,0,l,u).data),4===e)h=new Int32Array(c);else{const t=l*u;h=new Int32Array(t*e);for(let n=0;n<t;n++)for(let t=0;t<e;++t)h[n*e+t]=c[4*n+t]}return function(t,e,n){if(ar(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");const r=hl(t,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return yl(t,e,r,n)}(h,[u,l,e],"int32")}async function Fu(t,e=3){let n=null;if(qr().getBool("WRAP_TO_IMAGEBITMAP")&&function(t){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(t instanceof ImageBitmap)&&function(t){return null!=t&&0!==t.width&&0!==t.height}(t)&&!function(t){return null!=t&&t.data instanceof Uint8Array}(t)}(t)){let e;try{e=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch(r){e=null}n=null!=e&&e.width===t.width&&e.height===t.height?e:t}else n=t;return Ru(n,e)}async function Du(t,e){let n=fl(t,"img","toPixels");if(!(t instanceof za)){const t=n;n=du(t,"int32"),t.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,s]=n.shape.slice(0,2),i=2===n.rank?1:n.shape[2];if(i>4||2===i)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${i}`);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const o=await n.data(),a="float32"===n.dtype?255:1,l=new Uint8ClampedArray(s*r*4);for(let u=0;u<r*s;++u){const t=[0,0,0,255];for(let r=0;r<i;r++){const e=o[u*i+r];if("float32"===n.dtype){if(e<0||e>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${e}.`)}else if("int32"===n.dtype&&(e<0||e>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${e}.`);1===i?(t[0]=e*a,t[1]=e*a,t[2]=e*a):t[r]=e*a}const e=4*u;l[e+0]=Math.round(t[0]),l[e+1]=Math.round(t[1]),l[e+2]=Math.round(t[2]),l[e+3]=Math.round(t[3])}if(null!=e){e.width=s,e.height=r;const t=e.getContext("2d"),n=new ImageData(l,s,r);t.putImageData(n,0,0)}return n!==t&&n.dispose(),l}const Pu=gl({fromPixels_:Ru});function $u(t,e,n){const r=t.shape.length;ir(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),ir(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)ir(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function Mu(t){const e=[];let n=0;for(;t>0;)1&t&&e.push(n),t/=2,n++;return e}function Lu(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function ju(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)0===i?s[e]=1:(s.splice(e,0,1),s.pop());return s}function zu(t,e,n){return n<=t?n:n-(e-1)}function Bu(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Vu(t,e,n,r,s,i,o,a,l){const u=t.length;let c=new Array(u),h=new Array(u),d=new Array(u);if(e.length&&n>0){const l=e[0],u=n+1;c=Uu(o,l,u,r,t),h=Wu(a,l,u,s,t),d=ju(i,l,u,t)}else for(let p=0;p<u;p++)c[p]=Gu(o,r,i,t,p,l),h[p]=qu(a,s,i,t,p,l),d[p]=Hu(i,p,l);return{begin:c,end:h,strides:d}}function Uu(t,e,n,r,s){const i=[...s],o=Bu(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=0;else{const s=zu(e,n,a);let o=r[s];t&1<<s&&(o=0),i[a]=o}return i}function Wu(t,e,n,r,s){const i=[...s],o=Bu(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{const s=zu(e,n,a);let o=r[s];t&1<<s&&(o=Number.MAX_SAFE_INTEGER),i[a]=o}for(let a=0;a<i.length;a++){const t=s[a];i[a]<0&&(i[a]+=t),i[a]=tr(0,i[a],s[a])}return i}function Hu(t,e,n){let r=t[e];return(n&1<<e||null==r)&&(r=1),r}function Gu(t,e,n,r,s,i){let o=e[s];(t&1<<s||i&1<<s||null==o)&&(o=(n[s]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const a=r[s];return o<0&&(o+=a),o=tr(0,o,a-1),o}function qu(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||null==o)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),o=a>0?tr(0,o,l):tr(-1,o,l-1),o}function Zu(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function Ku(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Yu(t,e,n){let r;const s=t.shape.length;let i;return r="number"==typeof e?[e,...new Array(s-1).fill(0)]:e.length<s?e.concat(new Array(s-e.length).fill(0)):e.slice(),r.forEach(t=>{ir(-1!==t,()=>"slice() does not support negative begin indexing.")}),i=null==n?new Array(s).fill(-1):"number"==typeof n?[n,...new Array(s-1).fill(-1)]:n.length<s?n.concat(new Array(s-n.length).fill(-1)):n,i=i.map((e,n)=>e>=0?e:(ir(-1===e,()=>`Negative size values should be exactly -1 but got ${e} for the slice() size at index ${n}.`),t.shape[n]-r[n])),[r,i]}function Xu(t,e,n,r,s,i,o,a,l){let u=e.slice(),c=n.slice(),h=r;null==r&&(h=new Array(u.length));const d=Mu(o);if(d.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==o&&0!==a)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==o&&0!==l)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const p=t.length-u.length,f=Mu(a),m=t.slice();f.forEach(t=>{u[t]=0,c[t]=1,m.splice(t,0,1)});const{begin:g,end:b,strides:y}=Vu(m,d,p,u,c,h,s,i,o);u=g,c=b,h=y;const v=Mu(l);v.forEach(t=>{c[t]=u[t]+1,h[t]=1});const _=Lu(u,c,h),w=_.filter((t,e)=>-1===v.indexOf(e));return{nonStrided:h.every(t=>1===t),$begin:u,$end:c,$strides:h,size:_,newShape:m,outShape:w}}class Ju{getClassName(){return this.constructor.className}static fromConfig(t,e){return new t(e)}}class Qu{constructor(){this.classNameMap={}}static getMap(){return null==Qu.instance&&(Qu.instance=new Qu),Qu.instance}static register(t){Qu.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function tc(t){ir(null!=t.className,()=>"Class being registered does not have the static className property defined."),ir("string"==typeof t.className,()=>"className is required to be a string, but got type "+typeof t.className),ir(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Qu.register(t)}function ec(){return ol}function nc(){return ol.memory()}function rc(t,e){return ol.tidy(t,e)}function sc(t){tl(t).forEach(t=>t.dispose())}function ic(t){return ol.keep(t)}function oc(t,e,n=1){return ol.registerBackend(t,e,n)}function ac(t){return ol.customGrad(t)}function lc(t,e){if((Ir(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&Ir(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return yl(t,[],[],e)}ja=function(t){qr().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")};class uc extends Ju{minimize(t,e=!1,n){const{value:r,grads:s}=this.computeGradients(t,n);if(null!=n){const t=n.map(t=>({name:t.name,tensor:s[t.name]}));this.applyGradients(t)}else this.applyGradients(s);return sc(s),e?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,e){return function(t,e){ir(Fr(t),()=>"The f passed in variableGrads(f) must be a function"),ir(null==e||Array.isArray(e)&&e.every(t=>t instanceof Va),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=e;if(!n){e=[];for(const t in ol.registeredVariables)e.push(ol.registeredVariables[t])}const r=n?e.filter(t=>!t.trainable):null,s=e.length;ir((e=e.filter(t=>t.trainable)).length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const{value:i,grads:o}=ol.gradients(t,e,null,!0);ir(o.some(t=>null!=t),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),ir(0===i.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const a={};return e.forEach((t,e)=>{null!=o[e]&&(a[t.name]=o[e])}),null!=r&&r.forEach(t=>a[t.name]=null),{value:i,grads:a}}(t,e)}dispose(){null!=this.iterations_&&sc(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:lc(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(uc,Symbol.hasInstance,{value:t=>null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients});const cc=gl({abs_:function(t){const e=fl(t,"x","abs");return ol.runKernel("complex64"===e.dtype?ks:Jr,{x:e})}}),hc=gl({add_:function(t,e){let n=fl(t,"a","add"),r=fl(e,"b","add");return[n,r]=Xa(n,r),ol.runKernel(es,{a:n,b:r})}}),dc=gl({all_:function(t,e=null,n=!1){const r=fl(t,"x","all","bool");return ol.runKernel(rs,{x:r},{axis:e,keepDims:n})}}),pc=gl({any_:function(t,e=null,n=!1){const r=fl(t,"x","any","bool");return ol.runKernel(ss,{x:r},{axis:e,keepDims:n})}}),fc=gl({argMax_:function(t,e=0){const n=fl(t,"x","argMax");return ol.runKernel(is,{x:n},{axis:e})}});function mc(t,e,n,r,s="NHWC",i){return yc(t,[...e,t[3]],n,i,r,null,null,Ec(s))}function gc(t,e,n,r,s,i,o="channelsLast"){const[a,l]=wc(e);let u;if("channelsLast"===o)u=[a,l,t[3],t[3]];else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);u=[a,l,t[1],t[1]]}return yc(t,u,n,r,s,i,!1,o)}function bc(t,e,n,r,s,i,o="NDHWC"){const[a,l,u]=xc(e);let c,h;if("NDHWC"===o)h="channelsLast",c=[a,l,u,t[4],t[4]];else{if("NCDHW"!==o)throw new Error(`Unknown dataFormat ${o}`);h="channelsFirst",c=[a,l,u,t[1],t[1]]}return vc(t,c,n,r,s,!1,h,i)}function yc(t,e,n,r,s,i,o=!1,a="channelsLast"){let[l,u,c,h]=[-1,-1,-1,-1];if("channelsLast"===a)[l,u,c,h]=t;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[l,h,u,c]=t}const[d,p,,f]=e,[m,g]=wc(n),[b,y]=wc(r),v=kc(d,b),_=kc(p,y),{padInfo:w,outHeight:x,outWidth:k}=function(t,e,n,r,s,i,o,a,l){let u,c,h;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};const s=function(t,e,n,r,s){null==r&&(r=_c(t,e,n));const i=t[1];return[Sc((t[0]-e+2*r)/n+1,s),Sc((i-e+2*r)/n+1,s)]}([e,n],i,r,t,a);c=s[0],h=s[1]}else if("same"===t){c=Math.ceil(e/r),h=Math.ceil(n/s);const t=Math.max(0,(c-1)*r+i-e),a=Math.max(0,(h-1)*s+o-n),l=Math.floor(t/2),d=t-l,p=Math.floor(a/2);u={top:l,bottom:d,left:p,right:a-p,type:"SAME"}}else if("valid"===t)u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),h=Math.ceil((n-o+1)/s);else{if("object"!=typeof t)throw Error(`Unknown padding parameter: ${t}`);{const d="channelsLast"===l?t[1][0]:t[2][0],p="channelsLast"===l?t[1][1]:t[2][1],f="channelsLast"===l?t[2][0]:t[3][0],m="channelsLast"===l?t[2][1]:t[3][1];u={top:d,bottom:p,left:f,right:m,type:0===d&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},c=Sc((e-i+d+p)/r+1,a),h=Sc((n-o+f+m)/s+1,a)}}return{padInfo:u,outHeight:c,outWidth:h}}(s,u,c,m,g,v,_,i,a),S=o?f*h:f;let C;return"channelsFirst"===a?C=[l,S,x,k]:"channelsLast"===a&&(C=[l,x,k,S]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:h,outHeight:x,outWidth:k,outChannels:S,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:p,effectiveFilterHeight:v,effectiveFilterWidth:_,dilationHeight:b,dilationWidth:y,inShape:t,outShape:C,filterShape:e}}function vc(t,e,n,r,s,i=!1,o="channelsLast",a){let[l,u,c,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===o)[l,u,c,h,d]=t;else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);[l,d,u,c,h]=t}const[p,f,m,,g]=e,[b,y,v]=xc(n),[_,w,x]=xc(r),k=kc(p,_),S=kc(f,w),C=kc(m,x),{padInfo:I,outDepth:E,outHeight:O,outWidth:T}=function(t,e,n,r,s,i,o,a,l,u,c){let h,d,p,f;if("number"==typeof t){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};const i=function(t,e,n,r,s,i){null==s&&(s=_c(t,e,r));const o=t[1],a=t[2];return[Sc((t[0]-e+2*s)/r+1,i),Sc((o-e+2*s)/r+1,i),Sc((a-e+2*s)/r+1,i),1]}([e,n,r,1],a,0,s,t,c);d=i[0],p=i[1],f=i[2]}else if("same"===t){d=Math.ceil(e/s),p=Math.ceil(n/i),f=Math.ceil(r/o);const t=(d-1)*s+a-e,c=(p-1)*i+l-n,m=(f-1)*o+u-r,g=Math.floor(t/2),b=t-g,y=Math.floor(c/2),v=c-y,_=Math.floor(m/2);h={top:y,bottom:v,left:_,right:m-_,front:g,back:b,type:"SAME"}}else{if("valid"!==t)throw Error(`Unknown padding parameter: ${t}`);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((e-a+1)/s),p=Math.ceil((n-l+1)/i),f=Math.ceil((r-u+1)/o)}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(s,u,c,h,b,y,v,k,S,C,a),N=i?g*d:g;let A;return"channelsFirst"===o?A=[l,N,E,O,T]:"channelsLast"===o&&(A=[l,E,O,T,N]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:h,inChannels:d,outDepth:E,outHeight:O,outWidth:T,outChannels:N,padInfo:I,strideDepth:b,strideHeight:y,strideWidth:v,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:k,effectiveFilterHeight:S,effectiveFilterWidth:C,dilationDepth:_,dilationHeight:w,dilationWidth:x,inShape:t,outShape:A,filterShape:e}}function _c(t,e,n,r=1){const s=kc(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function wc(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function xc(t){return"number"==typeof t?[t,t,t]:t}function kc(t,e){return e<=1?t:t+(t-1)*(e-1)}function Sc(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Cc(t){const[e,n,r]=wc(t);return 1===e&&1===n&&1===r}function Ic(t,e){return Cc(t)||Cc(e)}function Ec(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}const Oc=gl({reshape_:function(t,e){const n=fl(t,"x","reshape","string_or_numeric");return ol.runKernel(no,{x:n},{shape:e})}}),Tc=gl({avgPool_:function(t,e,n,r,s){const i=fl(t,"x","avgPool","float32");ir(Ic(n,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`);let o=i,a=!1;3===i.rank&&(a=!0,o=Oc(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ir(4===o.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),null!=s&&ir(dr(r),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${s} but got pad ${r}.`);let l=ol.runKernel(ds,{x:o},{filterSize:e,strides:n,pad:r,dimRoundingMode:s});return l=du(l,i.dtype),a?Oc(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),Nc=gl({avgPool3d_:function(t,e,n,r,s,i="NDHWC"){const o=fl(t,"x","avgPool3d","float32");let a=o,l=!1;4===o.rank&&(l=!0,a=Oc(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ir(5===a.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),ir("NDHWC"===i,()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),null!=s&&ir(dr(r),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${s} but got pad ${r}.`);let u=ol.runKernel(fs,{x:a},{filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i});return u=du(u,a.dtype),l?Oc(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}}),Ac=gl({batchNorm_:function(t,e,n,r,s,i){null==i&&(i=.001);const o=fl(t,"x","batchNorm"),a=fl(e,"mean","batchNorm"),l=fl(n,"variance","batchNorm");let u,c;null!=s&&(u=fl(s,"scale","batchNorm")),null!=r&&(c=fl(r,"offset","batchNorm")),ir(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ir(null==c||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ir(null==u||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h=function(t){let e;return e=0===t.rank||1===t.rank?Oc(t,[1,1,1,t.size]):2===t.rank?Oc(t,[1,1,t.shape[0],t.shape[1]]):3===t.rank?Oc(t,[1,t.shape[0],t.shape[1],t.shape[2]]):t,e}(o),d=ol.runKernel(si,{x:h,scale:u,offset:c,mean:a,variance:l},{varianceEpsilon:i});return Oc(d,o.shape)}}),Rc=gl({batchNorm2d_:function(t,e,n,r,s,i){const o=fl(t,"x","batchNorm"),a=fl(e,"mean","batchNorm"),l=fl(n,"variance","batchNorm");let u,c;return null!=s&&(u=fl(s,"scale","batchNorm")),null!=r&&(c=fl(r,"offset","batchNorm")),ir(2===o.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),ir(2===a.rank||1===a.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),ir(2===l.rank||1===l.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),null!=u&&ir(2===u.rank||1===u.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),null!=c&&ir(2===c.rank||1===c.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Ac(o,a,l,c,u,i)}}),Fc=gl({batchNorm3d_:function(t,e,n,r,s,i){const o=fl(t,"x","batchNorm"),a=fl(e,"mean","batchNorm"),l=fl(n,"variance","batchNorm");let u,c;return null!=s&&(u=fl(s,"scale","batchNorm")),null!=r&&(c=fl(r,"offset","batchNorm")),ir(3===o.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),ir(3===a.rank||1===a.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),ir(3===l.rank||1===l.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),null!=u&&ir(3===u.rank||1===u.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),null!=c&&ir(3===c.rank||1===c.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Ac(o,a,l,c,u,i)}}),Dc=gl({batchNorm4d_:function(t,e,n,r,s,i){const o=fl(t,"x","batchNorm"),a=fl(e,"mean","batchNorm"),l=fl(n,"variance","batchNorm");let u,c;return null!=s&&(u=fl(s,"scale","batchNorm")),null!=r&&(c=fl(r,"offset","batchNorm")),ir(4===o.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),ir(4===a.rank||1===a.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),ir(4===l.rank||1===l.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),null!=u&&ir(4===u.rank||1===u.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),null!=c&&ir(4===c.rank||1===c.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Ac(o,a,l,c,u,i)}}),Pc=gl({clipByValue_:function(t,e,n){const r=fl(t,"x","clipByValue");return ir(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),ol.runKernel(ws,{x:r},{clipValueMin:e,clipValueMax:n})}}),$c=gl({concat_:function(t,e=0){ir(t.length>=1,()=>"Pass at least one tensor to concat");const n=ml(t,"tensors","concat","string_or_numeric");return"complex64"===n[0].dtype&&n.forEach(t=>{if("complex64"!==t.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${t.dtype}. `)}),1===n.length?pu(n[0]):ol.runKernel(Ss,n,{axis:e})}}),Mc=gl({concat1d_:function(t){return $c(t,0)}}),Lc=gl({concat2d_:function(t,e){return $c(t,e)}}),jc=gl({concat3d_:function(t,e){return $c(t,e)}}),zc=gl({concat4d_:function(t,e){return $c(t,e)}}),Bc=gl({conv2d_:function(t,e,n,r,s="NHWC",i=[1,1],o){const a=fl(t,"x","conv2d"),l=fl(e,"filter","conv2d");let u=a,c=!1;3===a.rank&&(c=!0,u=Oc(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ir(4===u.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),ir(4===l.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),null!=o&&ir(dr(r),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${r}.`);const h="NHWC"===s?u.shape[3]:u.shape[1];ir(h===l.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`),ir(Ic(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const d=ol.runKernel(Cs,{x:u,filter:l},{strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o});return c?Oc(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Vc=gl({conv1d_:function(t,e,n,r,s="NWC",i=1,o){const a=fl(t,"x","conv1d"),l=fl(e,"filter","conv1d");let u=a,c=!1;2===a.rank&&(c=!0,u=Oc(a,[1,a.shape[0],a.shape[1]])),ir(3===u.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),ir(3===l.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),null!=o&&ir(dr(r),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${r}.`),ir(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),ir(Ic(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),ir("NWC"===s,()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const h=Oc(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=Oc(u,[u.shape[0],1,u.shape[1],u.shape[2]]),p=Bc(d,h,[1,n],r,"NHWC",[1,i],o);return Oc(p,c?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}}),Uc=gl({conv2DBackpropInput_:function(t,e,n,r,s,i="NHWC",o){ir(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,u=!1;3===e.rank&&(u=!0,l=Oc(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),ir(4===a.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),ir(4===l.rank,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),ir(4===n.rank,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c="NHWC"===i?a[3]:a[1],h="NHWC"===i?l.shape[3]:l.shape[1];ir(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),ir(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`),null!=o&&ir(dr(s),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${o} but got pad ${s}.`);const d=ol.runKernel(Es,{dy:l,filter:n},{strides:r,pad:s,dataFormat:i,dimRoundingMode:o,inputShape:a});return u?Oc(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Wc=gl({conv2dTranspose_:function(t,e,n,r,s,i){const o=fl(t,"x","conv2dTranspose"),a=fl(e,"filter","conv2dTranspose");return Uc(n,o,a,r,s,"NHWC",i)}}),Hc=gl({conv3d_:function(t,e,n,r,s="NDHWC",i=[1,1,1]){const o=fl(t,"x","conv3d"),a=fl(e,"filter","conv3d");let l=o,u=!1;4===o.rank&&(u=!0,l=Oc(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ir(5===l.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),ir(5===a.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),ir(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),ir(Ic(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),ir("NDHWC"===s,()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`);const c=ol.runKernel(Os,{x:l,filter:a},{strides:n,pad:r,dataFormat:s,dilations:i});return u?Oc(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),Gc=gl({conv3DBackpropInput_:function(t,e,n,r,s){ir(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,a=!1;4===e.rank&&(a=!0,o=Oc(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],u=o.shape[4];ir(5===i.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),ir(5===o.rank,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),ir(5===n.rank,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),ir(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),ir(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c=ol.runKernel(Ns,{dy:o,filter:n},{pad:s,strides:r,inputShape:i});return a?Oc(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),qc=gl({conv3dTranspose_:function(t,e,n,r,s){const i=fl(t,"x","conv3dTranspose"),o=fl(e,"filter","conv3dTranspose");return Gc(n,i,o,r,s)}}),Zc=gl({depthwiseConv2d_:function(t,e,n,r,s="NHWC",i=[1,1],o){const a=fl(t,"x","depthwiseConv2d"),l=fl(e,"filter","depthwiseConv2d");let u=a,c=!1;3===a.rank&&(c=!0,u=Oc(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ir(4===u.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),ir(4===l.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`),ir(u.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),null!=o&&ir(dr(r),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${r}.`);const h=ol.runKernel(Ms,{x:u,filter:l},{strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o});return c?Oc(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),Kc=gl({floorDiv_:function(t,e){let n=fl(t,"a","floorDiv"),r=fl(e,"b","floorDiv");return[n,r]=Xa(n,r),ol.runKernel(ri,{a:n,b:r})}}),Yc=gl({div_:function(t,e){let n=fl(t,"a","div"),r=fl(e,"b","div");return[n,r]=Xa(n,r),"int32"===n.dtype&&"int32"===r.dtype?Kc(n,r):ol.runKernel(Ws,{a:n,b:r},{})}}),Xc=gl({elu_:function(t){const e=fl(t,"x","elu");return ol.runKernel(Gs,{x:e})}});function Jc(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,o=t[i]||1;(e[e.length-1-s]||1)>1&&1===o&&r.unshift(i)}return r}function Qc(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,o=e[i];(null==s||1===s&&o>1)&&n.unshift(i)}return n}function th(t,e){const n=[],r=Math.max(t.length,e.length);for(let s=0;s<r;s++){let r=t[t.length-s-1];null==r&&(r=1);let i=e[e.length-s-1];if(null==i&&(i=1),1===r)n.unshift(i);else if(1===i)n.unshift(r);else{if(r!==i)throw Error(`Operands could not be broadcast together with shapes ${t} and ${e}.`);n.unshift(r)}}return n}const eh=gl({equal_:function(t,e){let n=fl(t,"a","equal","string_or_numeric"),r=fl(e,"b","equal","string_or_numeric");return[n,r]=Xa(n,r),th(n.shape,r.shape),ol.runKernel(Ks,{a:n,b:r})}}),nh=gl({expandDims_:function(t,e=0){const n=fl(t,"x","expandDims","string_or_numeric");return ir(e<=n.rank,()=>"Axis must be <= rank of the tensor"),ol.runKernel(Xs,{input:n},{dim:e})}}),rh=gl({tile_:function(t,e){const n=fl(t,"x","tile","string_or_numeric");return ir(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`),ol.runKernel(zo,{x:n},{reps:e})}}),sh=gl({eye_:function(t,e,n,r="float32"){null==e&&(e=t);const s=hu([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)s.set(1,a,a);const o=Oc(s.toTensor(),[t,e]);if(null==n)return o;if(1===n.length)return rh(nh(o,0),[n[0],1,1]);if(2===n.length)return rh(nh(nh(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return rh(nh(nh(nh(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});function ih(t,e,n){return ol.runKernel(ti,{},{shape:t,value:e,dtype:n})}const oh=gl({floor_:function(t){const e=fl(t,"x","floor");return ol.runKernel(ni,{x:e})}}),ah=gl({gather_:function(t,e,n=0,r=0){const s=fl(t,"x","gather"),i=fl(e,"indices","gather","int32");return ol.runKernel(ii,{x:s,indices:i},{axis:n,batchDims:r})}}),lh=gl({greater_:function(t,e){let n=fl(t,"a","greater","string_or_numeric"),r=fl(e,"b","greater","string_or_numeric");return[n,r]=Xa(n,r),th(n.shape,r.shape),ol.runKernel(ai,{a:n,b:r})}}),uh=gl({greaterEqual_:function(t,e){let n=fl(t,"a","greaterEqual","string_or_numeric"),r=fl(e,"b","greaterEqual","string_or_numeric");return[n,r]=Xa(n,r),th(n.shape,r.shape),ol.runKernel(li,{a:n,b:r})}}),ch=gl({leakyRelu_:function(t,e=.2){const n=fl(t,"x","leakyRelu");return ol.runKernel(mi,{x:n},{alpha:e})}}),hh=gl({log_:function(t){const e=fl(t,"x","log");return ol.runKernel(vi,{x:e})}}),dh=gl({exp_:function(t){const e=fl(t,"x","exp");return ol.runKernel(Ys,{x:e})}}),ph=gl({max_:function(t,e=null,n=!1){const r=fl(t,"x","max");return ol.runKernel(Ii,{x:r},{reductionIndices:e,keepDims:n})}}),fh=gl({mul_:function(t,e){let n=fl(t,"a","mul"),r=fl(e,"b","mul");return[n,r]=Xa(n,r),ol.runKernel(ji,{a:n,b:r})}}),mh=gl({sub_:function(t,e){let n=fl(t,"a","sub"),r=fl(e,"b","sub");return[n,r]=Xa(n,r),ol.runKernel(Mo,{a:n,b:r})}}),gh=gl({sum_:function(t,e=null,n=!1){let r=fl(t,"x","sum");return"bool"===r.dtype&&(r=du(r,"int32")),ol.runKernel(xo,{x:r},{axis:e,keepDims:n})}}),bh=gl({logSoftmax_:function(t,e=-1){const n=fl(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return ac((t,n)=>{const r=ph(t,e,!0),s=mh(t,r),i=mh(du(s,"float32"),hh(gh(dh(s),e,!0)));return n([i]),{value:i,gradFunc:(t,n)=>{const[r]=n,s=dh(r);return mh(t,fh(gh(t,e,!0),s))}}})(n)}}),yh=gl({logicalAnd_:function(t,e){const n=fl(t,"a","logicalAnd","bool"),r=fl(e,"b","logicalAnd","bool");return th(n.shape,r.shape),ol.runKernel(wi,{a:n,b:r})}}),vh=gl({maxPool_:function(t,e,n,r,s){const i=fl(t,"x","maxPool");let o=i,a=!1;3===i.rank&&(a=!0,o=Oc(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ir(4===o.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),ir(Ic(n,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`),null!=s&&ir(dr(r),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${s} but got pad ${r}.`);const l=ol.runKernel(Oi,{x:o},{filterSize:e,strides:n,pad:r,dimRoundingMode:s});return a?Oc(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),_h=gl({maxPool3d_:function(t,e=[1,1,1],n,r,s,i="NDHWC"){const o=fl(t,"x","maxPool3d");let a=o,l=!1;4===o.rank&&(l=!0,a=Oc(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ir(5===a.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),ir("NDHWC"===i,()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),null!=s&&ir(dr(r),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${s} but got pad ${r}.`);const u=ol.runKernel(Ni,{x:a},{filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i});return l?Oc(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}}),wh=gl({maximum_:function(t,e){let n=fl(t,"a","maximum"),r=fl(e,"b","maximum");return[n,r]=Xa(n,r),"bool"===n.dtype&&(n=du(n,"int32"),r=du(r,"int32")),th(n.shape,r.shape),ol.runKernel(Ei,{a:n,b:r})}}),xh=gl({mean_:function(t,e=null,n=!1){const r=fl(t,"x","mean");return ol.runKernel(Fi,{x:r},{axis:e,keepDims:n})}}),kh=gl({minimum_:function(t,e){let n=fl(t,"a","minimum"),r=fl(e,"b","minimum");return[n,r]=Xa(n,r),"bool"===n.dtype&&(n=du(n,"int32"),r=du(r,"int32")),th(n.shape,r.shape),ol.runKernel(Pi,{a:n,b:r})}});function Sh(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Ch(t,e,n){const r=t.length+e.length,s=[];let i=0,o=0;for(let a=0;a<r;a++)-1===n.indexOf(a)?s.push(t[i++]):s.push(e[o++]);return s}function Ih(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)-1===e.indexOf(s)&&n.push(t[s]);return[n,e.map(e=>t[e])]}function Eh(t,e){return Ch(t,e.map(t=>1),e)}function Oh(t,e,n){ir(Sh(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Th(t,e){if(Sh(t,e))return null;const n=[];for(let r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(t=>n.push(t)),n}function Nh(t){return t.map((t,e)=>[e,t]).sort((t,e)=>t[1]-e[1]).map(t=>t[0])}function Ah(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}const Rh=gl({square_:function(t){const e=fl(t,"x","square");return ol.runKernel("Square",{x:e},{})}}),Fh=gl({moments_:function(t,e=null,n=!1){const r=vr(e,(t=fl(t,"x","moments")).shape),s=xh(t,r,n);let i=s.shape;n||(i=Eh(s.shape,r));const o=Rh(mh(du(t,"float32"),Oc(s,i)));return{mean:s,variance:xh(o,r,n)}}}),Dh=gl({neg_:function(t){const e=fl(t,"x","neg");return ol.runKernel(zi,{x:e})}}),Ph=gl({notEqual_:function(t,e){let n=fl(t,"a","notEqual","string_or_numeric"),r=fl(e,"b","notEqual","string_or_numeric");return[n,r]=Xa(n,r),th(n.shape,r.shape),ol.runKernel(Bi,{a:n,b:r})}}),$h=gl({oneHot_:function(t,e,n=1,r=0){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const s=fl(t,"indices","oneHot","int32");return ol.runKernel(Gi,{indices:s},{depth:e,onValue:n,offValue:r})}});function Mh(t,e="float32"){if("complex64"===e){const e=Mh(t,"float32"),n=Mh(t,"float32");return bl(e,n)}const n=jr(ur(t),e);return ol.makeTensor(n,t,e)}function Lh(t,e="float32"){if("complex64"===e){const e=Lh(t,"float32"),n=Mh(t,"float32");return bl(e,n)}const n=Lr(ur(t),e);return ol.makeTensor(n,t,e)}const jh=gl({onesLike_:function(t){const e=fl(t,"x","onesLike");return ol.runKernel(Hi,{x:e})}}),zh=gl({pad_:function(t,e,n=0){const r=fl(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return ol.runKernel(Zi,{x:r},{paddings:e,constantValue:n})}}),Bh=gl({pow_:function(t,e){let n=fl(t,"base","pow"),r=fl(e,"exp","pow");return[n,r]=Xa(n,r),ol.runKernel(Ki,{a:n,b:r})}}),Vh=gl({prelu_:function(t,e){const n=fl(t,"x","prelu"),r=fl(e,"alpha","prelu");return ol.runKernel(Yi,{x:n,alpha:r})}});var Uh=n("YSVl");class Wh{constructor(t,e,n,r,s){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const i=s||Math.random();this.random=Uh.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const t=this.nextVal;return this.nextVal=NaN,t}let t,e,n=!1;for(;!n;){let r,s,i;do{r=2*this.random()-1,s=2*this.random()-1,i=r*r+s*s}while(i>=1||0===i);const o=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*r*o,e=this.mean+this.stdDev*s*o,this.truncated&&!this.isValidTruncated(t)||(n=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class Hh{constructor(t=0,e=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=t,this.range=e-t,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${e} <= 1 and dtype is not float`);this.random=Uh.alea(r)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const Gh=gl({randomNormal_:function(t,e=0,n=1,r,s){if(null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const i=new Wh(e,n,r,!1,s),o=hu(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}}),qh=gl({randomUniform_:function(t,e=0,n=1,r="float32",s){const i=hu(t,r),o=new Hh(e,n,null,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}}),Zh=gl({relu_:function(t){const e=fl(t,"x","relu");return ol.runKernel(eo,{x:e})}}),Kh=gl({reverse_:function(t,e){const n=fl(t,"x","reverse");return ol.runKernel(lo,{x:n},{dims:e})}}),Yh=gl({selu_:function(t){const e=fl(t,"x","selu");return ol.runKernel(fo,{x:e})}}),Xh=gl({separableConv2d_:function(t,e,n,r,s,i=[1,1],o="NHWC"){const a=fl(t,"x","separableConv2d"),l=fl(e,"depthwiseFilter","separableConv2d"),u=fl(n,"pointwiseFilter","separableConv2d");let c=a,h=!1;if(3===a.rank&&(h=!0,c=Oc(a,[1,a.shape[0],a.shape[1],a.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ir(4===c.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),ir(4===l.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),ir(4===u.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),ir(1===u.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),ir(1===u.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const d=l.shape[2],p=l.shape[3];ir(u.shape[2]===d*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*p}, but got ${u.shape[2]}.`);const f=Zc(c,l,r,s,o,i),m=Bc(f,u,1,"valid",o);return h?Oc(m,[m.shape[1],m.shape[2],m.shape[3]]):m}}),Jh=gl({sigmoid_:function(t){const e=fl(t,"x","sigmoid");return ol.runKernel(vo,{x:e})}}),Qh=gl({slice_:function(t,e,n){const r=fl(t,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");return ol.runKernel(mo,{x:r},{begin:e,size:n})}}),td=gl({slice1d_:function(t,e,n){const r=fl(t,"x","slice1d");return ir(1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Qh(r,[e],[n])}}),ed=gl({slice2d_:function(t,e,n){const r=fl(t,"x","slice2d");return ir(2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Qh(r,e,n)}}),nd=gl({slice3d_:function(t,e,n){const r=fl(t,"x","slice3d");return ir(3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Qh(r,e,n)}}),rd=gl({slice4d_:function(t,e,n){const r=fl(t,"x","slice4d");return ir(4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Qh(r,e,n)}}),sd=gl({softmax_:function(t,e=-1){const n=fl(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);return ol.runKernel(Co,{logits:n},{dim:e})}}),id=gl({softplus_:function(t){const e=fl(t,"x","softplus");return ol.runKernel(_o,{x:e})}}),od=gl({split_:function(t,e,n=0){const r=fl(t,"x","split");return ol.runKernel(So,{x:r},{numOrSizeSplits:e,axis:n})}}),ad=gl({sqrt_:function(t){const e=fl(t,"x","sqrt");return ol.runKernel(wo,{x:e})}}),ld=gl({squeeze_:function(t,e){const n=fl(t,"x","squeeze");return Oc(n,_r(n.shape,e).newShape)}}),ud=gl({stack_:function(t,e=0){const n=ml(t,"tensors","stack","string_or_numeric");return ir(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&ir(e<=n[0].rank,()=>"Axis must be <= rank of the tensor"),ol.runKernel(qi,n,{axis:e})}}),cd=gl({tanh_:function(t){const e=fl(t,"x","tanh");return ol.runKernel(jo,{x:e})}});function hd(t,e){ar(t);const n=hl(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return yl(t,null,n,e)}function dd(t,e,n){if(ar(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");const r=hl(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return yl(t,e,r,n)}const pd=gl({truncatedNormal_:function(t,e=0,n=1,r,s){if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const i=new Wh(e,n,r,!0,s),o=hu(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}}),fd=gl({unstack_:function(t,e=0){const n=fl(t,"x","unstack","string_or_numeric");return ir(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`),ol.runKernel(Ho,{value:n},{axis:e})}}),md=gl({broadcastTo_:function(t,e){let n=fl(t,"broadcastTo","x");const r=n.shape;if(e.some(t=>!(t>0)||t%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const t=n.shape.slice();for(;t.length<e.length;)t.unshift(1);n=Oc(n,t)}const s=n.shape,i=Array.from(e);for(let o=e.length-1;o>=0;o--)if(s[o]===e[o])i[o]=1;else if(1!==n.shape[o])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);return 0===i.map((t,e)=>t>1?e:-1).filter(t=>t>=0).length?pu(n):ol.runKernel(zo,{x:n},{reps:i})}}),gd=gl({where_:function(t,e,n){const r=fl(e,"a","where"),s=fl(n,"b","where"),i=fl(t,"condition","where","bool"),o=th(th(i.shape,r.shape),s.shape),a=md(i,o),l=md(r,o),u=md(s,o);return ol.runKernel(po,{condition:a,t:l,e:u})}}),bd=gl({zerosLike_:function(t){const e=fl(t,"x","zerosLike");return ol.runKernel(qo,{x:e})}}),yd=gl({transpose_:function(t,e){const n=fl(t,"x","transpose");return null==e&&(e=n.shape.map((t,e)=>e).reverse()),ir(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${e}.`),e.forEach(t=>{ir(t>=0&&t<n.rank,()=>"All entries in 'perm' must be between 0 and "+(n.rank-1)+` but got ${e}`)}),n.rank<=1?n.clone():ol.runKernel(Uo,{x:n},{perm:e})}}),vd=gl({dropout_:function(t,e,n,r){const s=fl(t,"x","dropout");if(ir("float32"===s.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),ir(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),0===e)return t instanceof za?s.clone():s;const i=function(t,e){if(null==e)return t.shape.slice();if(hr(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)n.push(null==e[r]&&null!=t.shape[r]?t.shape[r]:e[r]);return n}return e}(s,n),o=1-e,a=Yc(oh(hc(qh(i,0,1,"float32",r),o)),o);return fh(s,a)}}),_d=gl({imag_:function(t){const e=fl(t,"input","imag");return ol.runKernel(hi,{input:e})}}),wd=gl({real_:function(t){const e=fl(t,"input","real");return ol.runKernel(Qi,{input:e})}}),xd=gl({fft_:function(t){return ir("complex64"===t.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`),ol.runKernel(Qs,{input:t})}}),kd=gl({rfft_:function(t,e){ir("float32"===t.dtype,()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(null!=e&&e<n){const r=t.shape.map(t=>0),i=t.shape.map(t=>t);i[t.shape.length-1]=e,s=Qh(t,r,i),n=e}else if(null!=e&&e>n){const r=t.shape.map(t=>t);r[t.shape.length-1]=e-n,s=$c([t,Mh(r)],t.shape.length-1),n=e}else s=t;const i=bd(s),o=Oc(bl(s,i),[r,n]),a=xd(o),l=Math.floor(n/2)+1,u=wd(a),c=_d(a),h=od(u,[l,n-l],u.shape.length-1),d=od(c,[l,n-l],c.shape.length-1),p=s.shape.slice();return p[s.shape.length-1]=l,Oc(bl(h[0],d[0]),p)}}),Sd=gl({ifft_:function(t){return ir("complex64"===t.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`),ol.runKernel(ci,{input:t})}}),Cd=gl({irfft_:function(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=Oc(t,[n,e]);r=Sd(s)}else{const s=[n,2*(e-1)],i=Oc(wd(t),[n,e]),o=Oc(_d(t),[n,e]),a=Kh(Qh(i,[0,1],[n,e-2]),1),l=fh(Kh(Qh(o,[0,1],[n,e-2]),1),lc(-1)),u=$c([i,a],1),c=$c([o,l],1),h=Oc(bl(u,c),[s[0],s[1]]);r=Sd(h)}if(r=wd(r),3===t.rank&&0!==t.shape[0]){const e=r,n=t.shape[0];r=Oc(r,[n,r.shape[0]/n,r.shape[1]]),e.dispose()}return r}}),Id=gl({conv2DBackpropFilter_:function(t,e,n,r,s,i="NHWC",o){let a=t;3===t.rank&&(a=Oc(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;3===l.rank&&(l=Oc(e,[1,e.shape[0],e.shape[1],e.shape[2]])),ir(4===a.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),ir(4===l.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),ir(4===n.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u="NHWC"===i?a.shape[3]:a.shape[1],c="NHWC"===i?l.shape[3]:l.shape[1];return ir(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),ir(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),null!=o&&ir(dr(s),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${o} but got pad ${s}.`),ol.runKernel(Is,{x:a,dy:l},{strides:r,pad:s,dataFormat:i,dimRoundingMode:o,filterShape:n})}}),Ed=gl({relu6_:function(t){const e=fl(t,"x","relu6");return ol.runKernel(ao,{x:e})}}),Od=gl({step_:function(t,e=0){const n=fl(t,"x","step");return ol.runKernel(Zo,{x:n},{alpha:e})}});function Td(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return fh(t,Od(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function Nd(t,e){let n=e;const r=Qc(t.shape,e.shape);return r.length>0&&(n=gh(n,r)),Oc(n,t.shape)}function Ad(t,e,n,r){if("linear"===e)return t;if("relu"===e)return Zh(t);if("elu"===e)return Xc(t);if("relu6"===e)return Ed(t);if("prelu"===e)return Vh(t,n);if("leakyrelu"===e)return ch(t,r);if("sigmoid"===e)return Jh(t);throw new Error(`Unknown fused activation ${e}.`)}const Rd=(t,e)=>!(t>0)||"linear"===e,Fd=gl({fusedConv2d_:function({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(!1===Rd(ol.state.gradientDepth,l=l||"linear")){let h=Bc(t,e,n,r,s,i,o);return null!=a&&(h=hc(h,a)),Ad(h,l,u,c)}const h=fl(t,"x","conv2d"),d=fl(e,"filter","conv2d");let p=h,f=!1;3===h.rank&&(f=!0,p=Oc(h,[1,h.shape[0],h.shape[1],h.shape[2]])),ir(4===p.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),ir(4===d.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),null!=o&&ir(dr(r),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${r}.`),ir(p.shape[3]===d.shape[2],()=>`Error in conv2d: depth of input (${p.shape[3]}) must match input depth for filter ${d.shape[2]}.`),ir(Ic(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),ir("NHWC"===s,()=>`Error in conv2d: got dataFormat of ${s} but only NHWC is currently supported.`);const m=yc(p.shape,d.shape,n,i,r,o);let g,b;null!=a&&(g=fl(a,"bias","fused conv2d"),[g]=Xa(g,h),th(m.outShape,g.shape)),null!=u&&(b=fl(u,"prelu weights","fused conv2d"));const y=(t,e)=>{const[s,o,a,u]=e,c=Td(t,a,l);ir(Cc(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const h=[Uc(o.shape,c,s,n,r),Id(o,c,s.shape,n,r)];if(null!=u){const t=Nd(u,c);h.push(t)}return h},v={x:p,filter:d,bias:g,preluActivationWeights:b},_={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return null==a?ac((t,e,n)=>{let r=ol.runKernel(Jo,v,_);return n([e,t,r]),f&&(r=Oc(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:y}})(p,d):ac((t,e,n,r)=>{let s=ol.runKernel(Jo,v,_);return r([e,t,s,n]),f&&(s=Oc(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:y}})(p,d,g)}}),Dd=gl({depthwiseConv2dNativeBackpropFilter_:function(t,e,n,r,s,i=[1,1],o){let a=t;3===t.rank&&(a=Oc(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;return 3===l.rank&&(l=Oc(e,[1,e.shape[0],e.shape[1],e.shape[2]])),ol.runKernel(Ls,{x:a,dy:l},{strides:r,pad:s,dimRoundingMode:o,dilations:i,filterShape:n})}}),Pd=gl({depthwiseConv2dNativeBackpropInput_:function(t,e,n,r,s,i=[1,1],o){let a=e,l=!1;3===e.rank&&(l=!0,a=Oc(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u=ol.runKernel(js,{dy:a,filter:n},{strides:r,pad:s,dimRoundingMode:o,dilations:i,inputShape:t});return l?Oc(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),$d=gl({fusedDepthwiseConv2d_:function({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(!1===Rd(ol.state.gradientDepth,l)){let h=Zc(t,e,n,r,s,i,o);return null!=a&&(h=hc(h,a)),Ad(h,l,u,c)}const h=fl(t,"x","depthwiseConv2d"),d=fl(e,"filter","depthwiseConv2d");let p=h,f=!1;3===h.rank&&(f=!0,p=Oc(h,[1,h.shape[0],h.shape[1],h.shape[2]])),ir(4===p.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${p.rank}.`),ir(4===d.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),ir(p.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${p.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),null==i&&(i=[1,1]),ir(Ic(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),null!=o&&ir(dr(r),()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${o} but got pad ${r}.`);const m=yc(p.shape,d.shape,n,i,r,o,!0);let g,b;null!=a&&(g=fl(a,"bias","fused conv2d"),[g]=Xa(g,h),th(m.outShape,g.shape)),null!=u&&(b=fl(u,"prelu weights","fused depthwiseConv2d"));const y=(t,e)=>{ir(Cc(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[s,a,u,c]=e,h=Td(t,u,l),d=Pd(a.shape,h,s,n,r,i,o),p=Dd(a,h,s.shape,n,r,i,o);return null!=c?[d,p,Nd(g,h)]:[d,p]},v={x:p,filter:d,bias:g,preluActivationWeights:b},_={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return null==a?ac((t,e,n)=>{let r=ol.runKernel(Qo,v,_);return n([e,t,r]),f&&(r=Oc(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:y}})(p,d):ac((t,e,n,r)=>{let s=ol.runKernel(Qo,v,_);return r([e,t,s,n]),f&&(s=Oc(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:y}})(p,d,g)}}),Md=gl({matMul_:function(t,e,n=!1,r=!1){let s=fl(t,"a","matMul"),i=fl(e,"b","matMul");return[s,i]=Xa(s,i),ol.runKernel(gs,{a:s,b:i},{transposeA:n,transposeB:r})}}),Ld=gl({fusedMatMul_:function({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:a}){if(!1===Rd(ol.state.gradientDepth,i)){let l=Md(t,e,n,r);return null!=s&&(l=hc(l,s)),Ad(l,i,o,a)}let l=fl(t,"a","fused matMul"),u=fl(e,"b","fused matMul");[l,u]=Xa(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],h=r?u.shape[u.rank-1]:u.shape[u.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?u.shape[u.rank-2]:u.shape[u.rank-1],f=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=ur(f),b=ur(m);ir(l.rank>=2&&u.rank>=2&&l.rank===u.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${l.rank} and ${u.rank}.`),ir(hr(f,m),()=>`Error in fused matMul: outer dimensions (${f}) and (${m}) of Tensors with shapes ${l.shape} and ${u.shape} must match.`),ir(c===h,()=>`Error in fused matMul: inner shapes (${c}) and (${h}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const y=l.shape.slice(0,-2).concat([d,p]),v=Oc(l,n?[g,c,d]:[g,d,c]),_=Oc(u,r?[b,p,h]:[b,h,p]);let w,x;null!=s&&(w=fl(s,"bias","fused matMul"),[w]=Xa(w,l),th(y,w.shape)),null!=o&&(x=fl(o,"prelu weights","fused matMul"));const k=(t,e)=>{const[o,a,l,u]=e,c=Td(Oc(t,l.shape),l,i);let h,d;return n||r?!n&&r?(h=Md(c,a,!1,!1),d=Md(c,o,!0,!1)):n&&!r?(h=Md(a,c,!1,!0),d=Md(o,c,!1,!1)):(h=Md(a,c,!0,!0),d=Md(c,o,!0,!0)):(h=Md(c,a,!1,!0),d=Md(o,c,!0,!1)),null!=s?[h,d,Nd(u,c)]:[h,d]},S={a:v,b:_,bias:w,preluActivationWeights:x},C={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return null==s?ac((t,e,n)=>{const r=ol.runKernel(Xo,S,C);return n([t,e,r]),{value:Oc(r,y),gradFunc:k}})(v,_):ac((t,e,n,r)=>{const s=ol.runKernel(Xo,S,C);return r([t,e,s,n]),{value:Oc(s,y),gradFunc:k}})(v,_,w)}});function jd(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);s[i]=e-n*Math.cos(o)}return hd(s,"float32")}gl({hammingWindow_:function(t){return jd(t,.54,.46)}});const zd=gl({hannWindow_:function(t){return jd(t,.5,.5)}}),Bd=gl({frame_:function(t,e,n,r=!1,s=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(Qh(t,i,e)),i+=n;if(r)for(;i<t.size;){const r=i+e-t.size,a=$c([Qh(t,i,e-r),ih([r],s)]);o.push(a),i+=n}return 0===o.length?dd([],[0,e]):Oc($c(o),[o.length,e])}});function Vd(t,e,n,r,s,i){null==r&&(r=.5),null==s&&(s=Number.NEGATIVE_INFINITY),null==i&&(i=0);const o=t.shape[0];return n=Math.min(n,o),ir(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),ir(2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),ir(4===t.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),ir(1===e.rank,()=>"scores must be a 1D tensor"),ir(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),ir(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}function Ud(t,e,n){const r=function(t,e,n){return function(t,e,n){let r=0,s=t.length,i=0,o=!1;for(;r<s;){i=r+(s-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(s=i,o=!a)}return o?r:-r-1}(t,e,n||Wd)}(t,e,n);t.splice(r<0?-(r+1):r,0,e)}function Wd(t,e){return t>e?1:t<e?-1:0}function Hd(t,e,n,r,s){return Zd(t,e,n,r,s,0)}function Gd(t,e,n,r,s,i){return Zd(t,e,n,r,s,0,!1,i,!0)}function qd(t,e,n,r,s,i){return Zd(t,e,n,r,s,i,!0)}function Zd(t,e,n,r,s,i,o=!1,a=!1,l=!1){const u=[];for(let g=0;g<e.length;g++)e[g]>s&&u.push({score:e[g],boxIndex:g,suppressBeginIndex:0});u.sort(Xd);const c=i>0?-.5/i:0,h=[],d=[];for(;h.length<n&&u.length>0;){const e=u.pop(),{score:n,boxIndex:i,suppressBeginIndex:o}=e;if(n<s)break;let a=!1;for(let l=h.length-1;l>=o;--l){const n=Kd(t,i,h[l]);if(n>=r){a=!0;break}if(e.score=e.score*Yd(r,c,n),e.score<=s)break}e.suppressBeginIndex=h.length,a||(e.score===n?(h.push(i),d.push(e.score)):e.score>s&&Ud(u,e,Xd))}const p=h.length,f=n-p;a&&f>0&&(h.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const m={selectedIndices:h};return o&&(m.selectedScores=d),l&&(m.validOutputs=p),m}function Kd(t,e,n){const r=t.subarray(4*e,4*e+4),s=t.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(s[0],s[2]),c=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),d=Math.max(s[1],s[3]),p=(a-i)*(l-o),f=(h-u)*(d-c);if(p<=0||f<=0)return 0;const m=Math.max(i,u),g=Math.max(o,c),b=Math.min(a,h),y=Math.min(l,d),v=Math.max(b-m,0)*Math.max(y-g,0);return v/(p+f-v)}function Yd(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function Xd(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}gl({stft_:function(t,e,n,r,s=zd){null==r&&(r=Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2)))));const i=Bd(t,e,n),o=fh(i,s(e));return kd(o,r)}}),gl({cropAndResize_:function(t,e,n,r,s="bilinear",i=0){const o=fl(t,"image","cropAndResize"),a=fl(e,"boxes","cropAndResize","float32"),l=fl(n,"boxInd","cropAndResize","int32"),u=a.shape[0];return ir(4===o.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),ir(2===a.rank&&4===a.shape[1],()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),ir(1===l.rank&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),ir(2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),ir(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),ir("bilinear"===s||"nearest"===s,()=>`method must be bilinear or nearest, but was ${s}`),ol.runKernel(Ds,{image:o,boxes:a,boxInd:l},{method:s,extrapolationValue:i,cropSize:r})}}),gl({flipLeftRight_:function(t){const e=fl(t,"image","flipLeftRight","float32");return ir(4===e.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`),ol.runKernel(ei,{image:e},{})}}),gl({rotateWithOffset_:function(t,e,n=0,r=.5){const s=fl(t,"image","rotateWithOffset","float32");return ir(4===s.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`),ol.runKernel(Yo,{image:s},{radians:e,fillValue:n,center:r})}}),gl({nonMaxSuppression_:function(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=fl(t,"boxes","nonMaxSuppression"),o=fl(e,"scores","nonMaxSuppression"),a=Vd(i,o,n,r,s);return ol.runKernel(Vi,{boxes:i,scores:o},{maxOutputSize:n=a.maxOutputSize,iouThreshold:r=a.iouThreshold,scoreThreshold:s=a.scoreThreshold})}}),gl({nonMaxSuppressionWithScore_:function(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=fl(t,"boxes","nonMaxSuppression"),a=fl(e,"scores","nonMaxSuppression"),l=Vd(o,a,n,r,s,i),u=ol.runKernel(Wi,{boxes:o,scores:a},{maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:s=l.scoreThreshold,softNmsSigma:i=l.softNmsSigma});return{selectedIndices:u[0],selectedScores:u[1]}}}),gl({nonMaxSuppressionPadded_:function(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=fl(t,"boxes","nonMaxSuppression"),a=fl(e,"scores","nonMaxSuppression"),l=Vd(o,a,n,r,s,null),u=ol.runKernel(Ui,{boxes:o,scores:a},{maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:i});return{selectedIndices:u[0],validOutputs:u[1]}}});const Jd=gl({resizeBilinear_:function(t,e,n=!1,r=!1){const s=fl(t,"images","resizeBilinear");ir(3===s.rank||4===s.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),ir(2===e.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),ir(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;3===s.rank&&(o=!0,i=Oc(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const[]=e,a=ol.runKernel(io,{images:i},{alignCorners:n,halfPixelCenters:r,size:e});return o?Oc(a,[a.shape[1],a.shape[2],a.shape[3]]):a}}),Qd=gl({resizeNearestNeighbor_:function(t,e,n=!1,r=!1){const s=fl(t,"images","resizeNearestNeighbor");ir(3===s.rank||4===s.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),ir(2===e.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),ir("float32"===s.dtype||"int32"===s.dtype,()=>"`images` must have `int32` or `float32` as dtype"),ir(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;3===s.rank&&(o=!0,i=Oc(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const[]=e,a=ol.runKernel(ro,{images:i},{alignCorners:n,halfPixelCenters:r,size:e});return o?Oc(a,[a.shape[1],a.shape[2],a.shape[3]]):a}}),tp=gl({bincount_:function(t,e,n){const r=fl(t,"x","bincount"),s=fl(e,"weights","bincount");return ir("int32"===r.dtype,()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),ir(n>=0,()=>`size must be non-negative, but got ${n}.`),ir(s.size===r.size||0===s.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`),ol.runKernel(ys,{x:r,weights:s},{size:n})}}),ep=gl({lessEqual_:function(t,e){let n=fl(t,"a","lessEqual","string_or_numeric"),r=fl(e,"b","lessEqual","string_or_numeric");return[n,r]=Xa(n,r),th(n.shape,r.shape),ol.runKernel(bi,{a:n,b:r})}}),np=gl({round_:function(t){const e=fl(t,"x","round");return ol.runKernel(uo,{x:e})}});function rp(t,e,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");return ol.runKernel(Ji,{},{start:t,stop:e,step:n,dtype:r})}gl({threshold_:function(t,e="binary",n=!1,r=.5){const s=fl(t,"image","threshold"),i=s.shape[0]*s.shape[1];let o,a,l,u,c=fh(hd([r]),255);if(ir(3===s.rank,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),ir(3===s.shape[2]||1===s.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),ir("int32"===s.dtype||"float32"===s.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),ir("otsu"===e||"binary"===e,()=>`Method must be binary or otsu, but was ${e}`),3===s.shape[2]){[o,a,l]=od(s,[1,1,1],-1);const t=fh(o,.2989),e=fh(a,.587),n=fh(l,.114);u=hc(hc(t,e),n)}else u=t;"otsu"===e&&(c=function(t,e){let n,r,s,i,o,a,l=hd([-1]),u=hd([0]),c=hd([0]);for(let h=0;h<t.size-1;h++){n=Qh(t,0,h+1),r=Qh(t,h+1),o=Yc(gh(n),e),a=Yc(gh(r),e);const d=gh(fh(n,rp(0,n.size)));s=Yc(d,gh(n));const p=ih(r.shape,n.size),f=hc(rp(0,r.size),p),m=fh(r,f);i=Yc(gh(m),gh(r));const g=mh(s,i),b=mh(s,i),y=fh(o,a);c=fh(fh(y,g),b);const v=lh(c,u);u=gd(v,c,u),l=gd(v,hd([h]),l)}return l}(tp(du(np(u),"int32"),vl([]),256),i));const h=n?ep(u,c):lh(u,c);return du(fh(h,255),"int32")}}),gl({transform_:function(t,e,n="nearest",r="constant",s=0,i){const o=fl(t,"image","transform","float32"),a=fl(e,"transforms","transform","float32");return ir(4===o.rank,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),ir(2===a.rank&&(a.shape[0]===o.shape[0]||1===a.shape[0])&&8===a.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),ir(null==i||2===i.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`),ol.runKernel(Vo,{image:o,transforms:a},{interpolation:n,fillMode:r,fillValue:s,outputShape:i})}});const sp=gl({bandPart_:function(t,e,n){ir(e%1==0,()=>`bandPart(): numLower must be an integer, got ${e}.`),ir(n%1==0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=fl(t,"a","bandPart");ir(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,o]=r.shape.slice(-2);if(!(e<=i))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);e<0&&(e=i),n<0&&(n=o);const a=Oc(rp(0,i,1,"int32"),[-1,1]),l=rp(0,o,1,"int32"),u=mh(a,l),c=yh(ep(u,lc(+e,"int32")),uh(u,lc(-n,"int32"))),h=Mh([i,o],r.dtype);return Oc(ud(fd(Oc(r,[-1,i,o])).map(t=>gd(c,t,h))),s)}}),ip=gl({min_:function(t,e=null,n=!1){const r=fl(t,"x","min");return ol.runKernel(Di,{x:r},{axis:e,keepDims:n})}});function op(t,e,n=null){if(0===t.rank)return cc(t);if(1!==t.rank&&null===n)return op(Oc(t,[-1]),e,n);if(1===t.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===e)return gh(cc(t),n);if(e===1/0)return ph(cc(t),n);if(e===-1/0)return ip(cc(t),n);if("euclidean"===e||2===e)return ad(gh(Bh(cc(t),lc(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&2===n.length){if(1===e)return ph(gh(cc(t),n[0]),n[1]-1);if(e===1/0)return ph(gh(cc(t),n[1]),n[0]);if(e===-1/0)return ip(gh(cc(t),n[1]),n[0]);if("fro"===e||"euclidean"===e)return ad(gh(Rh(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const ap=gl({norm_:function(t,e="euclidean",n=null,r=!1){const s=op(t=fl(t,"x","norm"),e,n);let i=s.shape;if(r){const e=vr(n,t.shape);i=Eh(s.shape,e)}return Oc(s,i)}}),lp=gl({gramSchmidt_:function(t){let e;if(Array.isArray(t)){e=!1,ir(null!=t&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=t[0].shape[0];for(let e=1;e<t.length;++e)ir(t[e].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[e].shape[0]} vs. ${n})`)}else e=!0,t=od(t,t.shape[0],0).map(t=>ld(t,[0]));ir(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(ol.tidy(()=>{let t=r[s];if(s>0)for(let e=0;e<s;++e){const r=fh(gh(fh(n[e],t)),n[e]);t=mh(t,r)}return Yc(t,ap(t,"euclidean"))}));return e?ud(n,0):n}});function up(t,e=!1){return ol.tidy(()=>{ir(2===t.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=sh(n),i=pu(t);const o=dd([[1]],[1,1]);let a=pu(o);const l=n>=r?r:n;for(let t=0;t<l;++t){const e=i,l=a,u=s;[a,i,s]=ol.tidy(()=>{const e=Qh(i,[t,t],[n-t,1]),l=ap(e),u=Qh(i,[t,t],[1,1]),c=gd(lh(u,0),dd([[-1]]),dd([[1]])),h=mh(u,fh(c,l)),d=Yc(e,h);a=1===d.shape[0]?pu(o):$c([o,Qh(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const p=Dh(Yc(Md(c,h),l)),f=Qh(i,[t,0],[n-t,r]),m=fh(p,a),g=yd(a);if(0===t)i=mh(f,Md(m,Md(g,f)));else{const e=mh(f,Md(m,Md(g,f)));i=$c([Qh(i,[0,0],[t,r]),e],0)}const b=yd(m),y=Qh(s,[0,t],[n,s.shape[1]-t]);if(0===t)s=mh(y,Md(Md(y,a),b));else{const e=mh(y,Md(Md(y,a),b));s=$c([Qh(s,[0,0],[n,t]),e],1)}return[a,i,s]}),sc([e,l,u])}return!e&&n>r&&(s=Qh(s,[0,0],[n,r]),i=Qh(i,[0,0],[r,r])),[s,i]})}const cp=gl({qr_:function(t,e=!1){if(ir(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),2===t.rank)return up(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((t,e)=>t*e),r=fd(Oc(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];return r.forEach(t=>{const[n,r]=up(t,e);s.push(n),i.push(r)}),[Oc(ud(s,0),t.shape),Oc(ud(i,0),t.shape)]}}});var hp;!function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(hp||(hp={}));const dp=gl({computeWeightedLoss_:function(t,e,n=hp.SUM_BY_NONZERO_WEIGHTS){const r=fl(t,"losses","computeWeightedLoss");let s=null;null!=e&&(s=fl(e,"weights","computeWeightedLoss"));const i=null==s?r:fh(r,s);if(n===hp.NONE)return i;if(n===hp.SUM)return gh(i);if(n===hp.MEAN){if(null==s)return xh(i);{const t=r.size/s.size,e=Yc(gh(i),gh(s));return t>1?Yc(e,lc(t)):e}}if(n===hp.SUM_BY_NONZERO_WEIGHTS){if(null==s)return Yc(gh(i),lc(r.size));{const t=fh(s,Lh(r.shape)),e=du(gh(Ph(t,lc(0))),"float32");return Yc(gh(i),e)}}throw Error(`Unknown reduction: ${n}`)}});gl({absoluteDifference_:function(t,e,n,r=hp.SUM_BY_NONZERO_WEIGHTS){const s=fl(t,"labels","absoluteDifference"),i=fl(e,"predictions","absoluteDifference");let o=null;null!=n&&(o=fl(n,"weights","absoluteDifference")),or(s.shape,i.shape,"Error in absoluteDifference: ");const a=cc(mh(s,i));return dp(a,o,r)}}),gl({cosineDistance_:function(t,e,n,r,s=hp.SUM_BY_NONZERO_WEIGHTS){const i=fl(t,"labels","cosineDistance"),o=fl(e,"predictions","cosineDistance");let a=null;null!=r&&(a=fl(r,"weights","cosineDistance")),or(i.shape,o.shape,"Error in cosineDistance: ");const l=lc(1),u=mh(l,gh(fh(i,o),n,!0));return dp(u,a,s)}}),gl({hingeLoss_:function(t,e,n,r=hp.SUM_BY_NONZERO_WEIGHTS){let s=fl(t,"labels","hingeLoss");const i=fl(e,"predictions","hingeLoss");let o=null;null!=n&&(o=fl(n,"weights","hingeLoss")),or(s.shape,i.shape,"Error in hingeLoss: ");const a=lc(1);s=mh(fh(lc(2),s),a);const l=Zh(mh(a,fh(s,i)));return dp(l,o,r)}}),gl({huberLoss_:function(t,e,n,r=1,s=hp.SUM_BY_NONZERO_WEIGHTS){const i=fl(t,"labels","huberLoss"),o=fl(e,"predictions","huberLoss");let a=null;null!=n&&(a=fl(n,"weights","huberLoss")),or(i.shape,o.shape,"Error in huberLoss: ");const l=lc(r),u=cc(mh(o,i)),c=kh(u,l),h=mh(u,c),d=hc(fh(lc(.5),Rh(c)),fh(l,h));return dp(d,a,s)}}),gl({logLoss_:function(t,e,n,r=1e-7,s=hp.SUM_BY_NONZERO_WEIGHTS){const i=fl(t,"labels","logLoss"),o=fl(e,"predictions","logLoss");let a=null;null!=n&&(a=fl(n,"weights","logLoss")),or(i.shape,o.shape,"Error in logLoss: ");const l=lc(1),u=lc(r),c=Dh(fh(i,hh(hc(o,u)))),h=fh(mh(l,i),hh(hc(mh(l,o),u))),d=mh(c,h);return dp(d,a,s)}});const pp=gl({squaredDifference_:function(t,e){let n=fl(t,"a","squaredDifference"),r=fl(e,"b","squaredDifference");return[n,r]=Xa(n,r),th(n.shape,r.shape),ol.runKernel(Ao,{a:n,b:r},{})}});gl({meanSquaredError_:function(t,e,n,r=hp.SUM_BY_NONZERO_WEIGHTS){const s=fl(t,"labels","meanSquaredError"),i=fl(e,"predictions","meanSquaredError");let o=null;null!=n&&(o=fl(n,"weights","meanSquaredError")),or(s.shape,i.shape,"Error in meanSquaredError: ");const a=pp(s,i);return dp(a,o,r)}});const fp=gl({log1p_:function(t){const e=fl(t,"x","log1p");return ol.runKernel(_i,{x:e})}});gl({sigmoidCrossEntropy_:function(t,e,n,r=0,s=hp.SUM_BY_NONZERO_WEIGHTS){let i=fl(t,"multiClassLabels","sigmoidCrossEntropy");const o=fl(e,"logits","sigmoidCrossEntropy");let a=null;if(null!=n&&(a=fl(n,"weights","sigmoidCrossEntropy")),or(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const t=lc(r),e=lc(1),n=lc(.5);i=hc(fh(i,mh(e,t)),fh(n,t))}const l=function(t,e){const n=fl(t,"labels","sigmoidCrossEntropyWithLogits"),r=fl(e,"logits","sigmoidCrossEntropyWithLogits");or(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=Zh(r),i=fh(r,n),o=fp(dh(Dh(cc(r))));return hc(mh(s,i),o)}(i,o);return dp(l,a,s)}});const mp=gl({logSumExp_:function(t,e=null,n=!1){const r=fl(t,"x","logSumExp"),s=vr(e,r.shape),i=ph(r,s,!0),o=mh(r,i),a=dh(o),l=gh(a,s),u=hh(l),c=hc(Oc(i,u.shape),u);if(n){const t=Eh(c.shape,s);return Oc(c,t)}return c}});gl({softmaxCrossEntropy_:function(t,e,n,r=0,s=hp.SUM_BY_NONZERO_WEIGHTS){let i=fl(t,"onehotLabels","softmaxCrossEntropy");const o=fl(e,"logits","softmaxCrossEntropy");let a=null;if(null!=n&&(a=fl(n,"weights","softmaxCrossEntropy")),or(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const t=lc(r),e=lc(1),n=lc(i.shape[1]);i=hc(fh(i,mh(e,t)),Yc(t,n))}const l=function(t,e,n=-1){if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return ac((t,e,r)=>{const s=mp(e,[n],!0),i=mh(du(e,"float32"),s);r([t,i]);const o=Dh(fh(i,t));return{value:gh(o,[n]),gradFunc:(t,e)=>{const[r,s]=e,i=Eh(t.shape,[n]);return[fh(Oc(t,i),mh(du(r,"float32"),dh(s))),fh(Oc(t,i),mh(dh(s),du(r,"float32")))]}}})(t,e)}(i,o);return dp(l,a,s)}}),gl({sparseFillEmptyRows_:function(t,e,n,r){const s=fl(t,"indices","sparseFillEmptyRows"),i=fl(e,"values","sparseFillEmptyRows"),o=fl(n,"denseShape","sparseFillEmptyRows"),a=fl(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==s.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${s.shape}`);if(1!==i.rank)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(1!==o.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(0!==a.rank)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l=ol.runKernel(Io,{indices:s,values:i,denseShape:o,defaultValue:a});return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}}),gl({sparseReshape_:function(t,e,n){const r=fl(t,"inputIndices","sparseReshape"),s=fl(e,"inputShape","sparseReshape"),i=fl(n,"newShape","sparseReshape");if(2!==r.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${r.shape}`);if(1!==s.rank)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(1!==i.rank)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o=ol.runKernel(Eo,{inputIndices:r,inputShape:s,newShape:i});return{outputIndices:o[0],outputShape:o[1]}}}),gl({sparseSegmentMean_:function(t,e,n){const r=fl(t,"data","sparseSegmentMean"),s=fl(e,"indices","sparseSegmentMean"),i=fl(n,"segmentIds","sparseSegmentMean");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${s.shape}`);if(1!==i.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${i.shape}`);return ol.runKernel(Oo,{data:r,indices:s,segmentIds:i})}}),gl({sparseSegmentSum_:function(t,e,n){const r=fl(t,"data","sparseSegmentSum"),s=fl(e,"indices","sparseSegmentSum"),i=fl(n,"segmentIds","sparseSegmentSum");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${s.shape}`);if(1!==i.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${i.shape}`);return ol.runKernel(To,{data:r,indices:s,segmentIds:i})}}),gl({stringNGrams_:function(t,e,n,r,s,i,o,a){const l=fl(t,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=fl(e,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");const c=ol.runKernel(Do,{data:l,dataSplits:u},{separator:n,nGramWidths:r,leftPad:s,rightPad:i,padWidth:o,preserveShortSequences:a});return{nGrams:c[0],nGramsSplits:c[1]}}}),gl({stringSplit_:function(t,e,n=!0){const r=fl(t,"input","stringSplit","string"),s=fl(e,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==s.rank)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const i=ol.runKernel(Po,{input:r,delimiter:s},{skipEmpty:n});return{indices:i[0],values:i[1],shape:i[2]}}}),gl({stringToHashBucketFast_:function(t,e){const n=fl(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");return ol.runKernel($o,{input:n},r)}});const gp={bandPart:sp,gramSchmidt:lp,qr:cp};class bp extends uc{constructor(t,e,n=null){super(),this.learningRate=t,this.rho=e,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=ol.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=ol.registeredVariables[e];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${e}/accum_grad`,variable:rc(()=>bd(r).variable(!1))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${e}/accum_var`,variable:rc(()=>bd(r).variable(!1))});const s=Array.isArray(t)?t[n].tensor:t[e];if(null==s)return;const i=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;rc(()=>{const t=hc(fh(i,this.rho),fh(Rh(s),1-this.rho)),e=fh(Yc(ad(hc(o,this.epsilon)),ad(hc(i,this.epsilon))),s),n=hc(fh(o,this.rho),fh(Rh(e),1-this.rho));i.assign(t),o.assign(n);const a=hc(fh(e,-this.learningRate),r);r.assign(a)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(sc(this.accumulatedGrads.map(t=>t.variable)),sc(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){const e=(t=await this.extractIterations(t)).length/2;this.accumulatedGrads=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.accumulatedUpdates=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.rho,e.epsilon)}}bp.className="Adadelta",tc(bp);class yp extends uc{constructor(t,e=.1){super(),this.learningRate=t,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=ol.registeredVariables[e];if(null==this.accumulatedGrads[n]){const t=!1;this.accumulatedGrads[n]={originalName:`${e}/accumulator`,variable:rc(()=>ih(r.shape,this.initialAccumulatorValue).variable(t))}}const s=Array.isArray(t)?t[n].tensor:t[e];if(null==s)return;const i=this.accumulatedGrads[n].variable;rc(()=>{const t=hc(i,Rh(s));i.assign(t);const e=hc(fh(Yc(s,ad(hc(t,ol.backend.epsilon()))),-this.learningRate),r);r.assign(e)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&sc(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),this.accumulatedGrads=t.map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,e){return new t(e.learningRate,e.initialAccumulatorValue)}}yp.className="Adagrad",tc(yp);class vp extends uc{constructor(t,e,n,r=null){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],rc(()=>{this.accBeta1=lc(e).variable(),this.accBeta2=lc(n).variable()}),null==r&&(this.epsilon=ol.backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);rc(()=>{const n=mh(1,this.accBeta1),r=mh(1,this.accBeta2);e.forEach((e,s)=>{const i=ol.registeredVariables[e];null==this.accumulatedFirstMoment[s]&&(this.accumulatedFirstMoment[s]={originalName:`${e}/m`,variable:rc(()=>bd(i).variable(!1))}),null==this.accumulatedSecondMoment[s]&&(this.accumulatedSecondMoment[s]={originalName:`${e}/v`,variable:rc(()=>bd(i).variable(!1))});const o=Array.isArray(t)?t[s].tensor:t[e];if(null==o)return;const a=this.accumulatedFirstMoment[s].variable,l=this.accumulatedSecondMoment[s].variable,u=hc(fh(a,this.beta1),fh(o,1-this.beta1)),c=hc(fh(l,this.beta2),fh(Rh(o),1-this.beta2)),h=Yc(u,n),d=Yc(c,r);a.assign(u),l.assign(c);const p=hc(fh(Yc(h,hc(ad(d),this.epsilon)),-this.learningRate),i);i.assign(p)}),this.accBeta1.assign(fh(this.accBeta1,this.beta1)),this.accBeta2.assign(fh(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&sc(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedSecondMoment&&sc(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),rc(()=>{this.accBeta1.assign(Bh(this.beta1,this.iterations_+1)),this.accBeta2.assign(Bh(this.beta2,this.iterations_+1))});const e=t.length/2;this.accumulatedFirstMoment=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.accumulatedSecondMoment=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)}}vp.className="Adam",tc(vp);class _p extends uc{constructor(t,e,n,r=null,s=0){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],rc(()=>{this.iteration=lc(0).variable(),this.accBeta1=lc(e).variable()}),null==r&&(this.epsilon=ol.backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);rc(()=>{const n=mh(1,this.accBeta1),r=Yc(-this.learningRate,hc(fh(this.iteration,this.decay),1));e.forEach((e,s)=>{const i=ol.registeredVariables[e];null==this.accumulatedFirstMoment[s]&&(this.accumulatedFirstMoment[s]={originalName:`${e}/m`,variable:bd(i).variable(!1)}),null==this.accumulatedWeightedInfNorm[s]&&(this.accumulatedWeightedInfNorm[s]={originalName:`${e}/v`,variable:bd(i).variable(!1)});const o=Array.isArray(t)?t[s].tensor:t[e];if(null==o)return;const a=this.accumulatedFirstMoment[s].variable,l=this.accumulatedWeightedInfNorm[s].variable,u=hc(fh(a,this.beta1),fh(o,1-this.beta1)),c=fh(l,this.beta2),h=cc(o),d=wh(c,h);a.assign(u),l.assign(d);const p=hc(fh(Yc(r,n),Yc(u,hc(d,this.epsilon))),i);i.assign(p)}),this.iteration.assign(hc(this.iteration,1)),this.accBeta1.assign(fh(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&sc(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedWeightedInfNorm&&sc(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}}_p.className="Adamax",tc(_p);class wp extends uc{constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=Array.isArray(t)?t[n].tensor:t[e];if(null==r)return;const s=ol.registeredVariables[e];rc(()=>{const t=hc(fh(this.c,r),s);s.assign(t)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=ic(lc(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(0!==(t=await this.extractIterations(t)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,e){return new t(e.learningRate)}}wp.className="SGD",tc(wp);class xp extends wp{constructor(t,e,n=!1){super(t),this.learningRate=t,this.momentum=e,this.useNesterov=n,this.accumulations=[],this.m=lc(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=ol.registeredVariables[e];if(null==this.accumulations[n]){const t=!1;this.accumulations[n]={originalName:`${e}/momentum`,variable:rc(()=>bd(r).variable(t))}}const s=this.accumulations[n].variable,i=Array.isArray(t)?t[n].tensor:t[e];null!=i&&rc(()=>{let t;const e=hc(fh(this.m,s),i);t=hc(fh(this.c,this.useNesterov?hc(i,fh(e,this.m)):e),r),s.assign(e),r.assign(t)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&sc(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),this.accumulations=t.map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)}}xp.className="Momentum",tc(xp);class kp extends uc{constructor(t,e=.9,n=0,r=null,s=!1){if(super(),this.learningRate=t,this.decay=e,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,null==r&&(this.epsilon=ol.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=ol.registeredVariables[e],s=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${e}/rms`,variable:rc(()=>bd(r).variable(s))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${e}/momentum`,variable:rc(()=>bd(r).variable(s))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${e}/mg`,variable:rc(()=>bd(r).variable(s))});const i=Array.isArray(t)?t[n].tensor:t[e];if(null==i)return;const o=this.accumulatedMeanSquares[n].variable,a=this.accumulatedMoments[n].variable;rc(()=>{const t=hc(fh(o,this.decay),fh(Rh(i),1-this.decay));if(this.centered){const e=this.accumulatedMeanGrads[n].variable,s=hc(fh(e,this.decay),fh(i,1-this.decay)),l=Yc(fh(i,this.learningRate),ad(mh(t,hc(Rh(s),this.epsilon)))),u=hc(fh(a,this.momentum),l);o.assign(t),e.assign(s),a.assign(u);const c=mh(r,u);r.assign(c)}else{const t=hc(fh(o,this.decay),fh(Rh(i),1-this.decay)),e=hc(fh(a,this.momentum),Yc(fh(i,this.learningRate),ad(hc(t,this.epsilon))));o.assign(t),a.assign(e);const n=mh(r,e);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&sc(this.accumulatedMeanSquares.map(t=>t.variable)),null!=this.accumulatedMeanGrads&&this.centered&&sc(this.accumulatedMeanGrads.map(t=>t.variable)),null!=this.accumulatedMoments&&sc(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=this.centered?t.length/3:t.length/2,n=!1;this.accumulatedMeanSquares=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.accumulatedMoments=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}}kp.className="RMSProp",tc(kp);class Sp{static sgd(t){return new wp(t)}static momentum(t,e,n=!1){return new xp(t,e,n)}static rmsprop(t,e=.9,n=0,r=null,s=!1){return new kp(t,e,n,r,s)}static adam(t=.001,e=.9,n=.999,r=null){return new vp(t,e,n,r)}static adadelta(t=.001,e=.95,n=null){return new bp(t,e,n)}static adamax(t=.002,e=.9,n=.999,r=null,s=0){return new _p(t,e,n,r,s)}static adagrad(t,e=.1){return new yp(t,e)}}const Cp={sgd:Sp.sgd,momentum:Sp.momentum,adadelta:Sp.adadelta,adagrad:Sp.adagrad,rmsprop:Sp.rmsprop,adamax:Sp.adamax,adam:Sp.adam},Ip="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:t=>t();function Ep(){return new Promise(t=>Ip(()=>t()))}function Op(t,e){const n=t[0].length;t.forEach((t,e)=>{ir(t.length===n,()=>`Error in concat${n}D: rank of tensors[${e}] must be the same as the rank of the rest (${n})`)}),ir(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((t,s)=>{for(let i=0;i<n;i++)ir(i===e||t[i]===r[i],()=>`Error in concat${n}D: Shape of tensors[${s}] (${t}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function Tp(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}const Np=30;function Ap(t){return t<=Np?t:Dr(t,Math.floor(Math.sqrt(t)))}function Rp(t,e,n){return[n*("number"==typeof t?t:t[0]),e*("number"==typeof t?t:t[1])]}function Fp(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const n=e.length;for(let r=0;r<n;++r)s=s.concat([t[r+1]/e[r],e[r]]);s=s.concat(t.slice(n+1))}return s}function Dp(t,e,n=!0){const r=[];if(n){r.push(e);for(let n=e+1;n<t;++n)n<=2*e?(r.push(n),r.push(n-(e+1))):r.push(n)}else{const n=[],s=[];for(let r=1;r<t;++r)r>=2*e+1||r%2==1?s.push(r):n.push(r);r.push(...n),r.push(0),r.push(...s)}return r}function Pp(t,e,n,r=!0){const s=[];s.push(r?t[0]/n:t[0]*n);for(let i=1;i<t.length;++i)s.push(i<=e.length?r?e[i-1]*t[i]:t[i]/e[i-1]:t[i]);return s}function $p(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function Mp(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}function Lp(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==e.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(0===ur(t.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let o=1;for(let h=0;h<s.length-1;++h)o*=s[h];const a=t.shape,l=s.slice();l.pop();let u=1;for(let h=i;h<n;++h)u*=a[h],l.push(a[h]);const c=[...Pr(t.shape).map(t=>t/u),1].slice(0,i);return[l,o,u,c]}function jp(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+" update.rank != "+(s+t.length-r));for(let o=0;o<s;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-s;++o)if(n.shape[o+s]!==t[o+r])throw new Error(i+` updates.shape[${o+s}] (${n.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function zp(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if("int32"!==e.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===e.size)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(0===t.size)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}jp(n,e,t)}function Bp(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let l=s;l<i;++l)o*=n[l];const a=s<1?1:s;return{sliceRank:s,numUpdates:ur(e.shape)/a,sliceSize:o,strides:[...Pr(n.slice(0,s)),1],outputSize:ur(n)}}const Vp=1.7580993408473768,Up=1.0507009873554805,Wp=.3275911,Hp=.254829592,Gp=-.284496736,qp=1.421413741,Zp=-1.453152027,Kp=1.061405429;function Yp(...t){qr().getBool("IS_TEST")||console.warn(...t)}function Xp(...t){qr().getBool("IS_TEST")||console.log(...t)}function Jp(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(2*t.length);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Qp(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function tf(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function ef(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function nf(t,e){return{real:t[2*e],imag:t[2*e+1]}}function rf(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function sf(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function of(t,e,n){const r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}const af=/->/g;function lf(t,e){const n=((t=t.replace(/\s/g,"")).length-t.replace(af,"").length)/"->".length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("->").');const[r,s]=t.split("->");ir(-1===r.indexOf("..."),()=>'The ellipsis notation ("...") is not supported yet.');const i=r.split(","),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<s.length;++h){const t=s[h];if(!i.some(e=>-1!==e.indexOf(t)))throw new Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===a.indexOf(t)&&a.push(t)}for(let h=0;h<r.length;++h){const t=r[h];-1===a.indexOf(t)&&","!==t&&a.push(t)}const l=new Array(i.length);for(let h=0;h<o;++h){if(new Set(i[h].split("")).size!==i[h].length)throw new Error(`Found duplicate axes in input component ${i[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let t=0;t<i[h].length;++t)l[h].push(a.indexOf(i[h][t]))}const u=a.length,c=[];for(let h=s.length;h<u;++h)c.push(h);return{allDims:a,summedDims:c,idDims:l}}function uf(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)-1===n[s]&&r.push(s);return n=n.filter(t=>-1!==t),{permutationIndices:n,expandDims:r}}function cf(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const t=n[s].shape;for(let n=0;n<e[s].length;++n)void 0===r[e[s][n]]?r[e[s][n]]=t[n]:ir(r[e[s][n]]===t[n],()=>`Expected dimension ${r[e[s][n]]} at axis ${n} of input shaped ${JSON.stringify(t)}, but got dimension ${t[n]}`)}}function hf(t,e){const n=t,r=[];let s=0;0===t.length&&n.push(-1),s=t.length+1;for(let o=0;o<s;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const t=pf(e,n[o]);for(const e of t)-1===i.indexOf(e)&&(r[o].push(e),i.push(e))}return{path:n,steps:r}}function df(t){return t.every((t,e)=>t===e)}function pf(t,e){const n=[];for(let r=0;r<t.length;++r)0!==t[r].length&&-1===t[r].indexOf(e)&&-1!==e||n.push(r);return n}function ff(t,e,n=0){let r=[];if("number"==typeof e)ir(t.shape[n]%e==0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{ir(e.reduce((t,e)=>(-1===e&&(t+=1),t),0)<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(-1!==s){const r=e.reduce((t,e)=>e>0?t+e:t);e[s]=t.shape[n]-r}ir(t.shape[n]===e.reduce((t,e)=>t+e),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}function mf(t,e){let n,r=!1;for(t<=Np?(n=t,r=!0):n=Dr(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=Dr(t,n+1);return n}function gf(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)r.push(i!==e?t[i]:n);return r}function bf(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(0!==r&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let h=0;h<r;++h)if(t.shape[h]!==e.shape[h])throw new Error(`x.shape[${h}]: ${t.shape[h]} should be equal to indices.shape[${h}]: ${e.shape[h]}.`);const o=t.shape[n],a=[];let l=1,u=1,c=1;for(let h=0;h<r;++h)a.push(t.shape[h]),l*=t.shape[h];for(let h=r;h<n;h++)a.push(t.shape[h]),u*=t.shape[h];for(let h=r;h<s;h++)a.push(e.shape[h]);for(let h=n+1;h<i;h++)a.push(t.shape[h]),c*=t.shape[h];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:a}}function yf(t){try{return t.map(t=>Ea(t))}catch(ZW){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${ZW}`)}}function vf(t){return t.map(t=>Ia(t))}function _f(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=hu(t,"int32"),s=hu([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const e=r.indexToLoc(n[i]);s.values.set(e,i*t.length)}return s.toTensor()}const wf={kernelName:Jr,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fh(t,Od(du(n,"float32"),-1))}}},xf={kernelName:Qr,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Rh(du(n,"float32")),r=ad(mh(lc(1),e));return Dh(Yc(t,r))}}}},kf={kernelName:ts,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=ad(mh(Rh(du(n,"float32")),1));return Yc(t,e)}}}},Sf={kernelName:es,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=th(n.shape,r.shape);return{a:()=>{let e=t;const r=Qc(n.shape,s);return r.length>0&&(e=gh(e,r)),Oc(e,n.shape)},b:()=>{let e=t;const n=Qc(r.shape,s);return n.length>0&&(e=gh(e,n)),Oc(e,r.shape)}}}},Cf={kernelName:ns,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((e,r)=>{n[r]=()=>t.clone()}),n}},If={kernelName:is,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bd(n)}}},Ef={kernelName:os,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bd(n)}}},Of={kernelName:as,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Yc(t,ad(mh(lc(1),Rh(du(n,"float32")))))}}},Tf={kernelName:ls,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=ad(hc(lc(1),Rh(du(n,"float32"))));return Yc(t,e)}}}},Nf={kernelName:hs,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=th(n.shape,r.shape);return{a:()=>{const e=hc(Rh(n),Rh(r));let i=fh(t,Yc(r,e));const o=Qc(n.shape,s);return o.length>0&&(i=gh(i,o)),Oc(i,n.shape)},b:()=>{const e=hc(Rh(n),Rh(r));let i=Dh(fh(t,Yc(n,e)));const o=Qc(r.shape,s);return o.length>0&&(i=gh(i,o)),Oc(i,r.shape)}}}},Af={kernelName:us,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Yc(t,hc(Rh(du(n,"float32")),1))}}},Rf={kernelName:cs,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Yc(t,mh(lc(1),Rh(du(n,"float32"))))}}},Ff=gl({avgPool3dGrad_:function(t,e,n,r,s,i){const o=fl(t,"dy","avgPool3dGrad"),a=fl(e,"input","avgPool3dGrad");let l=o,u=a,c=!1;4===a.rank&&(c=!0,l=Oc(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),u=Oc(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),ir(5===l.rank,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),ir(5===u.rank,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),null!=i&&ir(dr(s),()=>`Error in avgPool3dGrad: pad must be an integer when using, dimRoundingMode ${i} but got pad ${s}.`);const h=ol.runKernel(ms,{dy:l,input:u},{filterSize:n,strides:r,pad:s,dimRoundingMode:i});return c?Oc(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Df={kernelName:fs,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o,dimRoundingMode:a}=n;return{x:()=>Ff(t,r,s,i,o,a)}}},Pf=gl({avgPoolGrad_:function(t,e,n,r,s){const i=fl(t,"dy","avgPoolGrad"),o=fl(e,"input","avgPoolGrad");ir(o.rank===i.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${i.rank})`);let a=o,l=i,u=!1;3===o.rank&&(u=!0,a=Oc(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=Oc(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ir(4===l.rank,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),ir(4===a.rank,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c=ol.runKernel(ps,{dy:l,input:a},{filterSize:n,strides:r,pad:s});return u?Oc(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),$f={kernelName:ds,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o}=n;return{x:()=>Pf(t,r,s,i,o)}}},Mf={kernelName:gs,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:i,transposeB:o}=n;return i||o?!i&&o?{a:()=>Md(t,s,!1,!1),b:()=>Md(t,r,!0,!1)}:i&&!o?{a:()=>Md(s,t,!1,!0),b:()=>Md(r,t,!1,!1)}:{a:()=>Md(s,t,!0,!0),b:()=>Md(t,r,!0,!0)}:{a:()=>Md(t,s,!1,!0),b:()=>Md(r,t,!0,!1)}}},Lf=gl({spaceToBatchND_:function(t,e,n){const r=fl(t,"x","spaceToBatchND");return ir(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),ir(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),ir(r.shape.reduce((t,r,s)=>s>0&&s<=e.length?t&&(r+n[s-1][0]+n[s-1][1])%e[s-1]==0:t,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`),ol.runKernel(ko,{x:r},{blockShape:e,paddings:n})}}),jf={kernelName:bs,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>Lf(t,r,s)}}},zf={kernelName:"BroadcastTo",gradFunc:(t,e,n)=>{const r=n.inputShape,s=n.shape,i=Array.from(s);for(let a=r.length-1;a>=0;a--)if(r[a]===s[a])i[a]=1;else if(1!==r[a])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${s}].`);const o=[];for(let a=0;a<i.length;a++)i[a]>1&&o.push(a);return{x:()=>gh(t,o,!0)}}},Bf={kernelName:vs,gradFunc:t=>({x:()=>t.clone()})},Vf={kernelName:_s,gradFunc:t=>({x:()=>bd(t)})},Uf={kernelName:ws,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:i}=n;return{x:()=>gd(yh(uh(r,s),ep(r,i)),t,bd(t))}}},Wf={kernelName:ks,inputsToSave:["x"],gradFunc:wf.gradFunc},Hf={kernelName:Ss,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(t=>t.shape),{axis:s}=n,i=vr(s,e[0].shape)[0],o=r.map(t=>t[i]);return od(t,o,i).map(t=>()=>t)}},Gf={kernelName:Cs,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:i,strides:o,pad:a,dataFormat:l}=n;return ir(Cc(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>Uc(r.shape,t,s,o,a,l),filter:()=>Id(r,t,s.shape,o,a,l)}}},qf={kernelName:Es,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:i,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Bc(t,s,i,o,a,1,l),filter:()=>Id(t,r,s.shape,i,o,a,l)}}},Zf=gl({conv3DBackpropFilter_:function(t,e,n,r,s){let i=t;4===t.rank&&(i=Oc(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;return 4===o.rank&&(o=Oc(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),ir(5===i.rank,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),ir(5===o.rank,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),ir(5===n.length,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),ir(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),ir(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`),ol.runKernel(Ts,{x:i,dy:o},{strides:r,pad:s,filterShape:n})}}),Kf={kernelName:Os,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i}=n;ir(Cc(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>Gc(o.shape,t,a,s,i),filter:()=>Zf(o,t,a.shape,s,i)}}},Yf=gl({sin_:function(t){const e=fl(t,"x","sin");return ol.runKernel(go,{x:e})}}),Xf={kernelName:As,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fh(Dh(Yf(du(n,"float32"))),t)}}},Jf=gl({sinh_:function(t){const e=fl(t,"x","sinh");return ol.runKernel(bo,{x:e})}}),Qf={kernelName:Rs,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fh(Jf(du(n,"float32")),t)}}},tm=gl({cumsum_:function(t,e=0,n=!1,r=!1){const s=fl(t,"x","cumsum");return ol.runKernel(Fs,{x:s},{axis:e,exclusive:n,reverse:r})}}),em={kernelName:Fs,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:i,reverse:o}=n;return{x:()=>{const e=Th([s],r.rank);let n=tm(t,s,i,!o);return null!=e&&(n=yd(n,e)),n}}}},nm={kernelName:Ms,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i,dimRoundingMode:o}=n,a=null==r?[1,1]:r;ir(Cc(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=e;return ir(4===l.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),ir(4===u.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),ir(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),ir(Ic(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),null!=o&&ir(dr(i),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${i}.`),{x:()=>Pd(l.shape,t,u,s,i,r,o),filter:()=>Dd(l,t,u.shape,s,i,r,o)}}},rm={kernelName:Bs,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,i={x:r,filter:s,dy:t},o={x:r,filter:s,dy:t};return{x:()=>ol.runKernel(Vs,i,n),filter:()=>ol.runKernel(Us,o,n)}}},sm={kernelName:Gs,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>ol.runKernel(qs,r)}}},im={kernelName:Zs,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=fh(dh(Dh(Rh(n))),2/Math.sqrt(Math.PI));return{x:()=>fh(t,r)}}},om={kernelName:Ys,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fh(t,n)}}},am={kernelName:Xs,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>Oc(t,n.shape)}}},lm={kernelName:Js,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fh(t,dh(n))}}},um={kernelName:ni,gradFunc:t=>({x:()=>bd(t)})},cm={kernelName:ri,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=th(n.shape,r.shape);return{a:()=>{const e=Yc(t,du(r,"float32")),i=Qc(n.shape,s);return i.length>0?Oc(gh(e,i),n.shape):e},b:()=>{let e=fh(t,du(n,"float32"));const i=Qc(r.shape,s);i.length>0&&(e=Oc(gh(e,i),r.shape));const o=Rh(r);return Dh(Yc(e,du(o,"float32")))}}}},hm=gl({rsqrt_:function(t){const e=fl(t,"x","rsqrt");return ol.runKernel(co,{x:e})}}),dm={kernelName:si,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,i,o,a]=e,l=null==a?lc(1):a,u=Qc(i.shape,s.shape),c=[];if(1===i.rank){for(let t=0;t<s.shape.length-1;++t)c.push(s.shape[t]);c.push(1)}const h=mh(s,i),d=fh(t,l),p=hm(hc(o,lc(r))),f=fh(fh(fh(p,p),p),lc(-.5));return{x:()=>Oc(fh(fh(t,1===i.rank?rh(Oc(p,[1,1,1,i.shape[0]]),c):p),l),s.shape),mean:()=>{let t=fh(fh(p,lc(-1)),d);return 1===i.rank&&(t=gh(t,u)),Oc(t,i.shape)},variance:()=>{let t=fh(fh(f,h),d);return 1===i.rank&&(t=gh(t,u)),Oc(t,i.shape)},scale:()=>{const e=fh(h,p);let n=fh(t,e);return 1===i.rank&&(n=gh(n,u)),Oc(n,i.shape)},offset:()=>{let e=t;return 1===i.rank&&(e=gh(e,u)),Oc(e,i.shape)}}}},pm=gl({unsortedSegmentSum_:function(t,e,n){const r=fl(t,"x","unsortedSegmentSum"),s=fl(e,"segmentIds","unsortedSegmentSum","int32");return ir(dr(n),()=>"numSegments must be of dtype int"),ol.runKernel(Go,{x:r,segmentIds:s},{numSegments:n})}}),fm={kernelName:ii,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:i}=n,o=vr(i,r.shape)[0];return{x:()=>{const e=r.shape,n=s.size,a=e.slice(0,o),l=a.length,u=e.slice(i,e.length).slice(1),c=u.length,h=mm(0,l),d=mm(l+1,l+1+c),p=gm([a,[n],u]),f=Oc(t,p),m=Oc(s,[n]),g=gm([[l],h,d]),b=yd(f,g);let y=pm(b,m,r.shape[o]);const v=Nh(g);return y=yd(y,v),y},indices:()=>s}}};function mm(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function gm(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}const bm={kernelName:li,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>bd(n),b:()=>bd(r)}}},ym={kernelName:ui,gradFunc:t=>({x:()=>du(t,"float32")})},vm={kernelName:di,gradFunc:t=>({x:()=>bd(t)})},_m={kernelName:pi,gradFunc:t=>({x:()=>bd(t)})},wm={kernelName:fi,gradFunc:t=>({x:()=>bd(t)})},xm={kernelName:mi,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,i=lh(r,0);return{x:()=>gd(i,t,fh(t,s))}}},km={kernelName:_i,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Yc(t,hc(n,1))}}},Sm={kernelName:vi,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Yc(t,du(n,"float32"))}}},Cm={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const e=dh(r);return mh(t,fh(gh(t,s,!0),e))}}}},Im=gl({localResponseNormalizationBackprop_:function(t,e,n,r=5,s=1,i=1,o=.5){return ol.runKernel(Ci,{x:t,y:e,dy:n},{depthRadius:r,bias:s,alpha:i,beta:o})}}),Em={kernelName:Si,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:i,bias:o,alpha:a,beta:l}=n;return{x:()=>Im(r,s,t,i,o,a,l)}}};function Om(t,e,n,r){return e.rank<n.rank&&(e=Oc(e,Eh(e.shape,r))),t.rank<n.rank&&(t=Oc(t,Eh(t.shape,r))),{x:()=>fh(t,du(eh(n,e),t.dtype))}}const Tm={kernelName:Ii,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,i=e[0],o=Om(t,e[1],i,vr(s,i.shape));return{x:()=>o.x()}}},Nm=gl({less_:function(t,e){let n=fl(t,"a","less","string_or_numeric"),r=fl(e,"b","less","string_or_numeric");return[n,r]=Xa(n,r),th(n.shape,r.shape),ol.runKernel(gi,{a:n,b:r})}}),Am={kernelName:Ei,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>fh(t,du(uh(n,r),"float32")),b:()=>fh(t,du(Nm(n,r),"float32"))}}},Rm=gl({maxPool3dGrad_:function(t,e,n,r,s,i,o){const a=fl(t,"dy","maxPool3dGrad"),l=fl(e,"input","maxPool3dGrad"),u=fl(n,"output","maxPool3dGrad");let c=a,h=l,d=u,p=!1;4===l.rank&&(p=!0,c=Oc(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),h=Oc(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=Oc(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),ir(5===c.rank,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),ir(5===h.rank,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),ir(5===d.rank,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),null!=o&&ir(dr(i),()=>`Error in maxPool3dGrad: pad must be an integer when using, dimRoundingMode ${o} but got pad ${i}.`);const f=ol.runKernel(Ai,{dy:c,input:h,output:d},{filterSize:r,strides:s,pad:i,dimRoundingMode:o});return p?Oc(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}}),Fm={kernelName:Ni,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>Rm(t,r,s,i,o,a,l)}}},Dm=gl({maxPoolGrad_:function(t,e,n,r,s,i,o){const a=fl(t,"dy","maxPoolGrad"),l=fl(e,"input","maxPoolGrad"),u=fl(n,"output","maxPoolGrad");return ir(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),ir(4===a.rank,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),ir(4===l.rank,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),null!=o&&ir(dr(i),()=>`Error in maxPoolGrad: pad must be an integer when using, dimRoundingMode ${o} but got pad ${i}.`),ol.runKernel(Ti,{dy:a,input:l,output:u},{filterSize:r,strides:s,pad:i,dimRoundingMode:o})}}),Pm={kernelName:Oi,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a}=n;return{x:()=>Dm(t,r,s,i,o,a)}}},$m={kernelName:Fi,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,i=vr(s,r.shape),o=ur(Ih(r.shape,i)[1]);return{x:()=>{const e=r.shape.slice();i.forEach(t=>{e[t]=1});const n=Oc(t,e);return Yc(fh(n,Lh(r.shape,"float32")),o)}}}},Mm={kernelName:Di,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[i,o]=e,a=Om(t,o,i,vr(s,i.shape));return{x:()=>a.x()}}},Lm={kernelName:Pi,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>fh(t,du(ep(n,r),"float32")),b:()=>fh(t,du(lh(n,r),"float32"))}}},jm={kernelName:$i,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(t=>t[0]);return{x:()=>Qh(t,i,r.shape)}}},zm={kernelName:Mi,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=th(n.shape,r.shape);return{a:()=>{const e=Qc(n.shape,s);return e.length>0?Oc(gh(t,e),n.shape):t},b:()=>{const e=fh(t,Dh(oh(Yc(n,r)))),i=Qc(r.shape,s);return i.length>0?Oc(gh(e,i),r.shape):e}}}},Bm={kernelName:ji,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=th(n.shape,r.shape);return{a:()=>{const e=fh(t,du(r,"float32")),i=Qc(n.shape,s);return i.length>0?Oc(gh(e,i),n.shape):e},b:()=>{const e=fh(t,du(n,"float32")),i=Qc(r.shape,s);return i.length>0?Oc(gh(e,i),r.shape):e}}}},Vm={kernelName:zi,gradFunc:t=>({x:()=>Dh(t)})},Um={kernelName:Gi,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Mh(n.shape,"float32")}}},Wm={kernelName:Hi,gradFunc:t=>({x:()=>bd(t)})},Hm={kernelName:qi,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return fd(t,r).map(t=>()=>t)}},Gm={kernelName:Zi,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(t=>t[0]);return{x:()=>Qh(t,i,r.shape)}}},qm={kernelName:Ki,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,i=n,o=r,a=th(i.shape,o.shape);return{a:()=>{const e=du(o,"float32");let n=fh(t,fh(e,Bh(i,mh(e,lc(1)))));const r=Qc(i.shape,a);return r.length>0&&(n=gh(n,r)),Oc(n,i.shape)},b:()=>{const e=lh(i,0),n=gd(e,hh(i),bd(i));let r=fh(t,fh(s,n));const l=Qc(o.shape,a);return l.length>0&&(r=gh(r,l)),Oc(r,o.shape)}}}},Zm={kernelName:Yi,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=lh(n,0);return{x:()=>gd(s,t,fh(t,r)),alpha:()=>{let e=gd(s,bd(t),fh(t,n));const i=Qc(r.shape,t.shape);return i.length>0&&(e=gh(e,i)),Oc(e,r.shape)}}}},Km={kernelName:Ws,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=th(n.shape,r.shape);return{a:()=>{const e=Yc(t,du(r,"float32")),i=Qc(n.shape,s);return i.length>0?Oc(gh(e,i),n.shape):e},b:()=>{let e=fh(t,du(n,"float32"));const i=Qc(r.shape,s);i.length>0&&(e=Oc(gh(e,i),r.shape));const o=Rh(r);return Dh(Yc(e,du(o,"float32")))}}}},Ym={kernelName:to,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Yc(t,Dh(Rh(n)))}}},Xm={kernelName:ao,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=fh(ep(n,6),Od(n));return{x:()=>fh(t,du(r,"float32"))}}},Jm={kernelName:eo,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fh(t,du(Od(n),"float32"))}}},Qm={kernelName:no,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oc(t,n.shape)}}},tg={kernelName:io,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>ol.runKernel(oo,s,n)}}},eg={kernelName:ro,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>ol.runKernel(so,s,n)}}},ng={kernelName:lo,gradFunc:(t,e,n)=>{const{dims:r}=n,s=vr(r,t.shape);return{x:()=>Kh(t,s)}}},rg={kernelName:uo,gradFunc:t=>({x:()=>bd(t)})},sg={kernelName:co,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Dh(Yc(t,fh(Bh(n,1.5),2)))}}},ig=gl({logicalNot_:function(t){const e=fl(t,"x","logicalNot","bool");return ol.runKernel(xi,{x:e})}}),og={kernelName:po,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>du(bd(n),"float32"),t:()=>fh(t,du(n,t.dtype)),e:()=>fh(t,du(ig(n),t.dtype))}}},ag={kernelName:fo,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=lh(n,lc(0)),r=lc(Vp),s=lc(Up),i=fh(t,s),o=fh(fh(t,r),dh(du(n,"float32")));return gd(e,i,o)}}}},lg={kernelName:vo,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fh(t,fh(n,mh(lc(1),n)))}}},ug={kernelName:yo,gradFunc:t=>({x:()=>bd(t)})},cg=gl({cos_:function(t){const e=fl(t,"x","cos");return ol.runKernel(As,{x:e})}}),hg={kernelName:go,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fh(cg(du(n,"float32")),t)}}},dg=gl({cosh_:function(t){const e=fl(t,"x","cosh");return ol.runKernel(Rs,{x:e})}}),pg={kernelName:bo,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fh(dg(du(n,"float32")),t)}}},fg={kernelName:mo,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:i}=n,o=r.shape,[a,l]=Yu(r,s,i),u=[];for(let c=0;c<t.rank;c++)u.push([a[c],o[c]-a[c]-l[c]]);return{x:()=>zh(t,u)}}},mg={kernelName:Co,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,i=fh(t,r);return{logits:()=>mh(i,fh(gh(i,[s],!0),r))}}},gg={kernelName:_o,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fh(t,Jh(n))}}},bg=gl({batchToSpaceND_:function(t,e,n){const r=fl(t,"x","batchToSpaceND"),s=e.reduce((t,e)=>t*e);return ir(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),ir(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),ir(r.shape[0]%s==0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`),ol.runKernel(bs,{x:r},{blockShape:e,crops:n})}}),yg={kernelName:ko,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>bg(t,r,s)}}},vg={kernelName:So,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>$c(t,r)}}},_g=[wf,xf,kf,Sf,Cf,If,Ef,Of,Tf,Nf,Af,Rf,Df,$f,Mf,jf,zf,Bf,Vf,Uf,Wf,Hf,qf,Gf,Kf,Xf,Qf,em,nm,rm,Km,sm,im,om,am,lm,cm,um,dm,fm,bm,ym,vm,_m,wm,xm,km,Sm,Cm,Em,Tm,Tm,Am,Fm,Pm,$m,Mm,Lm,jm,zm,Bm,Vm,Um,Wm,Hm,Gm,Gm,qm,Zm,Ym,Xm,Jm,Qm,tg,eg,ng,rg,sg,og,ag,lg,ug,hg,pg,fg,mg,gg,yg,yg,vg,vg,{kernelName:wo,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Yc(t,fh(ad(du(n,"float32")),2))}}},{kernelName:Ao,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=lc(2);return{a:()=>fh(t,fh(s,mh(n,r))),b:()=>fh(t,fh(s,mh(r,n)))}}},{kernelName:Ro,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fh(t,fh(du(n,"float32"),2))}}},{kernelName:Zo,gradFunc:t=>({x:()=>bd(t)})},{kernelName:Mo,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=th(n.shape,r.shape);return{a:()=>{let e=t;const r=Qc(n.shape,s);return r.length>0&&(e=gh(e,r)),Oc(e,n.shape)},b:()=>{let e=t;const n=Qc(r.shape,s);return n.length>0&&(e=gh(e,n)),Oc(Dh(e),r.shape)}}}},{kernelName:xo,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:i}=n;vr(i,r.shape).forEach(t=>{s[t]=1});const o=Oc(t,s),a=fh(o,Lh(r.shape,"float32"));return{x:()=>a}}},{kernelName:Lo,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Yc(t,Rh(cg(n)))}}},{kernelName:jo,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fh(mh(lc(1),Rh(n)),t)}}},{kernelName:zo,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let e=bd(r);if(1===r.rank)for(let n=0;n<s[0];++n)e=hc(e,Qh(t,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<s[0];++n)for(let i=0;i<s[1];++i)e=hc(e,Qh(t,[n*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<s[0];++n)for(let i=0;i<s[1];++i)for(let o=0;o<s[2];++o)e=hc(e,Qh(t,[n*r.shape[0],i*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);for(let n=0;n<s[0];++n)for(let i=0;i<s[1];++i)for(let o=0;o<s[2];++o)for(let a=0;a<s[3];++a)e=hc(e,Qh(t,[n*r.shape[0],i*r.shape[1],o*r.shape[2],a*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return e}}}},{kernelName:Uo,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,i=Nh(s);return{x:()=>yd(t,i)}}},{kernelName:Ho,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>ud(t,s)}}},{kernelName:Go,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>function(t,e){const n=wh(e,bd(e)),r=ah(t,n);let s=uh(e,lc(0,"int32"));const i=r.rank-s.rank;for(let a=0;a<i;++a)s=nh(s,a+1);s=yh(s,Lh(r.shape,"bool"));const o=bd(r);return gd(s,r,o)}(t,n)}}},{kernelName:qo,gradFunc:t=>({x:()=>bd(t)})}];for(const YW of _g)oa(YW);Ba().prototype.abs=function(){return this.throwIfDisposed(),cc(this)};const wg=gl({acos_:function(t){const e=fl(t,"x","acos");return ol.runKernel(Qr,{x:e})}});Ba().prototype.acos=function(){return this.throwIfDisposed(),wg(this)};const xg=gl({acosh_:function(t){const e=fl(t,"x","acosh");return ol.runKernel(ts,{x:e})}});Ba().prototype.acosh=function(){return this.throwIfDisposed(),xg(this)},Ba().prototype.add=function(t){return this.throwIfDisposed(),hc(this,t)},Ba().prototype.all=function(t,e){return this.throwIfDisposed(),dc(this,t,e)},Ba().prototype.any=function(t,e){return this.throwIfDisposed(),pc(this,t,e)},Ba().prototype.argMax=function(t){return this.throwIfDisposed(),fc(this,t)};const kg=gl({argMin_:function(t,e=0){const n=fl(t,"x","argMin");return ol.runKernel(os,{x:n},{axis:e})}});Ba().prototype.argMin=function(t){return this.throwIfDisposed(),kg(this,t)},Ba().prototype.asScalar=function(){return this.throwIfDisposed(),ir(1===this.size,()=>"The array must have only 1 element."),Oc(this,[])},Ba().prototype.asType=function(t){return this.throwIfDisposed(),du(this,t)},Ba().prototype.as1D=function(){return this.throwIfDisposed(),Oc(this,[this.size])},Ba().prototype.as2D=function(t,e){return this.throwIfDisposed(),Oc(this,[t,e])},Ba().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),Oc(this,[t,e,n])},Ba().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),Oc(this,[t,e,n,r])},Ba().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),Oc(this,[t,e,n,r,s])};const Sg=gl({asin_:function(t){const e=fl(t,"x","asin");return ol.runKernel(as,{x:e})}});Ba().prototype.asin=function(){return this.throwIfDisposed(),Sg(this)};const Cg=gl({asinh_:function(t){const e=fl(t,"x","asinh");return ol.runKernel(ls,{x:e})}});Ba().prototype.asinh=function(){return this.throwIfDisposed(),Cg(this)};const Ig=gl({atan_:function(t){const e=fl(t,"x","atan");return ol.runKernel(us,{x:e})}});Ba().prototype.atan=function(){return this.throwIfDisposed(),Ig(this)};const Eg=gl({atan2_:function(t,e){let n=fl(t,"a","atan2"),r=fl(e,"b","atan2");return[n,r]=Xa(n,r),ol.runKernel(hs,{a:n,b:r})}});Ba().prototype.atan2=function(t){return this.throwIfDisposed(),Eg(this,t)};const Og=gl({atanh_:function(t){const e=fl(t,"x","atanh");return ol.runKernel(cs,{x:e})}});Ba().prototype.atanh=function(){return this.throwIfDisposed(),Og(this)},Ba().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),Tc(this,t,e,n,r)},Ba().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),bg(this,t,e)},Ba().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),Ac(this,t,e,n,r,s)},Ba().prototype.broadcastTo=function(t){return this.throwIfDisposed(),md(this,t)},Ba().prototype.cast=function(t){return this.throwIfDisposed(),du(this,t)};const Tg=gl({ceil_:function(t){const e=fl(t,"x","ceil");return ol.runKernel(_s,{x:e})}});Ba().prototype.ceil=function(){return this.throwIfDisposed(),Tg(this)},Ba().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Pc(this,t,e)},Ba().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof za&&(t=[t]),$c([this,...t],e)},Ba().prototype.conv1d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Vc(this,t,e,n,r,s,i)},Ba().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),Wc(this,t,e,n,r,s)},Ba().prototype.conv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Bc(this,t,e,n,r,s,i)},Ba().prototype.cos=function(){return this.throwIfDisposed(),cg(this)},Ba().prototype.cosh=function(){return this.throwIfDisposed(),dg(this)},Ba().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),tm(this,t,e,n)};const Ng=gl({depthToSpace_:function(t,e,n="NHWC"){const r=fl(t,"x","depthToSpace"),s="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return ir(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${e}  for depthToSpace with input shape\n    ${r.shape}`),ir(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${i} and ${e} for depthToSpace with input shape\n        ${r.shape}`),ir(o%(e*e)==0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`),ol.runKernel($s,{x:r},{blockSize:e,dataFormat:n})}});Ba().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),Ng(this,t,e)},Ba().prototype.depthwiseConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Zc(this,t,e,n,r,s,i)};const Ag=gl({dilation2d_:function(t,e,n,r,s=[1,1],i="NHWC"){const o=fl(t,"x","dilation2d"),a=fl(e,"filter","dilation2d");ir(3===o.rank||4===o.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),ir(3===a.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),ir("NHWC"===i,()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,u=!1;3===o.rank&&(l=Oc(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0);const c=ol.runKernel(Bs,{x:l,filter:a},{strides:n,pad:r,dilations:s});return u?Oc(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});Ba().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),Ag(this,t,e,n,r,s)};const Rg=gl({divNoNan_:function(t,e){let n=fl(t,"a","div"),r=fl(e,"b","div");[n,r]=Xa(n,r);const s=Yc(n,r),i=bd(s),o=eh(r,i);return gd(o,i,s)}});Ba().prototype.divNoNan=function(t){return this.throwIfDisposed(),Rg(this,t)},Ba().prototype.div=function(t){return this.throwIfDisposed(),Yc(this,t)};const Fg=gl({dot_:function(t,e){const n=fl(t,"t1","dot"),r=fl(e,"t2","dot");ir(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(ir(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),1===n.rank&&1===r.rank){const t=Oc(n,[1,-1]),e=Oc(r,[-1,1]),s=Md(t,e);return Oc(s,[])}if(1===n.rank&&2===r.rank){const t=Oc(n,[1,-1]),e=Oc(r,[r.shape[0],r.shape[1]]),s=Md(t,e);return Oc(s,[s.size])}if(2===n.rank&&1===r.rank){const t=Oc(r,[-1,1]),e=Md(n,t);return Oc(e,[e.size])}{const t=Oc(r,[r.shape[0],r.shape[1]]);return Md(n,t)}}});Ba().prototype.dot=function(t){return this.throwIfDisposed(),Fg(this,t)},Ba().prototype.elu=function(){return this.throwIfDisposed(),Xc(this)},Ba().prototype.equal=function(t){return this.throwIfDisposed(),eh(this,t)};const Dg=gl({erf_:function(t){let e=fl(t,"x","erf");return ir("int32"===e.dtype||"float32"===e.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===e.dtype&&(e=du(e,"float32")),ol.runKernel(Zs,{x:e})}});Ba().prototype.erf=function(){return this.throwIfDisposed(),Dg(this)},Ba().prototype.exp=function(){return this.throwIfDisposed(),dh(this)},Ba().prototype.expandDims=function(t){return this.throwIfDisposed(),nh(this,t)};const Pg=gl({expm1_:function(t){const e=fl(t,"x","expm1");return ol.runKernel(Js,{x:e})}});Ba().prototype.expm1=function(){return this.throwIfDisposed(),Pg(this)},Ba().prototype.fft=function(){return this.throwIfDisposed(),xd(this)},Ba().prototype.flatten=function(){return this.throwIfDisposed(),Oc(this,[this.size])},Ba().prototype.floor=function(){return this.throwIfDisposed(),oh(this)},Ba().prototype.floorDiv=function(t){return this.throwIfDisposed(),Kc(this,t)},Ba().prototype.gather=function(t,e){return this.throwIfDisposed(),ah(this,t,e)},Ba().prototype.greaterEqual=function(t){return this.throwIfDisposed(),uh(this,t)},Ba().prototype.greater=function(t){return this.throwIfDisposed(),lh(this,t)},Ba().prototype.ifft=function(){return this.throwIfDisposed(),Sd(this)},Ba().prototype.irfft=function(){return this.throwIfDisposed(),Cd(this)};const $g=gl({isFinite_:function(t){const e=fl(t,"x","isFinite");return ol.runKernel(di,{x:e})}});Ba().prototype.isFinite=function(){return this.throwIfDisposed(),$g(this)};const Mg=gl({isInf_:function(t){const e=fl(t,"x","isInf");return ol.runKernel(pi,{x:e})}});Ba().prototype.isInf=function(){return this.throwIfDisposed(),Mg(this)};const Lg=gl({isNaN_:function(t){const e=fl(t,"x","isNaN");return ol.runKernel(fi,{x:e})}});Ba().prototype.isNaN=function(){return this.throwIfDisposed(),Lg(this)},Ba().prototype.leakyRelu=function(t){return this.throwIfDisposed(),ch(this,t)},Ba().prototype.lessEqual=function(t){return this.throwIfDisposed(),ep(this,t)},Ba().prototype.less=function(t){return this.throwIfDisposed(),Nm(this,t)};const jg=gl({localResponseNormalization_:function(t,e=5,n=1,r=1,s=.5){const i=fl(t,"x","localResponseNormalization");ir(4===i.rank||3===i.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${i.rank}.`),ir(dr(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,a=!1;3===i.rank&&(a=!0,o=Oc(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l=ol.runKernel(Si,{x:o},{depthRadius:e,bias:n,alpha:r,beta:s});return a?Oc(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});Ba().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),jg(this,t,e,n,r)};const zg=gl({logSigmoid_:function(t){const e=fl(t,"x","logSigmoid");return ac(t=>({value:Dh(id(Dh(t))),gradFunc:e=>fh(e,Jh(Dh(t)))}))(e)}});Ba().prototype.logSigmoid=function(){return this.throwIfDisposed(),zg(this)},Ba().prototype.logSoftmax=function(t){return this.throwIfDisposed(),bh(this,t)},Ba().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),mp(this,t,e)},Ba().prototype.log=function(){return this.throwIfDisposed(),hh(this)},Ba().prototype.log1p=function(){return this.throwIfDisposed(),fp(this)},Ba().prototype.logicalAnd=function(t){return this.throwIfDisposed(),yh(this,t)},Ba().prototype.logicalNot=function(){return this.throwIfDisposed(),ig(this)};const Bg=gl({logicalOr_:function(t,e){const n=fl(t,"a","logicalOr","bool"),r=fl(e,"b","logicalOr","bool");return th(n.shape,r.shape),ol.runKernel(ki,{a:n,b:r})}});Ba().prototype.logicalOr=function(t){return this.throwIfDisposed(),Bg(this,t)};const Vg=gl({logicalXor_:function(t,e){const n=fl(t,"a","logicalXor","bool"),r=fl(e,"b","logicalXor","bool");return th(n.shape,r.shape),yh(Bg(t,e),ig(yh(t,e)))}});Ba().prototype.logicalXor=function(t){return this.throwIfDisposed(),Vg(this,t)},Ba().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),Md(this,t,e,n)},Ba().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),vh(this,t,e,n,r)},Ba().prototype.max=function(t,e){return this.throwIfDisposed(),ph(this,t,e)},Ba().prototype.maximum=function(t){return this.throwIfDisposed(),wh(this,t)},Ba().prototype.mean=function(t,e){return this.throwIfDisposed(),xh(this,t,e)},Ba().prototype.min=function(t,e){return this.throwIfDisposed(),ip(this,t,e)},Ba().prototype.minimum=function(t){return this.throwIfDisposed(),kh(this,t)};const Ug=gl({mirrorPad_:function(t,e,n){ir("reflect"===n||"symmetric"===n,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=fl(t,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");ir(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s="reflect"===n?1:0;for(let i=0;i<r.rank;i++)ir(2===e[i].length,()=>"Invalid number of paddings. Must be length of 2 each."),ir(e[i][0]>=0&&e[i][0]<=r.shape[i]-s&&e[i][1]>=0&&e[i][1]<=r.shape[i]-s,()=>`Padding in dimension ${i} cannot be greater than or equal to ${r.shape[i]-s} or less than 0 for input of shape ${r.shape}`);return ol.runKernel($i,{x:r},{paddings:e,mode:n})}});Ba().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),Ug(this,t,e)};const Wg=gl({mod_:function(t,e){let n=fl(t,"a","mod"),r=fl(e,"b","mod");return[n,r]=Xa(n,r),ol.runKernel(Mi,{a:n,b:r})}});Ba().prototype.mod=function(t){return this.throwIfDisposed(),Wg(this,t)},Ba().prototype.mul=function(t){return this.throwIfDisposed(),fh(this,t)},Ba().prototype.neg=function(){return this.throwIfDisposed(),Dh(this)},Ba().prototype.norm=function(t,e,n){return this.throwIfDisposed(),ap(this,t,e,n)},Ba().prototype.notEqual=function(t){return this.throwIfDisposed(),Ph(this,t)},Ba().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),$h(this,t,e,n)},Ba().prototype.onesLike=function(){return this.throwIfDisposed(),jh(this)},Ba().prototype.pad=function(t,e){return this.throwIfDisposed(),zh(this,t,e)};const Hg=gl({pool_:function(t,e,n,r,s,i){null==s&&(s=[1,1]),null==i&&(i=1),0===r&&(r="valid");const o=fl(t,"x","maxPool");let a=o,l=!1;3===o.rank&&(l=!0,a=Oc(o,[1,o.shape[0],o.shape[1],o.shape[2]])),ir(Ic(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const u=gc(a.shape,e,i,s,r),c=[u.dilationHeight,u.dilationWidth];let h;h="same"===r?function(t,e){const n=t.map((t,n)=>t+(t-1)*(e[n]-1)).map(t=>t-1),r=n.map(t=>Math.floor(t/2)),s=n.map((t,e)=>t-r[e]);return n.map((t,e)=>[r[e],s[e]])}([u.filterHeight,u.filterWidth],c):[[0,0],[0,0]];const d=1===c[0]&&1===c[1],[p,f]=function(t,e,n){const r=n.map(t=>t[0]),s=n.map(t=>t[1]),i=t.concat(r,s),o=e.map((t,e)=>(t-i[e]%t)%t),a=s.map((t,e)=>t+o[e]);return[e.map((t,e)=>[r[e],a[e]]),e.map((t,e)=>[0,o[e]])]}([u.inHeight,u.inWidth],c,h),m=d?r:"valid",g=d?a:Lf(a,c,p),b=("avg"===n?()=>Tc(g,e,i,m):()=>vh(g,e,i,m))(),y=d?b:bg(b,c,f);return l?Oc(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});Ba().prototype.pool=function(t,e,n,r,s){return this.throwIfDisposed(),Hg(this,t,e,n,r,s)},Ba().prototype.pow=function(t){return this.throwIfDisposed(),Bh(this,t)},Ba().prototype.prelu=function(t){return this.throwIfDisposed(),Vh(this,t)};const Gg=gl({prod_:function(t,e=null,n=!1){let r=fl(t,"x","prod");return"bool"===r.dtype&&(r=du(r,"int32")),ol.runKernel(Xi,{x:r},{axis:e,keepDims:n})}});Ba().prototype.prod=function(t,e){return this.throwIfDisposed(),Gg(this,t,e)};const qg=gl({reciprocal_:function(t){const e=fl(t,"x","reciprocal");return ol.runKernel(to,{x:e})}});Ba().prototype.reciprocal=function(){return this.throwIfDisposed(),qg(this)},Ba().prototype.relu=function(){return this.throwIfDisposed(),Zh(this)},Ba().prototype.relu6=function(){return this.throwIfDisposed(),Ed(this)},Ba().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Oc(this,t.shape)},Ba().prototype.reshape=function(t){return this.throwIfDisposed(),Oc(this,t)},Ba().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),Jd(this,t,e,n)},Ba().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),Qd(this,t,e,n)},Ba().prototype.reverse=function(t){return this.throwIfDisposed(),Kh(this,t)},Ba().prototype.rfft=function(){return this.throwIfDisposed(),kd(this)},Ba().prototype.round=function(){return this.throwIfDisposed(),np(this)},Ba().prototype.rsqrt=function(){return this.throwIfDisposed(),hm(this)},Ba().prototype.selu=function(){return this.throwIfDisposed(),Yh(this)},Ba().prototype.separableConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Xh(this,t,e,n,r,s,i)},Ba().prototype.sigmoid=function(){return this.throwIfDisposed(),Jh(this)};const Zg=gl({sign_:function(t){const e=fl(t,"x","sign");return ol.runKernel(yo,{x:e})}});Ba().prototype.sign=function(){return this.throwIfDisposed(),Zg(this)},Ba().prototype.sin=function(){return this.throwIfDisposed(),Yf(this)},Ba().prototype.sinh=function(){return this.throwIfDisposed(),Jf(this)},Ba().prototype.slice=function(t,e){return this.throwIfDisposed(),Qh(this,t,e)},Ba().prototype.softmax=function(t){return this.throwIfDisposed(),sd(this,t)},Ba().prototype.softplus=function(){return this.throwIfDisposed(),id(this)},Ba().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Lf(this,t,e)},Ba().prototype.split=function(t,e){return this.throwIfDisposed(),od(this,t,e)},Ba().prototype.sqrt=function(){return this.throwIfDisposed(),ad(this)},Ba().prototype.square=function(){return this.throwIfDisposed(),Rh(this)},Ba().prototype.squaredDifference=function(t){return this.throwIfDisposed(),pp(this,t)},Ba().prototype.squeeze=function(t){return this.throwIfDisposed(),ld(this,t)},Ba().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof za?[this,t]:[this,...t];return ud(n,e)},Ba().prototype.step=function(t){return this.throwIfDisposed(),Od(this,t)};const Kg=gl({stridedSlice_:function(t,e,n,r,s=0,i=0,o=0,a=0,l=0){const u=fl(t,"x","stridedSlice","string_or_numeric");return ol.runKernel(Fo,{x:u},{begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l})}});Ba().prototype.stridedSlice=function(t,e,n,r,s,i,o,a){return this.throwIfDisposed(),Kg(this,t,e,n,r,s,i,o,a)},Ba().prototype.sub=function(t){return this.throwIfDisposed(),mh(this,t)},Ba().prototype.sum=function(t,e){return this.throwIfDisposed(),gh(this,t,e)};const Yg=gl({tan_:function(t){const e=fl(t,"x","tan");return ol.runKernel(Lo,{x:e})}});Ba().prototype.tan=function(){return this.throwIfDisposed(),Yg(this)},Ba().prototype.tanh=function(){return this.throwIfDisposed(),cd(this)},Ba().prototype.tile=function(t){return this.throwIfDisposed(),rh(this,t)},Ba().prototype.toBool=function(){return this.throwIfDisposed(),du(this,"bool")},Ba().prototype.toFloat=function(){return this.throwIfDisposed(),du(this,"float32")},Ba().prototype.toInt=function(){return this.throwIfDisposed(),du(this,"int32")};const Xg=gl({topk_:function(t,e=1,n=!0){const r=fl(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[a,l]=ol.runKernel(Bo,i,o);return{values:a,indices:l}}});Ba().prototype.topk=function(t,e){return this.throwIfDisposed(),Xg(this,t,e)},Ba().prototype.transpose=function(t){return this.throwIfDisposed(),yd(this,t)};const Jg=gl({unique_:function(t,e=0){const n=fl(t,"x","unique","string_or_numeric");ir(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,o]=ol.runKernel(Wo,r,s);return{values:i,indices:o}}});let Qg;function tb(){return null==Qg&&(Qg=ol.backend.epsilon()),Qg}Ba().prototype.unique=function(t){return this.throwIfDisposed(),Jg(this,t)},Ba().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),pm(this,t,e)},Ba().prototype.unstack=function(t){return this.throwIfDisposed(),fd(this,t)},Ba().prototype.where=function(t,e){return this.throwIfDisposed(),gd(t,this,e)},Ba().prototype.zerosLike=function(){return this.throwIfDisposed(),bd(this)};class eb extends Error{constructor(t){super(t),Object.setPrototypeOf(this,eb.prototype)}}class nb extends Error{constructor(t){super(t),Object.setPrototypeOf(this,nb.prototype)}}class rb extends Error{constructor(t){super(t),Object.setPrototypeOf(this,rb.prototype)}}class sb extends Error{constructor(t){super(t),Object.setPrototypeOf(this,sb.prototype)}}class ib extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ib.prototype)}}function ob(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}{const n=new Array(e);return n.fill(t),n}}function ab(t,e){if(!t)throw new ib(e)}function lb(t,e){let n=0;for(const r of t)r===e&&n++;return n}function ub(t){return 1===t.length?t[0]:t}function cb(t){return Array.isArray(t)?t:[t]}function hb(t){const e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==e[0]?e:"private"+e}function db(t){return t.length<=1||-1===t.indexOf("_")?t:t.replace(/[_]+(\w|$)/g,(t,e)=>e.toUpperCase())}Error;let pb={};function fb(t){if(null==t)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function mb(t){if(null!=t&&"object"==typeof t)if(Array.isArray(t))t.forEach(t=>mb(t));else{const e=Object.keys(t);for(const n of e){const e=t[n];null!=e&&"object"==typeof e&&(Array.isArray(e)||"ndarray"!==e.type||"number"!=typeof e.value?mb(e):t[n]=e.value)}}}function gb(t,e={},n={},r="object",s=!1){if("string"==typeof t){const s=t;let i;if(s in n)i=n[s];else if(s in pb)i=pb[s];else if(i=e[s],null==i)throw new rb(`Unknown ${r}: ${t}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}{const i=t;if(null==i.className||null==i.config)throw new rb(`${r}: Improper config format: ${JSON.stringify(i)}.\n'className' and 'config' must set.`);const o=i.className;let a,l;if(o in n?[a,l]=n[o]:o in pb?[a,l]=pb.className:o in e&&([a,l]=e[o]),null==a)throw new rb(`Unknown ${r}: ${o}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){const t={};for(const n of Object.keys(pb))t[n]=pb[n];for(const s of Object.keys(n))t[s]=n[s];i.config.customObjects=t;const e=Object.assign({},pb);for(const s of Object.keys(n))pb[s]=n[s];mb(i.config);const r=l(a,i.config,n,s);return pb=Object.assign({},e),r}{const t=Object.assign({},pb);for(const r of Object.keys(n))pb[r]=n[r];const e=new a(i.config);return pb=Object.assign({},t),e}}}function bb(t,e){return-1*function(t,e){return t<e?-1:t>e?1:0}(t,e)}function yb(t){if(null==t)return t;const e=[];for(const n of t)-1===e.indexOf(n)&&e.push(n);return e}function vb(t){if(null==t)throw new rb(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function _b(t,e,n){if(null!=n&&t.indexOf(n)<0)throw new rb(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function wb(t,e,n=0,r=1/0){return ab(n>=0),ab(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(t=>typeof t===e)}function xb(t,e){Array.isArray(t)?(r.assert(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((t,n)=>xb(t,`element ${n+1} of ${e}`))):r.assert(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${kb(t)}.`)}function kb(t){return null===t?"null":Array.isArray(t)?"["+t.map(t=>kb(t)).join(",")+"]":"string"==typeof t?`"${t}"`:`${t}`}function Sb(t){return"relu"===t?"relu":"linear"===t?"linear":"elu"===t?"elu":null}function Cb(t,e){return rc(()=>ad(gh(fh(t,t),e,!0)))}class Ib extends u.Serializable{getConfig(){return{}}}class Eb extends Ib{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return rc(()=>{const e=Cb(t,this.axis),n=Pc(e,0,this.maxValue);return fh(t,Yc(n,hc(tb(),e)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Eb.className="MaxNorm",u.registerClass(Eb);class Ob extends Ib{constructor(t){super(),this.defaultAxis=0,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return rc(()=>Yc(t,hc(tb(),Cb(t,this.axis))))}getConfig(){return{axis:this.axis}}}Ob.className="UnitNorm",u.registerClass(Ob);class Tb extends Ib{apply(t){return Zh(t)}}Tb.className="NonNeg",u.registerClass(Tb);class Nb extends Ib{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=t.minValue?t.minValue:this.defaultMinValue,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.rate=null!=t.rate?t.rate:this.defaultRate,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return rc(()=>{const e=Cb(t,this.axis),n=hc(fh(this.rate,Pc(e,this.minValue,this.maxValue)),fh(1-this.rate,e));return fh(t,Yc(n,hc(tb(),e)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Nb.className="MinMaxNorm",u.registerClass(Nb);const Ab={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Rb(t){return fb(t)}function Fb(t,e={}){return gb(t,u.SerializationMap.getMap().classNameMap,e,"constraint")}function Db(t){return null==t?null:"string"==typeof t?Fb({className:t in Ab?Ab[t]:t,config:{}}):t instanceof Ib?t:Fb(t)}const Pb=["channelsFirst","channelsLast"],$b=["nearest","bilinear"],Mb=["valid","same","causal"],Lb=["max","avg"],jb=["sum","mul","concat","ave"],zb=new Map;function Bb(t){_b(Pb,"DataFormat",t)}function Vb(t){_b(Mb,"PaddingMode",t)}function Ub(t){_b(Lb,"PoolMode",t)}const Wb=[];function Hb(t,e){Wb.push(t);try{const t=e();return Wb.pop(),t}catch(n){throw Wb.pop(),n}}function Gb(t){if(!Kb(t))throw new Error("Not a valid tensor name: '"+t+"'");return(0===Wb.length?"":Wb.join("/")+"/")+t}function qb(t){if(!Kb(t))throw new Error("Not a valid tensor name: '"+t+"'");zb.has(t)||zb.set(t,0);const e=zb.get(t);if(zb.set(t,zb.get(t)+1),e>0){const n=`${t}_${e}`;return zb.set(n,1),n}return t}const Zb=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Kb(t){return!!t.match(Zb)}function Yb(t,e,n){null==e&&(e=0),null==n&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function Xb(t){if(0===t.length)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Jb(t){if(0===t.length)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Qb(t,e){if(e<t)throw new rb(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}function ty(t,e){return t.asType(e)}function ey(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),t.reshape(n)}function ny(t,e,n){return rc(()=>{switch(t.rank){case 1:return td(t,e,n);case 2:return ed(t,[e,0],[n,t.shape[1]]);case 3:return nd(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return rd(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Qh(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Qh(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new rb(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function ry(t,e,n){return rc(()=>{switch(t.rank){case 1:return td(t,e,n);case 2:return ed(t,[0,e],[t.shape[0],n]);case 3:return nd(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return rd(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new rb(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function sy(t,e,n,r){return rc(()=>{switch(t.rank){case 1:return td(t,e,n);case 2:switch(r){case 1:return ny(t,e,n);case 2:return ry(t,e,n);default:throw new rb(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return ny(t,e,n);case 2:return nd(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return ry(t,e,n);default:throw new rb(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return ny(t,e,n);case 2:return rd(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return rd(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return ry(t,e,n);default:throw new rb(`The axis is not within the rank of the tensor ${r}`)}default:throw new rb(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function iy(t,e=-1){let n;return e<0&&(n=t[0].rank,e=0!==n?n:0),e===t[0].rank&&(e=-1),$c(t,e)}function oy(t,e){switch(t.rank){case 1:return Mc([t,e]);case 2:return Lc([t,e],0);case 3:return jc([t,e],0);case 4:return zc([t,e],0);default:throw new rb(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function ay(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new rb(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return rh(t,e)}function ly(t,e=0,n=1,r,s){return Gh(t,e,n,r,s)}function uy(t,e,n,r){if(t.rank<2||e.rank<2)throw new sb(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3&&t.shape.slice(-1)[0]!==e.shape.slice(-2)[0])throw new sb(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`);if(2===t.rank&&2===e.rank)return c.matMul({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?dy(t.rank,r,"channelsLast"):null,activation:n});{const s=t.shape.slice(),i=s.pop();t=t.reshape([-1,i]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),u=[...o,a],h=Array.from({length:e.rank},(t,n)=>0===n?e.rank-2:n<=e.rank-2?n-1:n);e=e.transpose(h).reshape([l,-1]);const d=[...s,...u];return c.matMul({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?dy(t.rank,r,"channelsLast"):null,activation:n}).reshape(d)}}function cy(t,e,n){return rc(()=>(e=Array.isArray(e)?hd(e,"int32"):e.toInt(),ah(t,e,n)))}function hy(t){return fh(t,t)}function dy(t,e,n){const r=e.shape;if(1!==e.rank&&e.rank!==t)throw new rb(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(5===t){if("channelsFirst"===n)return e.reshape(1===r.length?[1,r[0],1,1,1]:[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return e.reshape(1===r.length?[1,1,1,1,r[0]]:[1].concat(r))}else if(4===t){if("channelsFirst"===n)return e.reshape(1===r.length?[1,r[0],1,1]:[1,r[2],r[0],r[1]]);if("channelsLast"===n)return e.reshape(1===r.length?[1,1,1,r[0]]:[1].concat(r))}else if(3===t){if("channelsFirst"===n)return e.reshape(1===r.length?[1,r[0],1]:[1,r[1],r[0]]);if("channelsLast"===n)return e.reshape(1===r.length?[1,1,r[0]]:[1].concat(r))}else if(t<3)return e;throw new rb(`Unsupported input rank by biasAdd: ${e.rank}`)}function py(t,e,n){return rc(()=>(null==n&&(n="channelsLast"),Bb(n),t.add(dy(t.rank,e,n))))}function fy(t,e,n,r){return rc(()=>vd(t,e,n,r))}function my(t,e,n=!1){return n?t():e()}const gy=["fanIn","fanOut","fanAvg"],by=["normal","uniform","truncatedNormal"];class yy extends u.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class vy extends yy{apply(t,e){return Mh(t,e)}}vy.className="Zeros",u.registerClass(vy);class _y extends yy{apply(t,e){return Lh(t,e)}}_y.className="Ones",u.registerClass(_y);class wy extends yy{constructor(t){if(super(),"object"!=typeof t)throw new rb(`Expected argument of type ConstantConfig but got ${t}`);if(void 0===t.value)throw new rb(`config must have value set but got ${t}`);this.value=t.value}apply(t,e){return rc(()=>fh(lc(this.value),Lh(t,e)))}getConfig(){return{value:this.value}}}wy.className="Constant",u.registerClass(wy);class xy extends yy{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,e){return qh(t,this.minval,this.maxval,e)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}xy.className="RandomUniform",u.registerClass(xy);class ky extends yy{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if("float32"!==(e=e||"float32")&&"int32"!==e)throw new sb(`randomNormal does not support dType ${e}.`);return ly(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}ky.className="RandomNormal",u.registerClass(ky);class Sy extends yy{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if("float32"!==(e=e||"float32")&&"int32"!==e)throw new sb(`truncatedNormal does not support dType ${e}.`);return pd(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Sy.className="TruncatedNormal",u.registerClass(Sy);class Cy extends yy{constructor(t){super(),this.gain=null!=t.gain?t.gain:1}apply(t,e){return rc(()=>{if(2!==t.length||t[0]!==t[1])throw new rb("Identity matrix initializer can only be used for 2D square matrices.");return fh(this.gain,sh(t[0]))})}getConfig(){return{gain:this.gain}}}Cy.className="Identity",u.registerClass(Cy);class Iy extends yy{constructor(t){if(super(),t.scale<0)throw new rb(`scale must be a positive float. Got: ${t.scale}`);this.scale=null==t.scale?1:t.scale,this.mode=null==t.mode?"fanIn":t.mode,_b(gy,"FanMode",this.mode),this.distribution=null==t.distribution?"normal":t.distribution,_b(by,"Distribution",this.distribution),this.seed=t.seed}apply(t,e){const n=function(t,e="channelsLast"){let n,r;if(Bb(e),2===t.length)n=t[0],r=t[1];else if(-1!==[3,4,5].indexOf(t.length)){if("channelsFirst"===e){const e=Yb(t,2);n=t[1]*e,r=t[0]*e}else if("channelsLast"===e){const e=Yb(t,0,t.length-2);n=t[t.length-2]*e,r=t[t.length-1]*e}}else{const e=Yb(t);n=Math.sqrt(e),r=Math.sqrt(e)}return[n,r]}(t),r=n[0],s=n[1];let i=this.scale;if(i/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,s):Math.max(1,(r+s)/2),"normal"===this.distribution){const n=Math.sqrt(i);if("float32"!==(e=e||"float32")&&"int32"!==e)throw new sb(`${this.getClassName()} does not support dType ${e}.`);return pd(t,0,n,e,this.seed)}{const n=Math.sqrt(3*i);return qh(t,-n,n,e)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Iy.className="VarianceScaling",u.registerClass(Iy);class Ey extends Iy{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return Iy.className}}Ey.className="GlorotUniform",u.registerClass(Ey);class Oy extends Iy{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return Iy.className}}Oy.className="GlorotNormal",u.registerClass(Oy);class Ty extends Iy{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return Iy.className}}Ty.className="HeNormal",u.registerClass(Ty);class Ny extends Iy{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return Iy.className}}Ny.className="HeUniform",u.registerClass(Ny);class Ay extends Iy{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return Iy.className}}Ay.className="LeCunNormal",u.registerClass(Ay);class Ry extends Iy{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return Iy.className}}Ry.className="LeCunNormal",u.registerClass(Ry);class Fy extends yy{constructor(t){if(super(),this.DEFAULT_GAIN=1,this.gain=null==t.gain?this.DEFAULT_GAIN:t.gain,this.seed=t.seed,null!=this.seed)throw new sb("Random seed is not implemented for Orthogonal Initializer yet.")}apply(t,e){return rc(()=>{if(t.length<2)throw new sb("Shape must be at least 2D.");t[0]*t[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${t[0]*t[1]}) elements: Slowness may result.`);const e=ly(t[0]>t[1]?[t[1],t[0]]:t,0,1,"float32");let n=gp.gramSchmidt(e);return t[0]>t[1]&&(n=n.transpose()),fh(this.gain,n)})}getConfig(){return{gain:this.gain,seed:this.seed}}}Fy.className="Orthogonal",u.registerClass(Fy);const Dy={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Py(t,e={}){return gb(t,u.SerializationMap.getMap().classNameMap,e,"initializer")}function $y(t){return fb(t)}function My(t){if("string"==typeof t){const e=t in Dy?Dy[t]:t;if("GlorotNormal"===e)return new Oy;if("GlorotUniform"===e)return new Ey;if("HeNormal"===e)return new Ty;if("HeUniform"===e)return new Ny;if("LeCunNormal"===e)return new Ay;if("LeCunUniform"===e)return new Ry;{const t={};return t.className=e,t.config={},Py(t)}}return t instanceof yy?t:Py(t)}let Ly=0;function jy(){return Ly++}const zy={};function By(t=""){return t in zy||(zy[t]=0),zy[t]+=1,t+zy[t].toString()}function Vy(t){return Array.isArray(t)&&Array.isArray(t[0])}function Uy(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function Wy(t){let e;if(Array.isArray(t)){if(1!==t.length)throw new rb(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Hy(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return(t=t)[0];throw new rb(`Expected exactly 1 Shape; got ${t.length}`)}return t}function Gy(t){let e=0;for(const n of t)e+=0===n.shape.length?1:n.shape.reduce((t,e)=>t*e);return e}class qy{constructor(t,e="float32",n="Variable",r=!0,s=null){this.dtype=null==e?"float32":e,this.shape=t.shape,this.id=jy(),this.originalName=Gb(n=null==n?"Variable":n),this.name=qb(this.originalName),this.trainable_=r,this.constraint=s,this.val=function(t,e=!0,n,r){return ol.makeVariable(t,e,n,r)}(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),function(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}(this.val,t),this.val.id!==t.id&&(this.val.assign(t),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function Zy(t){return t.map(t=>t.read())}function Ky(t){t.forEach(t=>{t[0].write(t[1])})}class Yy{constructor(t){this.dtype=t.dtype,this.shape=t.shape,this.ndim=null!=t.shape?t.shape.length:t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class Xy{constructor(t,e,n,r,s,i,o){this.dtype=t,this.shape=e,this.sourceLayer=n,this.inputs=r,this.callArgs=s,this.outputTensorIndex=o,this.id=jy(),null!=i&&(this.originalName=Gb(i),this.name=qb(this.originalName)),this.rank=e.length}}let Jy=0;class Qy{constructor(t,e){this.callArgs=e,this.id=Jy++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const n of t.inboundLayers)null!=n&&n.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const e of this.inboundLayers)t.push(null!=e?e.name:null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let tv=0;class ev extends u.Serializable{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=tv++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=t.name;if(!e){const t=this.getClassName();e=hb(t)+"_"+By(t)}if(this.name=e,this.trainable_=null==t.trainable||t.trainable,null!=t.inputShape||null!=t.batchInputShape){let e;if(null!=t.batchInputShape)e=t.batchInputShape;else if(null!=t.inputShape){let n=null;null!=t.batchSize&&(n=t.batchSize),e=[n].concat(t.inputShape)}this.batchInputShape=e;let n=t.dtype;null==n&&(n=t.inputDType),null==n&&(n="float32"),this.dtype=n}this.initialWeights=null!=t.weights?t.weights:null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,e){return t.name+"_ib-"+e.toString()}getNodeAtIndex(t,e){if(0===this.inboundNodes.length)throw new nb(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=t)throw new rb(`Asked to get ${e} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return ub(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return ub(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new eb(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new eb(`Layer ${this.name} is not connected, no input to return.`);return ub(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new eb(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new eb(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return ub(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(e=>e.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=cb(t),null==this.inputSpec||0===this.inputSpec.length)return;const e=cb(this.inputSpec);if(t.length!==e.length)throw new rb(`Layer ${this.name} expects ${e.length} inputs, but it received ${t.length} input tensors. Input received: ${t}`);for(let n=0;n<t.length;n++){const r=t[n],s=e[n];if(null==s)continue;const i=r.rank;if(null!=s.ndim&&i!==s.ndim)throw new rb(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${i}`);if(null!=s.maxNDim&&i>s.maxNDim)throw new rb(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${i}`);if(null!=s.minNDim&&i<s.minNDim)throw new rb(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${i}.`);if(null!=s.dtype&&r.dtype!==s.dtype)throw new rb(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${r.dtype}.`);if(s.axes){const t=r.shape;for(const e in s.axes){const r=Number(e),i=s.axes[e],o=r>=0?t[r]:t[t.length+r];if(null!=i&&-1===[i,null].indexOf(o))throw new rb(`Input ${n} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${i} but got shape ${t}.`)}}if(null!=s.shape)for(let t=0;t<s.shape.length;++t){const e=s.shape[t],i=r.shape[t];if(null!=e&&null!=i&&e!==i)throw new rb(`Input ${n} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${r.shape}.`)}}}call(t,e){return t}invokeCallHook(t,e){null!=this._callHook&&this._callHook(t,e)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,e){e=e||{},this.assertNotDisposed();const n=cb(t);let r=!0;for(const i of n)if(!(i instanceof Xy)){r=!1;break}let s=!0;for(const i of n)if(i instanceof Xy){s=!1;break}if(r===s)throw new rb("Arguments to apply() must be all SymbolicTensors or all Tensors");return Hb(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const e=[];for(const n of cb(t))e.push(n.shape);this.build(ub(e)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&s&&(this._refCount=1)}if(this.assertInputCompatibility(t),s){let r=this.call(t,e);const s=cb(r),i=[];for(let t of s)-1!==n.indexOf(t)&&(t=t.clone()),i.push(t);if(r=ub(i),null!=this.activityRegularizer)throw new sb("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(t){t=cb(t);const e=[];for(const n of t)e.push(n.shape);return ub(e)}(t),r=this.computeOutputShape(n);let s;const i="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(t)?n[0]:n),s=null!=r&&r.length>0&&Array.isArray(r[0])?r.map((n,r)=>new Xy(i,n,this,cb(t),e,this.name,r)):new Xy(i,r,this,cb(t),e,this.name),this.addInboundNode(t,s,null,null,n,r,e),this._refCount++,null!=this.activityRegularizer)throw new sb("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}})}warnOnIncompatibleInputShape(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(t)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=t[r]&&t[r]!==n&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new eb(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const e of this.inboundNodes){const n=JSON.stringify(e.outputShapes);-1===t.indexOf(n)&&t.push(n)}if(1===t.length){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&1===t.length?t[0]:t}throw new eb(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new nb(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Gy(this.weights)}build(t){this.built=!0}getWeights(t=!1){return Zy(t?this.trainableWeights:this.weights)}setWeights(t){rc(()=>{const e=this.weights;if(e.length!==t.length)throw new rb(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${e.length} weights. Provided weights: ${t}...`);if(0===e.length)return;const n=[],s=Zy(e);for(let i=0;i<s.length;++i){const o=s[i],a=e[i],l=t[i];if(!r.arraysEqual(o.shape,l.shape))throw new rb(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);n.push([a,l])}Ky(n)})}addWeight(t,e,n,r,s,i,o){if(-1!==this._addedWeightNames.indexOf(t))throw new rb(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=My("zeros"));const a=r.apply(e,n),l=new qy(a,n,t,i,o);return a.dispose(),null!=s&&this.addLoss(()=>s.apply(l.read())),null==i&&(i=!0),i?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){null==t||Array.isArray(t)&&0===t.length||(t=cb(t),null!=this._losses&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,e){if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);e.forEach(t=>{if(null!=t)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)})}return null}return e}addInboundNode(t,e,n,r,s,i,o=null){const a=cb(t);e=cb(e),n=cb(n),r=cb(r),s=Uy(s),i=Uy(i);const l=[],u=[],c=[];for(const h of a)l.push(h.sourceLayer),u.push(h.nodeIndex),c.push(h.tensorIndex);new Qy({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:c,inputTensors:a,outputTensors:e,inputMasks:n,outputMasks:r,inputShapes:s,outputShapes:i},o);for(let h=0;h<e.length;h++)e[h].sourceLayer=this,e[h].nodeIndex=this.inboundNodes.length-1,e[h].tensorIndex=h}getConfig(){const t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t.batchInputShape=this.batchInputShape),null!=this.dtype&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return 0==--this._refCount&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function nv(t,e,n){if((null==e||null!=n&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),0===e.inboundNodes.length)return[t];{const t=e.inboundNodes[n];if(0===t.inboundLayers.length)return t.inputTensors;{const e=[];for(let n=0;n<t.inboundLayers.length;n++){const r=nv(t.inputTensors[n],t.inboundLayers[n],t.nodeIndices[n]);for(const t of r)-1===e.indexOf(t)&&e.push(t)}return e}}}class rv extends ev{constructor(t){if(super({dtype:t.dtype,name:null!=t.name?t.name:By("input").toString()}),null==t.batchSize&&(t.batchSize=null),null==t.sparse&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,null!=t.inputShape&&null!=t.batchInputShape)throw new rb("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let e=t.batchInputShape;if(null==e){if(null==t.inputShape)throw new rb("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");e=[t.batchSize].concat(t.inputShape)}else if(null!=t.batchSize)throw new rb("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=t.dtype||"float32";this.batchInputShape=e,this.dtype=n,this.inputSpec=[{shape:e}];const r=new Xy(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new Qy({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[e],outputShapes:[e]})}apply(t,e){throw new rb(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}async function sv(t){if(null==t)return;const e=[],n=[],r=[];for(const s in t){const i=t[s];if("number"!=typeof i){const t=i;e.push(t.data()),n.push(s),r.push(t)}}if(e.length>0){const s=await Promise.all(e);for(let e=0;e<s.length;++e)t[n[e]]=s[e][0];sc(r)}}function iv(t){if(null!=t)for(const e in t){const n=t[e];"number"!=typeof n&&n.dispose()}}var ov;rv.className="InputLayer",u.registerClass(rv),function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"}(ov||(ov={}));class av{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,e){}async onEpochEnd(t,e){}async onBatchBegin(t,e){}async onBatchEnd(t,e){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class lv{constructor(t,e=10){null==t&&(t=[]),this.callbacks=t,this.queueLength=e}append(t){this.callbacks.push(t)}setParams(t){for(const e of this.callbacks)e.setParams(t)}setModel(t){for(const e of this.callbacks)e.setModel(t)}async onEpochBegin(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onEpochBegin(t,e)}async onEpochEnd(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onEpochEnd(t,e)}async onBatchBegin(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onBatchBegin(t,e)}async onBatchEnd(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onBatchEnd(t,e)}async onTrainBegin(t){null==t&&(t={});for(const e of this.callbacks)await e.onTrainBegin(t)}async onTrainEnd(t){null==t&&(t={});for(const e of this.callbacks)await e.onTrainEnd(t)}}class uv extends av{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,e){null==e&&(e={});const n=null==e.size?0:e.size;this.seen+=n;for(const r in e){const t=e[r];if("number"==typeof t)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+t*n;else{let e;r in this.totals?e=this.totals[r]:this.totals[r]=0;const s=rc(()=>hc(this.totals[r],fh(t,n)));this.totals[r]=s,null!=e&&e.dispose()}}}async onEpochEnd(t,e){if(null!=e)for(const n of this.params.metrics)null!=this.totals[n]&&("number"==typeof this.totals[n]?e[n]=this.totals[n]/this.seen:rc(()=>{const t=fh(Yc(1,this.seen),this.totals[n]);e[n]=t,this.totals[n].dispose(),ic(e[n])}))}}class cv extends av{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,e){null==e&&(e={}),this.epoch.push(t);for(const n in e)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(e[n])}async syncData(){const t=[],e=[],n=[];for(const s in this.history){const r=this.history[s];for(let i=0;i<r.length;++i)"number"!=typeof r[i]&&(t.push(r[i].data()),e.push(s),n.push(i))}const r=await Promise.all(t);for(let s=0;s<r.length;++s)this.history[e[s]][n[s]].dispose(),this.history[e[s]][n[s]]=r[s][0]}}class hv extends av{constructor(t,e){if(super(),this.currentEpoch=0,this.yieldEvery=e||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=t.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");r.isNumber(this.yieldEvery)&&(this.maybeWait=function(t,e){let n,s=r.now();return(...i)=>{const o=r.now();return o-s<e||(s=o,n=t(...i)),n}}(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,e,n){const r=[];null!=this.yield&&(await sv(n),r.push(this.yield(t,e,n))),r.push(Ep()),await Promise.all(r)}async onEpochBegin(t,e){this.currentEpoch=t,null!=this.epochBegin&&(await sv(e),await this.epochBegin(t,e))}async onEpochEnd(t,e){const n=[];null!=this.epochEnd&&(await sv(e),n.push(this.epochEnd(t,e))),"epoch"===this.yieldEvery&&n.push(Ep()),await Promise.all(n)}async onBatchBegin(t,e){null!=this.batchBegin&&(await sv(e),await this.batchBegin(t,e))}async onBatchEnd(t,e){const n=[];null!=this.batchEnd&&(await sv(e),n.push(this.batchEnd(t,e))),"batch"===this.yieldEvery?n.push(Ep()):r.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,t,e)),await Promise.all(n)}async onTrainBegin(t){null!=this.trainBegin&&(await sv(t),await this.trainBegin(t))}async onTrainEnd(t){null!=this.trainEnd&&(await sv(t),await this.trainEnd(t))}}function dv(t,e){return null==t&&(t={}),t instanceof av?[t]:Array.isArray(t)&&t[0]instanceof av?t:cb(t).map(t=>new hv(t,e))}class pv{constructor(){}static registerCallbackConstructor(t,e){r.assert(t>=0&&Number.isInteger(t),()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`),pv.checkForDuplicate(e),null==pv.constructors[t]&&(pv.constructors[t]=[]),pv.constructors[t].push(e)}static checkForDuplicate(t){for(const e in pv.constructors)pv.constructors[+e].forEach(e=>{if(e===t)throw new rb("Duplicate callback constructor.")})}static clear(){pv.constructors={}}static createCallbacks(t){const e=[];for(const n in pv.constructors){const r=+n;t>=r&&e.push(...pv.constructors[r])}return e.map(t=>new t)}}function fv(t,e,n,r,s,i,o,a,l){const u=new cv,c=[new uv,...pv.createCallbacks(e)];null!=t&&c.push(...t),c.push(u);const h=new lv(c);return h.setParams({epochs:n,initialEpoch:r,samples:s,steps:i,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:h,history:u}}function mv(t,e={},n=!1){return gb(t,u.SerializationMap.getMap().classNameMap,e,"layer",n)}function gv(t,e){return rc(()=>{"float32"!==t.dtype&&(t=t.asType("float32"));const n=gh(hy(t),e,!0),r=ih(n.shape,tb()),s=ad(wh(n,r));return Yc(t,s)})}function bv(t,e){return rc(()=>xh(hy(mh(e,t)),-1))}function yv(t,e){return rc(()=>xh(cc(mh(e,t)),-1))}function vv(t,e){return rc(()=>{const n=mh(t,e),r=Pc(cc(t),tb(),Number.MAX_VALUE),s=cc(Yc(n,r));return fh(100,xh(s,-1))})}function _v(t,e,n=!1){return rc(()=>{if(n)e=sd(e);else{const t=gh(e,e.shape.length-1,!0);e=Yc(e,t)}return e=Pc(e,tb(),1-tb()),Dh(gh(fh(t.toFloat(),hh(e)),e.shape.length-1))})}function wv(t,e,n=!1){return rc(()=>{const r=oh(function(t){const e=[Yb(t.shape)];return t.reshape(e)}(t)).toInt(),s=(e=Pc(e,tb(),1-tb())).shape;return _v($h(r,s[s.length-1]).reshape(s),e,n)})}function xv(t,e){return rc(()=>{let n;return n=Pc(e,tb(),1-tb()),n=hh(Yc(n,mh(1,n))),xh(function(t,e){if(!r.arraysEqual(t.shape,e.shape))throw new rb(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return rc(()=>{const n=e.relu(),r=e.abs().neg();return n.sub(e.mul(t)).add(r.exp().log1p())})}(t,n),-1)})}function kv(t,e){return rc(()=>{const n=gv(t,-1),r=gv(e,-1),s=fh(n,r);return Dh(gh(s,-1))})}pv.constructors={};const Sv={meanSquaredError:bv,meanAbsoluteError:yv,meanAbsolutePercentageError:vv,meanSquaredLogarithmicError:function(t,e){return rc(()=>{const n=Pc(e,tb(),Number.MAX_VALUE),r=hh(hc(1,n)),s=Pc(t,tb(),Number.MAX_VALUE),i=hh(hc(1,s));return xh(hy(mh(r,i)),-1)})},squaredHinge:function(t,e){return rc(()=>{const n=wh(0,mh(1,fh(t,e)));return xh(hy(n),-1)})},hinge:function(t,e){return rc(()=>{const n=wh(0,mh(1,fh(t,e)));return xh(n,-1)})},categoricalHinge:function(t,e){return rc(()=>{const n=gh(fh(t,e),-1),r=ph(fh(mh(1,t),e),-1);return wh(0,hc(1,mh(r,n)))})},logcosh:function(t,e){return rc(()=>{const n=Math.log(2),r=mh(e,t),s=mh(hc(r,id(fh(-2,r))),n);return xh(s,-1)})},categoricalCrossentropy:_v,sparseCategoricalCrossentropy:wv,binaryCrossentropy:xv,kullbackLeiblerDivergence:function(t,e){return rc(()=>{const n=Pc(t,tb(),1),r=Pc(e,tb(),1);return gh(fh(t,hh(Yc(n,r))),-1)})},poisson:function(t,e){return rc(()=>{const n=hh(hc(tb(),e));return xh(mh(e,fh(t,n)),-1)})},cosineProximity:kv};function Cv(t){if("string"==typeof t){if(t in Sv)return Sv[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new rb(e)}return t}function Iv(t,e){return rc(()=>{const n=fh(.5,jh(e)),r=ty(lh(e,n),t.dtype);return xh(eh(t,r),-1)})}function Ev(t,e){return rc(()=>ty(eh(fc(t,-1),fc(e,-1)),"float32"))}function Ov(t,e){return xv(t,e)}function Tv(t,e){return t.rank===e.rank&&(t=t.squeeze([t.rank-1])),(e=e.argMax(-1)).dtype!==t.dtype&&(e=e.asType(t.dtype)),eh(t,e).asType("float32")}const Nv=_v,Av=wv,Rv={binaryAccuracy:Iv,categoricalAccuracy:Ev,precision:function(t,e){return rc(()=>{const n=function(t,e){return rc(()=>yh(t.equal(1),e.equal(1)).sum().cast("float32"))}(t,e),r=function(t,e){return rc(()=>yh(t.equal(0),e.equal(1)).sum().cast("float32"))}(t,e),s=n.add(r);return gd(lh(s,0),n.div(s),0).cast("float32")})},categoricalCrossentropy:Nv,sparseCategoricalCrossentropy:Av,mse:bv,MSE:bv,mae:yv,MAE:yv,mape:vv,MAPE:vv,cosine:kv};function Fv(t){if("string"==typeof t&&t in Rv)return Rv[t];if("string"!=typeof t&&null!=t)return t;throw new rb(`Unknown metric ${t}`)}function Dv(t){if(ab(null!==t,`Unknown LossOrMetricFn ${t}`),"string"==typeof t)return t;{let e;for(const n of Object.keys(Sv))if(Sv[n]===t){e=n;break}if(void 0!==e)return e;for(const n of Object.keys(Rv))if(Rv[n]===t){e=n;break}return void 0!==e?e:t.name}}function Pv(t,e,n=!1){if(null==t||"object"!=typeof t||Object.getPrototypeOf(t)!==Object.prototype||!$v(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(t);n.length>1048576&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function $v(t){if(null===t)return!0;if("object"==typeof t){if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e){if("string"!=typeof n)return!1;if(!$v(t[n]))return!1}return!0}if(Array.isArray(t)){for(const e of t)if(!$v(e))return!1;return!0}return!1}{const e=typeof t;return"string"===e||"number"===e||"boolean"===e}}function Mv(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function Lv(t,e,n){let r;try{r=JSON.stringify(t.outputShape)}catch(ZW){r="multiple"}Mv([`${t.name} (${t.getClassName()})`,r,t.countParams().toString()],e,n)}function jv(t,e,n,r){let s;try{s=JSON.stringify(t.outputShape)}catch(ZW){s="multiple"}const i=[];for(const u of t.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let t=0;t<u.inboundLayers.length;++t)i.push(`${u.inboundLayers[t].name}[${u.nodeIndices[t]}][${u.tensorIndices[t]}]`);const o=t.name,a=t.getClassName(),l=0===i.length?"":i[0];Mv([`${o} (${a})`,s,t.countParams().toString(),l],e,r);for(let u=1;u<i.length;++u)Mv(["","","",i[u]],e,r)}function zv(t,e,n){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===e&&"string"==typeof n}function Bv(t,e){if(null===t)return null;if("string"==typeof t)return db(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const r=t[s];zv(e,s,r)?n.push(r):n.push(Bv(r,e))}return n}{const e={};for(const n of Object.keys(t)){const r=t[n];if("name"===n&&"string"==typeof r)e[n]=r;else{const t=db(n);e[t]=Bv(r,t)}}return e}}function Vv(t,e){if(null==t)return null;if("string"==typeof t)return hb(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const r=t[s];zv(e,s,r)?n.push(r):n.push(Vv(r,e))}return n}{const e={};for(const n of Object.keys(t)){const r=t[n];e[hb(n)]="name"!==n&&"className"!==n||"string"!=typeof r?Vv(r,n):r}return e}}class Uv{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof Uv)for(const e in t.id2Value)this.id2Value[e]=t.id2Value[e],e in t.id2Mask&&(this.id2Mask[e]=t.id2Mask[e]);else{if(null==t)return;for(const e of t)this.add(e.key,e.value)}}add(t,e,n){if(null!=this.id2Value[t.id])throw new rb(`Duplicate key: name=${t.name}, id=${t.id}`);return this.id2Value[t.id]=function(t,e){if(null==t.dtype||t.dtype===e.dtype)return e;try{return du(e,t.dtype)}catch(ZW){throw new rb(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}(t,e),this.name2Id[t.name]=t.id,null!=n&&(this.id2Mask[t.id]=n),this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return null!=this.id2Value[t.id]}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof Xy){if(null==this.id2Value[t.id])throw new rb(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}{const e=this.name2Id[t];if(null==e)throw new rb(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[e]}}getMask(t){if(t instanceof Xy){if(null==this.id2Value[t.id])throw new rb(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}{const e=this.name2Id[t];if(null==e)throw new rb(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[e]}}disposeMasks(){null!=this.id2Mask&&sc(this.id2Mask)}}const Wv={},Hv={};function Gv(t,e,n,s){const i=null!=n&&n.training,o=Array.isArray(t),a=o?t:[t],l=a.map(t=>t.name),u=[],c=e.names();for(const r of l)-1!==c.indexOf(r)?u.push(e.getValue(r)):u.push(null);null!=s&&(s.maxNumTensors=-1/0,s.minNumTensors=1/0);const h=l.join(",")+"|"+e.names().join(",");let d,p;if(null==Wv[h]){const t=function(t,e){r.assert(null!=t&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],s={};if(1===t.length){const r=Zv(t[0],e);n=r.sorted,s=r.recipientMap}else{const r=new Set;for(const i of t){const{sorted:t,recipientMap:o}=Zv(i,e);for(const e of t)r.has(e.name)||(n.push(e),r.add(e.name));for(const e in o)null==s[e]&&(s[e]=new Set),o[e].forEach(t=>s[e].add(t))}}return{sorted:n,recipientCounts:qv(s)}}(a,e);d=t.sorted,p=t.recipientCounts,Wv[h]=d,Hv[h]=p}d=Wv[h],p={},i||Object.assign(p,Hv[h]);const f=new Uv(e);for(let r=0;r<d.length;++r){if(null!=s){const t=nc().numTensors;t>s.maxNumTensors&&(s.maxNumTensors=t),t<s.minNumTensors&&(s.minNumTensors=t)}const t=d[r],o=t.sourceLayer;if(o instanceof rv)continue;const a=[],c=[],h=[];let m=!1;for(const n of t.inputs){const t=f.getValue(n),r=f.getMask(n);a.push(t),c.push(r),null!=r&&(m=!0),i||(p[n.name]--,0!==p[n.name]||e.hasKey(n)||-1!==l.indexOf(n.name)||t.isDisposed||!0===n.sourceLayer.stateful||h.push(t))}m&&((n=n||{}).mask=c[0]);const g=cb(o.apply(a,n));let b=null;o.supportsMasking&&(b=o.computeMask(a,c));const y=Kv(t),v=Array.isArray(y)?y:[y];for(let e=0;e<v.length;++e){f.hasKey(v[e])||f.add(v[e],g[e],Array.isArray(b)?b[0]:b);const t=l.indexOf(v[e].name);-1!==t&&(u[t]=g[e])}i||sc(h)}return f.disposeMasks(),o?u:u[0]}function qv(t){const e={};for(const n in t)e[n]=t[n].size;return e}function Zv(t,e){const n=new Set,r=[],s={};for(const a of e.names())n.add(a);const i=[],o=[];for(i.push(t);i.length>0;){const t=i[i.length-1];if(n.has(t.name)){i.pop();continue}const e=o[o.length-1]===i.length-1;if(0===t.inputs.length||e)i.pop(),r.push(t),n.add(t.name),e&&o.pop();else{o.push(i.length-1);for(const e of t.inputs)null==s[e.name]&&(s[e.name]=new Set),s[e.name].add(t.name),n.has(e.name)||i.push(e)}}return{sorted:r,recipientMap:s}}function Kv(t){let e;if(1===t.sourceLayer.inboundNodes.length)e=t.sourceLayer.output;else{let n=null;for(let e=0;e<t.sourceLayer.inboundNodes.length;++e)for(const r of t.sourceLayer.inboundNodes[e].outputTensors)if(r.id===t.id){n=e;break}e=t.sourceLayer.getOutputAt(n)}return e}class Yv extends ev{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,null==this.name){const t=this.getClassName().toLowerCase();this.name=By(t)}if(this.supportsMasking=!1,this.trainable_=!0,this.inputs=Array.isArray(t.inputs)?t.inputs.slice():[t.inputs],this.outputs=Array.isArray(t.outputs)?t.outputs.slice():[t.outputs],yb(this.inputs).length!==this.inputs.length)throw new rb(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(t=>t.name)}`);yb(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(t=>t.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const t=b.nodeIndex,e=b.tensorIndex;this.outputLayers.push(b.sourceLayer),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(e)}for(const b of this.inputs){const t=b.sourceLayer,e=b.nodeIndex,n=b.tensorIndex;ab(0===e,"input layer has >1 nodes"),ab(0===n,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(e),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const e=this.inputLayers[b];if(!(e instanceof rv))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${b} (0-based) originates from layer type ${e.getClassName()}.`);this.inputNames.push(e.name),this.feedInputShapes.push(e.batchInputShape),this.feedInputNames.push(e.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(t=>t.shape),this.internalOutputShapes=this.outputs.map(t=>t.shape);const e={},n={},r={},s={},i={},o=[],a=(t,e,n,r,s,l)=>{null!=r&&null!=s&&null!=l||(r=t.sourceLayer,s=t.nodeIndex,l=t.tensorIndex);const u=r.inboundNodes[s];if(-1!==n.indexOf(u))throw new nb(`The tensor ${t.name} at layer "${r.name}" is part of a cycle.`);if(-1!==e.indexOf(u))return;this.containerNodes.add(Yv.nodeKey(r,s)),r.id in i||(i[r.id]=Object.keys(i).length),-1===n.indexOf(u)&&n.push(u);const c=u.inboundLayers.length;for(let i=0;i<c;i++)a(u.inputTensors[i],e,n,u.inboundLayers[i],u.nodeIndices[i],u.tensorIndices[i]);for(e.push(u);n.indexOf(u)>=0;)n.splice(n.indexOf(u),1);o.push(u)},l=[],u=[];for(const b of this.outputs)a(b,l,u);const c=o.slice().reverse();for(const b of c){n[b.id]=b,b.id in e||(e[b.id]=0);let t=e[b.id];t=Math.max(t,null==r[b.outboundLayer.id]?0:r[b.outboundLayer.id]),r[b.outboundLayer.id]=t,s[b.outboundLayer.id]=b.outboundLayer,e[b.id]=t;for(let r=0;r<b.inboundLayers.length;r++){const s=b.inboundLayers[r].inboundNodes[b.nodeIndices[r]];e[s.id]=Math.max(t+1,null==e[s.id]?0:e[s.id]),n[s.id]=s}}const h={};for(const b in e){const t=e[b];t in h||(h[t]=[]),h[t].push(n[b])}const d={};for(const b in r){const t=r[b];t in d||(d[t]=[]),d[t].push(s[b])}let p=Object.keys(d).map(t=>parseInt(t,10)).sort(bb);this.layers=[];for(const b of p){const t=d[b];t.sort((t,e)=>{const n=i[t.id],r=i[e.id];return n<r?-1:n>r?1:0});for(const e of t)e instanceof Yv&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=d,p=Object.keys(h).map(t=>parseInt(t,10)).sort(bb);const f=this.inputs.slice(),m=[];for(const b of p)for(const t of h[b]){const e=t.outboundLayer;if(null!=e){for(const n of t.inputTensors)if(-1===f.indexOf(n))throw new nb(`Graph disconnected: cannot obtain value for tensor ${n} at layer "${e.name}". The following previous layers were accessed without issue: ${m}`);for(const e of t.outputTensors)f.push(e);m.push(e.name)}}this.nodesByDepth=h;const g=this.layers.map(t=>t.name);for(const b of g){const t=g.filter(t=>t===b).length;if(1!==t)throw new nb(`The name "${b}" is used ${t} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new Qy({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(t=>null),outputMasks:this.outputs.map(t=>null),inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs.map(t=>t.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(const e of this.layers)t.numDisposedVariables+=e.dispose().numDisposedVariables;for(const e of this.internalContainerRefs)t.numDisposedVariables+=e.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(e=>{e._trainableWeights.forEach(e=>e.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new rb("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const e of this.layers)t=t.concat(e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.layers)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.layers)e.push(...t.trainableWeights);return e.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,e=!0){const n={};let r=0;for(const i of this.layers)for(const t of i.weights){if(null!=n[t.originalName])throw new rb(`Duplicate weight name: ${t.originalName}`);n[t.originalName]=t,r++}const s=[];for(const i in t){let r=i;if(null==n[i]){const t=i.split("/");r=t.slice(0,-2).concat([t[t.length-1]]).join("/")}if(null!=n[r])s.push([n[r],t[i]]);else if(e)throw new rb(`Provided weight data has no target variable: ${i}`);delete n[r]}if(e){const t=[];for(const e in n)t.push(e);if(t.length>0)throw new rb(`${t.length} of ${r} weights are not set: ${t}`)}Ky(s)}updatedConfig(){const t=this.getConfig(),e={};return e.className=this.getClassName(),e.config=t,e.kerasVersion="tfjs-layers 3.7.0",e.backend="TensorFlow.js",e}toJSON(t,e=!0){const n=Vv(this.updatedConfig());return e?JSON.stringify(n):n}call(t,e){return rc(()=>{t=cb(t);const n=new Uv;for(let e=0;e<this.inputs.length;++e)n.add(this.inputs[e],t[e]);return Gv(this.outputs,n,e)})}computeMask(t,e){return rc(()=>{let n;return t=cb(t),n=null==e?ob(null,t.length):cb(e),this.runInternalGraph(t,n)[1]})}computeOutputShape(t){const e=Uy(t);if(e.length!==this.inputLayers.length)throw new rb(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let o=0;o<e.length;o++)n[this.inputLayers[o].name+"_0_0"]=e[o];const r=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(bb);if(r.length>1)for(const o of r){const t=this.nodesByDepth[o];for(const e of t){const t=e.outboundLayer;if(-1!==this.inputLayers.map(t=>t.id).indexOf(t.id))continue;const r=[];for(let o=0;o<e.inboundLayers.length;o++)r.push(n[`${e.inboundLayers[o].name}_${e.nodeIndices[o]}_${e.tensorIndices[o]}`]);const s=Uy(t.computeOutputShape(ub(r))),i=t.inboundNodes.indexOf(e);for(let e=0;e<s.length;e++)n[`${t.name}_${i}_${e}`]=s[e]}}const s=[],i=[];for(let o=0;o<this.outputLayers.length;o++)i.push(`${this.outputLayers[o].name}_${this.outputLayersNodeIndices[o]}_${this.outputLayersTensorIndices[o]}`);for(let o=0;o<i.length;o++){const t=i[o];ab(t in n),s.push(n[t])}return ub(s)}runInternalGraph(t,e){null==e&&(e=ob(null,t.length));const n={};for(let a=0;a<this.inputs.length;++a)n[this.inputs[a].id]=[t[a],e[a]];const r=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(bb);for(const a of r){const t=this.nodesByDepth[a];for(const e of t){const t=e.outboundLayer,r=e.inputTensors,s=e.outputTensors,i=new Array;for(const e of r)e.id in n&&i.push(n[e.id]);if(i.length===r.length){let r,o,a,l,u={};if(null!=e.callArgs&&(u=e.callArgs),1===i.length){const[e,n]=i[0];null==u.mask&&(u.mask=n),a=cb(t.call(e,u)),l=cb(t.computeMask(e,n)),r=[e],o=[n]}else r=i.map(t=>t[0]),o=i.map(t=>t[1]),null==u.mask&&(u.mask=o),a=cb(t.call(r,u)),l=cb(t.computeMask(r,o));if(t.activityRegularizer)throw new sb("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let t=0;t<s.length;++t)n[s[t].id]=[a[t],l[t]]}}}const s=[],i=[],o=[];for(const a of this.outputs){ab(a.id in n,`Could not compute output ${a.name} : ${a.id}`);const[t,e]=n[a.id];o.push(t.shape),s.push(t),i.push(e)}return[s,i,o]}buildNodeConversionMap(t){const e={};let n;for(const r of this.layers){n=r instanceof Yv?1:0;for(let t=0;t<r.inboundNodes.length;t++){const s=Yv.nodeKey(r,t);this.containerNodes.has(s)&&(e[s]=n,n+=1)}}return e}getLayer(t,e){if(null!=e){if(this.layers.length<=e)throw new rb(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}if(null==t)throw new rb("Provide either a layer name or layer index");for(const n of this.layers)if(n.name===t)return n;throw new rb(`No such layer: ${t}`)}calculateLosses(){return rc(()=>{const t=[];for(const e of this.layers)for(let n=0;n<e.inboundNodes.length;++n){const r=Yv.nodeKey(e,n);this.containerNodes.has(r)&&t.push(...e.calculateLosses())}return t})}getConfig(){const t={name:this.name},e=this.buildNodeConversionMap(this.layers),n=[];for(const i of this.layers){const t=i.getClassName(),r=i.getConfig(),s=[];for(let n=0;n<i.inboundNodes.length;n++){const t=i.inboundNodes[n],r=Yv.nodeKey(i,n);let o={};if(this.containerNodes.has(r)){if(t.callArgs)try{JSON.stringify(t.callArgs),o=t.callArgs}catch(ZW){console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${t.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),o={}}if(t.inboundLayers.length>0){const n=[];for(let r=0;r<t.inboundLayers.length;r++){const s=t.inboundLayers[r],i=t.tensorIndices[r];let a=e[Yv.nodeKey(s,t.nodeIndices[r])];null==a&&(a=0),n.push([s.name,a,i,o])}s.push(n)}}}const o={};o.name=i.name,o.className=t,o.config=r,o.inboundNodes=s,n.push(o)}t.layers=n;const r=[];for(let i=0;i<this.inputLayers.length;i++){const t=this.inputLayers[i],n=Yv.nodeKey(t,this.inputLayersNodeIndices[i]);if(!this.containerNodes.has(n))continue;let s=e[n];null==s&&(s=0),r.push([t.name,s,this.inputLayersTensorIndices[i]])}t.inputLayers=r;const s=[];for(let i=0;i<this.outputLayers.length;i++){const t=this.outputLayers[i],n=Yv.nodeKey(t,this.outputLayersNodeIndices[i]);if(!this.containerNodes.has(n))continue;let r=e[n];null==r&&(r=0),s.push([t.name,r,this.outputLayersTensorIndices[i]])}return t.outputLayers=s,t}static fromConfig(t,e,n={},r=!1){const s={},i={};function o(t,e){t.name in i?i[t.name].push(e):i[t.name]=[e]}function a(t,e){const n=[];let r;for(const i of e){const a=i[0],l=i[1],u=i[2];if(r=null==i[3]?{}:i[3],!(a in s))return void o(t,e);const c=s[a];if(c.inboundNodes.length<=l)return void o(t,e);n.push(c.inboundNodes[l].outputTensors[u])}n.length>0&&t.apply(ub(n),r)}function l(t){const n=t.name,i=mv(t,null!=e.customObjects?e.customObjects:{});i.setFastWeightInitDuringBuild(r),s[n]=i,t.inboundNodes.forEach(t=>{if(!(t instanceof Array))throw new rb(`Corrupted configuration, expected array for nodeData: ${t}`);o(i,t)})}const u=e.name,c=e.layers;for(const m of c)l(m);for(;!vb(i);)for(const t of c){const e=s[t.name];if(e.name in i){const t=i[e.name];delete i[e.name];for(const n of t)a(e,n)}}const h=[],d=[],p=e.inputLayers;for(const m of p){const t=m[0],e=m[1],n=m[2];ab(t in s),h.push(s[t].inboundNodes[e].outputTensors[n])}const f=e.outputLayers;for(const m of f){const t=m[0],e=m[1],n=m[2];ab(t in s),d.push(s[t].inboundNodes[e].outputTensors[n])}return new t({inputs:h,outputs:d,name:u})}get stateful(){if(this._stateful)throw new rb("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){rc(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}function Xv(t,e){return function(t,e,n){const r=e.length;if(null==t||Array.isArray(t)&&0===t.length)return e.map(t=>null);if(1===r)return Array.isArray(t)&&1===t.length?t:"object"==typeof t&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided classWeight is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}if("object"==typeof t&&Object.keys(t).length>0&&"object"==typeof t[Object.keys(t)[0]]){const n=[];return e.forEach(e=>{n.push(e in t?t[e]:null)}),n}throw new Error(`The model has multiple (${r}) outputs, so classWeight must be either an array with ${r} elements or an object with ${e} keys. Provided classWeight not understood: ${JSON.stringify(t)}`)}(t,e)}async function Jv(t,e,n,r){if(null!=e||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const e=rc(()=>{if(1===t.shape.length)return t.clone();if(2===t.shape.length){if(t.shape[1]>1)return t.argMax(1);if(1===t.shape[1])return t.reshape([t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await e.data());sc(e);const s=[];return r.forEach(t=>{if(null==n[t])throw new Error(`classWeight must contain all classes in the training data. The class ${t} exists in the data but not in classWeight`);s.push(n[t])}),hd(s,"float32")}return null}function Qv(t,e){return fh(t,e)}function t_(t,e){let n,s;n=e.xs,s=e.ys,r.assert(null!=n&&null!=s,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=e_("input",t.inputNames,n),o=e_("output",t.outputNames,s),a=i[0].shape[0];r.assert(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),r.assert(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)r.assert(i[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)r.assert(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:i,ys:o}}function e_(t,e,n){if(n instanceof za)return[n];if(Array.isArray(n))return r.assert(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(null==n[s])throw new rb(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function n_(t){return"function"==typeof t.iterator}function r_(t){r.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function s_(t,e,n){return null==t?[null]:Array.isArray(t)?t.map(t=>ny(t,e,n-e)):ny(t,e,n-e)}function i_(t,e){return rc(()=>null==t?null:Array.isArray(t)?t.map(t=>i_(t,e)):cy(t,"int32"===e.dtype?e:e.toInt()))}function o_(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function a_(t){const e=[];t instanceof za&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(1===r.rank)e.push(ey(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function l_(t,e){if(null==t)return;const n=[];if(e instanceof za)n.push(e.id);else if(Array.isArray(e))e.forEach(t=>n.push(t.id));else if(null!=e)for(const s in e)n.push(e[s].id);const r=[];if(t instanceof za)-1===n.indexOf(t.id)&&r.push(t);else if(Array.isArray(t))t.forEach(t=>{-1===n.indexOf(t.id)&&r.push(t)});else if(null!=t)for(const s in t){const e=t[s];-1===n.indexOf(e.id)&&r.push(e)}r.forEach(t=>{t.isDisposed||t.dispose()})}function u_(t){return Array.isArray(t)}function c_(t){return!function(t){return t instanceof za}(t)&&!u_(t)}function h_(t,e,n,r=!0,s=""){if(null==e||0===e.length){if(null!=t){let e=!1;if(u_(t)&&t.length>0)e=!0;else if(c_(t)){for(const n in t)if(t.hasOwnProperty(n)){e=!0;break}}else e=!0;if(e)throw new rb(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(null==t)return e.map(t=>null);let i;if(c_(t)){t=t,i=[];for(const n of e){if(null==t[n])throw new rb(`No data provided for "${n}". Need data for each key in: ${e}`);i.push(t[n])}}else if(u_(t)){if((t=t).length!==e.length)throw new rb(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new rb(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=a_(i),null!=n)for(let o=0;o<e.length;++o){if(null==n[o])continue;const t=i[o];if(t.shape.length!==n[o].length)throw new rb(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${t.shape}`);for(let i=0;i<n[o].length;++i){if(0===i&&!r)continue;const a=t.shape[i],l=n[o][i];if(null!=l&&l>=0&&a!==l)throw new rb(`Error when checking ${s}: expected ${e[o]} to have shape [${n[o]}], but got array with shape [${t.shape}].`)}}return i}function d_(t,e,n,r=!0,s=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new rb(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new rb(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(null!=n)for(let o=0;o<e.length;++o){if(null==n[o])continue;const t=i[o];if(t.shape.length!==n[o].length)throw new rb(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(t.shape)}`);for(let i=0;i<n[o].length;++i){if(0===i&&!r)continue;const a=t.shape[i],l=n[o][i];if(null!=l&&l!==a)throw new rb(`Error when checking ${s}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(t.shape)}.`)}}}class p_ extends Yv{constructor(t){super(t),this.isTraining=!1}summary(t,e,n=console.log){if(!this.built)throw new rb("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function(t,e,n,r=console.log){const s=function(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let t=!1;for(const n of s.inboundNodes)if(-1!==r.indexOf(n)){if(t){e=!1;break}t=!0}if(!e)break}return e}(t),i=["Layer (type)","Output shape","Param #"];let o;if(s?(e=e||65,n=n||[.45,.85,1]):(e=e||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(t=>Math.floor(e*t))),!s){i.push("Receives inputs"),o=[];for(const e in t.nodesByDepth)o.push(...t.nodesByDepth[e])}r("_".repeat(e)),Mv(i,n,r),r("=".repeat(e));const a=t.layers;for(let c=0;c<a.length;++c)s?Lv(a[c],n,r):jv(a[c],n,o,r),r((c===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=function(t){let e;return e=Gy(null!=t.collectedTrainableWeights?t.collectedTrainableWeights:t.trainableWeights),e}(t),u=Gy(t.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}(this,t,e,n)}compile(t){if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"==typeof t.optimizer)this.optimizer_=function(t){const e={Adagrad:()=>Cp.adagrad(.01),Adadelta:()=>Cp.adadelta(1,.95,tb()),Adam:()=>Cp.adam(.001,.9,.999,tb()),Adamax:()=>Cp.adamax(.002,.9,.999,tb(),0),RMSProp:()=>Cp.rmsprop(.001,.9,0,tb()),SGD:()=>Cp.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new rb(`Unknown Optimizer ${t}`)}(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof uc))throw new rb("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let e=[];if(Array.isArray(t.loss)||"string"==typeof t.loss||"function"==typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new rb(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);e=t.loss.map(t=>Cv(t))}else{const n=Cv(t.loss);this.outputs.forEach(t=>{e.push(n)})}else{t.loss=t.loss;for(const e in t.loss)if(-1===this.outputNames.indexOf(e))throw new rb(`Unknown entry in loss dictionary: "${e}". Only expected the following keys: ${this.outputNames}`);for(const n of this.outputNames)null==t.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),e.push(Cv(t.loss[n]))}this.lossFunctions=e,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const t=this.internalOutputShapes[i];this.feedOutputNames.push(this.outputNames[i]),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[i])}const n=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Hb("loss",()=>{for(let t=0;t<this.outputs.length;++t){if(-1!==n.indexOf(t))continue;const e=this.lossFunctions[t];this.outputs.length>1&&(this.metricsTensors.push([e,t]),this.metricsNames.push(this.outputNames[t]+"_loss"))}});const r=function(t,e){if(null==t||Array.isArray(t)&&0===t.length)return e.map(t=>[]);let n;if("string"==typeof t||"function"==typeof t)n=[t];else{if(!Array.isArray(t)&&"object"!=typeof t)throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);n=t}if(Array.isArray(n))return e.map(t=>n);{const t=[];for(const r of e){let e=n.hasOwnProperty(r)?n[r]:[];Array.isArray(e)||(e=[e]),t.push(e)}return t}}(t.metrics,this.outputNames),s=(t,e,n)=>{this.outputNames.length>1&&(e=this.outputNames[t]+"_"+e),this.metricsNames.push(e),this.metricsTensors.push([n,t])};Hb("metric",()=>{for(let t=0;t<this.outputs.length;++t)-1===n.indexOf(t)&&(e=>{let n,r,i;for(const o of e){if("string"==typeof o&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(o)){const e=this.internalOutputShapes[t];let s;1===e[e.length-1]||this.lossFunctions[t]===xv?-1!==["accuracy","acc"].indexOf(o)?r=Iv:-1!==["crossentropy","ce"].indexOf(o)&&(r=Ov):this.lossFunctions[t]===wv?-1!==["accuracy","acc"].indexOf(o)?r=Tv:-1!==["crossentropy","ce"].indexOf(o)&&(r=Av):-1!==["accuracy","acc"].indexOf(o)?r=Ev:-1!==["crossentropy","ce"].indexOf(o)&&(r=Nv),-1!==["accuracy","acc"].indexOf(o)?s="acc":-1!==["crossentropy","ce"].indexOf(o)&&(s="ce"),i=r,n=""+s}else{const t=Fv(o);i=t,n=""+Dv(o)}let e;Hb(n,()=>{e=i}),s(t,n,e)}})(r[t])}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,e,n={}){const r=null==n.batchSize?32:n.batchSize;r_(r);const s=this.standardizeUserDataXY(t,e,!0,r);try{const i=s[0].concat(s[1]);return this.makeTestFunction(),ub(this.testLoop(this.testFunction,i,r,n.verbose,n.steps))}finally{l_(s[0],t),l_(s[1],e)}}async evaluateDataset(t,e){return this.makeTestFunction(),async function(t,e,n){const s=null!=(n=n||{}).batches,i=t.testFunction;let o=[];if(n.verbose>0)throw new sb("Verbose mode is not implemented yet.");r.assert(!s||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const a="function"==typeof e.next?e:await e.iterator();let l=0,u=0;for(;!s||u<n.batches;){const e=await a.next();if(o=rc(()=>{if(e.value){const{xs:n,ys:r}=t_(t,e.value),s=n.concat(r),a=rc(()=>i(s));if(sc(s),0===u)for(let t=0;t<a.length;++t)o.push(lc(0));const c=s[0].shape[0];for(let t=0;t<a.length;++t){const e=a[t],n=o[t];o[t]=rc(()=>hc(o[t],fh(c,e))),u>0&&sc(n)}sc(a),l+=c,++u}return o}),e.done){s&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let r=0;r<o.length;++r){const t=o[r];o[r]=Yc(o[r],l),sc(t)}return ub(o)}(this,t,e)}checkNumSamples(t,e,n,r="steps"){let s;if(null!=n){if(s=null,null!=e)throw new rb(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${e}`)}else{if(null==t)throw new rb(`Either the input data should have a defined shape, or ${r} shoud be specified.`);s=Array.isArray(t)?t[0].shape[0]:t.shape[0]}return s}execute(t,e){if(Array.isArray(e)&&0===e.length)throw new rb("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(e),r=this.retrieveSymbolicTensors(n?e:[e]),s=new Uv;if(t instanceof za&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new rb(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let e=0;e<this.inputs.length;++e)s.add(this.inputs[e],t[e])}else for(const o of this.inputs){const e=t[o.name];if(null==e)throw new rb(`No value is provided for the model's input ${o.name}`);s.add(o,e)}const i=Gv(r,s);return n?i:i[0]}retrieveSymbolicTensors(t){const e=ob(null,t.length);let n=t.length;for(const r of this.layers){const s=Array.isArray(r.output)?r.output:[r.output],i=s.map(t=>t.name);for(let r=0;r<t.length;++r){const o=i.indexOf(t[r]);if(-1!==o&&(e[r]=s[o],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw e.forEach((e,r)=>{null==e&&n.push(t[r])}),new rb(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(n)}`)}return e}predictLoop(t,e=32,n=!1){return rc(()=>{const r=this.checkNumSamples(t);if(n)throw new sb("Verbose predictLoop() is not implemented yet.");const s=o_(r,e),i=this.outputs.map(t=>[]);for(let e=0;e<s.length;++e)rc(()=>{const n=s_(t,s[e][0],s[e][1]),r=[];if(Array.isArray(n))for(let t=0;t<n.length;++t)r.push({key:this.inputs[t],value:n[t]});else r.push({key:this.inputs[0],value:n});const i=new Uv(r);return Gv(this.outputs,i)}).forEach((t,e)=>i[e].push(t));return ub(i.map(t=>$c(t,0)))})}predict(t,e={}){const n=a_(t);d_(n,this.inputNames,this.feedInputShapes,!1);try{const r=null==e.batchSize?32:e.batchSize;return r_(r),this.predictLoop(n,r)}finally{l_(n,t)}}predictOnBatch(t){d_(t,this.inputNames,this.feedInputShapes,!0);const e=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,e)}standardizeUserDataXY(t,e,n=!0,s){if(null==this.optimizer_)throw new nb("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let r=0;r<this.feedOutputShapes.length;++r){const t=this.feedOutputShapes[r];i.push(this.feedLossFns[r]===wv?t.slice(0,t.length-1).concat([1]):t)}if(function(t,e,n){const s=yb(t.map(t=>t.shape[0]));s.sort();const i=yb(e.map(t=>t.shape[0]));if(i.sort(),s.length>1)throw new rb(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(t=>t.shape))}`);if(i.length>1)throw new rb(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(t=>t.shape))}`);if(s.length>0&&i.length>0&&!r.arraysEqual(s,i))throw new rb(`Input Tensors should have the same number of samples as target Tensors. Found ${s[0]} input sample(s) and ${i[0]} target sample(s).`)}(t=h_(t,this.feedInputNames,this.feedInputShapes,!1,"input"),e=h_(e,this.feedOutputNames,i,!1,"target")),function(t,e,n){const r=[bv,xv,_v];for(let s=0;s<t.length;++s){const i=t[s],o=e[s],a=n[s];if(null!=o){if(o===_v&&1===i.shape[i.shape.length-1])throw new rb(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(o)){const t=i.shape.slice(1),e=a.slice(1);for(let n=0;n<t.length;++n){const r=t[n],s=e[n];if(null!=s&&r!==s)throw new rb(`A target Tensor with shape ${i.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(e,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=s&&s>0&&t[0].shape[0]%s!=0)throw new rb(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${t[0].shape[0]} sample(s).`);return[t,e]}async standardizeUserData(t,e,n,r,s=!0,i){const[o,a]=this.standardizeUserDataXY(t,e,s,i);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const t=Xv(r,this.outputNames);l=[];for(let e=0;e<t.length;++e)l.push(await Jv(a[e],null,t[e]))}return[o,a,l]}testLoop(t,e,n,r=0,s){return rc(()=>{const i=this.checkNumSamples(e,n,s,"steps"),o=[];if(r>0)throw new sb("Verbose mode is not implemented yet.");if(null!=s)throw new sb("steps mode in testLoop() is not implemented yet");{const r=o_(i,n),s=hd(Qb(0,i));for(let n=0;n<r.length;++n){const i=r[n][0],a=r[n][1],l=ny(s,i,a-i),u=i_(e,l),c=t(u);if(0===n)for(let t=0;t<c.length;++t)o.push(lc(0));for(let t=0;t<c.length;++t)o[t]=hc(o[t],fh(a-i,c[t]))}for(let t=0;t<o.length;++t)o[t]=Yc(o[t],i)}return o})}getDedupedMetricsNames(){const t=this.metricsNames,e=[];for(let n=0;n<t.length;++n){const r=t[n];let s=r;lb(t,r)>1&&(s+=`_${lb(t.slice(0,n),r)}`),e.push(s)}return e}makeTrainFunction(){return t=>{const e=[],n=t.slice(0,this.inputs.length),r=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),i=[],o=this.collectedTrainableWeights.map(t=>t.read());return[this.optimizer_.minimize(()=>{const t=[];for(let e=0;e<this.inputs.length;++e)t.push({key:this.inputs[e],value:n[e]});const o=new Uv(t),a=Gv(this.outputs,o,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){let t=(0,this.lossFunctions[n])(r[n],a[n]);null!=s[n]&&(t=Qv(t,s[n]));const i=xh(t);e.push(i),l=0===n?t:hc(l,t)}for(let n=0;n<this.metricsTensors.length;++n){let t;if(this.outputs.length>1&&n<this.outputs.length)t=e[n];else{const e=this.metricsTensors[n][1];t=xh((0,this.metricsTensors[n][0])(r[e],a[e]))}ic(t),i.push(t)}return l=xh(l),this.calculateLosses().forEach(t=>{l=hc(l,t)}),l},!0,o)].concat(i)}}makeTestFunction(){this.testFunction=t=>rc(()=>{const e=[];let n;const r=t.slice(0,this.inputs.length),s=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let t=0;t<this.inputs.length;++t)i.push({key:this.inputs[t],value:r[t]});const o=new Uv(i),a=Gv(this.outputs,o);for(let t=0;t<this.lossFunctions.length;++t){const r=xh((0,this.lossFunctions[t])(s[t],a[t]));n=0===t?r:hc(n,r),e.push(n)}for(let t=0;t<this.metricsTensors.length;++t){const n=this.metricsTensors[t][1],r=xh((0,this.metricsTensors[t][0])(s[n],a[n]));e.push(r)}return e})}async fit(t,e,n={}){return async function(t,e,n,s={}){if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let i,o,a,l,u,c,h;t.isTraining=!0;try{const d=null==s.batchSize?32:s.batchSize;r_(d);const p=!1,f=await t.standardizeUserData(e,n,s.sampleWeight,s.classWeight,p,d);i=f[0],o=f[1],h=f[2];let m,g=!1;if(null!=s.validationData&&s.validationData.length>0){if(g=!0,2!==s.validationData.length)throw 3===s.validationData.length?new sb("validationData including sample weights is not supported yet."):new rb(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${s.validationData} is invalid.`);a=s.validationData[0],l=s.validationData[1];const e=!0,n=await t.standardizeUserData(a,l,null,null,e,d);u=n[0],c=n[1],m=u.concat(c)}else if(null!=s.validationSplit&&s.validationSplit>0&&s.validationSplit<1){g=!0;const t=Math.floor(i[0].shape[0]*(1-s.validationSplit)),e=i[0].shape[0];u=s_(i,t,e),i=s_(i,0,t),c=s_(o,t,e),o=s_(o,0,t),m=u.concat(c)}else null!=s.validationSteps&&(g=!0);const b=i.concat(o).concat(h);t.checkTrainableWeightsConsistency();const y=t.makeTrainFunction(),v=t.getDedupedMetricsNames();let _,w;g?(t.makeTestFunction(),_=t.testFunction,w=v.slice().concat(v.map(t=>"val_"+t))):(_=null,m=[],w=v.slice());const x=dv(s.callbacks,s.yieldEvery);return await async function(t,e,n,s,i,o,a,l,u,c,h,d,p,f,m){null==i&&(i=32),null==o&&(o=1),null==h&&(h=!0),null==p&&(p=0);let g=!1;null!=u&&null!=c&&(g=!0);const b=t.checkNumSamples(n,i,null,"steps_per_epoch");let y;null!=b&&(y=Qb(0,b)),null==a&&(a=1);const{callbackList:v,history:_}=fv(l,a,o,p,b,null,i,g,d);v.setModel(t),t.history=_,await v.onTrainBegin(),t.stopTraining_=!1;for(let w=p;w<o;++w){await v.onEpochBegin(w);const o={};{if("batch"===h)throw new sb("batch shuffling is not implemneted yet");h&&r.shuffle(y);const a=hd(y),l=o_(b,i);for(let r=0;r<l.length;++r){const h={};if(await v.onBatchBegin(r,h),rc(()=>{const d=l[r][0],p=l[r][1],f=ny(a,d,p-d);h.batch=r,h.size=p-d;const m=i_(n,f),b=e(m);for(let t=0;t<s.length;++t){const e=b[t];h[s[t]]=e,ic(e)}if(r===l.length-1&&g){const e=t.testLoop(u,c,i);for(let t=0;t<s.length;++t){const n=s[t],r=e[t];ic(r),o["val_"+n]=r}}}),await v.onBatchEnd(r,h),iv(h),t.stopTraining_)break}a.dispose()}if(await v.onEpochEnd(w,o),t.stopTraining_)break}return await v.onTrainEnd(),await t.history.syncData(),t.history}(t,y,b,v,d,s.epochs,s.verbose,x,_,m,s.shuffle,w,s.initialEpoch)}finally{t.isTraining=!1,l_(i,e),l_(o,n),l_(u,a),l_(c,l),null!=h&&sc(h)}}(this,t,e,n)}async fitDataset(t,e){return async function(t,e,n){const s=null!=n.batchesPerEpoch;if(r.assert(null!=t.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),r.assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),r.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),r.assert(!s||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),r.assert(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=null!=n.validationData;let o,a;if(i)if(n_(n.validationData))r.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const t=function(t){if(3===t.length)throw new sb("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}(n.validationData);o=t.xs,a=t.ys}const l=t.makeTrainFunction(),u=t.getDedupedMetricsNames();let c;c=i?u.slice().concat(u.map(t=>"val_"+t)):u.slice();const h=dv(n.callbacks,n.yieldEvery),d=null==n.verbose?1:n.verbose,{callbackList:p,history:f}=fv(h,d,n.epochs,null,null,function(t,e){let n=null;return null!=e.batchesPerEpoch?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}(e,n),null,i,c);p.setModel(t),t.history=f,await p.onTrainBegin(),t.stopTraining_=!1;let m=null==n.initialEpoch?0:n.initialEpoch,g=await e.iterator();for(;m<n.epochs;){const r={};await p.onEpochBegin(m);let c=0,h=0;for(s||(g=await e.iterator());!s||c<n.batchesPerEpoch;){const e=await g.next();if(s&&e.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${c} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, `+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=e.value){const{xs:r,ys:s}=t_(t,e.value),i={};i.batch=h,i.size=r[0].shape[0],await p.onBatchBegin(h,i);const o=[];if(null!=n.classWeight){const e=Xv(n.classWeight,t.outputNames);for(let t=0;t<e.length;++t)o.push(await Jv(s[t],null,e[t]))}const a=r.concat(s).concat(o),d=l(a);sc(a);for(let t=0;t<u.length;++t){const e=d[t];i[u[t]]=e,ic(e)}await p.onBatchEnd(h,i),iv(i),h++,c++}if(s?c>=n.batchesPerEpoch:e.done){if(i){let e;e=n_(n.validationData)?cb(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):cb(t.evaluate(o,a,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<t.metricsNames.length;++n)r[`val_${t.metricsNames[n]}`]=e[n]}break}if(t.stopTraining_)break}if(await p.onEpochEnd(m,r),m++,t.stopTraining_)break}return await p.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}(this,t,e)}async trainOnBatch(t,e){const n=await this.standardizeUserData(t,e),r=n[0],s=n[1],i=this.makeTrainFunction()(r.concat(s)),o=[];for(const a of i){const t=await a.data();o.push(t[0])}return sc(i),ub(o)}getNamedWeights(t){const e=[],n=null!=t&&t.trainableOnly,r=n?this.trainableWeights:this.weights,s=this.getWeights(n);for(let i=0;i<r.length;++i)n&&!r[i].trainable||e.push({name:r[i].originalName,tensor:s[i]});return e}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(0===t.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const e=nc().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=e-nc().numTensors}return t}getLossIdentifiers(){let t;if("string"==typeof this.loss)t=hb(this.loss);else if(Array.isArray(this.loss)){for(const t of this.loss)if("string"!=typeof t)throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(t=>hb(t))}else{const e=Object.keys(this.loss);t={};const n=this.loss;for(const r of e){if("string"!=typeof n[r])throw new Error("Serialization of non-string loss is not supported.");t[r]=hb(n[r])}}return t}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[hb(Dv(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>hb(Dv(t)));{const t={};for(const e in this.metrics)t[e]=hb(Dv(this.metrics[e]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(null!=t.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=t.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=t.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const e=mv(Bv(t.optimizer_config));let n,r;if("string"==typeof t.loss)n=db(t.loss);else if(Array.isArray(t.loss))n=t.loss.map(t=>db(t));else if(null!=t.loss){n={};for(const e in t.loss)n[e]=db(t.loss[e])}if(Array.isArray(t.metrics))r=t.metrics.map(t=>db(t));else if(null!=t.metrics){r={};for(const e in t.metrics)r[e]=db(t.metrics[e])}this.compile({loss:n,metrics:r,optimizer:e})}async save(t,e){if("string"==typeof t){const e=o.getSaveHandlers(t);if(0===e.length)throw new rb(`Cannot find any save handlers for URL '${t}'`);if(e.length>1)throw new rb(`Found more than one (${e.length}) save handlers for URL '${t}'`);t=e[0]}if(null==t.save)throw new rb("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await o.encodeWeights(this.getNamedWeights(e)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v3.7.0",convertedBy:null};if(null!=e&&e.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const t="optimizer",{data:e,specs:s}=await o.encodeWeights(await this.optimizer.getWeights(),t);n.specs.push(...s),n.data=o.concatenateArrayBuffers([n.data,e])}return null!=this.userDefinedMetadata&&(Pv(this.userDefinedMetadata,this.name,!0),r.userDefinedMetadata=this.userDefinedMetadata),r.weightData=n.data,r.weightSpecs=n.specs,t.save(r)}setUserDefinedMetadata(t){Pv(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}p_.className="Model",u.registerClass(p_);class f_ extends p_{}f_.className="Functional",u.registerClass(f_);class m_ extends p_{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=null!=t.name?t.name:By("sequential_"),null!=t.layers)for(const e of t.layers)this.add(e)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(t=>t<0))throw new rb(`Negative dimension size caused by adding layer ${t.name} with input shape [${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){const e=t instanceof m_||t instanceof p_;let n;if(e){if(n=t,1!==n.outputs.length)throw new rb("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new rb("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===t.inboundNodes.length){if(null==t.batchInputShape)throw new rb("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const e=function(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new rb("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;null!=t.shape&&null==e&&(e=[null].concat(t.shape));let n=t.dtype;return null==n&&(n="float32"),new rv({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(e)}if(e)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==t.inboundNodes.length)throw new rb(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(1!==t.inboundNodes[0].outputTensors.length)throw new rb("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=nv(this.outputs[0])}this.inboundNodes=[],new Qy({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:ob(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs[0].shape})}else{const e=t.apply(this.outputs[0]);if(Array.isArray(e))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[e],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,e){return null==this.model&&this.build(),this.model.call(t,e)}build(t){if(Hy(t),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new p_({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,e,n=console.log){this.built||this.build(),super.summary(t,e,n)}setWeights(t){null==this.model&&this.build(),this.model.setWeights(t)}evaluate(t,e,n={}){if(!this.built)throw new nb("The model needs to be compiled before being used.");return this.model.evaluate(t,e,n)}async evaluateDataset(t,e){if(!this.built)throw new nb("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,e)}predict(t,e={}){return null==this.model&&this.build(),this.model.predict(t,e)}predictOnBatch(t){return null==this.model&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,e,n={}){if(!this.built)throw new nb("The model needs to be compiled before being used.");return this.model.fit(t,e,n)}async fitDataset(t,e){if(!this.built)throw new nb("The model needs to be compiled before being used.");return this.model.fitDataset(t,e)}async trainOnBatch(t,e){return this.model.trainOnBatch(t,e)}static fromConfig(t,e,n={},s=!1){let i,o={};if(e instanceof Array){if(null==e[0].className||"Merge"===e[0].className)throw new rb("Legacy serialization format not supported yet.");i=e}else r.assert(null!=e.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=e.layers,delete e.layers,o=e;const a=new t(o);if(!(a instanceof m_))throw new sb(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const r of i){const t=mv(r,void 0,s);s&&t.setFastWeightInitDuringBuild(!0),a.add(t)}return a}set stopTraining(t){if(null==this.model)throw new rb("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(null==this.model)throw new rb("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const e of this.layers){const n={};n.className=e.getClassName(),n.config=e.getConfig(),t.push(n)}return{name:this.name,layers:t}}}m_.className="Sequential",u.registerClass(m_);class g_ extends u.Serializable{getConfig(){return{}}}class b_ extends g_{apply(t,e=1){return function(t,e=1){if(1!==e)throw new sb(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Xc(t)}(t,e)}}b_.className="elu",u.registerClass(b_);class y_ extends g_{apply(t){return Yh(t)}}y_.className="selu",u.registerClass(y_);class v_ extends g_{apply(t){return Zh(t)}}v_.className="relu",u.registerClass(v_);class __ extends g_{apply(t){return rc(()=>kh(6,Zh(t)))}}__.className="relu6",u.registerClass(__);class w_ extends g_{apply(t){return t}}w_.className="linear",u.registerClass(w_);class x_ extends g_{apply(t){return Jh(t)}}x_.className="sigmoid",u.registerClass(x_);class k_ extends g_{apply(t){return function(t){return rc(()=>{const e=hc(.5,fh(.2,t));return Pc(e,0,1)})}(t)}}k_.className="hardSigmoid",u.registerClass(k_);class S_ extends g_{apply(t){return id(t)}}S_.className="softplus",u.registerClass(S_);class C_ extends g_{apply(t){return function(t){return rc(()=>Yc(t,cc(t).add(1)))}(t)}}C_.className="softsign",u.registerClass(C_);class I_ extends g_{apply(t){return cd(t)}}I_.className="tanh",u.registerClass(I_);class E_ extends g_{apply(t,e=-1){return sd(t,e)}}E_.className="softmax",u.registerClass(E_);class O_ extends g_{apply(t,e=-1){return bh(t,e)}}O_.className="logSoftmax",u.registerClass(O_);class T_ extends g_{apply(t,e=1){return rc(()=>Jh(t.mul(e)).mul(t))}}T_.className="swish",u.registerClass(T_);class N_ extends g_{apply(t){return rc(()=>fh(t,cd(id(t))))}}function A_(t){return t.getClassName()}function R_(t,e={}){return gb(t,u.SerializationMap.getMap().classNameMap,e,"activation")}function F_(t){if(null==t)return R_({className:"linear",config:{}});if("string"==typeof t){const e={};return e.className=t,e.config={},R_(e)}return t instanceof g_?t:R_(t)}N_.className="mish",u.registerClass(N_);class D_ extends u.Serializable{}class P_ extends D_{constructor(t){super(),function(t){if(null!=t&&"object"!=typeof t)throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}(t),this.l1=null==t||null==t.l1?.01:t.l1,this.l2=null==t||null==t.l2?.01:t.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(t){return rc(()=>{let e=Mh([1]);return this.hasL1&&(e=hc(e,gh(fh(this.l1,cc(t))))),this.hasL2&&(e=hc(e,gh(fh(this.l2,hy(t))))),e.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,e){return new t({l1:e.l1,l2:e.l2})}}P_.className="L1L2",u.registerClass(P_);const $_={l1l2:"L1L2"};function M_(t){return fb(t)}function L_(t,e={}){return gb(t,u.SerializationMap.getMap().classNameMap,e,"regularizer")}function j_(t){return null==t?null:"string"==typeof t?L_({className:t in $_?$_[t]:t,config:{}}):t instanceof D_?t:L_(t)}class z_ extends ev{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,null!=t&&(this.maxValue=t.maxValue)}call(t,e){t=Wy(t);let n=Zh(t);return null!=this.maxValue&&(n=Pc(n,0,this.maxValue)),n}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},e=super.getConfig();return Object.assign(t,e),t}}z_.className="ReLU",u.registerClass(z_);class B_ extends ev{constructor(t){super(null==t?{}:t),this.DEFAULT_ALPHA=.3,null==t&&(t={}),this.alpha=null==t.alpha?this.DEFAULT_ALPHA:t.alpha}call(t,e){const n=Wy(t);return ch(n,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}}B_.className="LeakyReLU",u.registerClass(B_);class V_ extends ev{constructor(t){if(super(null==t?{}:t),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==t&&(t={}),this.supportsMasking=!0,this.alphaInitializer=My(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=j_(t.alphaRegularizer),this.alphaConstraint=Db(t.alphaConstraint),null==t.sharedAxes)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else{if("number"!=typeof t.sharedAxes)throw new rb(`Expected sharedAxes to be a number or an array of numbers, but got ${t.sharedAxes}`);this.sharedAxes=[t.sharedAxes]}}build(t){const e=(t=Hy(t)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)e[r-1]=1;this.alpha=this.addWeight("alpha",e,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<t.length;++r)n[r]=t[r];this.inputSpec=[new Yy({ndim:t.length,axes:n})],this.built=!0}call(t,e){return t=Wy(t),Vh(t,this.alpha.read())}getConfig(){const t={alphaInitializer:$y(this.alphaInitializer),alphaRegularizer:M_(this.alphaRegularizer),alphaConstraint:Rb(this.alphaConstraint),sharedAxes:this.sharedAxes},e=super.getConfig();return Object.assign(t,e),t}}V_.className="PReLU",u.registerClass(V_);class U_ extends ev{constructor(t){if(super(null==t?{}:t),this.DEFAULT_ALPHA=1,null==t&&(t={}),null!=t.alpha&&t.alpha!==this.DEFAULT_ALPHA)throw new sb(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==t.alpha?this.DEFAULT_ALPHA:t.alpha}call(t,e){const n=Wy(t);return Xc(n)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}}U_.className="ELU",u.registerClass(U_);class W_ extends ev{constructor(t){super(null==t?{}:t),this.DEFAULT_THETA=1,null==t&&(t={}),this.theta=null==t.theta?this.DEFAULT_THETA:t.theta}call(t,e){const n=Wy(t);return n.mul(ty(n.greater(this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},e=super.getConfig();return Object.assign(t,e),t}}W_.className="ThresholdedReLU",u.registerClass(W_);class H_ extends ev{constructor(t){super(null==t?{}:t),this.DEFAULT_AXIS=1,null==t&&(t={}),this.softmax=(new E_).apply,this.axis=null==t.axis?this.DEFAULT_AXIS:t.axis}call(t,e){const n=Wy(t);return this.softmax(n,this.axis)}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}function G_(t,e,n){if("number"==typeof t)return ob(t,e);if(t.length!==e)throw new rb(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let s=0;s<e;++s){const i=t[s];if((r=i)!==parseInt(r.toString(),10))throw new rb(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t;var r}function q_(t,e,n,r,s=1){if(null==t)return t;let i;return i="same"===n?t:t-(e+(e-1)*(s-1))+1,Math.floor((i+r-1)/r)}function Z_(t,e,n,r){if(null==t)return null;if("valid"===r)t=t*e+Jb([n-e,0]);else{if("same"!==r)throw new rb(`Unsupport padding mode: ${r}.`);t*=e}return t}function K_(t,e){return rc(()=>(Bb(e),"channelsFirst"===e?yd(t,[0,2,3,1]):t))}function Y_(t,e){return rc(()=>(Bb(e),"channelsFirst"===e?yd(t,[0,2,3,4,1]):t))}function X_(t,e,n,r=[1,1],s="valid",i,o,a=null){return rc(()=>{if(null==i&&(i="channelsLast"),Bb(i),3!==t.rank&&4!==t.rank)throw new rb(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(3!==e.rank&&4!==e.rank)throw new rb(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=K_(t,i);if("causal"===s)throw new sb("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=c.conv2d({x:l,filter:e,strides:r,pad:"same"===s?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),"channelsFirst"===i&&(l=yd(l,[0,3,1,2])),l})}H_.className="Softmax",u.registerClass(H_);class J_ extends ev{constructor(t,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",J_.verifyArgs(e),this.rank=t,xb(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new sb(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=G_(e.kernelSize,t,"kernelSize"),this.strides=G_(null==e.strides?1:e.strides,t,"strides"),this.padding=null==e.padding?"valid":e.padding,Vb(this.padding),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Bb(this.dataFormat),this.activation=F_(e.activation),this.useBias=null==e.useBias||e.useBias,this.biasInitializer=My(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Db(e.biasConstraint),this.biasRegularizer=j_(e.biasRegularizer),this.activityRegularizer=j_(e.activityRegularizer),this.dilationRate=G_(null==e.dilationRate?1:e.dilationRate,t,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new rb(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new rb(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new rb(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(t){if(ab("kernelSize"in t,"required key 'kernelSize' not in config"),"number"!=typeof t.kernelSize&&!wb(t.kernelSize,"number",1,3))throw new rb(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:A_(this.activation),useBias:this.useBias,biasInitializer:$y(this.biasInitializer),biasRegularizer:M_(this.biasRegularizer),activityRegularizer:M_(this.activityRegularizer),biasConstraint:Rb(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}class Q_ extends J_{constructor(t,e){super(t,e),this.kernel=null,Q_.verifyArgs(e),this.filters=e.filters,xb(this.filters,"filters"),this.kernelInitializer=My(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Db(e.kernelConstraint),this.kernelRegularizer=j_(e.kernelRegularizer)}build(t){t=Hy(t);const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new rb(`The channel dimension of the input should be defined. Found ${t[e]}`);const n=t[e],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:n}}],this.built=!0}call(t,e){return rc(()=>{let e;t=Wy(t);const n=null==this.bias?null:this.bias.read(),r=Sb(this.activation.getClassName());if(null!=r&&2===this.rank)e=X_(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)e=function(t,e,n,r=1,s="valid",i,o=1){return rc(()=>{if(null==i&&(i="channelsLast"),Bb(i),3!==t.shape.length)throw new rb(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(3!==e.shape.length)throw new rb(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new rb(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if("channelsFirst"===i&&(t=yd(t,[0,2,1])),"causal"===s)throw new sb("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=Vc(t,e,r,"same"===s?"same":"valid","NWC",o);return null!=n&&(a=py(a,n)),a})}(t,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)e=X_(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new sb("convolutions greater than 3D are not implemented yet.");e=function(t,e,n,r=[1,1,1],s="valid",i,o){return rc(()=>{if(null==i&&(i="channelsLast"),Bb(i),4!==t.rank&&5!==t.rank)throw new rb(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(4!==e.rank&&5!==e.rank)throw new rb(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=Y_(t,i);if("causal"===s)throw new sb("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=Hc(a,e,r,"same"===s?"same":"valid","NDHWC",o),null!=n&&(a=py(a,n)),"channelsFirst"===i&&(a=yd(a,[0,4,1,2,3])),a})}(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(e=this.activation.apply(e))}return e})}computeOutputShape(t){t=Hy(t);const e=[],n="channelsLast"===this.dataFormat?t.slice(1,t.length-1):t.slice(2);for(let s=0;s<n.length;++s){const t=q_(n[s],this.kernelSize[s],this.padding,this.strides[s],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[s]);e.push(t)}let r=[t[0]];return"channelsLast"===this.dataFormat?(r=r.concat(e),r.push(this.filters)):(r.push(this.filters),r=r.concat(e)),r}getConfig(){const t={filters:this.filters,kernelInitializer:$y(this.kernelInitializer),kernelRegularizer:M_(this.kernelRegularizer),kernelConstraint:Rb(this.kernelConstraint)},e=super.getConfig();return Object.assign(t,e),t}static verifyArgs(t){if(!("filters"in t)||"number"!=typeof t.filters||t.filters<1)throw new rb(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}}class tw extends Q_{constructor(t){super(2,t),tw.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if("number"!=typeof t.kernelSize&&!wb(t.kernelSize,"number",1,2))throw new rb(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}tw.className="Conv2D",u.registerClass(tw);class ew extends Q_{constructor(t){super(3,t),ew.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if("number"!=typeof t.kernelSize&&(!Array.isArray(t.kernelSize)||1!==t.kernelSize.length&&3!==t.kernelSize.length))throw new rb(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}ew.className="Conv3D",u.registerClass(ew);class nw extends tw{constructor(t){if(super(t),this.inputSpec=[new Yy({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new rb(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(4!==(t=Hy(t)).length)throw new rb("Input should have rank 4; Received input shape: "+JSON.stringify(t));const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new rb("The channel dimension of the inputs should be defined. Found `None`.");const n=t[e],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Yy({ndim:4,axes:{[e]:n}})],this.built=!0}call(t,e){return rc(()=>{let e=Wy(t);if(4!==e.shape.length)throw new rb(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${e.shape.length}`);const n=e.shape;let r,s;"channelsFirst"===this.dataFormat?(r=2,s=3):(r=1,s=2);const i=n[s],o=this.kernelSize[1],a=this.strides[1],l=[n[0],Z_(n[r],this.strides[0],this.kernelSize[0],this.padding),Z_(i,a,o,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(e=yd(e,[0,2,3,1]));let u=Wc(e,this.kernel.read(),l,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(u=yd(u,[0,3,1,2])),null!=this.bias&&(u=py(u,this.bias.read(),this.dataFormat)),null!=this.activation&&(u=this.activation.apply(u)),u})}computeOutputShape(t){const e=(t=Hy(t)).slice();let n,r,s;"channelsFirst"===this.dataFormat?(n=1,r=2,s=3):(n=3,r=1,s=2);const i=this.kernelSize[0],o=this.kernelSize[1],a=this.strides[0],l=this.strides[1];return e[n]=this.filters,e[r]=Z_(e[r],a,i,this.padding),e[s]=Z_(e[s],l,o,this.padding),e}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}nw.className="Conv2DTranspose",u.registerClass(nw);class rw extends ew{constructor(t){if(super(t),this.inputSpec=[new Yy({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new rb(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(5!==(t=Hy(t)).length)throw new rb("Input should have rank 5; Received input shape: "+JSON.stringify(t));const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new rb("The channel dimension of the inputs should be defined. Found `None`.");const n=t[e],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Yy({ndim:5,axes:{[e]:n}})],this.built=!0}call(t,e){return rc(()=>{let e=Wy(t);if(5!==e.shape.length)throw new rb(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${e.shape.length}`);const n=e.shape;let r,s,i;"channelsFirst"===this.dataFormat?(i=2,r=3,s=4):(i=1,r=2,s=3);const o=n[r],a=n[s],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[1],h=this.strides[2],d=[n[0],Z_(n[i],this.strides[0],this.kernelSize[0],this.padding),Z_(o,c,l,this.padding),Z_(a,h,u,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(e=yd(e,[0,2,3,4,1]));let p=qc(e,this.kernel.read(),d,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=yd(p,[0,4,1,2,3])),null!==this.bias&&(p=py(p,this.bias.read(),this.dataFormat)),null!==this.activation&&(p=this.activation.apply(p)),p})}computeOutputShape(t){const e=(t=Hy(t)).slice();let n,r,s,i;"channelsFirst"===this.dataFormat?(n=1,r=2,s=3,i=4):(n=4,r=1,s=2,i=3);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],c=this.strides[1],h=this.strides[2];return e[n]=this.filters,e[r]=Z_(e[r],u,o,this.padding),e[s]=Z_(e[s],c,a,this.padding),e[i]=Z_(e[i],h,l,this.padding),e}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}rw.className="Conv3DTranspose",u.registerClass(rw);class sw extends Q_{constructor(t,e){if(super(t,e),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==e.filters)throw new rb("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=e.kernelInitializer||null!=e.kernelRegularizer||null!=e.kernelConstraint)throw new rb("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=e.padding&&"same"!==e.padding&&"valid"!==e.padding)throw new rb(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(e.padding)}`);this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=My(e.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=j_(e.depthwiseRegularizer),this.depthwiseConstraint=Db(e.depthwiseConstraint),this.pointwiseInitializer=My(e.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=j_(e.pointwiseRegularizer),this.pointwiseConstraint=Db(e.pointwiseConstraint)}build(t){if((t=Hy(t)).length<this.rank+2)throw new rb(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(t)}`);const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e]||t[e]<0)throw new rb(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(t[e])}`);const n=t[e],r=this.kernelSize.concat([n,this.depthMultiplier]),s=[];for(let o=0;o<this.rank;++o)s.push(1);s.push(n*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):null,this.inputSpec=[new Yy({ndim:this.rank+2,axes:{[e]:n}})],this.built=!0}call(t,e){return rc(()=>{let e;if(t=Wy(t),1===this.rank)throw new sb("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(t=yd(t,[0,2,3,1])),e=Xh(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(e=py(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),"channelsFirst"===this.dataFormat&&(e=yd(e,[0,3,1,2])),e})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=$y(this.depthwiseInitializer),t.pointwiseInitializer=$y(this.pointwiseInitializer),t.depthwiseRegularizer=M_(this.depthwiseRegularizer),t.pointwiseRegularizer=M_(this.pointwiseRegularizer),t.depthwiseConstraint=Rb(this.depthwiseConstraint),t.pointwiseConstraint=Rb(this.pointwiseConstraint),t}}sw.className="SeparableConv";class iw extends sw{constructor(t){super(2,t)}}iw.className="SeparableConv2D",u.registerClass(iw);class ow extends Q_{constructor(t){super(1,t),ow.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if("number"!=typeof t.kernelSize&&!wb(t.kernelSize,"number",1,1))throw new rb(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}ow.className="Conv1D",u.registerClass(ow);class aw extends ev{constructor(t){super(t),this.cropping="number"==typeof t.cropping?[[t.cropping,t.cropping],[t.cropping,t.cropping]]:"number"==typeof t.cropping[0]?[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:t.cropping,this.dataFormat=void 0===t.dataFormat?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,e){return rc(()=>{if(t=Wy(t),"channelsLast"===this.dataFormat){const e=sy(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return sy(e,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const e=sy(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return sy(e,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}aw.className="Cropping2D",u.registerClass(aw);class lw extends ev{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==t.size?this.DEFAULT_SIZE:t.size,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Bb(this.dataFormat),this.interpolation=null==t.interpolation?"nearest":t.interpolation,_b($b,"InterpolationFormat",this.interpolation)}computeOutputShape(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],null==t[2]?null:this.size[0]*t[2],null==t[3]?null:this.size[1]*t[3]]:[t[0],null==t[1]?null:this.size[0]*t[1],null==t[2]?null:this.size[1]*t[2],t[3]]}call(t,e){return rc(()=>{let e=Wy(t);const n=e.shape;if("channelsFirst"===this.dataFormat){e=yd(e,[0,2,3,1]);const t=this.size[0]*n[2],r=this.size[1]*n[3],s="nearest"===this.interpolation?e.resizeNearestNeighbor([t,r]):e.resizeBilinear([t,r]);return yd(s,[0,3,1,2])}{const t=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?e.resizeNearestNeighbor([t,r]):e.resizeBilinear([t,r])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}lw.className="UpSampling2D",u.registerClass(lw);class uw extends J_{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=My(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Db(t.depthwiseConstraint),this.depthwiseRegularizer=j_(t.depthwiseRegularizer)}build(t){if((t=Hy(t)).length<4)throw new rb(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const e="channelsFirst"===this.dataFormat?1:3;if(null==t[e]||t[e]<0)throw new rb(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[e]}).`);const n=t[e];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(t,e){return rc(()=>{let e=function(t,e,n=[1,1],r="valid",s,i){return rc(()=>{null==s&&(s="channelsLast"),Bb(s);let o=K_(t,s);if(4!==t.rank)throw new rb(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(4!==e.rank)throw new rb(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=Zc(o,e,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===s&&(o=yd(o,[0,3,1,2])),o})}(t=Wy(t),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(e=py(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),e})}computeOutputShape(t){t=Hy(t);const e="channelsFirst"===this.dataFormat?t[3]:t[2],n="channelsFirst"===this.dataFormat?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,r=q_("channelsFirst"===this.dataFormat?t[2]:t[1],this.kernelSize[0],this.padding,this.strides[0]),s=q_(e,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[t[0],n,r,s]:[t[0],r,s,n]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=$y(this.depthwiseInitializer),t.depthwiseRegularizer=M_(this.depthwiseRegularizer),t.depthwiseConstraint=Rb(this.depthwiseRegularizer),t}}function cw(t,e,n,r){if(Array.isArray(t)){if(null!=e||null!=n)throw new rb("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(t){return null==t||Array.isArray(t)?t:[t]}return{inputs:t,initialState:e=s(e),constants:n=s(n)}}function hw(t,e,n,r=!1,s,i,o=!1,a=!1){return rc(()=>{const l=e.shape.length;if(l<3)throw new rb(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Qb(2,l));if(e=yd(e,u),null!=i)throw new sb("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=s&&((s=s.asType("bool").asType("float32")).rank===l-1&&(s=nh(s,-1)),s=yd(s,u)),r&&(e=Kh(e,0),null!=s&&(s=Kh(s,0)));const c=[];let h,d=n;const p=e.shape[0],f=fd(e);let m,g;null!=s&&(m=fd(s));for(let e=0;e<p;++e){const n=f[e],r=rc(()=>t(n,d));if(null==s)h=r[0],d=r[1];else{const t=rc(()=>{const t=m[e],n=jh(t).sub(t);return{output:r[0].mul(t).add(d[0].mul(n)),newStates:d.map((e,s)=>r[1][s].mul(t).add(e.mul(n)))}});h=t.output,d=t.newStates}a&&c.push(h)}return a&&(g=ud(c,1)),[h,g,d]})}uw.className="DepthwiseConv2D",u.registerClass(uw);class dw extends ev{constructor(t){let e;if(super(t),null==t.cell)throw new rb("cell property is missing for the constructor of RNN.");if(e=Array.isArray(t.cell)?new _w({cells:t.cell}):t.cell,null==e.stateSize)throw new rb("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=e,this.returnSequences=null!=t.returnSequences&&t.returnSequences,this.returnState=null!=t.returnState&&t.returnState,this.goBackwards=null!=t.goBackwards&&t.goBackwards,this._stateful=null!=t.stateful&&t.stateful,this.unroll=null!=t.unroll&&t.unroll,this.supportsMasking=!0,this.inputSpec=[new Yy({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){return null==this.states_?Qb(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(t=>null):this.states_}setStates(t){this.states_=t}computeOutputShape(t){Vy(t)&&(t=t[0]),t=t;let e=this.cell.stateSize;Array.isArray(e)||(e=[e]);const n=e[0];let r;if(r=this.returnSequences?[t[0],t[1],n]:[t[0],n],this.returnState){const n=[];for(const r of e)n.push([t[0],r]);return[r].concat(n)}return r}computeMask(t,e){return rc(()=>{Array.isArray(e)&&(e=e[0]);const t=this.returnSequences?e:null;if(this.returnState){const e=this.states.map(t=>null);return[t].concat(e)}return t})}get states(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,e=[];for(let n=0;n<t;++n)e.push(null);return e}return this.states_}set states(t){this.states_=t}build(t){if(null!=this.numConstants)throw new sb("Constants support is not implemented in RNN yet.");Vy(t)&&(t=t[0]),t=t;const e=this.stateful?t[0]:null,n=t.slice(2);this.inputSpec[0]=new Yy({shape:[e,null,...n]});const s=[t[0]].concat(t.slice(2));let i;if(this.cell.build(s),i=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!r.arraysEqual(this.stateSpec.map(t=>t.shape[t.shape.length-1]),i))throw new rb(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(t=>new Yy({shape:[null,t]}));this.stateful&&this.resetStates()}resetStates(t,e=!1){rc(()=>{if(!this.stateful)throw new eb("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new rb("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(t=>Mh([n,t])):[Mh([n,this.cell.stateSize])];else if(null==t)sc(this.states_),null!=this.keptStates&&(sc(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(t=>Mh([n,t])):this.states_[0]=Mh([n,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new rb(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);!0===e?this.keptStates.push(this.states_.slice()):sc(this.states_);for(let e=0;e<this.states_.length;++e){const s=t[e],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[e]:this.cell.stateSize,o=[n,i];if(!r.arraysEqual(s.shape,o))throw new rb(`State ${e} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${s.shape}`);this.states_[e]=s}}this.states_=this.states_.map(t=>ic(t.clone()))})}apply(t,e){let n=null==e?null:e.initialState,r=null==e?null:e.constants;null==e&&(e={});const s=cw(t,n,r,this.numConstants);t=s.inputs,n=s.initialState,r=s.constants;let i=[],o=[];if(null!=n){e.initialState=n,i=i.concat(n),this.stateSpec=[];for(const t of n)this.stateSpec.push(new Yy({shape:t.shape}));o=o.concat(this.stateSpec)}if(null!=r&&(e.constants=r,i=i.concat(r),this.numConstants=r.length),i[0]instanceof Xy){const n=[t].concat(i),r=this.inputSpec.concat(o),s=this.inputSpec;this.inputSpec=r;const a=super.apply(n,e);return this.inputSpec=s,a}return super.apply(t,e)}call(t,e){return rc(()=>{const n=null==e?null:e.mask,r=null==e?null:e.training;let s=null==e?null:e.initialState;t=Wy(t),null==s&&(s=this.stateful?this.states_:this.getInitialState(t));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==i)throw new rb(`RNN Layer has ${i} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:r},a=hw((t,e)=>{const n=this.cell.call([t].concat(e),o);return[n[0],n.slice(1)]},t,s,this.goBackwards,n,null,this.unroll,this.returnSequences),l=a[0],u=a[1],c=a[2];this.stateful&&this.resetStates(c,r);const h=this.returnSequences?u:l;return this.returnState?[h].concat(c):h})}getInitialState(t){return rc(()=>{let e=Mh(t.shape);return e=gh(e,[1,2]),e=ey(e),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(t=>t>1?ay(e,[1,t]):e):this.cell.stateSize>1?[ay(e,[1,this.cell.stateSize])]:[e]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(e.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===dw.className&&(e.cell={className:this.cell.getClassName(),config:n}),Object.assign({},n,t,e)}static fromConfig(t,e,n={}){const r=mv(e.cell,n);return new t(Object.assign(e,{cell:r}))}}dw.className="RNN",u.registerClass(dw);class pw extends ev{}class fw extends pw{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,xb(this.units,"units"),this.activation=F_(null==t.activation?this.DEFAULT_ACTIVATION:t.activation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=My(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=My(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=My(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=j_(t.kernelRegularizer),this.recurrentRegularizer=j_(t.recurrentRegularizer),this.biasRegularizer=j_(t.biasRegularizer),this.kernelConstraint=Db(t.kernelConstraint),this.recurrentConstraint=Db(t.recurrentConstraint),this.biasConstraint=Db(t.biasConstraint),this.dropout=Xb([1,Jb([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=Xb([1,Jb([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Hy(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(t,e){return rc(()=>{if(2!==(t=t).length)throw new rb(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let n=t[1];t=t[0];const r=null!=e.training&&e.training;let s;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=ww({ones:()=>jh(t),rate:this.dropout,training:r})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=ww({ones:()=>jh(n),rate:this.recurrentDropout,training:r}));const i=this.dropoutMask,o=this.recurrentDropoutMask;s=uy(null!=i?fh(t,i):t,this.kernel.read()),null!=this.bias&&(s=py(s,this.bias.read())),null!=o&&(n=fh(n,o));let a=hc(s,uy(n,this.recurrentKernel.read()));return null!=this.activation&&(a=this.activation.apply(a)),[a,a]})}getConfig(){const t=super.getConfig(),e={units:this.units,activation:A_(this.activation),useBias:this.useBias,kernelInitializer:$y(this.kernelInitializer),recurrentInitializer:$y(this.recurrentInitializer),biasInitializer:$y(this.biasInitializer),kernelRegularizer:M_(this.kernelRegularizer),recurrentRegularizer:M_(this.recurrentRegularizer),biasRegularizer:M_(this.biasRegularizer),activityRegularizer:M_(this.activityRegularizer),kernelConstraint:Rb(this.kernelConstraint),recurrentConstraint:Rb(this.recurrentConstraint),biasConstraint:Rb(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},t,e)}}fw.className="SimpleRNNCell",u.registerClass(fw);class mw extends dw{constructor(t){t.cell=new fw(t),super(t)}call(t,e){return rc(()=>(null!=this.cell.dropoutMask&&(sc(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(sc(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(t,{mask:null==e?null:e.mask,training:null==e?null:e.training,initialState:null==e?null:e.initialState})))}static fromConfig(t,e){return new t(e)}}mw.className="SimpleRNN",u.registerClass(mw);class gw extends pw{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new rb("GRUCell does not support reset_after parameter set to true.");this.units=t.units,xb(this.units,"units"),this.activation=F_(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=F_(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=My(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=My(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=My(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=j_(t.kernelRegularizer),this.recurrentRegularizer=j_(t.recurrentRegularizer),this.biasRegularizer=j_(t.biasRegularizer),this.kernelConstraint=Db(t.kernelConstraint),this.recurrentConstraint=Db(t.recurrentConstraint),this.biasConstraint=Db(t.biasConstraint),this.dropout=Xb([1,Jb([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=Xb([1,Jb([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Hy(t),this.kernel=this.addWeight("kernel",[t[t.length-1],3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(t,e){return rc(()=>{if(2!==(t=t).length)throw new rb(`GRUCell expects 2 input Tensors (inputs, h, c), got ${t.length}.`);const n=null!=e.training&&e.training;let r=t[1];t=t[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=ww({ones:()=>jh(t),rate:this.dropout,training:n,count:3})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=ww({ones:()=>jh(r),rate:this.recurrentDropout,training:n,count:3}));const s=this.recurrentDropoutMask;let i,o,a;0<this.dropout&&this.dropout<1&&(t=fh(t,this.dropoutMask[0]));let l=uy(t,this.kernel.read());this.useBias&&(l=py(l,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=fh(r,s[0]));const u=this.recurrentKernel.read(),[c,h]=od(u,[2*this.units,this.units],u.rank-1),d=uy(r,c),[p,f,m]=od(l,3,l.rank-1),[g,b]=od(d,2,d.rank-1);i=this.recurrentActivation.apply(hc(p,g)),o=this.recurrentActivation.apply(hc(f,b));const y=uy(fh(o,r),h);a=this.activation.apply(hc(m,y));const v=hc(fh(i,r),fh(hc(1,Dh(i)),a));return[v,v]})}getConfig(){const t=super.getConfig(),e={units:this.units,activation:A_(this.activation),recurrentActivation:A_(this.recurrentActivation),useBias:this.useBias,kernelInitializer:$y(this.kernelInitializer),recurrentInitializer:$y(this.recurrentInitializer),biasInitializer:$y(this.biasInitializer),kernelRegularizer:M_(this.kernelRegularizer),recurrentRegularizer:M_(this.recurrentRegularizer),biasRegularizer:M_(this.biasRegularizer),activityRegularizer:M_(this.activityRegularizer),kernelConstraint:Rb(this.kernelConstraint),recurrentConstraint:Rb(this.recurrentConstraint),biasConstraint:Rb(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},t,e)}}gw.className="GRUCell",u.registerClass(gw);class bw extends dw{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new gw(t),super(t)}call(t,e){return rc(()=>(null!=this.cell.dropoutMask&&(sc(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(sc(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(t,{mask:null==e?null:e.mask,training:null==e?null:e.training,initialState:null==e?null:e.initialState})))}static fromConfig(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}bw.className="GRU",u.registerClass(bw);class yw extends pw{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,xb(this.units,"units"),this.activation=F_(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=F_(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=My(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=My(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=My(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=j_(t.kernelRegularizer),this.recurrentRegularizer=j_(t.recurrentRegularizer),this.biasRegularizer=j_(t.biasRegularizer),this.kernelConstraint=Db(t.kernelConstraint),this.recurrentConstraint=Db(t.recurrentConstraint),this.biasConstraint=Db(t.biasConstraint),this.dropout=Xb([1,Jb([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=Xb([1,Jb([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var e;let n;if(t=Hy(t),this.kernel=this.addWeight("kernel",[t[t.length-1],4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const t=this.biasInitializer,r=this.units;n=new((e=class extends yy{apply(e,n){const s=t.apply([r]),i=(new _y).apply([r]),o=t.apply([2*r]);return oy(oy(s,i),o)}}).className="CustomInit",e)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,e){return rc(()=>{const n=null!=e.training&&e.training;if(3!==(t=t).length)throw new rb(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);let r=t[1];const s=t[2];t=t[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=ww({ones:()=>jh(t),rate:this.dropout,training:n,count:4})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=ww({ones:()=>jh(r),rate:this.recurrentDropout,training:n,count:4}));const i=this.recurrentDropoutMask;let o,a,l,u;0<this.dropout&&this.dropout<1&&(t=fh(t,this.dropoutMask[0]));let c=uy(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=fh(r,i[0])),c=hc(c,uy(r,this.recurrentKernel.read())),this.useBias&&(c=py(c,this.bias.read()));const[h,d,p,f]=od(c,4,c.rank-1);o=this.recurrentActivation.apply(h),a=this.recurrentActivation.apply(d),l=hc(fh(a,s),fh(o,this.activation.apply(p))),u=this.recurrentActivation.apply(f);const m=fh(u,this.activation.apply(l));return[m,m,l]})}getConfig(){const t=super.getConfig(),e={units:this.units,activation:A_(this.activation),recurrentActivation:A_(this.recurrentActivation),useBias:this.useBias,kernelInitializer:$y(this.kernelInitializer),recurrentInitializer:$y(this.recurrentInitializer),biasInitializer:$y(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:M_(this.kernelRegularizer),recurrentRegularizer:M_(this.recurrentRegularizer),biasRegularizer:M_(this.biasRegularizer),activityRegularizer:M_(this.activityRegularizer),kernelConstraint:Rb(this.kernelConstraint),recurrentConstraint:Rb(this.recurrentConstraint),biasConstraint:Rb(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},t,e)}}yw.className="LSTMCell",u.registerClass(yw);class vw extends dw{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new yw(t),super(t)}call(t,e){return rc(()=>(null!=this.cell.dropoutMask&&(sc(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(sc(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(t,{mask:null==e?null:e.mask,training:null==e?null:e.training,initialState:null==e?null:e.initialState})))}static fromConfig(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}vw.className="LSTM",u.registerClass(vw);class _w extends pw{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?t.push(...e.stateSize):t.push(e.stateSize);return t}call(t,e){return rc(()=>{let n=(t=t).slice(1);const r=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?r.push(n.splice(0,t.stateSize.length)):r.push(n.splice(0,1));r.reverse();const s=[];let i;for(let o=0;o<this.cells.length;++o){const a=this.cells[o];n=r[o],i=0===o?[t[0]].concat(n):[i[0]].concat(n),i=a.call(i,e),s.push(i.slice(1))}n=[];for(const t of s.slice().reverse())n.push(...t);return[i[0]].concat(n)})}build(t){let e;Vy(t)&&(t=t[0]),t=t,this.cells.forEach((n,r)=>{Hb(`RNNCell_${r}`,()=>{n.build(t),e=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,t=[t[0],e]})}),this.built=!0}getConfig(){const t=super.getConfig(),e=this.cells.map(t=>({className:t.getClassName(),config:t.getConfig()}));return Object.assign({},t,{cells:e})}static fromConfig(t,e,n={}){const r=[];for(const s of e.cells)r.push(mv(s,n));return new t({cells:r})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.cells)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e.concat(t)}return t}getWeights(){const t=[];for(const e of this.cells)t.push(...e.weights);return Zy(t)}setWeights(t){const e=[];for(const n of this.cells){const r=t.splice(n.weights.length);for(let t=0;t<n.weights.length;++t)e.push([n.weights[t],r[t]])}Ky(e)}}function ww(t){const{ones:e,rate:n,training:r=!1,count:s=1}=t,i=()=>fy(e(),n),o=()=>my(i,e,r);return!s||s<=1?ic(o().clone()):Array(s).fill(void 0).map(o).map(t=>ic(t.clone()))}var xw,kw;_w.className="StackedRNNCells",u.registerClass(_w);class Sw extends dw{constructor(t){if(t.unroll)throw new sb("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new sb("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new Yy({ndim:5})]}call(t,e){return rc(()=>{if(null!=this.cell.dropoutMask&&(sc(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(sc(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),e&&e.constants)throw new rb("ConvRNN2D cell does not support constants");return super.call(t,{mask:null==e?null:e.mask,training:null==e?null:e.training,initialState:null==e?null:e.initialState})})}computeOutputShape(t){let e=this.computeSingleOutputShape(t);return this.returnSequences||(e=[e[0],...e.slice(2)]),this.returnState&&(e=[e,...Array(2).fill([t[0],...e.slice(-3)])]),e}getInitialState(t){return rc(()=>{const{stateSize:e}=this.cell,n=this.computeSingleOutputShape(t.shape),r=Mh([n[0],...n.slice(2)]);return Array.isArray(e)?Array(e.length).fill(r):[r]})}resetStates(t,e=!1){rc(()=>{if(!this.stateful)throw new eb("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,s=this.computeSingleOutputShape(n),i=[s[0],...s.slice(2)];if(null==n[0])throw new rb("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(()=>Mh(i)):[Mh(i)];else if(null==t)sc(this.states_),null!=this.keptStates&&(sc(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Mh(i)):this.states_[0]=Mh(i);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new rb(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);e?this.keptStates.push(this.states_.slice()):sc(this.states_);for(let e=0;e<this.states_.length;++e){const n=t[e],s=i;if(!r.arraysEqual(n.shape,s))throw new rb(`State ${e} is incompatible with layer ${this.name}: expected shape=${s}, received shape=${n.shape}`);this.states_[e]=n}}this.states_=this.states_.map(t=>ic(t.clone()))})}computeSingleOutputShape(t){const{dataFormat:e,filters:n,kernelSize:r,padding:s,strides:i,dilationRate:o}=this.cell,a="channelsFirst"===e,l=t[a?4:3],u=q_(t[a?3:2],r[0],s,i[0],o[0]),c=q_(l,r[1],s,i[1],o[1]);return[...t.slice(0,2),...a?[n,u,c]:[u,c,n]]}}Sw.className="ConvRNN2D";class Cw extends yw{constructor(t){const{filters:e,kernelSize:n,strides:r,padding:s,dataFormat:i,dilationRate:o}=t;super(Object.assign({},t,{units:e})),this.filters=e,xb(this.filters,"filters"),this.kernelSize=G_(n,2,"kernelSize"),this.kernelSize.forEach(t=>xb(t,"kernelSize")),this.strides=G_(r||1,2,"strides"),this.strides.forEach(t=>xb(t,"strides")),this.padding=s||"valid",Vb(this.padding),this.dataFormat=i||"channelsLast",Bb(this.dataFormat),this.dilationRate=G_(o||1,2,"dilationRate"),this.dilationRate.forEach(t=>xb(t,"dilationRate"))}build(t){var e;t=Hy(t);const n="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[n])throw new rb(`The channel dimension of the input should be defined. Found ${t[n]}`);const r=this.kernelSize.concat([t[n],4*this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const s=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let t;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;t=new((e=class extends yy{apply(t,e){return iy([n.apply([r]),Lh([r]),n.apply([2*r])])}}).className="CustomInit",e)}else t=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,t,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,e){return rc(()=>{if(3!==t.length)throw new rb(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);const n=e.training||!1,r=t[0],s=t[1],i=t[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=ww({ones:()=>jh(r),rate:this.dropout,training:n,count:4}));const o=this.dropoutMask,a=(t,e,n)=>e&&e[n]?fh(e[n],t):t;let l=a(r,o,0),u=a(r,o,1),c=a(r,o,2),h=a(r,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=ww({ones:()=>jh(s),rate:this.recurrentDropout,training:n,count:4}));const d=this.recurrentDropoutMask;let p=a(s,d,0),f=a(s,d,1),m=a(s,d,2),g=a(s,d,3);const[b,y,v,_]=od(this.kernel.read(),4,3),[w,x,k,S]=this.useBias?od(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,b,w,this.padding),u=this.inputConv(u,y,x,this.padding),c=this.inputConv(c,v,k,this.padding),h=this.inputConv(h,_,S,this.padding);const[C,I,E,O]=od(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,C),f=this.recurrentConv(f,I),m=this.recurrentConv(m,E),g=this.recurrentConv(g,O);const T=this.recurrentActivation.apply(hc(l,p)),N=this.recurrentActivation.apply(hc(u,f)),A=hc(fh(N,i),fh(T,this.activation.apply(hc(c,m)))),R=fh(this.recurrentActivation.apply(hc(h,g)),this.activation.apply(A));return[R,R,A]})}getConfig(){const t=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]])}return n}(super.getConfig(),["units"]);return Object.assign({},t,{filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides})}inputConv(t,e,n,r){const s=Bc(t,e,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?py(s,n,this.dataFormat):s}recurrentConv(t,e){return Bc(t,e,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}Cw.className="ConvLSTM2DCell",u.registerClass(Cw);class Iw extends Sw{constructor(t){const e=new Cw(t);super(Object.assign({},t,{cell:e}))}static fromConfig(t,e){return new t(e)}}Iw.className="ConvLSTM2D",u.registerClass(Iw);class Ew extends ev{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(null==this.noiseShape)return this.noiseShape;const e=t.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?e[r]:this.noiseShape[r]);return n}call(t,e){return rc(()=>{this.invokeCallHook(t,e);const n=Wy(t);if(0<this.rate&&this.rate<1){const t=null!=e.training&&e.training,r=this.getNoiseShape(n);return my(()=>fy(n,this.rate,r,this.seed),()=>n,t)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},e=super.getConfig();return Object.assign(t,e),t}dispose(){return super.dispose()}}Ew.className="Dropout",u.registerClass(Ew);class Ow extends Ew{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const e=t.shape;return[e[0],1,e[2]]}}Ow.className="SpatialDropout1D",u.registerClass(Ow);class Tw extends ev{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){let e=null;null!=t.batchSize&&(e=t.batchSize),this.batchInputShape=[e,t.inputDim]}this.units=t.units,xb(this.units,"units"),this.activation=F_(t.activation),null!=t.useBias&&(this.useBias=t.useBias),this.kernelInitializer=My(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=My(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Db(t.kernelConstraint),this.biasConstraint=Db(t.biasConstraint),this.kernelRegularizer=j_(t.kernelRegularizer),this.biasRegularizer=j_(t.biasRegularizer),this.activityRegularizer=j_(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){const e=(t=Hy(t))[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[e,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:e}}],this.built=!0}computeOutputShape(t){const e=(t=Hy(t)).slice();return e[e.length-1]=this.units,e}call(t,e){return rc(()=>{this.invokeCallHook(t,e);const n=Wy(t),r=Sb(this.activation.getClassName());let s;return null!=r?s=uy(n,this.kernel.read(),r,this.bias?this.bias.read():null):(s=uy(n,this.kernel.read()),null!=this.bias&&(s=py(s,this.bias.read())),null!=this.activation&&(s=this.activation.apply(s))),s})}getConfig(){const t={units:this.units,activation:A_(this.activation),useBias:this.useBias,kernelInitializer:$y(this.kernelInitializer),biasInitializer:$y(this.biasInitializer),kernelRegularizer:M_(this.kernelRegularizer),biasRegularizer:M_(this.biasRegularizer),activityRegularizer:M_(this.activityRegularizer),kernelConstraint:Rb(this.kernelConstraint),biasConstraint:Rb(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}Tw.className="Dense",u.registerClass(Tw);class Nw extends ev{constructor(t){super(t=t||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=Hy(t);for(const e of t.slice(1))if(null==e)throw new rb(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],Yb(t,1)]}call(t,e){return rc(()=>{this.invokeCallHook(t,e);let n=Wy(t);if("channelsFirst"===this.dataFormat&&n.rank>1){const t=[0];for(let e=2;e<n.rank;++e)t.push(e);t.push(1),n=n.transpose(t)}return function(t){if(t.rank<=1)throw new rb(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Yb(t.shape,1)];return t.reshape(e)}(n)})}getConfig(){const t={};null!=this.dataFormat&&(t.dataFormat=this.dataFormat);const e=super.getConfig();return Object.assign(t,e),t}}Nw.className="Flatten",u.registerClass(Nw);class Aw extends ev{constructor(t){super(t),this.supportsMasking=!0,this.activation=F_(t.activation)}call(t,e){return rc(()=>{this.invokeCallHook(t,e);const n=Wy(t);return this.activation.apply(n)})}getConfig(){const t={activation:A_(this.activation)},e=super.getConfig();return Object.assign(t,e),t}}Aw.className="Activation",u.registerClass(Aw);class Rw extends ev{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,e){return rc(()=>{return t=Wy(t),e=t,n=this.n,rc(()=>{if(2!==e.shape.length)throw new rb(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);return ay(ey(e,1),[1,n,1])});var e,n})}getConfig(){const t={n:this.n},e=super.getConfig();return Object.assign(t,e),t}}Rw.className="RepeatVector",u.registerClass(Rw);class Fw extends ev{constructor(t){super(t),this.targetShape=t.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(t){return t<0||null==t}fixUnknownDimension(t,e){const n="Total size of new array must be unchanged.",r=e.slice();let s=1,i=null;for(let a=0;a<r.length;++a){const t=r[a];if(this.isUnknown(t)){if(null!==i)throw new rb("Can only specifiy one unknown dimension.");i=a}else s*=t}const o=Yb(t);if(null!==i){if(0===s||o%s!=0)throw new rb(n);r[i]=o/s}else if(o!==s)throw new rb(n);return r}computeOutputShape(t){let e=!1;for(let n=0;n<t.length;++n)if(this.isUnknown(t[n])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,e){return rc(()=>{this.invokeCallHook(t,e);const n=Wy(t),r=n.shape,s=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return n.reshape(s)})}getConfig(){const t={targetShape:this.targetShape},e=super.getConfig();return Object.assign(t,e),t}}Fw.className="Reshape",u.registerClass(Fw);class Dw extends ev{constructor(t){if(super(t),null==t.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${t.dims} instead.`);const e=Qb(1,t.dims.length+1);if(!r.arraysEqual(t.dims.slice().sort(),e))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Yy({ndim:this.dims.length+1})]}computeOutputShape(t){const e=(t=Hy(t)).slice();return this.dims.forEach((n,r)=>{e[r+1]=t[n]}),e}call(t,e){return yd(Wy(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},e=super.getConfig();return Object.assign(t,e),t}}Dw.className="Permute",u.registerClass(Dw);class Pw extends ev{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,this.maskValue=null!=t?null==t.maskValue?0:t.maskValue:0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={maskValue:this.maskValue};return Object.assign(e,t),e}computeMask(t,e){const n=Wy(t);return pc(Ph(n,this.maskValue),-1)}call(t,e){return rc(()=>{this.invokeCallHook(t,e);const n=Wy(t),r=pc(Ph(n,this.maskValue),-1,!0);return n.mul(r.asType(n.dtype))})}}Pw.className="Masking",u.registerClass(Pw);class $w extends ev{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==t.batchInputShape&&null==t.inputShape){let e=null;null!=t.batchSize&&(e=t.batchSize),this.batchInputShape=null==t.inputLength?[e,null]:[e].concat(cb(t.inputLength))}this.inputDim=t.inputDim,xb(this.inputDim,"inputDim"),this.outputDim=t.outputDim,xb(this.outputDim,"outputDim"),this.embeddingsInitializer=My(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=j_(t.embeddingsRegularizer),this.activityRegularizer=j_(t.activityRegularizer),this.embeddingsConstraint=Db(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,e){return rc(()=>this.maskZero?(t=Wy(t),Ph(t,bd(t))):null)}computeOutputShape(t){if(t=Hy(t),null==this.inputLength)return[...t,this.outputDim];const e=cb(this.inputLength);if(e.length!==t.length-1)throw new rb(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);{let n=0;for(let r=0;r<e.length;++r){const s=e[r],i=t[r+1];if(null!=s&&null!=i&&s!==i)throw new rb(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);null==s&&(e[n]=i),n++}}return[t[0],...e,this.outputDim]}call(t,e){return rc(()=>{this.invokeCallHook(t,e);let n=Wy(t);return"int32"!==n.dtype&&(n=ty(n,"int32")),cy(this.embeddings.read(),n.as1D()).reshape(Hy(this.computeOutputShape(n.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:$y(this.embeddingsInitializer),embeddingsRegularizer:M_(this.embeddingsRegularizer),activityRegularizer:M_(this.activityRegularizer),embeddingsConstraint:Rb(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},e=super.getConfig();return Object.assign(t,e),t}}$w.className="Embedding",u.registerClass($w);class Mw extends ev{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new sb}computeElementwiseOpOutputShape(t,e){if(null==t||null==e)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(0===e.length)return t;const n=t.slice(0,t.length-e.length);for(let r=0;r<e.length;++r){const s=t[t.length-e.length+r],i=e[r];if(null==s||null==i||s<0||i<0)n.push(null);else if(1===s)n.push(i);else if(1===i)n.push(s);else{if(s!==i)throw new rb("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));n.push(s)}}return n}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[Hy(t)]),(t=t).length<2)throw new rb(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let e=[];for(const s of t)null!=s&&null!==s[0]&&e.push(s[0]);if(e=yb(e),e.length>1)throw new rb(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let n=null==t[0]?null:t[0].slice(1);for(let s=1;s<t.length;++s){const e=null==t[s]?null:t[s].slice(1);n=this.computeElementwiseOpOutputShape(n,e)}const r=t.map(t=>t.length);this.reshapeRequired=-1!==t.indexOf(null)||1!==yb(r).length}call(t,e){return rc(()=>{if(t=t,this.reshapeRequired){const e=[],n=t.map(t=>t.rank);if(-1===n.indexOf(null)){const r=Jb(n);for(let n of t){const t=n.rank;for(let e=0;e<r-t;++e)n=ey(n,1);e.push(n)}return this.mergeFunction(e)}{let n=!1;for(const i of t){const t=i.rank;if(null==t){const t=i.shape,r=t[0],s=t.slice(1).concat([r]);let o=i.reshape([r].concat(Yb(t.slice(1))));o=yd(o,[1,0]),o=o.reshape(s),e.push(o),n=!0}else if(t>1){const r=Qb(1,t).concat([0]);e.push(yd(i,r)),n=!0}else e.push(i)}let r=this.mergeFunction(e);const s=r.rank;if(n)if(null==s){const t=r.shape,e=t[t.length-1],n=[e].concat(t.slice(0,t.length-1));r=yd(r.reshape([-1,e]),[1,0]).reshape(n)}else if(s>1){const t=[s-1].concat(Qb(0,s-1));r=yd(r,t)}return r}}return this.mergeFunction(t)})}computeOutputShape(t){let e;e=null==(t=t)[0]?null:t[0].slice(1);for(let r=1;r<t.length;++r){const n=null==t[r]?null:t[r].slice(1);e=this.computeElementwiseOpOutputShape(e,n)}let n=[];for(const r of t)null!=r&&null!==r[0]&&n.push(r[0]);return n=yb(n),e=1===n.length?n.concat(e):[null].concat(e),e}computeMask(t,e){return rc(()=>{if(null==e)return null;if(!Array.isArray(e))throw new rb("`mask` should be an Array");if(!Array.isArray(t))throw new rb("`inputs` should be an Array");if(e.length!==t.length)throw new rb(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${e.length})`);if(e.every(t=>null==t))return null;let n=(e=e.map(t=>null==t?t:nh(t,0)))[0];for(let t=1;t<e.length-1;++t)n=yh(n,e[t]);return n})}}class Lw extends Mw{constructor(t){super(t)}mergeFunction(t){return rc(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=hc(e,t[n]);return e})}}Lw.className="Add",u.registerClass(Lw);class jw extends Mw{constructor(t){super(t)}mergeFunction(t){return rc(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=fh(e,t[n]);return e})}}jw.className="Multiply",u.registerClass(jw);class zw extends Mw{constructor(t){super(t)}mergeFunction(t){return rc(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=hc(e,t[n]);return fh(1/t.length,e)})}}zw.className="Average",u.registerClass(zw);class Bw extends Mw{constructor(t){super(t)}mergeFunction(t){return rc(()=>{let e=t[0];for(let n=1;n<t.length;++n)e=wh(e,t[n]);return e})}}Bw.className="Maximum",u.registerClass(Bw);class Vw extends Mw{constructor(t){super(t)}mergeFunction(t){return rc(()=>{let e=t[0];for(let n=1;n<t.length;++n)e=kh(e,t[n]);return e})}}Vw.className="Minimum",u.registerClass(Vw);class Uw extends Mw{constructor(t){super(t),this.DEFAULT_AXIS=-1,null==t&&(t={}),this.axis=null==t.axis?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new rb("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let e=!0;for(const r of t)if(null!=r){e=!1;break}if(e)return;const n=[];for(let s=0;s<t.length;++s){const e=t[s].slice();e.splice(this.axis,1);let i=!1;for(const t of n)if(r.arraysEqual(t,e)){i=!0;break}i||n.push(e)}if(n.length>1)throw new rb("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return rc(()=>iy(t,this.axis))}computeOutputShape(t){if(!Array.isArray(t)||!Array.isArray(t[0]))throw new rb("A `Concatenate` layer should be called on a list of inputs.");const e=t,n=e[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const s of e.slice(1)){if(null==n[r]||null==s[r]){n[r]=null;break}n[r]+=s[r]}return n}computeMask(t,e){if(null==e)return null;if(!Array.isArray(e))throw new rb("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new rb("`inputs` should be an array for Concatenate");if(e.length!==t.length)throw new rb(`Mismatch in the length of mask (${e.length}) and the legnth of inputs (${t.length})`);return rc(()=>{let n=!0;if(e.forEach(t=>{null==t||(n=!1)}),n)return null;const r=[];for(let i=0;i<t.length;++i)r.push(null==e[i]?jh(t[i]).asType("bool"):e[i].rank<t[i].rank?nh(e[i],-1):e[i]);const s=$c(r,this.axis);return dc(s,-1,!1)})}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}function Ww(t,e){for(;t<0;)t+=e;return t}Uw.className="Concatenate",u.registerClass(Uw);class Hw extends Mw{constructor(t){super(t),this.axes=t.axes,this.normalize=null!=t.normalize&&t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){r.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0],n=t[1];if(e.length>3||n.length>3)throw new sb("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(e,n);if(e[s[0]]!==n[s[1]])throw new rb(`Dimension incompatibility: ${e[s[0]]} !== ${n[s[1]]}`)}mergeFunction(t){if(2!==t.length)throw new rb(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let e,n=t[0],s=t[1];return e=Array.isArray(this.axes)?this.axes.map((e,n)=>Ww(e,t[n].shape.length)):[Ww(this.axes,n.shape.length),Ww(this.axes,s.shape.length)],this.normalize&&(n=gv(n,e[0]),s=gv(s,e[1])),function(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new sb("batchDot is not implemented for tensors of 4D or higher rank yet");if(r.assert(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),r.assert(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),"number"==typeof n&&(n=[n,n]),"complex64"===t.dtype||"complex64"===e.dtype)throw new sb("batchDot is not implemented for complex64-type Tensors yet.");const s=t.shape.length,i=e.shape.length;null==n&&(n=[s-1,i-2]);const o=n;return rc(()=>{let n,r;if(s>i){n=s-i;const t=[];for(let e=0;e<n;++e)t.push(1);e=e.reshape(e.shape.concat(t))}else if(i>s){n=i-s;const e=[];for(let t=0;t<n;++t)e.push(1);t=t.reshape(t.shape.concat(e))}else n=0;if(r=2===t.shape.length&&2===e.shape.length?o[0]===o[1]?t.mul(e).sum(o[0]):t.transpose([1,0]).mul(e).sum(o[1]):t.matMul(e,o[0]!==t.shape.length-1,o[1]===e.shape.length-1),n>0){let t;t=s>i?s+i-3:s-1;const e=[];for(let r=t;r<t+n;++r)e.push(r);r=r.squeeze(e)}return 1===r.shape.length&&(r=r.expandDims(1)),r})}(n,s,e)}interpretAxes(t,e){let n;return n=Array.isArray(this.axes)?this.axes:[Ww(this.axes,t.length),Ww(this.axes,e.length)],n}computeOutputShape(t){r.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0].slice(),n=t[1].slice();if(e.length>3||n.length>3)throw new sb("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(e,n);e.splice(s[0],1),n.splice(s[1],1),n.splice(0,1);const i=e.concat(n);return 1===i.length&&i.push(1),i}computeMask(t,e){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},e=super.getConfig();return Object.assign(t,e),t}}Hw.className="Dot",u.registerClass(Hw);class Gw extends ev{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={stddev:this.stddev};return Object.assign(e,t),e}call(t,e){return rc(()=>{this.invokeCallHook(t,e);const n=Wy(t);return my(()=>ly(n.shape,0,this.stddev).add(n),()=>n,e.training||!1)})}}Gw.className="GaussianNoise",u.registerClass(Gw);class qw extends ev{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return rc(()=>{this.invokeCallHook(t,e);const n=Wy(t);return this.rate>0&&this.rate<1?my(()=>{const t=Math.sqrt(this.rate/(1-this.rate));return n.mul(ly(n.shape,1,t))},()=>n,e.training||!1):n})}}qw.className="GaussianDropout",u.registerClass(qw);class Zw extends ev{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||Wy(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return rc(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(t);return my(()=>{const e=Wy(t),r=-1.7580993408473766;let s=uh(qh(n),this.rate);s=ty(s,"float32");const i=((1-this.rate)*(1+this.rate*r**2))**-.5,o=-i*r*this.rate;return e.mul(s).add(s.add(-1).mul(r)).mul(i).add(o)},()=>Wy(t),e.training||!1)}return t})}}function Kw(t,e,n,r,s,i=.001){let o;if(2===t.rank)o=Rc(t,e,n,r,s,i);else if(3===t.rank)o=Fc(t,e,n,r,s,i);else{if(4!==t.rank)throw new sb(`batchNormalization is not implemented for array of rank ${t.rank} yet`);o=Dc(t,e,n,r,s,i)}return o}Zw.className="AlphaDropout",u.registerClass(Zw);class Yw extends ev{constructor(t){null==t&&(t={}),super(t),this.supportsMasking=!0,this.axis=null==t.axis?-1:t.axis,this.momentum=null==t.momentum?.99:t.momentum,this.epsilon=null==t.epsilon?.001:t.epsilon,this.center=null==t.center||t.center,this.scale=null==t.scale||t.scale,this.betaInitializer=My(t.betaInitializer||"zeros"),this.gammaInitializer=My(t.gammaInitializer||"ones"),this.movingMeanInitializer=My(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=My(t.movingVarianceInitializer||"ones"),this.betaConstraint=Db(t.betaConstraint),this.gammaConstraint=Db(t.gammaConstraint),this.betaRegularizer=j_(t.betaRegularizer),this.gammaRegularizer=j_(t.gammaRegularizer)}build(t){t=Hy(t);const e=this.axis>=0?this.axis:this.axis+t.length,n=t[e];if(null==n)throw new rb(`Axis ${e} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(t)}.`);this.inputSpec=[new Yy({ndim:t.length,axes:{[e]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,e){return rc(()=>{const n=null!=e.training&&e.training,s=Wy(t),i=s.shape,o=i.length,a=Qb(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const u=ob(1,o);u[l]=i[l];const c=a.slice();c.sort();const h=!r.arraysEqual(c,Qb(0,o).slice(0,o-1));if(!n)return(()=>{if(h){const t=this.movingMean.read().reshape(u),e=this.movingVariance.read().reshape(u),n=this.center?this.beta.read().reshape(u):null,r=this.scale?this.gamma.read().reshape(u):null;return Kw(s,t,e,n,r,this.epsilon)}return Kw(s,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[d,p,f]=function(t,e,n,s,i=.001){return r.arraysEqual(s.slice().sort(),Qb(0,t.rank-1))?function(t,e,n,r,s=.001){return rc(()=>{const i=Fh(t,r),o=i.mean,a=i.variance;return[Kw(t,o,a,n,e,s),o,a]})}(t,e,n,s,i):function(t,e,n,r,s=.001){return rc(()=>{const i=Fh(t,r),o=i.mean,a=i.variance,l=[];for(const e of Qb(0,t.rank))-1!==r.indexOf(e)?l.push(1):l.push(t.shape[e]);const u=o.reshape(l),c=a.reshape(l),h=null==e?null:e.reshape(l),d=null==n?null:n.reshape(l);return[Kw(t,u,c,d,h,s),o,a]})}(t,e,n,s,i)}(s,this.gamma.read(),this.beta.read(),a,this.epsilon),m=(t,e,n)=>{rc(()=>{const r=1-n,s=t.read(),i=s.sub(e).mul(r);t.write(s.sub(i))})};return(()=>{m(this.movingMean,p,this.momentum),m(this.movingVariance,f,this.momentum)})(),d})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:$y(this.betaInitializer),gammaInitializer:$y(this.gammaInitializer),movingMeanInitializer:$y(this.movingMeanInitializer),movingVarianceInitializer:$y(this.movingVarianceInitializer),betaRegularizer:M_(this.betaRegularizer),gammaRegularizer:M_(this.gammaRegularizer),betaConstraint:Rb(this.betaConstraint),gammaConstraint:Rb(this.gammaConstraint)},e=super.getConfig();return Object.assign(t,e),t}}Yw.className="BatchNormalization",u.registerClass(Yw);class Xw extends ev{constructor(t){if(null==t&&(t={}),super(t),this.axis=null==t.axis?-1:t.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);for(const t of this.axis)if(!Number.isInteger(t))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==t.epsilon?.001:t.epsilon,this.center=null==t.center||t.center,this.scale=null==t.scale||t.scale,this.betaInitializer=My(t.betaInitializer||"zeros"),this.gammaInitializer=My(t.gammaInitializer||"ones"),this.betaRegularizer=j_(t.betaRegularizer),this.gammaRegularizer=j_(t.gammaRegularizer),this.supportsMasking=!0}build(t){const e=(t=Hy(t)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=e);for(const r of this.axis)if(r<0||r>=e)throw new Error(`Invalid axis: ${r}`);if(this.axis.length!==yb(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const n=this.axis.map(e=>t[e]);this.gamma=this.scale?this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,!0):null,this.beta=this.center?this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,!0):null,this.built=!0}call(t,e){const n=Wy(t),r=n.shape,s=r.length;return rc(()=>{let{mean:t,variance:e}=Fh(n,this.axis,!0);const i=ob(1,s);for(const n of this.axis)i[n]=r[n];const o=t=>null!=t&&t.shape.length!==s&&this.axis!==[s-1]?t.reshape(i):t;let a=o(this.gamma.read()),l=o(this.beta.read());const u=[],c=[];for(let n=0;n<s;++n)-1!==this.axis.indexOf(n)?(u.push(r[n]),c.push(1)):(u.push(1),c.push(r[n]));return t=t.tile(u),e=e.tile(u),a=a.tile(c),l=l.tile(c),Kw(n,t,e,l,a,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:$y(this.betaInitializer),gammaInitializer:$y(this.gammaInitializer),betaRegularizer:M_(this.betaRegularizer),gammaRegularizer:M_(this.gammaRegularizer)},e=super.getConfig();return Object.assign(t,e),t}}Xw.className="LayerNormalization",u.registerClass(Xw);class Jw extends ev{constructor(t){if(null==t&&(t={}),super(t),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,null==t.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof t.padding)this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new rb(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let e,n;if("number"==typeof t.padding[0])e=[t.padding[0],t.padding[0]],n=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new rb(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(e=t.padding[0],2!==t.padding[1].length)throw new rb(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);n=t.padding[1]}this.padding=[e,n]}this.inputSpec=[new Yy({ndim:4})]}computeOutputShape(t){let e,n;return t=Hy(t),"channelsFirst"===this.dataFormat?(e=null!=t[2]&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[3]&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null,[t[0],t[1],e,n]):(e=null!=t[1]&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[2]&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,[t[0],e,n,t[3]])}call(t,e){return rc(()=>{return e=Wy(t),n=this.padding,r=this.dataFormat,rc(()=>{if(4!==e.rank)throw new rb(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new rb("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==r&&(r="channelsLast"),"channelsLast"!==r&&"channelsFirst"!==r)throw new rb(`Unknown data format: ${r}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let t;return t="channelsFirst"===r?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],zh(e,t)});var e,n,r})}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}function Qw(t,e,n,r,s,i){return rc(()=>{let o;Bb(s),Ub(i),Vb(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==s&&(s="channelsLast"),null==i&&(i="max"),t=K_(t,s);const a="same"===r?"same":"valid";return o="max"===i?vh(t,e,n,a):Tc(t,e,n,a),"channelsFirst"===s&&(o=yd(o,[0,3,1,2])),o})}function tx(t,e,n,r,s,i){return rc(()=>{let o;Bb(s),Ub(i),Vb(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==s&&(s="channelsLast"),null==i&&(i="max"),t=Y_(t,s);const a="same"===r?"same":"valid";return o="max"===i?_h(t,e,n,a):Nc(t,e,n,a),"channelsFirst"===s&&(o=yd(o,[0,4,1,2,3])),o})}Jw.className="ZeroPadding2D",u.registerClass(Jw);class ex extends ev{constructor(t){if(null==t.poolSize&&(t.poolSize=2),super(t),"number"==typeof t.poolSize)this.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!=typeof t.poolSize[0])throw new rb(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);this.poolSize=t.poolSize}if(xb(this.poolSize,"poolSize"),null==t.strides)this.strides=this.poolSize;else if("number"==typeof t.strides)this.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!=typeof t.strides[0])throw new rb(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);this.strides=t.strides}xb(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,Vb(this.padding),this.inputSpec=[new Yy({ndim:3})]}computeOutputShape(t){const e=q_((t=Hy(t))[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]}call(t,e){return rc(()=>{this.invokeCallHook(t,e),t=ey(Wy(t),2);const n=this.poolingFunction(Wy(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return ld(n,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(t,e),t}}class nx extends ex{constructor(t){super(t)}poolingFunction(t,e,n,r,s){return Bb(s),Vb(r),Qw(t,e,n,r,s,"max")}}nx.className="MaxPooling1D",u.registerClass(nx);class rx extends ex{constructor(t){super(t)}poolingFunction(t,e,n,r,s){return Bb(s),Vb(r),Qw(t,e,n,r,s,"avg")}}rx.className="AveragePooling1D",u.registerClass(rx);class sx extends ev{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new rb(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];xb(this.poolSize,"poolSize"),xb(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Bb(this.dataFormat),Vb(this.padding),this.inputSpec=[new Yy({ndim:4})]}computeOutputShape(t){t=Hy(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2];return e=q_(e,this.poolSize[0],this.padding,this.strides[0]),n=q_(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n]:[t[0],e,n,t[3]]}call(t,e){return rc(()=>(this.invokeCallHook(t,e),this.poolingFunction(Wy(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class ix extends sx{constructor(t){super(t)}poolingFunction(t,e,n,r,s){return Bb(s),Vb(r),Qw(t,e,n,r,s,"max")}}ix.className="MaxPooling2D",u.registerClass(ix);class ox extends sx{constructor(t){super(t)}poolingFunction(t,e,n,r,s){return Bb(s),Vb(r),Qw(t,e,n,r,s,"avg")}}ox.className="AveragePooling2D",u.registerClass(ox);class ax extends ev{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(3!==t.strides.length)throw new rb(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];xb(this.poolSize,"poolSize"),xb(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Bb(this.dataFormat),Vb(this.padding),this.inputSpec=[new Yy({ndim:5})]}computeOutputShape(t){t=Hy(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[4]:t[3];return e=q_(e,this.poolSize[0],this.padding,this.strides[0]),n=q_(n,this.poolSize[1],this.padding,this.strides[1]),r=q_(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n,r]:[t[0],e,n,r,t[4]]}call(t,e){return rc(()=>(this.invokeCallHook(t,e),this.poolingFunction(Wy(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class lx extends ax{constructor(t){super(t)}poolingFunction(t,e,n,r,s){return Bb(s),Vb(r),tx(t,e,n,r,s,"max")}}lx.className="MaxPooling3D",u.registerClass(lx);class ux extends ax{constructor(t){super(t)}poolingFunction(t,e,n,r,s){return Bb(s),Vb(r),tx(t,e,n,r,s,"avg")}}ux.className="AveragePooling3D",u.registerClass(ux);class cx extends ev{constructor(t){super(t),this.inputSpec=[new Yy({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,e){throw new sb}}class hx extends cx{constructor(t){super(t||{})}call(t,e){return rc(()=>{const e=Wy(t);return xh(e,1)})}}hx.className="GlobalAveragePooling1D",u.registerClass(hx);class dx extends cx{constructor(t){super(t||{})}call(t,e){return rc(()=>{const e=Wy(t);return ph(e,1)})}}dx.className="GlobalMaxPooling1D",u.registerClass(dx);class px extends ev{constructor(t){super(t),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Bb(this.dataFormat),this.inputSpec=[new Yy({ndim:4})]}computeOutputShape(t){return t=t,"channelsLast"===this.dataFormat?[t[0],t[3]]:[t[0],t[1]]}call(t,e){throw new sb}getConfig(){const t={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class fx extends px{call(t,e){return rc(()=>{const e=Wy(t);return xh(e,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}}fx.className="GlobalAveragePooling2D",u.registerClass(fx);class mx extends px{call(t,e){return rc(()=>{const e=Wy(t);return ph(e,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}}mx.className="GlobalMaxPooling2D",u.registerClass(mx);class gx extends ev{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(t){null!=this.layer&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(t,e),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,e,n={}){const r=mv(e.layer,n);delete e.layer;const s={layer:r};return Object.assign(s,e),new t(s)}}class bx extends gx{constructor(t){super(t),this.supportsMasking=!0}build(t){if((t=Hy(t)).length<3)throw new rb(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(t)}`);this.inputSpec=[{shape:t}];const e=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(e),this.layer.built=!0),super.build(t)}computeOutputShape(t){const e=[(t=Hy(t))[0]].concat(t.slice(2)),n=this.layer.computeOutputShape(e);return[n[0],t[1]].concat(n.slice(1))}call(t,e){return rc(()=>hw((t,n)=>[Wy(this.layer.call(t,e)),[]],t=Wy(t),[],!1,null,null,!1,!0)[1])}}bx.className="TimeDistributed",u.registerClass(bx);class yx extends gx{constructor(t){super(t);const e=t.layer.getConfig(),n={};n.className=t.layer.getClassName(),n.config=e,this.forwardLayer=mv(n),e.goBackwards=!0!==e.goBackwards;const r={};if(r.className=t.layer.getClassName(),r.config=e,this.backwardLayer=mv(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===t.mergeMode?"concat":t.mergeMode,_b(jb,"BidirectionalMergeMode",this.mergeMode),t.weights)throw new sb("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,null!=this.forwardLayer&&(this.forwardLayer.trainable=t),null!=this.backwardLayer&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const e=Math.floor(t.length/2);this.forwardLayer.setWeights(t.slice(0,e)),this.backwardLayer.setWeights(t.slice(e))}computeOutputShape(t){let e,n,r,s=this.forwardLayer.computeOutputShape(t);return Array.isArray(s)&&Array.isArray(s[0])||(s=[s]),s=s,this.returnState?(r=s.slice(1),e=s[0]):e=s[0],e=e,"concat"===this.mergeMode?(e[e.length-1]*=2,n=[e]):n=null==this.mergeMode?[e,e.slice()]:[e],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[e].concat(r).concat(r.slice()):ub(n)}apply(t,e){let n=null==e?null:e.initialState,r=null==e?null:e.constants;null==e&&(e={});const s=cw(t,n,r,this.numConstants);if(t=s.inputs,n=s.initialState,r=s.constants,Array.isArray(t)&&(n=t.slice(1),t=t[0]),(null==n||0===n.length)&&null==r)return super.apply(t,e);const i=[],o=[];if(null!=n){const t=n.length;if(t%2>0)throw new rb("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");e.initialState=n,i.push(...n);const r=n.map(t=>new Yy({shape:t.shape}));this.forwardLayer.stateSpec=r.slice(0,t/2),this.backwardLayer.stateSpec=r.slice(t/2),o.push(...r)}if(null!=r)throw new sb("Support for constants in Bidirectional layers is not implemented yet.");const a=i[0]instanceof Xy;for(const l of i)if(l instanceof Xy!==a)throw new rb("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(a){const n=[t].concat(i),r=this.inputSpec.concat(o),s=this.inputSpec;this.inputSpec=r;const a=super.apply(n,e);return this.inputSpec=s,a}return super.apply(t,e)}call(t,e){return rc(()=>{const n=e.initialState;let r,s,i,o;if(null==n)r=this.forwardLayer.call(t,e),s=this.backwardLayer.call(t,e);else{const i=n.slice(0,n.length/2),o=n.slice(n.length/2);r=this.forwardLayer.call(t,Object.assign(e,{initialState:i})),s=this.backwardLayer.call(t,Object.assign(e,{initialState:o}))}return this.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(s.slice(1))),r=r[0],s=s[0]),this.returnSequences&&(s=Kh(s,1)),"concat"===this.mergeMode?o=iy([r,s]):"sum"===this.mergeMode?o=hc(r,s):"ave"===this.mergeMode?o=fh(.5,hc(r,s)):"mul"===this.mergeMode?o=fh(r,s):null==this.mergeMode&&(o=[r,s]),this.returnState?null==this.mergeMode?o.concat(i):[o].concat(i):o})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){Hb(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),Hb(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,e){let n;if(Array.isArray(e)&&(e=e[0]),n=this.returnSequences?null==this.mergeMode?[e,e]:e:null==this.mergeMode?[null,null]:null,this.returnState){const t=this.forwardLayer.states.map(t=>null);return Array.isArray(n)?n.concat(t).concat(t):[n].concat(t).concat(t)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(t),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},e=super.getConfig();return Object.assign(t,e),t}static fromConfig(t,e){const n=mv(e.layer);if(delete e.layer,null!=e.numConstants)throw new sb("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=e;return r.layer=n,new t(r)}}yx.className="Bidirectional",u.registerClass(yx),function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(xw||(xw={})),function(t){let e;!function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"}(e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(kw||(kw={}));const vx=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],_x=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],wx=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],xx=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],kx=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Sx=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Cx=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Ix=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Ex=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],Ox=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],Tx=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Nx=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],Ax=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],Rx=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Fx=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],Dx=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Px=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],$x=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Mx=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}];function Lx(t,e,n=new Map,r=new Set){if(null==t)return null;if(r.has(t))throw new Error("Circular references are not supported.");if(n.has(t))return n.get(t);const s=e(t);if(s.recurse&&null!==s.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(s.recurse){if(Vx(t)){const s=Array.isArray(t)?[]:{};r.add(t);for(const i in t){const o=Lx(t[i],e,n,r);s[i]=o}return r.delete(t),s}throw new Error(`Can't recurse into non-iterable type: ${t}`)}return n.set(t,s.value),s.value}function jx(t,e=Bx){return zx(t,e)}function zx(t,e,n=new Set){const r=t[0];if(n.has(r))throw new Error("Circular references are not supported.");const s=e(t);if(s.recurse&&null!==s.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(s.recurse){if(Vx(r)){const s=Array.isArray(r)?[]:{};n.add(r);for(const i in r){const r=zx(t.map(t=>t[i]),e,n);s[i]=r}return n.delete(r),s}throw new Error(`Can't recurse into non-iterable type: ${r}`)}return s.value}function Bx(t){return null===t?null:Vx(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}function Vx(t){return null!=t&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||"object"==typeof t&&!(t instanceof za))}function Ux(t){return Lx(t,Wx)}function Wx(t){return t instanceof za?{value:t.clone(),recurse:!1}:Vx(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}gl({addN_:function(t){ir(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),ir(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((t,e)=>fl(t,`tensors${e}`,"addN")),n=e[0];return e.forEach(t=>{if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(t=>{if(!hr(t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),ol.runKernel(ns,e)}}),gl({maxPoolWithArgmax_:function(t,e,n,r,s=!1){const i=fl(t,"x","maxPoolWithArgmax"),o=ol.runKernel(Ri,{x:i},{filterSize:e,strides:n,pad:r,includeBatchInIndex:s});return{result:o[0],indexes:o[1]}}}),gl({multinomial_:function(t,e,n,r=!1){const s=fl(t,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const a=1===o?Oc(s,[1,-1]):s,l=ol.runKernel(Li,{logits:a},{numSamples:e,seed:n,normalized:r});return 1===o?Oc(l,[l.size]):l}}),gl({einsum_:function(t,...e){const n=e.map((t,e)=>fl(t,`tensors${e}`,"einsum"));return ol.runKernel(Hs,n,{equation:t})}}),gl({sparseToDense_:function(t,e,n,r=0){const s=fl(t,"sparseIndices","sparseToDense","int32"),i=fl(e,"sparseValues","sparseToDense"),o=fl(r,"defaultValue","sparseToDense",i.dtype);return function(t,e,n,r){if("int32"!==t.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);if(0!==e.rank&&(1!==e.rank||e.size!==s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(s,i,n,o),ol.runKernel(No,{sparseIndices:s,sparseValues:i,defaultValue:o},{outputShape:n})}}),gl({denseBincount_:function(t,e,n,r=!1){const s=fl(t,"x","denseBincount"),i=fl(e,"weights","denseBincount");return ir("int32"===s.dtype,()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),ir(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),ir(n>=0,()=>`size must be non-negative, but got ${n}.`),ir(i.size===s.size||0===i.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`),ol.runKernel(Ps,{x:s,weights:i},{size:n,binaryOutput:r})}}),gl({scatterND_:function(t,e,n){const r=fl(t,"indices","scatterND","int32"),s=fl(e,"updates","scatterND");return zp(s,r,n),ol.runKernel(ho,{indices:r,updates:s},{shape:n})}}),gl({gatherND_:function(t,e){const n=fl(e,"indices","gatherND","int32"),r=fl(t,"x","gatherND","string_or_numeric");return ol.runKernel(oi,{params:r,indices:n})}});class Hx{constructor(t){if(this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}wrap(t){for(;t<0;)t+=this.doubledCapacity;return t%this.doubledCapacity}get(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]}set(t,e){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=e}length(){let t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)}pushAll(t){for(const e of t)this.push(e)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const t=this.get(this.end);return this.set(this.end,void 0),t}unshift(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t}shuffleExcise(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.wrap(this.begin+t),n=this.get(e);return this.set(e,this.pop()),n}}class Gx extends Hx{constructor(){super(Gx.INITIAL_CAPACITY)}isFull(){return!1}push(t){super.isFull()&&this.expand(),super.push(t)}unshift(t){super.isFull()&&this.expand(),super.unshift(t)}expand(){const t=2*this.capacity,e=new Array(t),n=this.length();for(let r=0;r<n;r++)e[r]=this.get(this.wrap(this.begin+r));this.data=e,this.capacity=t,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}Gx.INITIAL_CAPACITY=32;class qx{async toArray(){const t=[];let e=await this.next();for(;!e.done;)t.push(e.value),e=await this.next();return t}async toArrayForTest(){const t=this.prefetch(100),e=[];let n=await t.next();for(;!n.done;)e.push(n.value),n=await t.next();return e}async resolveFully(){let t=await this.next();for(;!t.done;)t=await this.next()}async resolveWhile(t){let e=await this.next(),n=t(e.value);for(;!e.done&&n;)e=await this.next(),n=t(e.value)}handleErrors(t){return new nk(this,t)}filter(t){return new tk(this,t)}map(t){return new ek(this,t)}mapAsync(t){return new rk(this,t)}serialMapAsync(t){return new rk(this,t).serial()}flatmap(t){return new ik(this,t)}async forEachAsync(t){return this.map(t).resolveFully()}async serialForEach(t){return this.serialMapAsync(t).resolveWhile(t=>!0===t)}rowMajorBatch(t,e=!0){return new Qx(this,t,e)}columnMajorBatch(t,e=!0,n=Bx){return this.rowMajorBatch(t,e).map(t=>jx(t,n))}concatenate(t,e){return new ok(new Zx([this,t]),e)}take(t){return t<0||null==t?this:new Jx(this,t)}skip(t){return t<0||null==t?this:new Xx(this,t)}prefetch(t){return new lk(this,t)}shuffle(t,e){return new uk(this,t,e)}serial(){return new Yx(this)}}class Zx extends qx{constructor(t){super(),this.items=t,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const t=this.items[this.trav];return this.trav++,{value:Ux(t),done:!1}}}class Kx extends qx{constructor(t){super(),this.nextFn=t}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(t){throw t.message=`Error thrown while iterating through a dataset: ${t.message}`,t}}}class Yx extends qx{constructor(t){super(),this.upstream=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class Xx extends qx{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const t=await this.upstream.next();if(t.done)return t;sc(t.value)}return this.upstream.next()}}class Jx extends qx{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class Qx extends qx{constructor(t,e,n=!0){super(),this.upstream=t,this.batchSize=e,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const t=[];for(;t.length<this.batchSize;){const e=await this.upstream.next();if(e.done)return this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0};t.push(e.value)}return{value:t,done:!1}}}class tk extends qx{constructor(t,e){super(),this.upstream=t,this.predicate=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const t=await this.upstream.next();if(t.done||this.predicate(t.value))return t;sc(t.value)}}}class ek extends qx{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> Map`}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const e=s.getTensorsInContainer(t.value),n=this.transform(t.value),r=s.getTensorsInContainer(n);for(const i of e)s.isTensorInList(i,r)||i.dispose();return{value:n,done:!1}}}class nk extends qx{constructor(t,e){super(),this.upstream=t,this.handler=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(t){if(!this.handler(t))return{value:null,done:!0}}}}class rk extends qx{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const e=s.getTensorsInContainer(t.value),n=await this.transform(t.value),r=s.getTensorsInContainer(n);for(const i of e)s.isTensorInList(i,r)||i.dispose();return{value:n,done:!1}}}class sk extends qx{constructor(){super(),this.outputQueue=new Gx,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!(await this.pump()))return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class ik extends sk{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const t=await this.upstream.next();if(t.done)return!1;const e=s.getTensorsInContainer(t.value),n=this.transform(t.value),r=s.getTensorsInContainer(n);this.outputQueue.pushAll(n);for(const i of e)s.isTensorInList(i,r)||i.dispose();return!0}}class ok extends qx{constructor(t,e){super(),this.baseErrorHandler=e,this.lastRead=null,this.iterator=null,this.moreIterators=t}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(t){if(await t,null==this.iterator){const t=await this.moreIterators.next();if(t.done)return{value:null,done:!0};this.iterator=t.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const e=await this.iterator.next();return e.done?(this.iterator=null,this.readFromChain(t)):e}}var ak;!function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"}(ak||(ak={}));class lk extends qx{constructor(t,e){super(),this.upstream=t,this.bufferSize=e,this.buffer=new Hx(e)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const t=this.upstream.next();this.buffer.push(t)}}next(){return this.refill(),this.buffer.shift()}}class uk extends lk{constructor(t,e,n){super(t,e),this.upstream=t,this.windowSize=e,this.upstreamExhausted=!1,this.random=Uh.alea(n||r.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(t){return Math.floor(this.random()*t)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const t=this.chooseIndex(),e=await this.buffer.shuffleExcise(t);if(!e.done)return this.refill(),e;this.upstreamExhausted=!0}return{value:null,done:!0}}}class ck{constructor(){this.size=null}batch(t,e=!0){const n=this;let s;return r.assert(t>0,()=>`batchSize needs to be positive, but it is\n      ${t}`),s=this.size===1/0||null==this.size?this.size:e?Math.ceil(this.size/t):Math.floor(this.size/t),hk(async()=>(await n.iterator()).columnMajorBatch(t,e,dk),s)}concatenate(t){const e=this;let n;return n=this.size===1/0||t.size===1/0?1/0:null!=this.size&&null!=t.size?this.size+t.size:null,hk(async()=>(await e.iterator()).concatenate(await t.iterator()),n)}filter(t){const e=this;let n;return n=this.size===1/0?1/0:null,hk(async()=>(await e.iterator()).filter(e=>rc(()=>t(e))),n)}async forEachAsync(t){return(await this.iterator()).forEachAsync(t)}map(t){const e=this;return hk(async()=>(await e.iterator()).map(e=>rc(()=>t(e))),this.size)}mapAsync(t){const e=this;return hk(async()=>(await e.iterator()).mapAsync(t),this.size)}prefetch(t){if(null==t)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const e=this;return hk(async()=>(await e.iterator()).prefetch(t),this.size)}repeat(t){const e=this;let n;return n=null!=this.size&&t>0?this.size*t:0===t?0:null!=this.size&&(void 0===t||t<0)?1/0:null,hk(async()=>{return n=new Kx(async()=>({value:await e.iterator(),done:!1})).take(t),new ok(n,undefined);var n},n)}skip(t){const e=this;let n;return n=null!=this.size&&t>=0&&this.size>=t?this.size-t:null!=this.size&&(this.size<t||void 0===t||t<0)?0:null,hk(async()=>(await e.iterator()).skip(t),n)}shuffle(t,e,n=!0){if(null==t||t<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const s=this,i=Uh.alea(e||r.now().toString());return hk(async()=>{let e=i.int32();return n&&(e+=i.int32()),(await s.iterator()).shuffle(t,e.toString())},this.size)}take(t){const e=this;let n;return n=null!=this.size&&this.size>t?t:null!=this.size&&this.size<=t?this.size:null,hk(async()=>(await e.iterator()).take(t),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function hk(t,e=null){return new class extends ck{constructor(){super(...arguments),this.size=e}async iterator(){return t()}}}function dk(t){return null===t?null:null==(e=t[0])||null===(n=e)||"object"!=typeof n&&"function"!=typeof n||Array.isArray(e)||"object"==typeof e&&e instanceof za||r.isTypedArray(e)?{value:function(t){if(0===t.length)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof za?ud(t):vl(t)}(t),recurse:!1}:{value:null,recurse:!0};var e,n}function pk(t,e){Array.isArray(t)||(t=[t]),t.forEach(t=>{null!=t&&r.assert("complex64"!==t.dtype,()=>`${e} does not support complex64 tensors in the CPU backend.`)})}ck.MAX_BUFFER_SIZE=1e4,Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");const fk=p.whereImpl;class mk extends Yn{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Kn(this,ec())}nextDataId(){return mk.nextDataId++}write(t,e,n){this.firstUse&&(this.firstUse=!1,qr().get("IS_NODE")&&d.warn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:t,dtype:n,refCount:1}),r}makeTensorInfo(t,e,n){let s;if("string"===e&&null!=n&&n.length>0&&r.isString(n[0])){const i=n.map(t=>r.encodeString(t));s=this.write(i,t,e)}else s=this.write(n,t,e);return{dataId:s,shape:t,dtype:e}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){this.data.get(t).refCount++}decRef(t){this.data.has(t)&&this.data.get(t).refCount--}move(t,e,n,r,s){this.data.set(t,{values:e,dtype:r,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:e,complexTensorInfos:n}=this.data.get(t);if("complex64"===e){const t=this.readSync(n.real.dataId),e=this.readSync(n.imag.dataId);return d.mergeRealAndImagArrays(t,e)}return this.data.get(t).values}bufferSync(t){const e=this.readSync(t.dataId);let n=e;if("string"===t.dtype)try{n=e.map(t=>r.decodeString(t))}catch(s){throw new Error("Failed to decode encoded string bytes into utf-8")}return hu(t.shape,t.dtype,n)}makeOutput(t,e,n){const r=this.write(t,e,n);return ec().makeTensorFromDataId(r,e,n,this)}disposeData(t,e=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!e&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(t);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const e=r.now();return t(),{kernelMs:r.now()-e}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){pk([t],"where");const e=this.readSync(t.dataId);return fk(t.shape,e)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}function gk(t,e,n){return({inputs:s,attrs:i,backend:o})=>{const{x:a}=s;if(pk(a,t),"string"===a.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const l=o,u=l.data.get(a.dataId).values,c=r.sizeFromShape(a.shape),h=n||a.dtype,d=r.getArrayFromDType(h,c);for(let t=0;t<c;++t)d[t]=e(u[t],i);return l.makeTensorInfo(a.shape,h,d)}}function bk(t,e,n){return({inputs:r,attrs:s,backend:i})=>{const{x:o}=r;if(pk(o,t),"string"===o.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const a=i,l=a.data.get(o.dataId).values,u=n||o.dtype,c=e(l,u,s);return a.makeTensorInfo(o.shape,u,c)}}mk.nextDataId=0,oc("cpu",()=>new mk,1);const yk=gk(Gs,t=>t>=0?t:Math.exp(t)-1),vk={kernelName:Gs,backendName:"cpu",kernelFunc:yk};function _k(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const wk={kernelName:ui,backendName:"cpu",kernelFunc:_k};function xk(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{alpha:o}=s;pk([i],"leakyRelu");const a=r.sizeFromShape(i.shape),l=n.data.get(i.dataId).values,u=r.getTypedArrayFromDType("float32",a);for(let r=0;r<l.length;r++)u[r]=l[r]<0?o*l[r]:l[r];return n.makeTensorInfo(i.shape,"float32",u)}const kk={kernelName:mi,backendName:"cpu",kernelFunc:xk};function Sk(t){return(e,n,s,i,o)=>{const a=d.assertAndGetBroadcastShape(e,n),l=a.length,u=r.computeStrides(a),c=r.sizeFromShape(a),h=r.getTypedArrayFromDType(o,c),p=e.length,f=n.length,m=r.computeStrides(e),g=r.computeStrides(n),b=d.getBroadcastDims(e,a),y=d.getBroadcastDims(n,a);if(b.length+y.length===0)for(let r=0;r<h.length;++r)h[r]=t(s[r%s.length],i[r%i.length]);else for(let d=0;d<h.length;++d){const e=r.indexToLoc(d,l,u),n=e.slice(-p);b.forEach(t=>n[t]=0);const o=r.locToIndex(n,p,m),a=e.slice(-f);y.forEach(t=>a[t]=0);const c=r.locToIndex(a,f,g);h[d]=t(s[o],i[c])}return[h,a]}}const Ck=Sk((t,e)=>t<0?e*t:t);function Ik(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;pk([r,s],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,[a,l]=Ck(r.shape,s.shape,i,o,r.dtype);return n.makeTensorInfo(l,r.dtype,a)}const Ek={kernelName:Yi,backendName:"cpu",kernelFunc:Ik},Ok=gk(eo,t=>Math.max(0,t)),Tk={kernelName:eo,backendName:"cpu",kernelFunc:Ok},Nk=gk(ao,t=>Math.min(Math.max(0,t),6)),Ak={kernelName:ao,backendName:"cpu",kernelFunc:Nk},Rk=gk(vo,t=>1/(1+Math.exp(-t))),Fk={kernelName:vo,backendName:"cpu",kernelFunc:Rk};function Dk(t,e,n,r,s){if("linear"===n)return _k({inputs:{x:e},backend:t});if("relu"===n)return Ok({inputs:{x:e},backend:t});if("elu"===n)return yk({inputs:{x:e},backend:t});if("relu6"===n)return Nk({inputs:{x:e},backend:t});if("prelu"===n)return Ik({inputs:{x:e,alpha:r},backend:t});if("leakyrelu"===n)return xk({inputs:{x:e},backend:t,attrs:{alpha:s}});if("sigmoid"===n)return Rk({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function Pk(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=n.makeTensorInfo(r.shape,"complex64");return n.data.get(a.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(s.shape,"float32",o)},a}const $k={kernelName:xs,backendName:"cpu",kernelFunc:Pk};function Mk(t,e,n="float32"){if("complex64"===n)return Pk({inputs:{real:Mk(t,e,"float32"),imag:Mk(t,e,"float32")},backend:t});const s=r.makeZerosTypedArray(r.sizeFromShape(e),n);return t.makeTensorInfo(e,n,s)}function Lk(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const jk={kernelName:Qi,backendName:"cpu",kernelFunc:Lk};function zk(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{dtype:o}=s;if("complex64"===o){if("complex64"===i.dtype)return _k({inputs:{x:i},backend:n});const t=Mk(n,i.shape,i.dtype),e=zk({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),r=Pk({inputs:{real:e,imag:t},backend:n});return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),r}if("complex64"===i.dtype){const t=Lk({inputs:{input:i},backend:n}),e=zk({inputs:{x:t},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(t),e}if(!r.hasEncodingLoss(i.dtype,o)){const t=_k({inputs:{x:i},backend:n});return{dataId:t.dataId,shape:t.shape,dtype:o}}if("int32"===o){const t=n.data.get(i.dataId).values,e=Int32Array.from(t);return n.makeTensorInfo(i.shape,"int32",e)}if("bool"===o){const t=n.data.get(i.dataId).values,e=r.toTypedArray([0],i.dtype),[s,o]=Sk((t,e)=>t!==e?1:0)(i.shape,[],t,e,"bool");return n.makeTensorInfo(o,"bool",s)}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${o}`)}const Bk={kernelName:vs,backendName:"cpu",kernelFunc:zk};function Vk(t,e,n,r){return null==n?({inputs:n,backend:s})=>{const{a:i,b:o}=n,a=s;pk([i,o],t);const l=a.data.get(i.dataId).values,u=a.data.get(o.dataId).values,c="string"===i.dtype?d.fromUint8ToStringArray(l):l,h="string"===i.dtype?d.fromUint8ToStringArray(u):u,p=r||i.dtype,[f,m]=e(i.shape,o.shape,c,h,p);return a.makeTensorInfo(m,p,f)}:({inputs:t,backend:s})=>{const{a:i,b:o}=t,a=s;if("complex64"===i.dtype||"complex64"===o.dtype){const t=zk({inputs:{x:i},backend:a,attrs:{dtype:"complex64"}}),e=a.data.get(t.dataId),r=e.complexTensorInfos.imag,s=a.data.get(e.complexTensorInfos.real.dataId).values,l=a.data.get(r.dataId).values,u=zk({inputs:{x:o},backend:a,attrs:{dtype:"complex64"}}),c=a.data.get(u.dataId),h=c.complexTensorInfos.imag,d=a.data.get(c.complexTensorInfos.real.dataId).values,p=a.data.get(h.dataId).values,[f,m,g]=n(i.shape,o.shape,s,l,d,p),b=a.makeTensorInfo(g,"float32",f),y=a.makeTensorInfo(g,"float32",m),v=Pk({inputs:{real:b,imag:y},backend:a});return a.disposeIntermediateTensorInfo(t),a.disposeIntermediateTensorInfo(u),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(y),v}{const t=a.data.get(i.dataId).values,n=a.data.get(o.dataId).values,s=r||i.dtype,[l,u]=e(i.shape,o.shape,t,n,s);return a.makeTensorInfo(u,s,l)}}}function Uk(t){return(e,n,s,i,o,a)=>{const l=d.assertAndGetBroadcastShape(e,n),u=r.sizeFromShape(l),c=l.length,h=r.computeStrides(l),p=r.getTypedArrayFromDType("float32",u),f=r.getTypedArrayFromDType("float32",u),m=d.getBroadcastDims(e,l),g=d.getBroadcastDims(n,l),b=d.mergeRealAndImagArrays(s,i),y=d.mergeRealAndImagArrays(o,a),v=e.length,_=r.computeStrides(e),w=n.length,x=r.computeStrides(n);if(m.length+g.length===0)for(let r=0;r<p.length;r++){const e=r%b.length,n=r%y.length,s=t(b[2*e],b[2*e+1],y[2*n],y[2*n+1]);p[r]=s.real,f[r]=s.imag}else for(let d=0;d<p.length;d++){const e=r.indexToLoc(d,c,h),n=e.slice(-v);m.forEach(t=>n[t]=0);const s=r.locToIndex(n,v,_),i=e.slice(-w);g.forEach(t=>i[t]=0);const o=r.locToIndex(i,w,x),a=t(b[2*s],b[2*s+1],y[2*o],y[2*o+1]);p[d]=a.real,f[d]=a.imag}return[p,f,l]}}const Wk=Sk((t,e)=>t+e),Hk=Uk((t,e,n,r)=>({real:t+n,imag:e+r})),Gk=Vk(es,Wk,Hk),qk={kernelName:es,backendName:"cpu",kernelFunc:Gk};function Zk(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{shape:o}=s,a=r.sizeFromShape(i.shape),l=r.inferFromImplicitShape(o,a),u=r.sizeFromShape(l);r.assert(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(null!=c.complexTensorInfos){const t=c.complexTensorInfos.imag;c.complexTensorInfos.real.shape=l,t.shape=l}return{dataId:i.dataId,shape:l,dtype:i.dtype}}const Kk={kernelName:no,backendName:"cpu",kernelFunc:Zk};function Yk(t){const{inputs:e,backend:n,attrs:s}=t,{a:i,b:o}=e,{transposeA:a,transposeB:l}=s;pk([i,o],"matMul");const u=i.shape.length,c=o.shape.length,h=a?i.shape[u-2]:i.shape[u-1],d=l?o.shape[c-1]:o.shape[c-2],p=a?i.shape[u-1]:i.shape[u-2],f=l?o.shape[c-2]:o.shape[c-1],m=i.shape.slice(0,-2),g=o.shape.slice(0,-2),b=r.sizeFromShape(m),y=r.sizeFromShape(g);r.assert(u>=2&&c>=2&&(b===y||1===b||1===y),()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${m}) and (${g}).`);const v=(b>y?i.shape.slice(0,-2):o.shape.slice(0,-2)).concat([p,f]);r.assert(h===d,()=>`Error in matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${i.shape} and ${o.shape} and transposeA=${a} and transposeB=${l} must match.`);const _=l?[y,f,d]:[y,d,f],w=Zk({inputs:{x:i},backend:n,attrs:{shape:a?[b,h,p]:[b,p,h]}}),x=Zk({inputs:{x:o},backend:n,attrs:{shape:_}}),k=a?w.shape[1]:w.shape[2],S=a?w.shape[2]:w.shape[1],C=l?x.shape[1]:x.shape[2],I=Math.max(b,y),E=n.data.get(w.dataId).values,O=n.data.get(x.dataId).values,T=r.computeStrides(w.shape),N=r.computeStrides(x.shape),[A,R,F]=a?[T[0],1,T[1]]:[T[0],T[1],1],[D,P,$]=l?[1,N[1],N[0]]:[N[1],1,N[0]],M=S*C,L=hu([I,S,C],w.dtype),j=L.values,z=n.blockSize;for(let r=0;r<I;r++)for(let t=0;t<S;t+=z)for(let e=0;e<C;e+=z)for(let n=0;n<k;n+=z){const s=Math.min(t+z,S),i=Math.min(e+z,C),o=Math.min(n+z,k);for(let a=t;a<s;a++)for(let t=e;t<i;t++){let e=0;for(let s=n;s<o;s++){const n=Math.min(r,b-1)*A,i=Math.min(r,y-1)*$;e+=E[n+a*R+s*F]*O[s*D+t*P+i]}j[r*M+(a*C+t)]+=e}}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(v,L.dtype,L.values)}const Xk={kernelName:gs,backendName:"cpu",kernelFunc:Yk},Jk={kernelName:Xo,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:h}=r;let d,p,f;const m=[];d=Yk({inputs:{a:s,b:i},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(p=Gk({inputs:{a:d,b:o},backend:n}),m.push(d),d=p),c&&(f=Dk(n,d,c,a,h),m.push(d),d=f);for(const g of m)n.disposeIntermediateTensorInfo(g);return d}};function Qk(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const tS={kernelName:Jr,backendName:"cpu",kernelFunc:t=>{const{x:e}=t.inputs,n=t.backend;pk(e,"abs");let s=new Float32Array(r.sizeFromShape(e.shape));return s=Qk(n.data.get(e.dataId).values),n.makeOutput(s,e.shape,"float32")}},eS=gk(Qr,t=>Math.acos(t)),nS={kernelName:Qr,backendName:"cpu",kernelFunc:eS},rS=gk(ts,t=>Math.acosh(t)),sS={kernelName:ts,backendName:"cpu",kernelFunc:rS},iS={kernelName:ns,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n}=t,r=e;pk(e,"addN");const s=r.map(t=>n.data.get(t.dataId).values),i=hu(r[0].shape,r[0].dtype),o=i.values;for(let a=0;a<r.length;a++){const t=s[a];for(let e=0;e<o.length;e++)o[e]+=t[e]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function oS(t,e,n,s,i){const o=e.length,a=r.sizeFromShape(e),l=r.computeStrides(e),u=r.computeStrides(i),c=r.getTypedArrayFromDType(n,r.sizeFromShape(i));for(let h=0;h<a;++h){const e=r.indexToLoc(h,o,l),n=new Array(e.length);for(let t=0;t<n.length;t++)n[t]=e[s[t]];c[r.locToIndex(n,o,u)]=t[h]}return c}function aS(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:i}=n;pk(s,"transpose");const o=new Array(s.shape.length);for(let l=0;l<o.length;l++)o[l]=s.shape[i[l]];const a=oS(r.data.get(s.dataId).values,s.shape,s.dtype,i,o);return{dataId:r.write(a,o,s.dtype),shape:o,dtype:s.dtype}}const lS={kernelName:Uo,backendName:"cpu",kernelFunc:aS},uS={kernelName:rs,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o,keepDims:a}=s;pk(i,"all");const l=r.parseAxisParam(o,i.shape);let u=l;const c=d.getAxesPermutation(u,i.shape.length);let h=i;null!=c&&(h=aS({inputs:{x:i},backend:n,attrs:{perm:c}}),u=d.getInnerMostAxes(u.length,i.shape.length)),d.assertAxesAreInnerMostDims("all",u,h.shape.length);const[p,f]=d.computeOutAndReduceShapes(h.shape,u),m=r.sizeFromShape(f),g=r.makeZerosTypedArray(r.sizeFromShape(p),h.dtype),b=n.data.get(h.dataId).values;for(let r=0;r<g.length;++r){const t=r*m;let e=b[t];for(let n=0;n<m;++n){const r=b[t+n];e=e&&r}g[r]=e}null!=c&&n.disposeIntermediateTensorInfo(h);const y=n.makeTensorInfo(p,h.dtype,g);if(a){const t=Zk({inputs:{x:y},backend:n,attrs:{shape:d.expandShapeToKeepDim(p,l)}});return n.disposeIntermediateTensorInfo(y),t}return y}},cS={kernelName:ss,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o,keepDims:a}=s;pk(i,"any");const l=r.parseAxisParam(o,i.shape);let u=l;const c=d.getAxesPermutation(u,i.shape.length);let h=i;null!=c&&(h=aS({inputs:{x:i},backend:n,attrs:{perm:c}}),u=d.getInnerMostAxes(u.length,i.shape.length)),d.assertAxesAreInnerMostDims("any",u,h.shape.length);const[p,f]=d.computeOutAndReduceShapes(h.shape,u),m=r.sizeFromShape(f),g=r.makeZerosTypedArray(r.sizeFromShape(p),h.dtype),b=n.data.get(h.dataId).values;for(let r=0;r<g.length;++r){const t=r*m;let e=b[t];for(let n=0;n<m;++n){const r=b[t+n];e=e||r}g[r]=e}null!=c&&n.disposeIntermediateTensorInfo(h);const y=n.makeTensorInfo(p,h.dtype,g);if(a){const t=Zk({inputs:{x:y},backend:n,attrs:{shape:d.expandShapeToKeepDim(p,l)}});return n.disposeIntermediateTensorInfo(y),t}return y}},hS={kernelName:is,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o}=s;pk(i,"argMax");let a=r.parseAxisParam(o,i.shape);const l=d.getAxesPermutation(a,i.shape.length);let u=i;const c=[];null!=l&&(u=aS({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=d.getInnerMostAxes(a.length,u.shape.length)),a=[a[0]],d.assertAxesAreInnerMostDims("argMax",a,u.shape.length);const[h,p]=d.computeOutAndReduceShapes(u.shape,a),f=r.sizeFromShape(h),m=r.makeZerosTypedArray(f,"int32"),g=r.sizeFromShape(p),b=n.data.get(u.dataId).values;for(let r=0;r<m.length;++r){const t=r*g;let e=b[t],n=0;for(let r=0;r<g;++r){const s=b[t+r];s>e&&(e=s,n=r)}m[r]=n}return c.forEach(t=>n.disposeIntermediateTensorInfo(t)),n.makeTensorInfo(h,"int32",m)}},dS={kernelName:os,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o}=s;pk(i,"argMin");let a=r.parseAxisParam(o,i.shape);const l=d.getAxesPermutation(a,i.shape.length);let u=i;const c=[];null!=l&&(u=aS({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=d.getInnerMostAxes(a.length,u.shape.length)),a=[a[0]],d.assertAxesAreInnerMostDims("argMin",a,u.shape.length);const[h,p]=d.computeOutAndReduceShapes(u.shape,a),f=r.sizeFromShape(h),m=r.makeZerosTypedArray(f,"int32"),g=r.sizeFromShape(p),b=n.data.get(u.dataId).values;for(let r=0;r<m.length;++r){const t=r*g;let e=b[t],n=0;for(let r=0;r<g;++r){const s=b[t+r];s<e&&(e=s,n=r)}m[r]=n}return c.forEach(t=>n.disposeIntermediateTensorInfo(t)),n.makeTensorInfo(h,"int32",m)}},pS=gk(as,t=>Math.asin(t)),fS={kernelName:as,backendName:"cpu",kernelFunc:pS},mS=gk(ls,t=>Math.asinh(t)),gS={kernelName:ls,backendName:"cpu",kernelFunc:mS},bS=gk(us,t=>Math.atan(t)),yS={kernelName:us,backendName:"cpu",kernelFunc:bS},vS=Sk((t,e)=>Math.atan2(t,e)),_S=Vk(hs,vS),wS={kernelName:hs,backendName:"cpu",kernelFunc:_S},xS=gk(cs,t=>Math.atanh(t)),kS={kernelName:cs,backendName:"cpu",kernelFunc:xS};function SS(t,e,n,r,s,i){const o=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,u=s.dilationWidth,c=s.effectiveFilterHeight,h=s.effectiveFilterWidth,d=s.padInfo.top,p=s.padInfo.left,f="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=hu(s.outShape,n),g=m.values,b=s.outShape[1]*s.outShape[2]*s.outShape[3],y=s.outShape[2]*s.outShape[3],v=s.outShape[3];for(let _=0;_<s.batchSize;++_){const e=_*b,n=_*r[0];for(let m=0;m<s.inChannels;++m)for(let b=0;b<s.outHeight;++b){const _=b*o-d,w=Math.max(0,_),x=Math.min(s.inHeight,c+_),k=e+b*y;for(let e=0;e<s.outWidth;++e){const o=e*a-p,c=Math.max(0,o),d=Math.min(s.inWidth,h+o);let b=f,y=0,_=0;for(let e=w;e<x;e+=l){const s=n+e*r[1];for(let e=c;e<d;e+=u){const n=t[s+e*r[2]+m];"max"===i&&n>b?b=n:"avg"===i&&(y+=n,_++)}if(isNaN(b))break}g[k+e*v+m]="avg"===i?y/_:b}}}return m}function CS(t,e,n,r,s=!1,i=!1){const o=hu(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=hu(e,n,t);for(let g=0;g<r.batchSize;++g)for(let t=0;t<r.inChannels;++t)for(let e=0;e<r.outHeight;++e){const n=e*a-p;let b=n;for(;b<0;)b+=u;const y=Math.min(r.inHeight,h+n);for(let a=0;a<r.outWidth;++a){const h=a*l-f;let p=h;for(;p<0;)p+=c;const v=Math.min(r.inWidth,d+h);let _=Number.NEGATIVE_INFINITY,w=-1;for(let e=b;e<y;e+=u){const o=e-n;for(let n=p;n<v;n+=c){const a=n-h,l=m.get(g,e,n,t);l>_&&(_=l,w=s?i?((g*r.inHeight+e)*r.inWidth+n)*r.inChannels+t:(e*r.inWidth+n)*r.inChannels+t:o*d+a)}}o.set(w,g,e,a,t)}}return o}function IS(t,e,n,r,s,i){const o=s.strideDepth,a=s.strideHeight,l=s.strideWidth,u=s.dilationDepth,c=s.dilationHeight,h=s.dilationWidth,d=s.effectiveFilterDepth,p=s.effectiveFilterHeight,f=s.effectiveFilterWidth,m=s.padInfo.front,g=s.padInfo.top,b=s.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=hu(s.outShape,n),_=v.values,w=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],x=s.outShape[2]*s.outShape[3]*s.outShape[4],k=s.outShape[3]*s.outShape[4],S=s.outShape[4];for(let C=0;C<s.batchSize;++C){const e=C*w,n=C*r[0];for(let v=0;v<s.inChannels;++v)for(let w=0;w<s.outDepth;++w){const C=w*o-m;let I=C;for(;I<0;)I+=u;const E=Math.min(s.inDepth,d+C),O=e+w*x;for(let e=0;e<s.outHeight;++e){const o=e*a-g;let d=o;for(;d<0;)d+=c;const m=Math.min(s.inHeight,p+o),w=O+e*k;for(let e=0;e<s.outWidth;++e){const o=e*l-b;let a=o;for(;a<0;)a+=h;const p=Math.min(s.inWidth,f+o),g=w+e*S;let x=y,k=0,C=0;for(let e=I;e<E;e+=u){const s=n+e*r[1];for(let e=d;e<m;e+=c){const n=s+e*r[2];for(let e=a;e<p;e+=h){const s=t[n+e*r[3]+v];if("max"===i&&s>x?x=s:"avg"===i&&(k+=s,C++),isNaN(x))break}if(isNaN(x))break}if(isNaN(x))break}_[g+v]="avg"===i?k/C:x}}}}return v}const ES={kernelName:ds,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e;pk(i,"avgPool");const{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=s;r.assert(d.eitherStridesOrDilationsAreOne(a,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`);const c=d.computePool2DInfo(i.shape,o,a,1,l,u);let h;if(1===c.filterWidth&&1===c.filterHeight&&r.arraysEqual(c.inShape,c.outShape))h=_k({inputs:{x:i},backend:n});else{const t=n.data.get(i.dataId).values,e=r.computeStrides(i.shape),s=SS(t,0,i.dtype,e,c,"avg");h=n.makeTensorInfo(c.outShape,i.dtype,s.values)}return h}},OS={kernelName:fs,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=s;pk(i,"avgPool3d");const h=d.computePool3DInfo(i.shape,o,a,1,l,u,c),p=IS(n.data.get(i.dataId).values,0,i.dtype,r.computeStrides(i.shape),h,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}},TS={kernelName:ms,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=r;pk([s,i],"avgPool3DGrad");const c=d.computePool3DInfo(i.shape,o,a,1,l,u),h=c.strideDepth,p=c.strideHeight,f=c.strideWidth,m=c.filterDepth,g=c.filterHeight,b=c.filterWidth,y=c.dilationDepth,v=c.dilationHeight,_=c.dilationWidth,w=c.effectiveFilterDepth,x=c.effectiveFilterHeight,k=c.effectiveFilterWidth,S=w-1-c.padInfo.front,C=k-1-c.padInfo.left,I=x-1-c.padInfo.top,E=hu(i.shape,"float32"),O=1/(m*g*b),T=n.bufferSync(s);for(let d=0;d<c.batchSize;++d)for(let t=0;t<c.inChannels;++t)for(let e=0;e<c.inDepth;++e)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const s=e-S,i=n-I,o=r-C;let a=0;for(let e=0;e<w;e+=y){const n=(s+e)/h;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let e=0;e<x;e+=v){const r=(i+e)/p;if(!(r<0||r>=c.outHeight||Math.floor(r)!==r))for(let e=0;e<k;e+=_){const s=(o+e)/f;s<0||s>=c.outWidth||Math.floor(s)!==s||(a+=T.get(d,n,r,s,t))}}}E.set(a*O,d,e,n,r,t)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}},NS={kernelName:ps,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;pk([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=d.computePool2DInfo(o.shape,a,l,1,u),h=c.strideHeight,p=c.strideWidth,f=c.filterHeight,m=c.filterWidth,g=c.dilationHeight,b=c.dilationWidth,y=c.effectiveFilterHeight,v=c.effectiveFilterWidth,_=v-1-c.padInfo.left,w=y-1-c.padInfo.top,x=hu(o.shape,"float32"),k=1/(f*m),S=n.data.get(s.dataId).values,C=hu(s.shape,"float32",S);for(let d=0;d<c.batchSize;++d)for(let t=0;t<c.inChannels;++t)for(let e=0;e<c.inHeight;++e)for(let n=0;n<c.inWidth;++n){const r=e-w,s=n-_;let i=0;for(let e=0;e<y;e+=g){const n=(r+e)/h;if(!(n<0||n>=c.outHeight||Math.floor(n)!==n))for(let e=0;e<v;e+=b){const r=(s+e)/p;r<0||r>=c.outWidth||Math.floor(r)!==r||(i+=C.get(d,n,r,t))}}x.set(i*k,d,e,n,t)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}},AS={kernelName:si,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i,scale:o,offset:a,mean:l,variance:u}=e;r.assert(l.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),r.assert(null==a||l.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),r.assert(null==o||l.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),pk([i,l,u,o,a],"batchNorm");let{varianceEpsilon:c}=s;null==c&&(c=.001);const h=n.data.get(i.dataId).values,d=n.data.get(l.dataId).values,p=n.data.get(u.dataId).values,f=o?n.data.get(o.dataId).values:new Float32Array([1]),m=a?n.data.get(a.dataId).values:new Float32Array([0]),g=new Float32Array(h.length),b=m.length,y=f.length,v=p.length,_=d.length;let w=0,x=0,k=0,S=0;for(let r=0;r<h.length;++r)g[r]=m[w++]+(h[r]-d[x++])*f[k++]/Math.sqrt(p[S++]+c),w>=b&&(w=0),x>=_&&(x=0),k>=y&&(k=0),S>=v&&(S=0);return n.makeTensorInfo(i.shape,i.dtype,g)}};function RS(t,e,n,s,i){const o=l.isSliceContinous(s,e,n),a=r.sizeFromShape(n),u=r.computeStrides(s);if(o){const n=l.computeFlatOffset(e,u);return"string"===i?t.slice(n,n+a):t.subarray(n,n+a)}const c=hu(s,i,"string"===i?d.fromUint8ToStringArray(t):t),h=hu(n,i);for(let r=0;r<h.size;++r){const t=h.indexToLoc(r),n=t.map((t,n)=>t+e[n]);h.set(c.get(...n),...t)}return"string"===i?d.fromStringArrayToUint8(h.values):h.values}function FS(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r;pk(s,"slice");const[a,u]=l.parseSliceParams(s,i,o);l.assertParamsValid(s,a,u);const c=RS(n.data.get(s.dataId).values,a,u,s.shape,s.dtype);return n.makeTensorInfo(u,s.dtype,c)}const DS={kernelName:mo,backendName:"cpu",kernelFunc:FS},PS={kernelName:bs,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;pk([s],"batchToSpaceND");const a=i.reduce((t,e)=>t*e),l=d.getReshaped(s.shape,i,a),u=d.getPermuted(l.length,i.length),c=d.getReshapedPermuted(s.shape,i,a),h=d.getSliceBeginCoords(o,i.length),p=d.getSliceSize(c,o,i.length),f=Zk({inputs:{x:s},backend:n,attrs:{shape:l}}),m=aS({inputs:{x:f},backend:n,attrs:{perm:u}}),g=Zk({inputs:{x:m},backend:n,attrs:{shape:c}}),b=FS({inputs:{x:g},backend:n,attrs:{begin:h,size:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),b}};function $S(t,e,n,s,i){const o=r.sizeFromShape(s),a=r.makeZerosTypedArray(i,n);for(let r=0;r<t.length;r++){const n=t[r];if(n<0)throw new Error("Input x must be non-negative!");n>=i||(a[n]+=o>0?e[r]:1)}return a}function MS(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],o=hu([s,n],e.dtype);for(let a=0;a<s;a++)for(let s=0;s<i;s++){const i=t.get(a,s);if(i<0)throw new Error("Input x must be non-negative!");i>=n||o.set(r?1:e.size>0?o.get(a,i)+e.get(a,s):o.get(a,i)+1,a,i)}return o}const LS={kernelName:ys,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=$S(n.data.get(s.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,a)}};function jS(t){return(e,n,s)=>{const i=r.getTypedArrayFromDType(n,e.length);for(let r=0;r<e.length;++r)i[r]=t(e[r],s);return i}}const zS=jS(t=>Math.ceil(t)),BS=bk(_s,zS),VS={kernelName:_s,backendName:"cpu",kernelFunc:BS},US=gk(ws,(t,e)=>t>e.clipValueMax?e.clipValueMax:t<e.clipValueMin?e.clipValueMin:t),WS={kernelName:ws,backendName:"cpu",kernelFunc:US},HS={kernelName:ks,backendName:"cpu",kernelFunc:t=>{const{x:e}=t.inputs,n=t.backend,s=new Float32Array(r.sizeFromShape(e.shape)),i=n.data.get(e.dataId),o=i.complexTensorInfos.imag,a=n.data.get(i.complexTensorInfos.real.dataId).values,l=n.data.get(o.dataId).values;for(let r=0;r<a.length;r++)s[r]=Math.hypot(a[r],l[r]);return n.makeOutput(s,e.shape,"float32")}};function GS(t,e,n,s){const i=r.getArrayFromDType(n,r.sizeFromShape(e));if(s&&"string"!==n){let e=0;t.forEach(t=>{const n=r.sizeFromShape(t.shape);i.set(t.vals,e),e+=n})}else{let r=0;t.forEach(t=>{const s="string"===n?d.fromUint8ToStringArray(t.vals):t.vals;let o=0;for(let n=0;n<t.shape[0];++n){const a=n*e[1]+r;for(let e=0;e<t.shape[1];++e)i[a+e]=s[o++]}r+=t.shape[1]})}return i}function qS(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const ZS={kernelName:hi,backendName:"cpu",kernelFunc:qS};function KS(t){const{inputs:e,backend:n,attrs:s}=t,{axis:i}=s,o=r.parseAxisParam(i,e[0].shape)[0];let a=d.computeOutShape(e.map(t=>t.shape),o);if(0===r.sizeFromShape(a))return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(t=>r.sizeFromShape(t.shape)>0);if(1===l.length)return _k({inputs:{x:l[0]},backend:n});const u=l.map(t=>t.shape);if(d.assertParamsConsistent(u,o),"complex64"===l[0].dtype){const t=l.map(t=>Lk({inputs:{input:t},backend:n})),e=l.map(t=>qS({inputs:{input:t},backend:n})),r=KS({inputs:t,backend:n,attrs:{axis:o}}),s=KS({inputs:e,backend:n,attrs:{axis:o}}),i=Pk({inputs:{real:r,imag:s},backend:n});return t.forEach(t=>n.disposeIntermediateTensorInfo(t)),e.forEach(t=>n.disposeIntermediateTensorInfo(t)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(s),i}const c=l.map(t=>{const e=r.sizeFromShape(t.shape.slice(o));return Zk({inputs:{x:t},backend:n,attrs:{shape:[-1,e]}})}),h=c.map(t=>({vals:n.data.get(t.dataId).values,shape:t.shape}));a=d.computeOutShape(c.map(t=>t.shape),1);const p=GS(h,a,e[0].dtype,1===c[0].shape[0]),f=d.computeOutShape(l.map(t=>t.shape),o),m=n.makeTensorInfo(f,e[0].dtype,p);return c.forEach(t=>n.disposeIntermediateTensorInfo(t)),m}const YS={kernelName:Ss,backendName:"cpu",kernelFunc:KS};function XS(t){const{inputs:e,backend:n,attrs:s}=t,{x:i,filter:o}=e,{strides:a,pad:l,dataFormat:u,dilations:c,dimRoundingMode:h}=s;pk([i,o],"conv2d");const p=d.convertConv2DDataFormat(u),f=d.computeConv2DInfo(i.shape,o.shape,a,c,l,h,!1,p),m=f.filterHeight,g=f.filterWidth,b=f.dilationHeight,y=f.dilationWidth,v=f.padInfo.left,_=f.padInfo.top,w="channelsLast"===f.dataFormat,x=new $a(f.outShape,i.dtype),k=r.computeStrides(i.shape),S=r.computeStrides(o.shape),C=k[0],I=w?k[1]:k[2],E=w?k[2]:1,O=w?1:k[1],T=x.strides[0],N=w?x.strides[1]:x.strides[2],A=w?x.strides[2]:1,R=w?1:x.strides[1],F=n.data.get(i.dataId).values,D=n.data.get(o.dataId).values,P=x.values;for(let r=0;r<f.batchSize;++r){const t=r*C,e=r*T;for(let n=0;n<f.outHeight;++n){const r=e+n*N,s=n*f.strideHeight-_;for(let e=0;e<m;++e){const n=s+e*b;if(n<0||n>=f.inHeight)continue;const i=e*S[0],o=t+n*I;for(let t=0;t<f.outWidth;++t){const e=r+t*A,n=t*f.strideWidth-v;for(let t=0;t<g;++t){const r=n+t*y;if(r<0||r>=f.inWidth)continue;const s=o+r*E;let a=i+t*S[1];for(let t=0;t<f.inChannels;++t){const n=F[s+t*O];for(let t=0;t<f.outChannels;++t)P[e+t*R]+=n*D[a+t];a+=f.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,P)}const JS={kernelName:Cs,backendName:"cpu",kernelFunc:XS},QS={kernelName:Is,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;pk([s,i],"conv2dBackpropFilter");const h=d.convertConv2DDataFormat(l),p=d.computeConv2DInfo(s.shape,c,o,1,a,u,!1,h),{strideHeight:f,strideWidth:m,filterHeight:g,filterWidth:b}=p,y="channelsLast"===p.dataFormat,v=new $a(p.filterShape,"float32"),_=p.padInfo.left,w=p.padInfo.top,x=n.data.get(s.dataId).values,k=n.data.get(i.dataId).values,S=new $a(s.shape,s.dtype,x),C=new $a(i.shape,i.dtype,k);for(let d=0;d<g;++d){const t=Math.max(0,Math.ceil((w-d)/f)),e=Math.min(p.outHeight,(p.inHeight+w-d)/f);for(let n=0;n<b;++n){const r=Math.max(0,Math.ceil((_-n)/m)),s=Math.min(p.outWidth,(p.inWidth+_-n)/m);for(let i=0;i<p.inChannels;++i)for(let o=0;o<p.outChannels;++o){let a=0;for(let l=0;l<p.batchSize;++l)for(let u=t;u<e;++u){const t=d+u*f-w;for(let e=r;e<s;++e){const r=n+e*m-_;a+=y?S.get(l,t,r,i)*C.get(l,u,e,o):S.get(l,i,t,r)*C.get(l,o,u,e)}}v.set(a,d,n,i,o)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}},tC={kernelName:Es,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{dy:i,filter:o}=e,{inputShape:a,strides:l,pad:u,dataFormat:c,dimRoundingMode:h}=s;pk([i,o],"conv2dBackpropInput");const p=r.computeStrides(o.shape),f=r.computeStrides(i.shape);let m=d.convertConv2DDataFormat(c);const g=d.computeConv2DInfo(a,o.shape,l,1,u,h,!1,m),b=new $a(g.inShape,"float32"),y=b.values,v=n.data.get(i.dataId).values,_=n.data.get(o.dataId).values,[w,x,k]=p,{batchSize:S,filterHeight:C,filterWidth:I,inChannels:E,inHeight:O,inWidth:T,outChannels:N,outHeight:A,outWidth:R,strideHeight:F,strideWidth:D}=g;m=g.dataFormat;const P=C-1-g.padInfo.top,$=I-1-g.padInfo.left,M="channelsLast"===m,L=b.strides[0],j=M?b.strides[1]:b.strides[2],z=M?b.strides[2]:1,B=M?1:b.strides[1],V=f[0],U=M?f[1]:f[2],W=M?f[2]:1,H=M?1:f[1];for(let r=0;r<S;++r)for(let t=0;t<E;++t)for(let e=0;e<O;++e){const n=e-P,s=Math.max(0,Math.ceil(n/F)),i=Math.min(A,(C+n)/F);for(let o=0;o<T;++o){const a=o-$,l=Math.max(0,Math.ceil(a/D)),u=Math.min(R,(I+a)/D);let c=0;for(let e=s;e<i;++e){const s=e*F-n;for(let n=l;n<u;++n){const i=V*r+U*e+W*n,o=w*(C-1-s)+x*(I-1-(n*D-a))+k*t;for(let t=0;t<N;++t)c+=v[i+H*t]*_[o+t]}}y[L*r+j*e+z*o+B*t]=c}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},eC={kernelName:Os,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i,filter:o}=e,{strides:a,pad:l,dilations:u}=s;pk([i,o],"conv3d");const c=d.computeConv3DInfo(i.shape,o.shape,a,u,l),{filterDepth:h,filterHeight:p,filterWidth:f,dilationDepth:m,dilationHeight:g,dilationWidth:b,padInfo:y}=c,v=y.front,_=y.left,w=y.top,x=new $a(c.outShape,i.dtype),k=n.data.get(i.dataId).values,S=n.data.get(o.dataId).values,C=x.values,I=r.computeStrides(i.shape),E=r.computeStrides(o.shape);for(let r=0;r<c.batchSize;++r){const t=r*I[0],e=r*x.strides[0];for(let n=0;n<c.outDepth;++n){const r=e+n*x.strides[1],s=n*c.strideDepth-v;for(let e=0;e<h;++e){const n=s+e*m;if(n<0||n>=c.inDepth)continue;const i=e*E[0],o=t+n*I[1];for(let t=0;t<c.outHeight;++t){const e=r+t*x.strides[2],n=t*c.strideHeight-w;for(let t=0;t<p;++t){const r=n+t*g;if(r<0||r>=c.inHeight)continue;const s=i+t*E[1],a=o+r*I[2];for(let t=0;t<c.outWidth;++t){const n=e+t*c.outChannels,r=t*c.strideWidth-_;for(let t=0;t<f;++t){const e=r+t*b;if(e<0||e>=c.inWidth)continue;const i=a+e*c.inChannels;let o=s+t*E[2];for(let t=0;t<c.inChannels;++t){const e=k[i+t];for(let t=0;t<c.outChannels;++t)C[n+t]+=e*S[o+t];o+=c.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}},nC={kernelName:Ts,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i,dy:o}=e,{strides:a,pad:l,filterShape:u}=s;pk([i,o],"conv3dBackpropFilterV2");const c=r.computeStrides(i.shape),h=r.computeStrides(o.shape),p=d.computeConv3DInfo(i.shape,u,a,1,l),f=p.strideDepth,m=p.strideHeight,g=p.strideWidth,b=p.filterDepth,y=p.filterHeight,v=p.filterWidth,_=new $a(p.filterShape,"float32"),w=_.values,[x,k,S,C]=_.strides,I=n.data.get(o.dataId).values,[E,O,T,N]=h,A=n.data.get(i.dataId).values,[R,F,D,P]=c,$=p.padInfo.front,M=p.padInfo.left,L=p.padInfo.top;for(let r=0;r<b;++r){const t=Math.max(0,Math.ceil(($-r)/f)),e=Math.min(p.outDepth,(p.inDepth+$-r)/f),n=r*x;for(let s=0;s<y;++s){const i=Math.max(0,Math.ceil((L-s)/m)),o=Math.min(p.outHeight,(p.inHeight+L-s)/m),a=s*k+n;for(let n=0;n<v;++n){const l=Math.max(0,Math.ceil((M-n)/g)),u=Math.min(p.outWidth,(p.inWidth+M-n)/g),c=n*S+a;for(let a=0;a<p.inChannels;++a){const h=a*C+c;for(let c=0;c<p.outChannels;++c){let d=0;for(let h=0;h<p.batchSize;++h){const p=h*R,b=h*E;for(let h=t;h<e;++h){const t=(r+h*f-$)*F+p,e=h*O+b;for(let r=i;r<o;++r){const i=(s+r*m-L)*D+t,o=r*T+e;for(let t=l;t<u;++t)d+=A[(n+t*g-M)*P+i+a]*I[t*N+o+c]}}}w[h+c]=d}}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}},rC={kernelName:Ns,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{dy:i,filter:o}=e,{pad:a,strides:l,inputShape:u}=s;pk([i],"conv3dBackpropInputV2");const c=r.computeStrides(i.shape),h=r.computeStrides(o.shape),p=d.computeConv3DInfo(u,o.shape,l,1,a),f=new $a(p.inShape,"float32"),m=f.values,[g,b,y,v]=f.strides,_=n.data.get(i.dataId).values,[w,x,k,S]=c,C=n.data.get(o.dataId).values,[I,E,O,T]=h,{batchSize:N,filterDepth:A,filterHeight:R,filterWidth:F,inChannels:D,inDepth:P,inHeight:$,inWidth:M,outChannels:L,outDepth:j,outHeight:z,outWidth:B,strideDepth:V,strideHeight:U,strideWidth:W}=p,H=A-1-p.padInfo.front,G=R-1-p.padInfo.top,q=F-1-p.padInfo.left;for(let r=0;r<N;++r)for(let t=0;t<D;++t)for(let e=0;e<P;++e){const n=e-H,s=Math.max(0,Math.ceil(n/V)),i=Math.min(j,(A+n)/V);for(let o=0;o<$;++o){const a=o-G,l=Math.max(0,Math.ceil(a/U)),u=Math.min(z,(R+a)/U);for(let c=0;c<M;++c){const h=c-q,d=Math.max(0,Math.ceil(h/W)),p=Math.min(B,(F+h)/W);let f=0;for(let e=s;e<i;++e){const s=e*V-n;for(let n=l;n<u;++n){const i=n*U-a;for(let o=d;o<p;++o){const a=w*r+x*e+k*n+S*o,l=I*(A-1-s)+E*(R-1-i)+O*(F-1-(o*W-h))+T*t;for(let t=0;t<L;++t)f+=_[a+t]*C[l+t]}}}m[g*r+b*e+y*o+v*c+t]=f}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},sC=gk(As,t=>Math.cos(t)),iC={kernelName:As,backendName:"cpu",kernelFunc:sC},oC=gk(Rs,t=>Math.cosh(t)),aC={kernelName:Rs,backendName:"cpu",kernelFunc:oC},lC={kernelName:Ds,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{image:i,boxes:o,boxInd:a}=e,{cropSize:l,method:u,extrapolationValue:c}=s,[h,d,p,f]=i.shape,m=o.shape[0],[g,b]=l,y=hu([m,g,b,f],"float32"),v=n.data.get(o.dataId).values,_=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,x=r.computeStrides(i.shape),k=r.computeStrides(y.shape);for(let r=0;r<m;r++){const t=4*r,e=v[t],n=v[t+1],s=v[t+2],i=v[t+3],o=_[r];if(o>=h)continue;const a=g>1?(s-e)*(d-1)/(g-1):0,l=b>1?(i-n)*(p-1)/(b-1):0;for(let h=0;h<g;h++){const t=g>1?e*(d-1)+h*a:.5*(e+s)*(d-1);if(t<0||t>d-1)for(let e=0;e<b;e++)for(let t=0;t<f;t++)y.values[t+e*k[2]+h*k[1]+r*k[0]]=c;else if("bilinear"===u){const e=Math.floor(t),s=Math.ceil(t),a=t-e;for(let t=0;t<b;t++){const u=b>1?n*(p-1)+t*l:.5*(n+i)*(p-1);if(u<0||u>p-1){for(let e=0;e<f;e++)y.values[e+t*k[2]+h*k[1]+r*k[0]]=c;continue}const d=Math.floor(u),m=Math.ceil(u),g=u-d;for(let n=0;n<f;n++){let i=n+d*x[2]+e*x[1]+o*x[0];const l=w[i];i=n+m*x[2]+e*x[1]+o*x[0];const u=w[i];i=n+d*x[2]+s*x[1]+o*x[0];const c=w[i];i=n+m*x[2]+s*x[1]+o*x[0];const p=w[i],f=l+(u-l)*g;i=n+t*k[2]+h*k[1]+r*k[0],y.values[i]=f+(c+(p-c)*g-f)*a}}}else for(let e=0;e<b;++e){const s=b>1?n*(p-1)+e*l:.5*(n+i)*(p-1);if(s<0||s>p-1){for(let t=0;t<f;t++)y.values[t+e*k[2]+h*k[1]+r*k[0]]=c;continue}const a=Math.round(s),u=Math.round(t);for(let t=0;t<f;t++)y.values[t+e*k[2]+h*k[1]+r*k[0]]=w[t+a*x[2]+u*x[1]+o*x[0]]}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},uC={kernelName:Fs,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o,exclusive:a,reverse:l}=s;pk(i,"cumsum");const u=d.getAxesPermutation([o],i.shape.length);let c=i;null!=u&&(c=aS({inputs:{x:i},backend:n,attrs:{perm:u}}));const h=d.getInnerMostAxes(1,i.shape.length)[0];if(h!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${h}`);const p=Ka(c.dtype,"int32"),f=r.makeZerosTypedArray(r.sizeFromShape(c.shape),p),m=n.data.get(c.dataId).values,g=c.shape[c.shape.length-1],b=l?(t,e)=>t+g-e-1:(t,e)=>t+e;for(let r=0;r<m.length;r+=g)for(let t=0;t<g;t++){const e=b(r,t);if(0===t)f[e]=a?0:m[e];else{const n=b(r,t-1);f[e]=a?m[n]+f[n]:m[e]+f[n]}}const y=n.makeTensorInfo(c.shape,p,f);if(null!=u){const t=aS({inputs:{x:y},backend:n,attrs:{perm:d.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),t}return y}},cC={kernelName:Ps,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(1===s.shape.length){const t=$S(n.data.get(s.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,t)}if(2===s.shape.length){const t=MS(n.bufferSync(s),n.bufferSync(i),o,a);return n.makeTensorInfo(t.shape,i.dtype,t.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}},hC={kernelName:$s,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{blockSize:o,dataFormat:a}=s;r.assert("NHWC"===a,()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`),r.assert(o>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${o}`);const l=i.shape[0],u=i.shape[1],c=i.shape[2],h=i.shape[3],d=u*o,p=c*o,f=h/(o*o),m=n.data.get(i.dataId).values,g=new Float32Array(l*d*p*f);let b=0;for(let r=0;r<l;++r)for(let t=0;t<d;++t){const e=Math.floor(t/o),n=t%o;for(let t=0;t<p;++t){const s=Math.floor(t/o),i=(n*o+t%o)*f;for(let t=0;t<f;++t)g[b++]=m[t+i+h*(s+c*(e+u*r))]}}return n.makeTensorInfo([l,d,p,f],i.dtype,g)}};function dC(t){const{inputs:e,backend:n,attrs:s}=t,{x:i,filter:o}=e,{strides:a,pad:l,dilations:u,dimRoundingMode:c}=s;pk([i,o],"depthwiseConv2DNative");const h=r.computeStrides(i.shape),p=r.computeStrides(o.shape);let f=u;null==f&&(f=[1,1]),r.assert(d.eitherStridesOrDilationsAreOne(a,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${f}'`);const m=d.computeConv2DInfo(i.shape,o.shape,a,f,l,c,!0),{filterHeight:g,filterWidth:b,dilationHeight:y,dilationWidth:v,padInfo:_}=m,w=_.left,x=_.top,k=m.outChannels/m.inChannels,S=new $a(m.outShape,i.dtype),C=n.data.get(i.dataId).values,I=n.data.get(o.dataId).values,E=S.values;for(let r=0;r<m.batchSize;++r){const t=r*h[0],e=r*S.strides[0];for(let n=0;n<m.outHeight;++n){const r=e+n*S.strides[1],s=n*m.strideHeight-x;for(let e=0;e<g;++e){const n=s+e*y;if(n<0||n>=m.inHeight)continue;const i=e*p[0],o=t+n*h[1];for(let t=0;t<m.outWidth;++t){const e=r+t*S.strides[2],n=t*m.strideWidth-w;for(let t=0;t<b;++t){const r=n+t*v;if(r<0||r>=m.inWidth)continue;const s=o+r*m.inChannels;let a=e,l=i+t*p[1];for(let t=0;t<m.inChannels;++t){const e=C[s+t];for(let t=0;t<k;++t)E[a+t]+=e*I[l+t];a+=k,l+=k}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const pC={kernelName:Ms,backendName:"cpu",kernelFunc:dC},fC={kernelName:Ls,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r;pk([s,i],"depthwiseConv2dNativeBackpropFilter");const h=d.computeConv2DInfo(s.shape,c,o,a,l,u,!0),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=h,b=new $a(h.filterShape,"float32"),y=h.padInfo.left,v=h.padInfo.top,_=h.outChannels/h.inChannels,w=n.data.get(s.dataId).values,x=new $a(s.shape,s.dtype,w),k=n.data.get(i.dataId).values,S=new $a(i.shape,i.dtype,k);for(let d=0;d<m;++d){const t=Math.max(0,Math.ceil((v-d)/p)),e=Math.min(h.outHeight,(h.inHeight+v-d)/p);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((y-n)/f)),s=Math.min(h.outWidth,(h.inWidth+y-n)/f);for(let i=0;i<h.outChannels;++i){const o=Math.trunc(i/_),a=i%_;let l=0;for(let u=0;u<h.batchSize;++u)for(let a=t;a<e;++a){const t=d+a*p-v;for(let e=r;e<s;++e)l+=x.get(u,t,n+e*f-y,o)*S.get(u,a,e,i)}b.set(l,d,n,o,a)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},mC={kernelName:js,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{dy:i,filter:o}=e,{strides:a,dilations:l,pad:u,dimRoundingMode:c,inputShape:h}=s;pk([i,o],"depthwiseConv2DNativeBackpropInput");const p=r.computeStrides(i.shape),f=r.computeStrides(o.shape),m=d.computeConv2DInfo(h,o.shape,a,l,u,c,!0),g=new $a(m.inShape,"float32"),b=g.values,[y,v,_]=g.strides,w=n.data.get(i.dataId).values,[x,k,S]=p,C=n.data.get(o.dataId).values,[I,E,O]=f,{batchSize:T,filterHeight:N,filterWidth:A,inChannels:R,inHeight:F,inWidth:D,outChannels:P,outHeight:$,outWidth:M,strideHeight:L,strideWidth:j}=m,z=N-1-m.padInfo.top,B=A-1-m.padInfo.left,V=P/R;for(let r=0;r<T;++r)for(let t=0;t<R;++t)for(let e=0;e<F;++e){const n=e-z,s=Math.max(0,Math.ceil(n/L)),i=Math.min($,(N+n)/L);for(let o=0;o<D;++o){const a=o-B,l=Math.max(0,Math.ceil(a/j)),u=Math.min(M,(A+a)/j);let c=0;for(let e=s;e<i;++e){const s=e*L-n;for(let n=l;n<u;++n){const i=x*r+k*e+S*n,o=I*(N-1-s)+E*(A-1-(n*j-a))+O*t;for(let e=0;e<V;++e)c+=w[i+(t*V+e)]*C[o+e]}}b[y*r+v*e+_*o+t]=c}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}},gC={kernelName:zs,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n}=t,{x:s}=e,i=r.sizeFromShape(s.shape),o=n.data.get(s.dataId).values,a=hu([i,i],s.dtype),l=a.values;for(let r=0;r<o.length;r++)l[r*i+r]=o[r];const u=[...s.shape,...s.shape];return n.makeTensorInfo(u,a.dtype,a.values)}},bC={kernelName:Bs,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:i}=t,{strides:o,pad:a,dilations:l}=n,u=e,c=u.data.get(s.dataId).values,h=s.shape.length,p=u.data.get(i.dataId).values,f=i.shape.length,{batchSize:m,inHeight:g,inWidth:b,inChannels:y,outHeight:v,outWidth:_,padInfo:w,strideHeight:x,strideWidth:k,filterHeight:S,filterWidth:C,dilationHeight:I,dilationWidth:E,outShape:O}=d.computeDilation2DInfo(s.shape,i.shape,o,a,"NHWC",l),T=r.sizeFromShape(O),N=O.length,A=r.getArrayFromDType(s.dtype,T);for(let d=0;d<m;++d)for(let t=0;t<v;++t){const e=t*x-w.top;for(let n=0;n<_;++n){const o=n*k-w.left;for(let a=0;a<y;++a){let l=Number.MIN_SAFE_INTEGER;for(let t=0;t<S;++t){const n=e+t*I;if(n>=0&&n<g)for(let e=0;e<C;++e){const u=o+e*E;if(u>=0&&u<b){const o=r.locToIndex([d,n,u,a],h,r.computeStrides(s.shape)),m=r.locToIndex([t,e,a],f,r.computeStrides(i.shape)),g=c[o]+p[m];g>l&&(l=g)}}}A[r.locToIndex([d,t,n,a],N,r.computeStrides(O))]=l}}}return{dataId:u.write(r.toTypedArray(A,s.dtype),O,s.dtype),shape:O,dtype:s.dtype}}},yC={kernelName:Us,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:i,dy:o}=t,{strides:a,pad:l,dilations:u}=n,c=e,h=r.toNestedArray(s.shape,c.data.get(s.dataId).values),p=r.toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:m,inWidth:g,inChannels:b,outHeight:y,outWidth:v,padInfo:_,strideHeight:w,strideWidth:x,filterHeight:k,filterWidth:S,dilationHeight:C,dilationWidth:I,outShape:E}=d.computeDilation2DInfo(s.shape,i.shape,a,l,"NHWC",u);r.assert(o.rank===E.length,()=>`Error in Dilation2DBackpropFilter, dy must have the same rank as output ${E.length}, but got ${o.rank}`);const O=r.toNestedArray(E,c.data.get(o.dataId).values),T=r.makeZerosNestedTypedArray(i.shape,i.dtype);for(let r=0;r<f;++r)for(let t=0;t<y;++t){const e=t*w-_.top;for(let n=0;n<v;++n){const s=n*x-_.left;for(let i=0;i<b;++i){let o=Number.MIN_SAFE_INTEGER,a=0,l=0;for(let t=0;t<k;++t){const n=e+t*C;if(n>=0&&n<m)for(let e=0;e<S;++e){const u=s+e*I;if(u>=0&&u<g){const s=h[r][n][u][i]+p[t][e][i];s>o&&(o=s,a=t,l=e)}}}T[a][l][i]+=O[r][t][n][i]}}}return{dataId:c.write(r.toTypedArray(T,s.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},vC={kernelName:Vs,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:i,dy:o}=t,{strides:a,pad:l,dilations:u}=n,c=e,h=r.toNestedArray(s.shape,c.data.get(s.dataId).values),p=r.toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:m,inWidth:g,inChannels:b,outHeight:y,outWidth:v,padInfo:_,strideHeight:w,strideWidth:x,filterHeight:k,filterWidth:S,dilationHeight:C,dilationWidth:I,outShape:E}=d.computeDilation2DInfo(s.shape,i.shape,a,l,"NHWC",u);r.assert(o.rank===E.length,()=>`Error in Dilation2DBackpropInput, dy must have the same rank as output ${E.length}, but got ${o.rank}`);const O=r.toNestedArray(E,c.data.get(o.dataId).values),T=r.makeZerosNestedTypedArray(s.shape,s.dtype);for(let r=0;r<f;++r)for(let t=0;t<y;++t){const e=t*w-_.top;for(let n=0;n<v;++n){const s=n*x-_.left;for(let i=0;i<b;++i){let o=Number.MIN_SAFE_INTEGER,a=e<0?0:e,l=s<0?0:s;for(let t=0;t<k;++t){const n=e+t*C;if(n>=0&&n<m)for(let e=0;e<S;++e){const u=s+e*I;if(u>=0&&u<g){const s=h[r][n][u][i]+p[t][e][i];s>o&&(o=s,a=n,l=u)}}}T[r][a][l][i]+=O[r][t][n][i]}}}return{dataId:c.write(r.toTypedArray(T,s.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}},_C=Sk((t,e)=>t*e),wC=Uk((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),xC=Vk(ji,_C,wC),kC={kernelName:ji,backendName:"cpu",kernelFunc:xC};function SC(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o,keepDims:a}=s;let l;pk(i,"sum"),l="bool"===i.dtype?zk({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):_k({inputs:{x:i},backend:n});const u=l.shape.length,c=r.parseAxisParam(o,l.shape),h=d.getAxesPermutation(c,u);let p=c,f=l;null!=h&&(f=aS({inputs:{x:l},backend:n,attrs:{perm:h}}),p=d.getInnerMostAxes(p.length,u)),d.assertAxesAreInnerMostDims("sum",p,f.shape.length);const[m,g]=d.computeOutAndReduceShapes(f.shape,p);let b=Mk(n,m,d.upcastType(f.dtype,"int32"));const y=r.sizeFromShape(g),v=n.data.get(b.dataId).values,_=n.data.get(f.dataId).values;for(let r=0;r<v.length;++r){const t=r*y;let e=0;for(let n=0;n<y;++n)e+=_[t+n];v[r]=e}if(a){const t=b;b=Zk({inputs:{x:b},backend:n,attrs:{shape:d.expandShapeToKeepDim(b.shape,c)}}),n.disposeIntermediateTensorInfo(t)}return n.disposeIntermediateTensorInfo(l),null!=h&&n.disposeIntermediateTensorInfo(f),b}const CC={kernelName:xo,backendName:"cpu",kernelFunc:SC},IC={kernelName:Hs,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{equation:i}=s,o=e,{allDims:a,summedDims:l,idDims:u}=d.decodeEinsumEquation(i,o.length);d.checkEinsumDimSizes(a.length,u,o);const{path:c,steps:h}=d.getEinsumComputePath(l,u),p=h.length;let f=null,m=a.length;const g=[];for(let b=0;b<p;++b){for(const t of h[b]){const{permutationIndices:e,expandDims:s}=d.getEinsumPermutation(m,u[t]);let i;d.isIdentityPermutation(e)?i=o[t]:(i=aS({inputs:{x:o[t]},backend:n,attrs:{perm:e}}),g.push(i));const a=i.shape.slice();for(let t=0;t<s.length;++t)a.splice(s[t],0,1);r.arraysEqual(i.shape,a)||(i=Zk({inputs:{x:i},backend:n,attrs:{shape:a}}),g.push(i)),null===f?f=i:(f=xC({inputs:{a:i,b:f},backend:n}),g.push(f))}b<p-1&&(c[b]>=0&&(f=SC({inputs:{x:f},backend:n,attrs:{axis:c[b]-(a.length-m),keepDims:!1}}),g.push(f)),m--)}for(const r of g)r!==f&&n.disposeIntermediateTensorInfo(r);return f}},EC={kernelName:qs,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n}=t,{dy:s,y:i}=e;pk([s,i],"eluGrad");const o=new Float32Array(r.sizeFromShape(i.shape)),a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values;for(let r=0;r<a.length;++r){const t=a[r];o[r]=t>=1?l[r]:l[r]*(t+1)}return n.makeTensorInfo(i.shape,"float32",o)}},OC=Sk((t,e)=>t===e?1:0),TC=Vk(Ks,OC,null,"bool"),NC={kernelName:Ks,backendName:"cpu",kernelFunc:TC},AC=d.ERF_P,RC=d.ERF_A1,FC=d.ERF_A2,DC=d.ERF_A3,PC=d.ERF_A4,$C=d.ERF_A5,MC=gk(Zs,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+AC*n);return e*(1-(((($C*r+PC)*r+DC)*r+FC)*r+RC)*r*Math.exp(-n*n))}),LC={kernelName:Zs,backendName:"cpu",kernelFunc:MC},jC=jS(t=>Math.exp(t)),zC=bk(Ys,jC),BC={kernelName:Ys,backendName:"cpu",kernelFunc:zC};function VC(t){const{inputs:e,backend:n,attrs:s}=t,{input:i}=e,{dim:o}=s,a=i.shape.length,l=i.shape.slice();let u=o;return o<0&&(r.assert(-(a+1)<=o,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),u=a+o+1),l.splice(u,0,1),Zk({inputs:{x:i},backend:n,attrs:{shape:l}})}const UC={kernelName:Xs,backendName:"cpu",kernelFunc:VC},WC=jS(t=>Math.expm1(t)),HC=bk(Js,WC),GC={kernelName:Js,backendName:"cpu",kernelFunc:HC},qC=Sk((t,e)=>t/e),ZC=Vk(Ws,qC),KC={kernelName:Ws,backendName:"cpu",kernelFunc:ZC},YC=Sk((t,e)=>t-e),XC=Uk((t,e,n,r)=>({real:t-n,imag:e-r})),JC=Vk(Mo,YC,XC),QC={kernelName:Mo,backendName:"cpu",kernelFunc:JC};function tI(t,e,n){const s=t.shape,i=s[0],o=s[1],a=n.data.get(t.dataId),l=a.complexTensorInfos.real,u=a.complexTensorInfos.imag,c=[i,o],h=r.sizeFromShape(c),p=r.getTypedArrayFromDType("float32",h),f=r.getTypedArrayFromDType("float32",h);for(let r=0;r<i;r++){const t=FS({inputs:{x:l},backend:n,attrs:{begin:[r,0],size:[1,o]}}),s=FS({inputs:{x:u},backend:n,attrs:{begin:[r,0],size:[1,o]}}),i=Pk({inputs:{real:t,imag:s},backend:n}),{real:a,imag:c}=eI(i,e,n),h=d.mergeRealAndImagArrays(a,c);for(let e=0;e<o;e++){const t=d.getComplexWithIndex(h,e);p[r*o+e]=t.real,f[r*o+e]=t.imag}n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i)}const m=n.makeTensorInfo(c,"float32",p),g=n.makeTensorInfo(c,"float32",f),b=Pk({inputs:{real:m,imag:g},backend:n});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),b}function eI(t,e,n){const s=r.sizeFromShape(t.shape),i=n.data.get(t.dataId),o=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(0==((l=s)&l-1)){const i=nI(o,a,s,e,n),l=[t.shape[0],t.shape[1]];if(e){const t=n.makeTensorInfo(l,"float32",i.real),e=n.makeTensorInfo(l,"float32",i.imag),o=n.makeTensorInfo([],"float32",r.createScalarValue(s,"float32")),a=_k({inputs:{x:o},backend:n}),u=KC.kernelFunc({inputs:{a:t,b:o},backend:n}),c=KC.kernelFunc({inputs:{a:e,b:a},backend:n}),h=n.data.get(u.dataId).values,d=n.data.get(c.dataId).values;return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),{real:h,imag:d}}return i}{const t=function(t,e,n){const r=new Float32Array(2*e);for(let s=0;s<e;s++){let i=0,o=0;for(let r=0;r<e;r++){const a=d.exponent(s*r,e,n),l=d.getComplexWithIndex(t,r);i+=l.real*a.real-l.imag*a.imag,o+=l.real*a.imag+l.imag*a.real}n&&(i/=e,o/=e),d.assignToTypedArray(r,i,o,s)}return r}(d.mergeRealAndImagArrays(o,a),s,e);return d.splitRealAndImagArrays(t)}var l}function nI(t,e,n,r,s){if(1===n)return{real:t,imag:e};const i=d.mergeRealAndImagArrays(t,e),o=n/2,a=d.complexWithEvenIndex(i),l=a.real,u=a.imag,c=[l.length],h=s.makeTensorInfo(c,"float32",l),p=s.makeTensorInfo(c,"float32",u),f=Pk({inputs:{real:h,imag:p},backend:s}),m=d.complexWithOddIndex(i),g=m.real,b=m.imag,y=[g.length],v=s.makeTensorInfo(y,"float32",g),_=s.makeTensorInfo(y,"float32",b),w=Pk({inputs:{real:v,imag:_},backend:s}),x=nI(l,u,o,r,s),k=x.real,S=x.imag,C=[k.length],I=s.makeTensorInfo(C,"float32",k),E=s.makeTensorInfo(C,"float32",S),O=Pk({inputs:{real:I,imag:E},backend:s}),T=nI(g,b,o,r,s),N=T.real,A=T.imag,R=[N.length],F=s.makeTensorInfo(R,"float32",N),D=s.makeTensorInfo(R,"float32",A),P=Pk({inputs:{real:F,imag:D},backend:s}),$=d.exponents(n,r),M=[$.real.length],L=s.makeTensorInfo(M,"float32",$.real),j=s.makeTensorInfo(M,"float32",$.imag),z=Pk({inputs:{real:L,imag:j},backend:s}),B=xC({inputs:{a:z,b:P},backend:s}),V=Gk({inputs:{a:O,b:B},backend:s}),U=JC({inputs:{a:O,b:B},backend:s}),W=Lk({inputs:{input:V},backend:s}),H=Lk({inputs:{input:U},backend:s}),G=qS({inputs:{input:V},backend:s}),q=qS({inputs:{input:U},backend:s}),Z=KS({inputs:[W,H],backend:s,attrs:{axis:0}}),K=KS({inputs:[G,q],backend:s,attrs:{axis:0}}),Y=s.data.get(Z.dataId).values,X=s.data.get(K.dataId).values;return s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(_),s.disposeIntermediateTensorInfo(w),s.disposeIntermediateTensorInfo(I),s.disposeIntermediateTensorInfo(E),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(F),s.disposeIntermediateTensorInfo(D),s.disposeIntermediateTensorInfo(P),s.disposeIntermediateTensorInfo(L),s.disposeIntermediateTensorInfo(j),s.disposeIntermediateTensorInfo(z),s.disposeIntermediateTensorInfo(B),s.disposeIntermediateTensorInfo(V),s.disposeIntermediateTensorInfo(U),s.disposeIntermediateTensorInfo(W),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(H),s.disposeIntermediateTensorInfo(q),s.disposeIntermediateTensorInfo(Z),s.disposeIntermediateTensorInfo(K),{real:Y,imag:X}}const rI={kernelName:Qs,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n}=t,{input:s}=e,i=r.sizeFromShape(s.shape),o=s.shape[s.shape.length-1],a=Zk({inputs:{x:s},backend:n,attrs:{shape:[i/o,o]}}),l=tI(a,!1,n),u=Zk({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}};function sI(t){const{backend:e,attrs:n}=t,{shape:s,value:i,dtype:o}=n,a=o||r.inferDtype(i),l=r.getArrayFromDType(a,r.sizeFromShape(s));return function(t,e,n){t.fill(e)}(l,i),e.makeTensorInfo(s,a,l)}const iI={kernelName:ti,backendName:"cpu",kernelFunc:sI},oI={kernelName:ei,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,s=e,i=r.getTypedArrayFromDType(n.dtype,r.sizeFromShape(n.shape)),[o,a,l,u]=n.shape,c=s.data.get(n.dataId).values;for(let r=0;r<o;r++){const t=r*l*a*u;for(let e=0;e<a;e++){const n=e*(l*u);for(let r=0;r<l;r++){const s=r*u;for(let a=0;a<u;a++){const h=Math.round(l-[o,e,r,a][2]),d=t+n+s+a;let p=c[d];h>=0&&h<l&&(p=c[t+n+h*u+a]),i[d]=p}}}}return{dataId:s.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},aI=jS(t=>Math.floor(t)),lI=bk(ni,aI),uI={kernelName:ni,backendName:"cpu",kernelFunc:lI},cI=Sk((t,e)=>Math.floor(t/e)),hI=Vk(ri,cI,null,"int32"),dI={kernelName:ri,backendName:"cpu",kernelFunc:hI},pI={kernelName:Jo,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=XS({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d}});if(o){const t=m;m=Gk({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(t)}if(p){const t=m;m=Dk(n,m,p,a,f),n.disposeIntermediateTensorInfo(t)}return m}},fI={kernelName:Qo,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=dC({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d}});if(o){const t=m;m=Gk({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(t)}if(p){const t=m;m=Dk(n,m,p,a,f),n.disposeIntermediateTensorInfo(t)}return m}};function mI(t,e,n,r,s,i,o,a,l){const u=hu([r,i],n);for(let c=0;c<r;c++){const n=[];let r=0;for(let e=0;e<s;e++){const i=t[c*s+e];r+=i*o[e],n.push(i)}if(r<0||r>=l/i)throw new Error(`Invalid indices: ${n} does not index into ${a}`);for(let t=0;t<i;t++)u.values[c*i+t]=e.get(...e.indexToLoc(r*i+t))}return u}const gI={kernelName:oi,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n}=t,{params:s,indices:i}=e,o=r.sizeFromShape(s.shape),a=i.shape,l=a[a.length-1],[u,c,h,p]=d.prepareAndValidate(s,i);if(0===c)return n.makeTensorInfo(u,s.dtype,[]);const f=mI(n.data.get(i.dataId).values,n.bufferSync(s),s.dtype,c,l,h,p,s.shape,o);return n.makeTensorInfo(u,s.dtype,f.values)}};function bI(t,e,n){const r=hu(n,t.dtype);for(let s=0;s<r.size;++s){const n=r.indexToLoc(s).slice(),i=e.locToIndex([n[0],n[2]]);n[2]=e.values[i];const o=t.locToIndex(n);r.values[s]=t.values[o]}return r}const yI={kernelName:ii,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i,indices:o}=e,{axis:a,batchDims:l}=s;pk([i,o],"gatherV2");let u=l;null==l&&(u=0);const c=r.sizeFromShape(o.shape),h=r.parseAxisParam(a,i.shape)[0],p=d.segment_util.collectGatherOpShapeInfo(i,o,h,u),f=Zk({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=Zk({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,c/p.batchSize]}}),g=[p.batchSize,p.outerSize,c/p.batchSize,p.sliceSize],b=n.bufferSync(m),y=bI(n.bufferSync(f),b,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,y.dtype,y.values)}},vI=Sk((t,e)=>t>e?1:0),_I=Vk(ai,vI,null,"bool"),wI={kernelName:ai,backendName:"cpu",kernelFunc:_I},xI=Sk((t,e)=>t>=e?1:0),kI=Vk(li,xI,null,"bool"),SI={kernelName:li,backendName:"cpu",kernelFunc:kI},CI={kernelName:ci,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n}=t,{input:s}=e,i=r.sizeFromShape(s.shape),o=s.shape[s.shape.length-1],a=Zk({inputs:{x:s},backend:n,attrs:{shape:[i/o,o]}}),l=tI(a,!0,n),u=Zk({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}},II=gk(di,t=>Number.isFinite(t)?1:0,"bool"),EI={kernelName:di,backendName:"cpu",kernelFunc:II},OI=gk(pi,t=>Math.abs(t)===1/0?1:0,"bool"),TI={kernelName:pi,backendName:"cpu",kernelFunc:OI},NI=gk(fi,t=>Number.isNaN(t)?1:0,"bool"),AI={kernelName:fi,backendName:"cpu",kernelFunc:NI},RI=Sk((t,e)=>t<e?1:0),FI=Vk(gi,RI,null,"bool"),DI={kernelName:gi,backendName:"cpu",kernelFunc:FI},PI=Sk((t,e)=>t<=e?1:0),$I=Vk(bi,PI,null,"bool"),MI={kernelName:bi,backendName:"cpu",kernelFunc:$I};function LI(t,e,n){const s=(e-t)/(n-1),i=r.makeZerosTypedArray(n,"float32");i[0]=t;for(let r=1;r<i.length;r++)i[r]=i[r-1]+s;return i}const jI={kernelName:yi,backendName:"cpu",kernelFunc:function(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=LI(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}},zI=jS(t=>Math.log(t)),BI=bk(vi,zI),VI={kernelName:vi,backendName:"cpu",kernelFunc:BI},UI=gk(_i,t=>Math.log1p(t)),WI={kernelName:_i,backendName:"cpu",kernelFunc:UI},HI=Sk((t,e)=>t&&e),GI=Vk(wi,HI,null,"bool"),qI={kernelName:wi,backendName:"cpu",kernelFunc:GI},ZI=gk(xi,t=>t?0:1,"bool"),KI={kernelName:xi,backendName:"cpu",kernelFunc:ZI},YI=Sk((t,e)=>t||e),XI=Vk(ki,YI,null,"bool"),JI={kernelName:ki,backendName:"cpu",kernelFunc:XI},QI={kernelName:Si,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{depthRadius:o,bias:a,alpha:l,beta:u}=s;pk(i,"LRN");const c=i.shape[3],h=c-1,d=n.data.get(i.dataId).values,p=r.sizeFromShape(i.shape),f=new Float32Array(p);function m(t){const e=t%c;let n=t-e+Math.max(0,e-o);const r=t-e+Math.min(e+o,h);let s=0;for(;n<=r;n++){const t=d[n];s+=t*t}return s}for(let r=0;r<p;r++){const t=m(r),e=d[r]*Math.pow(a+l*t,-u);f[r]=e}return n.makeTensorInfo(i.shape,i.dtype,f)}},tE={kernelName:Ci,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i,y:o,dy:a}=e,{depthRadius:l,bias:u,alpha:c,beta:h}=s;pk(a,"LRNGrad");const d=r.sizeFromShape(a.shape),p=a.shape[3],f=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,g=n.data.get(o.dataId).values,b=new Float32Array(d),y=d;for(let r=0;r<y;r++){const t=r%p,e=r-t+Math.max(0,t-l),n=r-t+Math.min(p,t+l+1);let s=0;for(let r=e;r<n;r++)s+=Math.pow(m[r],2);s=c*s+u;for(let i=e;i<n;i++){let t=-2*c*h*m[i]*g[r]/s;r===i&&(t+=Math.pow(s,-h)),t*=f[r],b[i]+=t}}return n.makeTensorInfo(a.shape,i.dtype,b)}};function eE(t,e,n,s){const i=r.getTypedArrayFromDType(s,r.sizeFromShape(n));for(let r=0;r<i.length;++r){const n=r*e;let s=t[n];for(let r=0;r<e;++r){const e=t[n+r];(Number.isNaN(e)||e>s)&&(s=e)}i[r]=s}return i}function nE(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{reductionIndices:o,keepDims:a}=s,l=n;let u=i.shape;const c=u.length,h=r.parseAxisParam(o,u);let p=h;const f=d.getAxesPermutation(p,c);let m=l.data.get(i.dataId).values;if(null!=f){const t=new Array(c);for(let e=0;e<t.length;e++)t[e]=u[f[e]];m=oS(m,u,i.dtype,f,t),p=d.getInnerMostAxes(p.length,c),u=t}pk(i,"max"),d.assertAxesAreInnerMostDims("max",p,c);const[g,b]=d.computeOutAndReduceShapes(u,p),y=eE(m,r.sizeFromShape(b),g,i.dtype),v=l.write(y,g,i.dtype);let _=g;return a&&(_=d.expandShapeToKeepDim(g,h)),{dataId:v,shape:_,dtype:i.dtype}}const rE={kernelName:Ii,backendName:"cpu",kernelFunc:nE},sE=Sk((t,e)=>Math.max(t,e)),iE=Vk(Ei,sE),oE={kernelName:Ei,backendName:"cpu",kernelFunc:iE},aE={kernelName:Oi,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e;pk(i,"maxPool");const{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=s;r.assert(d.eitherStridesOrDilationsAreOne(a,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`);const c=d.computePool2DInfo(i.shape,o,a,1,l,u);let h;if(1===c.filterWidth&&1===c.filterHeight&&r.arraysEqual(c.inShape,c.outShape))h=_k({inputs:{x:i},backend:n});else{const t=n.data.get(i.dataId).values,e=r.computeStrides(i.shape),s=SS(t,0,i.dtype,e,c,"max");h=n.makeTensorInfo(c.outShape,i.dtype,s.values)}return h}},lE={kernelName:Ni,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=s;pk(i,"maxPool3d");const h=d.computePool3DInfo(i.shape,o,a,1,l,u,c),p=IS(n.data.get(i.dataId).values,0,i.dtype,r.computeStrides(i.shape),h,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}},uE={kernelName:Ai,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=r;pk([s,i],"maxPool3DGrad");const c=d.computePool3DInfo(i.shape,o,a,1,l,u),h=function(t,e){const n=hu(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.front,p=e.padInfo.top,f=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let b=0;b<e.outDepth;++b){const y=b*r-d;let v=y;for(;v<0;)v+=o;const _=Math.min(e.inDepth,u+y);for(let r=0;r<e.outHeight;++r){const u=r*s-p;let d=u;for(;d<0;)d+=a;const w=Math.min(e.inHeight,c+u);for(let s=0;s<e.outWidth;++s){const p=s*i-f;let x=p;for(;x<0;)x+=l;const k=Math.min(e.inWidth,h+p);let S=Number.NEGATIVE_INFINITY,C=-1;for(let e=v;e<_;e+=o){const n=e-y;for(let r=d;r<w;r+=a){const s=r-u;for(let i=x;i<k;i+=l){const o=i-p,a=t.get(m,e,r,i,g);a>=S&&(S=a,C=n*c*h+s*c+o)}}}n.set(C,m,b,r,s,g)}}}return n}(n.bufferSync(i),c),p=c.strideDepth,f=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,b=c.dilationHeight,y=c.dilationWidth,v=c.effectiveFilterDepth,_=c.effectiveFilterHeight,w=c.effectiveFilterWidth,x=v-1-c.padInfo.front,k=w-1-c.padInfo.left,S=_-1-c.padInfo.top,C=hu(i.shape,"float32"),I=n.bufferSync(s);for(let d=0;d<c.batchSize;++d)for(let t=0;t<c.inChannels;++t)for(let e=0;e<c.inDepth;++e)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const s=e-x,i=n-S,o=r-k;let a=0;for(let e=0;e<v;e+=g){const n=(s+e)/p;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let r=0;r<_;r+=b){const s=(i+r)/f;if(!(s<0||s>=c.outHeight||Math.floor(s)!==s))for(let i=0;i<w;i+=y){const l=(o+i)/m;if(l<0||l>=c.outWidth||Math.floor(l)!==l)continue;const u=v*_*w-1-h.get(d,n,s,l,t)===e*_*w+r*w+i?1:0;0!==u&&(a+=I.get(d,n,s,l,t)*u)}}}C.set(a,d,e,n,r,t)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}},cE={kernelName:Ti,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;pk([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:h}=r,p=d.computePool2DInfo(a.shape,l,u,1,c,h),f=n.data.get(a.dataId).values,m=hu(p.outShape,a.dtype,CS(f,a.shape,a.dtype,p).values),g=p.strideHeight,b=p.strideWidth,y=p.dilationHeight,v=p.dilationWidth,_=p.effectiveFilterHeight,w=p.effectiveFilterWidth,x=w-1-p.padInfo.left,k=_-1-p.padInfo.top,S=hu(a.shape,"float32"),C=n.data.get(s.dataId).values,I=hu(s.shape,"float32",C);for(let d=0;d<p.batchSize;++d)for(let t=0;t<p.inChannels;++t)for(let e=0;e<p.inHeight;++e)for(let n=0;n<p.inWidth;++n){const r=e-k,s=n-x;let i=0;for(let e=0;e<_;e+=y){const n=(r+e)/g;if(!(n<0||n>=p.outHeight||Math.floor(n)!==n))for(let r=0;r<w;r+=v){const o=(s+r)/b;if(o<0||o>=p.outWidth||Math.floor(o)!==o)continue;const a=_*w-1-m.get(d,n,o,t)===e*w+r?1:0;0!==a&&(i+=I.get(d,n,o,t)*a)}}S.set(i,d,e,n,t)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}},hE={kernelName:Ri,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{filterSize:i,strides:o,pad:a,includeBatchInIndex:l}=e,u=n;pk(s,"MaxPoolWithArgmax");const c=u.data.get(s.dataId).values,h=d.computePool2DInfo(s.shape,i,o,[1,1],a),[p,f]=function(t,e,n,s,i){const o=SS(t,0,n,r.computeStrides(e),i,"max"),a=CS(t,e,n,i,!0,s);return[o.values,a.values]}(c,s.shape,s.dtype,l,h),m=u.write(p,h.outShape,s.dtype),g=u.write(f,h.outShape,s.dtype);return[{dataId:m,shape:h.outShape,dtype:s.dtype},{dataId:g,shape:h.outShape,dtype:"int32"}]}},dE={kernelName:Fi,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o,keepDims:a}=s,l=r.parseAxisParam(o,i.shape),u=d.computeOutAndReduceShapes(i.shape,l),c=r.sizeFromShape(u[1]),h=[],p=n.makeTensorInfo([],"float32",new Float32Array([c]));h.push(p);const f=zk({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});h.push(f);const m=ZC({inputs:{a:f,b:p},backend:n});h.push(m);const g=SC({inputs:{x:m},backend:n,attrs:{axis:o,keepDims:a}});return h.forEach(t=>n.disposeIntermediateTensorInfo(t)),g}},pE={kernelName:Di,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o,keepDims:a}=s;pk(i,"min");const l=r.parseAxisParam(o,i.shape);let u=l;const c=d.getAxesPermutation(u,i.shape.length);let h=i;null!=c&&(h=aS({inputs:{x:i},backend:n,attrs:{perm:c}}),u=d.getInnerMostAxes(u.length,i.shape.length)),d.assertAxesAreInnerMostDims("min",u,h.shape.length);const[p,f]=d.computeOutAndReduceShapes(h.shape,u),m=r.sizeFromShape(f),g=r.makeZerosTypedArray(r.sizeFromShape(p),h.dtype),b=n.data.get(h.dataId).values;for(let r=0;r<g.length;++r){const t=r*m;let e=b[t];for(let n=0;n<m;++n){const r=b[t+n];(Number.isNaN(r)||r<e)&&(e=r)}g[r]=e}null!=c&&n.disposeIntermediateTensorInfo(h);const y=n.makeTensorInfo(p,h.dtype,g);if(a){const t=Zk({inputs:{x:y},backend:n,attrs:{shape:d.expandShapeToKeepDim(p,l)}});return n.disposeIntermediateTensorInfo(y),t}return y}},fE=Sk((t,e)=>Math.min(t,e)),mE=Vk(Pi,fE),gE={kernelName:Pi,backendName:"cpu",kernelFunc:mE},bE={kernelName:$i,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{paddings:o,mode:a}=s;pk(i,"mirrorPad");const l=o.map((t,e)=>t[0]+i.shape[e]+t[1]),u=o.map(t=>t[0]),c=o.map((t,e)=>t[0]+i.shape[e]),h="reflect"===a?0:1,d=n.data.get(i.dataId).values,p=i.shape.length,f=r.computeStrides(i.shape),m=r.sizeFromShape(l),g=l.length,b=r.computeStrides(l),y=r.getTypedArrayFromDType(i.dtype,m);for(let v=0;v<m;v++){let t=r.indexToLoc(v,g,b);for(let n=0;n<g;n++)t[n]<u[n]?t[n]=2*u[n]-t[n]-h:t[n]>=c[n]&&(t[n]=2*(c[n]-1)-t[n]+h);t=t.map((t,e)=>t-u[e]);const e=r.locToIndex(t,p,f);y[v]=d[e]}return{dataId:n.write(y,l,i.dtype),shape:l,dtype:i.dtype}}},yE=Sk((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),vE=Vk(Mi,yE),_E={kernelName:Mi,backendName:"cpu",kernelFunc:vE};function wE(t){const{inputs:e,backend:n,attrs:s}=t,{logits:i}=e,{dim:o}=s,a=i.shape.length;let l=o;if(-1===l&&(l=a-1),l!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${l}`);const u=r.parseAxisParam([l],i.shape),c=nE({inputs:{x:i},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),h=d.expandShapeToKeepDim(c.shape,u),p=Zk({inputs:{x:c},backend:n,attrs:{shape:h}}),f=JC({inputs:{a:i,b:p},backend:n}),m=zC({inputs:{x:f},backend:n}),g=SC({inputs:{x:m},backend:n,attrs:{axis:u,keepDims:!1}}),b=Zk({inputs:{x:g},backend:n,attrs:{shape:h}}),y=ZC({inputs:{a:m,b:b},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),y}const xE={kernelName:Co,backendName:"cpu",kernelFunc:wE},kE={kernelName:Li,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{logits:i}=e,{numSamples:o,seed:a,normalized:l}=s;pk(i,"multinomial");const u=l?i:wE({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=u.shape[0],h=u.shape[1],d=n.data.get(u.dataId).values,p=[c,o],f=r.makeZerosTypedArray(r.sizeFromShape(p),"int32");for(let r=0;r<c;++r){const t=r*h,e=new Float32Array(h-1);e[0]=d[t];for(let r=1;r<e.length;++r)e[r]=e[r-1]+d[t+r];const n=Uh.alea(a.toString()),s=r*o;for(let r=0;r<o;++r){const t=n();f[s+r]=e.length;for(let n=0;n<e.length;n++)if(t<e[n]){f[s+r]=n;break}}}return l||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(p,"int32",f)}};function SE(t,e,n){const s=r.createScalarValue(-1,n);return _C([],e,s,t,n)}const CE={kernelName:zi,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n}=t,{x:r}=e;pk(r,"neg");const s=n.data.get(r.dataId).values,[i,o]=SE(s,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}},IE=p.nonMaxSuppressionV3Impl,EE={kernelName:Vi,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;pk(s,"NonMaxSuppression");const u=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:h}=IE(u,c,o,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},OE=p.nonMaxSuppressionV4Impl,TE={kernelName:Ui,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r;pk(s,"NonMaxSuppressionPadded");const c=n.data.get(s.dataId).values,h=n.data.get(i.dataId).values,{selectedIndices:d,validOutputs:p}=OE(c,h,o,a,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},NE=p.nonMaxSuppressionV5Impl,AE={kernelName:Wi,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r;pk(s,"NonMaxSuppressionWithScore");const c=n.data.get(s.dataId).values,h=n.data.get(i.dataId).values,d=o,p=a,f=l,m=u,{selectedIndices:g,selectedScores:b}=NE(c,h,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}},RE=Sk((t,e)=>t!==e?1:0),FE=Vk(Bi,RE,null,"bool"),DE={kernelName:Bi,backendName:"cpu",kernelFunc:FE},PE={kernelName:Gi,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{indices:i}=e,{depth:o,onValue:a,offValue:l}=s;pk(i,"oneHot");const u=r.sizeFromShape(i.shape),c=new Float32Array(u*o);c.fill(l);const h=n.data.get(i.dataId).values;for(let r=0;r<u;++r)h[r]>=0&&h[r]<o&&(c[r*o+h[r]]=a);return n.makeTensorInfo([...i.shape,o],"int32",c)}};function $E(t){const{inputs:e,backend:n}=t,{x:r}=e;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const t=Lk({inputs:{input:r},backend:n}),e=$E({inputs:{x:t},backend:n}),s=qS({inputs:{input:r},backend:n}),i=$E({inputs:{x:s},backend:n}),o=Pk({inputs:{real:e,imag:i},backend:n});return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),o}return sI({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const ME={kernelName:qo,backendName:"cpu",kernelFunc:$E},LE={kernelName:Hi,backendName:"cpu",kernelFunc:function t(e){const{inputs:n,backend:r}=e,{x:s}=n;if("string"===s.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===s.dtype){const e=Lk({inputs:{input:s},backend:r}),n=t({inputs:{x:e},backend:r}),i=qS({inputs:{input:s},backend:r}),o=$E({inputs:{x:i},backend:r}),a=Pk({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(e),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),a}return sI({backend:r,attrs:{shape:s.shape,value:1,dtype:s.dtype}})}};function jE(t){const{inputs:e,backend:n,attrs:s}=t,{axis:i}=s;if(1===e.length)return VC({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const o=e[0].shape,a=e[0].dtype;e.forEach(t=>{r.assertShapesMatch(o,t.shape,"All tensors passed to stack must have matching shapes"),r.assert(a===t.dtype,()=>"All tensors passed to stack must have matching dtypes")});const l=[],u=KS({inputs:e.map(t=>{const e=VC({inputs:{input:t},backend:n,attrs:{dim:i}});return l.push(e),e}),backend:n,attrs:{axis:i}});return l.forEach(t=>n.disposeIntermediateTensorInfo(t)),u}const zE={kernelName:qi,backendName:"cpu",kernelFunc:jE},BE={kernelName:Zi,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{paddings:o,constantValue:a}=s;pk(i,"pad");const l=o.map((t,e)=>t[0]+i.shape[e]+t[1]),u=o.map(t=>t[0]),c=n.data.get(i.dataId).values,h=r.sizeFromShape(i.shape),d=i.shape.length,p=r.computeStrides(i.shape),f=r.sizeFromShape(l),m=l.length,g=r.computeStrides(l),b=r.getTypedArrayFromDType(i.dtype,f);0!==a&&b.fill(a);for(let y=0;y<h;y++){const t=r.indexToLoc(y,d,p).map((t,e)=>t+u[e]);b[r.locToIndex(t,m,g)]=c[y]}return{dataId:n.write(b,l,i.dtype),shape:l,dtype:i.dtype}}},VE=Sk((t,e)=>Math.pow(t,e)),UE=Vk(Ki,VE),WE={kernelName:Ki,backendName:"cpu",kernelFunc:UE};function HE(t,e,n,s){const[i,o]=d.computeOutAndReduceShapes(t,s),a=Ka(e,"int32"),l=r.makeZerosTypedArray(r.sizeFromShape(i),a),u=r.sizeFromShape(o);for(let r=0;r<l.length;++r){const t=r*u;let e=1;for(let r=0;r<u;++r)e*=n[t+r];l[r]=e}return{outVals:l,outShape:i,outDtype:a}}const GE={kernelName:Xi,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o,keepDims:a}=s;pk(i,"prod");const l=i.shape.length,u=r.parseAxisParam(o,i.shape),c=d.getAxesPermutation(u,l);let h=u,p=i;const f=[];null!=c&&(p=aS({inputs:{x:i},backend:n,attrs:{perm:c}}),f.push(p),h=d.getInnerMostAxes(h.length,l));const m=n.data.get(p.dataId).values,{outVals:g,outShape:b,outDtype:y}=HE(p.shape,p.dtype,m,h);let v=b;return a&&(v=d.expandShapeToKeepDim(b,u)),f.forEach(t=>n.disposeIntermediateTensorInfo(t)),n.makeTensorInfo(v,y,g)}};function qE(t,e,n,s){if(t===e||t<e&&n<0||e<t&&n>1)return r.makeZerosTypedArray(0,s);const i=Math.abs(Math.ceil((e-t)/n)),o=r.makeZerosTypedArray(i,s);e<t&&1===n&&(n=-1),o[0]=t;for(let r=1;r<o.length;r++)o[r]=o[r-1]+n;return o}const ZE={kernelName:Ji,backendName:"cpu",kernelFunc:function(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:i,step:o}=n,a=qE(r,s,o,i);return e.makeTensorInfo([a.length],i,a)}},KE=gk(to,t=>1/t),YE={kernelName:to,backendName:"cpu",kernelFunc:KE},XE={kernelName:io,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{images:i}=e,{alignCorners:o,halfPixelCenters:a,size:l}=s;pk(i,"resizeBilinear");const u=r.computeStrides(i.shape),[c,h]=l,[d,p,f,m]=i.shape,g=n.data.get(i.dataId).values,b=new Float32Array(r.sizeFromShape([d,c,h,m])),y=[o&&c>1?p-1:p,o&&h>1?f-1:f],v=[o&&c>1?c-1:c,o&&h>1?h-1:h];let _=0;const w=y[0]/v[0],x=y[1]/v[1];for(let r=0;r<d;r++)for(let t=0;t<c;t++){let e;e=a?w*(t+.5)-.5:w*t;const n=Math.max(0,Math.floor(e)),s=e-n,i=Math.min(p-1,Math.ceil(e)),o=r*u[0]+n*u[1],l=r*u[0]+i*u[1];for(let t=0;t<h;t++){let e;e=a?x*(t+.5)-.5:x*t;const n=Math.max(0,Math.floor(e)),r=e-n,i=Math.min(f-1,Math.ceil(e)),c=o+n*u[2],h=l+n*u[2],d=o+i*u[2],p=l+i*u[2];for(let t=0;t<m;t++){const e=g[c+t],n=g[h+t],i=e+(g[d+t]-e)*r;b[_++]=i+(n+(g[p+t]-n)*r-i)*s}}}return n.makeTensorInfo([d,c,h,m],"float32",b)}},JE={kernelName:oo,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{images:i,dy:o}=e,{alignCorners:a}=s;pk([o,i],"resizeBilinearGrad");const l=r.computeStrides(i.shape),[u,c,h,d]=i.shape,[,p,f]=o.shape,m=new Float32Array(u*c*h*d),g=[a&&p>1?c-1:c,a&&f>1?h-1:h],b=[a&&p>1?p-1:p,a&&f>1?f-1:f],y=g[0]/b[0],v=g[1]/b[1],_=n.data.get(o.dataId).values;let w=0;for(let r=0;r<u;r++){const t=r*l[0];for(let e=0;e<p;e++){const n=e*y,r=Math.floor(n),s=Math.min(Math.ceil(n),c-1),i=t+r*l[1],o=t+s*l[1],a=n-r,u=1-a;for(let t=0;t<f;t++){const e=t*v,n=Math.floor(e),r=Math.min(Math.ceil(e),h-1),s=e-n,c=1-s,p=i+n*l[2],f=i+r*l[2],g=o+n*l[2],b=o+r*l[2],y=u*c,x=u*s,k=a*c,S=a*s;for(let t=0;t<d;t++){const e=_[w++];m[p+t]+=e*y,m[f+t]+=e*x,m[g+t]+=e*k,m[b+t]+=e*S}}}}return n.makeTensorInfo([u,h,c,d],"float32",m)}},QE={kernelName:ro,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{images:i}=e,{alignCorners:o,halfPixelCenters:a,size:l}=s;pk(i,"resizeNearestNeighbor");const u=r.computeStrides(i.shape),[c,h]=l,[d,p,f,m]=i.shape,g=n.data.get(i.dataId).values,b=new Float32Array(d*c*h*m),y=[o&&c>1?p-1:p,o&&h>1?f-1:f],v=[o&&c>1?c-1:c,o&&h>1?h-1:h],_=y[0]/v[0],w=y[1]/v[1];let x=0;for(let r=0;r<d;r++){const t=r*u[0];for(let e=0;e<c;e++){const n=a?_*(e+.5):_*e;let r=Math.min(p-1,o?Math.round(n):Math.floor(n));a&&(r=Math.max(0,r));const s=t+r*u[1];for(let t=0;t<h;t++){const e=a?w*(t+.5):w*t;let n=Math.min(f-1,o?Math.round(e):Math.floor(e));a&&(n=Math.max(0,n));const r=s+n*u[2];for(let t=0;t<m;t++)b[x++]=g[r+t]}}}return n.makeTensorInfo([d,c,h,m],i.dtype,b)}},tO={kernelName:so,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{images:i,dy:o}=e,{alignCorners:a}=s;pk([o,i],"resizeNearestNeighborGrad");const l=r.computeStrides(i.shape),u=r.computeStrides(o.shape),[c,h,d,p]=i.shape,[,f,m]=o.shape,g=new Float32Array(c*h*d*p),b=n.data.get(o.dataId).values,y=[a&&f>1?h-1:h,a&&m>1?d-1:d],v=[a&&f>1?f-1:f,a&&m>1?m-1:m],_=y[0]/v[0],w=y[1]/v[1],x=1/_,k=1/w,S=2*Math.ceil(x)+2,C=2*Math.ceil(k)+2;for(let r=0;r<c;r++){const t=r*l[0];for(let e=0;e<h;e++){const n=t+e*l[1],r=Math.floor(e*x),s=Math.floor(r-S/2);for(let i=0;i<d;i++){const r=n+i*l[2],o=Math.floor(i*k),c=Math.floor(o-C/2);for(let n=0;n<p;n++){let o=0;for(let r=0;r<S;r++){const l=r+s;if(l<0||l>=f)continue;const p=t+l*u[1],g=l*_;if(e===Math.min(h-1,a?Math.round(g):Math.floor(g)))for(let t=0;t<C;t++){const e=t+c;if(e<0||e>=m)continue;const r=p+e*u[2],s=e*w;i===Math.min(d-1,a?Math.round(s):Math.floor(s))&&(o+=b[r+n])}}g[r+n]=o}}}}return n.makeTensorInfo(i.shape,i.dtype,g)}},eO={kernelName:lo,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{dims:o}=s;pk(i,"reverse");const a=i.shape.length,l=r.parseAxisParam(o,i.shape);if(0===a)return _k({inputs:{x:i},backend:n});const u=new $a(i.shape,i.dtype),c=n.bufferSync(i);for(let r=0;r<u.size;r++){const t=u.indexToLoc(r),e=t.slice();l.forEach(t=>e[t]=i.shape[t]-1-e[t]),u.set(c.get(...e),...t)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}},nO={kernelName:Yo,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:s}=t,{radians:i,fillValue:o,center:a}=e,l=n,u=r.getTypedArrayFromDType(s.dtype,r.sizeFromShape(s.shape)),[c,h,p,f]=s.shape,[m,g]=d.getImageCenter(a,h,p),b=Math.sin(i),y=Math.cos(i),v=l.data.get(s.dataId).values;for(let r=0;r<c;r++){const t=r*p*h*f;for(let e=0;e<h;e++){const n=e*(p*f);for(let r=0;r<p;r++){const s=r*f;for(let i=0;i<f;i++){const a=[c,e,r,i],l=a[2],d=a[1];let _=(l-m)*y-(d-g)*b,w=(l-m)*b+(d-g)*y;_=Math.round(_+m),w=Math.round(w+g);let x=o;"number"!=typeof o&&(x=3===i?255:o[i]),_>=0&&_<p&&w>=0&&w<h&&(x=v[t+w*(p*f)+_*f+i]),u[t+n+s+i]=x}}}}return{dataId:l.write(u,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}},rO=gk(uo,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2==0?e:e+1}),sO={kernelName:uo,backendName:"cpu",kernelFunc:rO},iO=jS(t=>1/Math.sqrt(t)),oO=bk(co,iO),aO={kernelName:co,backendName:"cpu",kernelFunc:oO};function lO(t,e,n,r,s,i,o,a,l,u){const c=[r/s,s],h=t.values,d=e.values;if(0===r)return hu(n,e.dtype);const p=hu(c,e.dtype);p.values.fill(l);for(let f=0;f<i;f++){const t=[];let i=0;for(let e=0;e<o;e++){const n=h[f*o+e];t.push(n),i+=n*a[e]}if(i<0||i>=r/s)throw new Error(`Invalid indices: ${t} does not index into ${n}`);for(let n=0;n<s;n++)u?p.values[i*s+n]+=d[f*s+n]:p.values[i*s+n]=0===e.rank?d[0]:d[f*s+n]}return p}const uO={kernelName:ho,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=d.calculateShapes(i,s,o),p=lO(n.bufferSync(s),n.bufferSync(i),o,h,u,l,a,c,0,!0);return n.makeTensorInfo(o,p.dtype,p.values)}},cO={kernelName:po,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n}=t,{condition:s,t:i,e:o}=e;pk([s,i,o],"select");const a=s.shape.length,l=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,h=Ka(i.dtype,o.dtype),d=r.makeZerosTypedArray(r.sizeFromShape(i.shape),h);let p=0;const f=0===a||a>1||1===i.shape.length?1:r.sizeFromShape(i.shape.slice(1));for(let r=0;r<l.length;r++)for(let t=0;t<f;t++)d[p++]=1===l[r]?u[r]:c[r];return n.makeTensorInfo(i.shape,h,d)}},hO=d.SELU_SCALEALPHA,dO=d.SELU_SCALE,pO=gk(fo,t=>t>=0?dO*t:hO*(Math.exp(t)-1)),fO={kernelName:fo,backendName:"cpu",kernelFunc:pO},mO=gk(yo,t=>t<0?-1:t>0?1:0),gO={kernelName:yo,backendName:"cpu",kernelFunc:mO},bO=gk(go,t=>Math.sin(t)),yO={kernelName:go,backendName:"cpu",kernelFunc:bO},vO=gk(bo,t=>Math.sinh(t)),_O={kernelName:bo,backendName:"cpu",kernelFunc:vO},wO=Math.log(1.1920928955078125e-7)+2,xO=gk(_o,t=>{const e=t>-wO,n=t<wO,r=Math.exp(t);let s;return s=n?r:e?t:Math.log(1+r),s}),kO={kernelName:_o,backendName:"cpu",kernelFunc:xO},SO={kernelName:ko,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{blockShape:o,paddings:a}=s;pk([i],"spaceToBatchND");const l=r.sizeFromShape(o),u=[[0,0]];u.push(...a);for(let r=1+o.length;r<i.shape.length;++r)u.push([0,0]);const c=BE.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),h=d.getReshaped(c.shape,o,l,!1),p=d.getPermuted(h.length,o.length,!1),f=d.getReshapedPermuted(c.shape,o,l,!1),m=Zk({inputs:{x:c},backend:n,attrs:{shape:h}}),g=aS({inputs:{x:m},backend:n,attrs:{perm:p}}),b=Zk({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),b}};function CO(t,e,n,s,i,o,a){const l=e[0],u=o[0],c=new Array(u),h=new Array(l),d=e[1];if(0===u){if(0!==l)throw new Error(`Received SparseTensor with denseShape[0] = 0 but\n         indices.shape[0] = ${l}`);return[r.getArrayFromDType(n,0),[0,d],r.getArrayFromDType(i,0),c,h]}let p=!0,f=0;const m=new Array(u).fill(0);for(let r=0;r<l;++r){const e=t[r*d];if(e<0)throw new Error(`indices(${r}, 0) is invalid: ${e} < 0`);if(e>=u)throw new Error(`indices(${r}, 0) is invalid: ${e} >= ${u}`);++m[e],p=p&&e>=f,f=e}let g=!0;for(let r=0;r<u;++r){const t=0===m[r];c[r]=t,g=g&&!t,m[r]=Math.max(m[r],1),r>0&&(m[r]+=m[r-1])}if(g&&p){const e=t,n=s;for(let t=0;t<l;++t)h[t]=t;return[e,[l,d],n,c,h]}{const e=m[u-1],o=r.getArrayFromDType(n,e*d),p=r.getArrayFromDType(i,e),f=new Array(u).fill(0);for(let n=0;n<l;++n){const e=t[n*d],r=(0===e?0:m[e-1])+f[e];f[e]++;for(let s=0;s<d;++s)o[r*d+s]=t[n*d+s];p[r]=s[n],h[n]=r}for(let t=0;t<u;++t)if(0===f[t]){const e=0===t?0:m[t-1];o[e*d+0]=t;for(let t=1;t<d;++t)o[e*d+t]=0;p[e]=a}return[o,[e,d],p,c,h]}}const IO={kernelName:Io,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(1!==i.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${i.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${r.shape}`);if(1!==s.shape.length)throw new Error(`Values must be a vector, saw:\n        ${s.shape}`);if(0!==o.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],[h,d,p,f,m]=CO(a,r.shape,r.dtype,l,s.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],s.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(t=>Number(t)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function EO(t,e,n,s,i){const o=r.sizeFromShape(s),a=e[0],l=i.length,u=[];let c=1,h=-1;for(let r=0;r<l;++r){const t=i[r];if(-1===t){if(-1!==h)throw new Error(`only one output dimension may be -1, not both ${h} and ${r}`);h=r,u.push(1)}else{if(t<0)throw new Error(`size ${r} must be non-negative, not ${t}`);c*=t,u.push(t)}}if(-1!==h){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const t=Math.trunc(o/c);if(c*t!==o)throw new Error(`Input to reshape is a SparseTensor with ${o}\n          dense values, but the requested shape requires a multiple of ${c}. inputShape=${s} outputShape= ${u}`);u[h]=t}const d=r.sizeFromShape(u);if(d!==o)throw new Error(`Input to reshape is a tensor with ${o} dense values, but the requested shape has ${d}. inputShape=${s} outputShape=${u}`);const p=s.length,f=[];if(p>0){f[p-1]=1;for(let t=p-2;t>=0;--t)f[t]=f[t+1]*s[t+1]}const m=[];if(l>0){m[l-1]=1;for(let t=l-2;t>=0;--t)m[t]=m[t+1]*u[t+1]}const g=r.getArrayFromDType(n,a*l);for(let r=0;r<a;++r){let e=0;for(let n=0;n<p;++n)e+=t[r*p+n]*f[n];for(let t=0;t<l;++t)g[r*l+t]=Math.trunc(e/m[t]),e%=m[t]}return[g,[a,l],u]}const OO={kernelName:Eo,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${r.shape}`);if(1!==s.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${s.shape}`);if(1!==i.shape.length)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(s.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[u,c,h]=EO(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}};function TO(t,e,n,s,i,o=!1,a=0){const l=s.length;if(l!==i.length)throw new Error("segmentIds and indices should have same size.");const u=[e[0],t.length/e[0]],c=u[1],h=l>0?i[l-1]+1:0;if(h<0)throw new Error("segment ids must be >= 0");const d=e.slice();d[0]=h;const p=d.reduce((t,e)=>t*e,1),f=r.getArrayFromDType(n,p);if(0===l)return h>0&&f.fill(a),[f,d];if(h<=0)throw new Error("segment ids must be >= 0");let m=0,g=1,b=0,y=i[m];for(;;){let e=0;if(g<l){if(e=i[g],y===e){++g;continue}if(y>=e)throw new Error("segment ids are not increasing")}if(y<0||y>=h)throw new Error(`Segment id ${y} out of range [0, ${h}), possibly because segmentIds input is not sorted.`);y>b&&f.fill(a,b*c,y*c);for(let n=m;n<g;++n){const e=s[n];if(e<0||e>=u[0])throw new Error(`Bad: indices[${n}] == ${s[n]} out of range [0, ${u[0]})`);for(let n=0;n<c;n++)f[y*c+n]+=t[e*c+n]}if(o)for(let t=0;t<c;t++)f[y*c+t]/=g-m;if(m=g,++g,b=y+1,y=e,g>l)break}return b<h&&f.fill(a,b*c,h*c),[f,d]}const NO={kernelName:Oo,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${s.shape}`);if(1!==i.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${i.shape}`);const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[u,c]=TO(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}},AO={kernelName:To,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${s.shape}`);if(1!==i.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${i.shape}`);const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[u,c]=TO(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}},RO={kernelName:No,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:h,outputSize:p}=d.calculateShapes(i,s,a),f=lO(n.bufferSync(s),n.bufferSync(i),a,p,c,u,l,h,n.data.get(o.dataId).values[0],!1);return n.makeTensorInfo(a,f.dtype,f.values)}},FO={kernelName:So,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{numOrSizeSplits:o,axis:a}=s,l=r.parseAxisParam(a,i.shape)[0],u=d.prepareSplitSize(i,o,l),c=new Array(i.shape.length).fill(0),h=i.shape.slice();return u.map(t=>{const e=[...h];e[l]=t;const r=FS({inputs:{x:i},backend:n,attrs:{begin:c,size:e}});return c[l]+=t,r})}},DO=gk(wo,t=>Math.sqrt(t)),PO={kernelName:wo,backendName:"cpu",kernelFunc:DO},$O={kernelName:Ro,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;pk(n,"square");const s=r.data.get(n.dataId).values,i=new Float32Array(s.length);for(let o=0;o<s.length;++o){const t=s[o];i[o]=t*t}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},MO=Sk((t,e)=>{const n=t-e;return n*n}),LO=Vk(Ao,MO),jO={kernelName:Ao,backendName:"cpu",kernelFunc:LO},zO=gk(Zo,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),BO={kernelName:Zo,backendName:"cpu",kernelFunc:zO};function VO(t,e,n,r){const s=hu(t,e.dtype);for(let i=0;i<s.size;i++){const t=s.indexToLoc(i),o=new Array(t.length);for(let e=0;e<o.length;e++)o[e]=t[e]*n[e]+r[e];s.set(e.get(...o),...t)}return s}const UO={kernelName:Fo,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:u,endMask:c,ellipsisMask:h,newAxisMask:d,shrinkAxisMask:p}=r;pk(s,"stridedSlice");const{nonStrided:f,$begin:m,$strides:g,size:b,newShape:y,outShape:v}=l.sliceInfo(s.shape,i,o,a,u,c,h,d,p),_=Zk({inputs:{x:s},backend:n,attrs:{shape:y}});let w;if(f){const t=FS({inputs:{x:_},backend:n,attrs:{begin:m,size:b}});w=Zk({inputs:{x:t},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(t)}else if(v.some(t=>0===t))w=n.makeTensorInfo(v,s.dtype,[]);else{const t=VO(v,n.bufferSync(_),g,m);w=n.makeTensorInfo(t.shape,t.dtype,t.values)}const x=Zk({inputs:{x:w},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(w),x}};class WO{constructor(t,e,n,s,i,o){this.separator=r.encodeString(t),this.nGramWidths=e,this.leftPad=r.encodeString(n),this.rightPad=r.encodeString(s),this.padWidth=i,this.preserveShort=o}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,e){const n=this.getPadWidth(e);return Math.max(0,t+2*n-e+1)}createNGrams(t,e,n,r,s,i){for(let o=0;o<s;++o){const a=this.getPadWidth(i),l=Math.max(0,a-o),u=Math.max(0,a-(s-(o+1))),c=i-(l+u),h=e+(l>0?0:o-a);let d=0;d+=l*this.leftPad.length;for(let e=0;e<c;++e)d+=t[h+e].length;d+=u*this.rightPad.length,d+=(l+u+c-1)*this.separator.length,n[r+o]=new Uint8Array(d);const p=n[r+o];let f=0;const m=t=>t.forEach(t=>p[f++]=t);for(let t=0;t<l;++t)m(this.leftPad),m(this.separator);for(let e=0;e<c-1;++e)m(t[h+e]),m(this.separator);if(c>0){m(t[h+c-1]);for(let t=0;t<u;++t)m(this.separator),m(this.rightPad)}else{for(let t=0;t<u-1;++t)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(t,e){const n=t.length,s=e.length;if(s>0){let t=e[0];if(0!==t)throw new Error(`First split value must be 0, got ${t}`);for(let r=1;r<s;++r){let s=e[r]>=t;if(s=s&&e[r]<=n,!s)throw new Error(`Invalid split value ${e[r]}, must be in [${t}, ${n}]`);t=e[r]}if(t!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${t}`)}const i=s-1,o=r.getArrayFromDType("int32",s);if(0===n||0===s){const t=new Array(n);for(let e=0;e<=i;++e)o[e]=0;return[t,o]}o[0]=0;for(let r=1;r<=i;++r){const t=e[r]-e[r-1];let n=0;this.nGramWidths.forEach(e=>{n+=this.getNumNGrams(t,e)}),this.preserveShort&&t>0&&0===n&&(n=1),o[r]=o[r-1]+n}const a=new Array(o[i]);for(let r=0;r<i;++r){const n=e[r];let s=o[r];if(this.nGramWidths.forEach(i=>{const o=this.getNumNGrams(e[r+1]-e[r],i);this.createNGrams(t,n,a,s,o,i),s+=o}),this.preserveShort&&s===o[r]){const i=e[r+1]-e[r];if(0===i)continue;this.createNGrams(t,n,a,s,1,i+2*this.padWidth)}}return[a,o]}}function HO(t,e,n,r,s,i,o,a){return new WO(n,r,s,i,o,a).compute(t,e)}const GO={kernelName:Do,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:h}=e,d=n.data.get(c.dataId).values,p=n.data.get(h.dataId).values,[f,m]=HO(d,p,s,i,o,a,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}};function qO(t,e,n){if(!t.length)return[];if(0===e.length){const e=new Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.subarray(n,n+1);return e}if(1===e.length){const r=e[0],s=[];let i=t.indexOf(r);for(;-1!==i;){const e=t.subarray(0,i);n&&0===e.length||s.push(e),i=(t=t.subarray(i+1)).indexOf(r)}return n&&0===t.length||s.push(t),s}const r=[];let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||-1!==e.indexOf(t[i])){const e=t.subarray(s,i);n&&0===e.length||r.push(e),s=i+1}return r}function ZO(t,e,n){const s=t.length,i=[];let o=0,a=0;const l=new Array(s);for(let r=0;r<s;++r){const s=qO(t[r],e,n),u=s.length;l[r]=u,o+=u,a=Math.max(a,u),i.push(...s)}const u=r.getArrayFromDType("int32",2*o),c=new Array(o),h=[s,a];let d=0;for(let r=0;r<s;++r)for(let t=0;t<l[r];++t)u[2*d]=r,u[2*d+1]=t,c[d]=i[d],++d;return[u,c,h]}const KO={kernelName:Po,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(1!==i.shape.length)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,h]=ZO(a,l,s),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};function YO(t,e){const n=r.getArrayFromDType("int32",t.length);for(let s=0;s<t.length;++s)n[s]=r.fingerPrint64(t[s]).modulo(e).getLowBitsUnsigned();return n}const XO={kernelName:$o,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=YO(n.data.get(i.dataId).values,s);return n.makeTensorInfo(i.shape,"int32",o)}},JO=gk(Lo,t=>Math.tan(t)),QO={kernelName:Lo,backendName:"cpu",kernelFunc:JO},tT=gk(jo,t=>Math.tanh(t));function eT(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=hu(n,t.dtype);for(let s=0;s<r.values.length;++s){const e=r.indexToLoc(s),n=new Array(t.rank);for(let r=0;r<n.length;r++)n[r]=e[r]%t.shape[r];const i=t.locToIndex(n);r.values[s]=t.values[i]}return r}function nT(t,e,n,s,i){const o=e[e.length-1],[a,l]=[t.length/o,o],u=r.getTypedArrayFromDType(n,a*s),c=r.getTypedArrayFromDType("int32",a*s);for(let r=0;r<a;r++){const e=r*l,n=t.subarray(e,e+l),i=[];for(let t=0;t<n.length;t++)i.push({value:n[t],index:t});i.sort((t,e)=>e.value-t.value);const o=r*s,a=u.subarray(o,o+s),h=c.subarray(o,o+s);for(let t=0;t<s;t++)a[t]=i[t].value,h[t]=i[t].index}const h=e.slice();return h[h.length-1]=s,[hu(h,n,u),hu(h,"int32",c)]}function rT(t,e,n){switch(n){case"reflect":return function(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const t=2*e;n<t&&(n=t*Math.trunc(-n/t)+n),n=n<-e?n+t:-n-1}else if(n>e-1)if(e<=1)n=0;else{const t=2*e;n-=t*Math.trunc(n/t),n>=e&&(n=t-n-1)}return r.clamp(0,n,e-1)}(t,e);case"wrap":return function(t,e){let n=t;return n<0?e<=1?n=0:n+=e*(Math.trunc(-n/(e-1))+1):n>e-1&&(e<=1?n=0:n-=e*Math.trunc(n/(e-1))),r.clamp(0,n,e-1)}(t,e);case"nearest":return function(t,e){return r.clamp(0,t,e-1)}(t,e);case"constant":default:return function(t,e){return t}(t)}}function sT(t,e,n,r,s,i,o,a,l,u,c){return 0<=a&&a<e&&0<=l&&l<n?t[o*r+a*s+l*i+u]:c}function iT(t,e,n,r,s,i,o,a,l,u,c){return sT(t,e,n,r,s,i,o,Math.round(a),Math.round(l),u,c)}function oT(t,e,n,r,s,i,o,a,l,u,c){const h=Math.floor(a),d=Math.floor(l),p=h+1,f=d+1;return(p-a)*((f-l)*sT(t,e,n,r,s,i,o,h,d,u,c)+(l-d)*sT(t,e,n,r,s,i,o,h,f,u,c))+(a-h)*((f-l)*sT(t,e,n,r,s,i,o,p,d,u,c)+(l-d)*sT(t,e,n,r,s,i,o,p,f,u,c))}function aT(t,e,n,s){const i=r.parseAxisParam(e,n)[0],o=[1,n[0],1];for(let r=0;r<i;r++)o[0]*=n[r];o[1]=n[i];for(let r=i+1;r<n.length;r++)o[2]*=n[r];const a={},l=new Int32Array(n[i]),u=new $a(o,s,t),c=[],h=1===o[0]&&1===o[2];for(let r=0;r<n[i];r++){let e;if(h)e=t[r].toString();else{const t=[];for(let e=0;e<o[0];e++)for(let n=0;n<o[2];n++)t.push(u.get(e,r,n));e=t.join(",")}if(void 0!==a[e])l[r]=a[e];else{const t=Object.keys(a).length;a[e]=t,l[r]=t,c.push(r)}}const d=o.slice();d[1]=Object.keys(a).length;const p=new $a(d,s);c.forEach((t,e)=>{for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)p.set(u.get(n,t,r),n,e,r)});const f=n.slice();return f[i]=d[1],{outputValues:p.values,outputShape:f,indices:l}}const lT=[Jk,tS,nS,sS,qk,iS,uS,cS,hS,dS,fS,gS,yS,wS,kS,ES,OS,TS,NS,Xk,AS,PS,LS,Bk,VS,WS,$k,HS,YS,QS,tC,JS,nC,rC,eC,iC,aC,lC,uC,cC,hC,pC,fC,mC,gC,bC,vC,yC,KC,IC,vk,EC,NC,LC,BC,UC,GC,rI,iI,oI,uI,dI,pI,fI,gI,yI,wI,SI,wk,CI,ZS,EI,TI,AI,kk,DI,MI,jI,VI,WI,qI,KI,JI,QI,tE,oE,aE,lE,uE,cE,hE,rE,dE,pE,gE,bE,_E,kE,kC,CE,EE,TE,AE,DE,PE,LE,zE,BE,WE,Ek,GE,ZE,jk,YE,Tk,Ak,Kk,XE,JE,QE,tO,eO,nO,sO,aO,uO,cO,fO,Fk,gO,yO,_O,DS,xE,kO,SO,IO,OO,NO,AO,RO,FO,PO,$O,jO,BO,UO,GO,KO,XO,QC,CC,QO,{kernelName:jo,backendName:"cpu",kernelFunc:tT},{kernelName:zo,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;pk(s,"tile");const o=eT(n.bufferSync(s),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},{kernelName:Bo,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i}=r;pk(s,"topk");const o=n.data.get(s.dataId).values,[a,l]=nT(o,s.shape,s.dtype,i);return[n.makeTensorInfo(a.shape,a.dtype,a.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}},lS,{kernelName:Vo,backendName:"cpu",kernelFunc:function(t){const{inputs:e,attrs:n,backend:s}=t,{image:i,transforms:o}=e,{interpolation:a,fillMode:l,fillValue:u,outputShape:c}=n,[h,d,p,f]=i.shape,[m,g]=null!=c?c:[d,p],b=[h,m,g,f],y=r.computeStrides(i.shape),v=y[0],_=y[1],w=y[2],x=r.getTypedArrayFromDType(i.dtype,r.sizeFromShape(b));x.fill(u);const k=s.data.get(i.dataId).values,S=s.data.get(o.dataId).values;for(let r=0;r<h;++r){const t=1===o.shape[0]?S:S.subarray(8*r,8*r+8);for(let e=0;e<m;++e)for(let n=0;n<g;++n)for(let s=0;s<f;++s){let i;const o=t[6]*n+t[7]*e+1;if(0===o)continue;const c=(t[3]*n+t[4]*e+t[5])/o,h=rT((t[0]*n+t[1]*e+t[2])/o,p,l),f=rT(c,d,l);switch(a){case"nearest":i=iT(k,d,p,v,_,w,r,f,h,s,u);break;case"bilinear":i=oT(k,d,p,v,_,w,r,f,h,s,u);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}x[r*v+e*_+n*w+s]=i}return s.makeTensorInfo(b,i.dtype,x)}return{dataId:s.write(x,b,i.dtype),shape:i.shape,dtype:i.dtype}}},{kernelName:Wo,backendName:"cpu",kernelFunc:function(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;pk(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:a,outputShape:l,indices:u}=aT(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}},{kernelName:Ho,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s.shape.length,a=s.shape[i],l=new Array(o-1);let u=0;for(let p=0;p<o;p++)p!==i&&(l[u++]=s.shape[p]);const c=new Array(o).fill(0),h=s.shape.slice();h[i]=1;const d=new Array(a);for(let p=0;p<d.length;p++){c[i]=p;const t=FS({inputs:{x:s},backend:n,attrs:{begin:c,size:h}});d[p]=Zk({inputs:{x:t},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(t)}return d}},{kernelName:Go,backendName:"cpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i,segmentIds:o}=e,{numSegments:a}=s;pk(i,"unsortedSegmentSum");const l=[],u=[],c=i.shape.length-o.shape.length;let h=o;for(let r=0;r<c;++r){const t=VC({inputs:{input:h},backend:n,attrs:{dim:r+1}});h=t,u.push(t)}for(let p=0;p<a;++p){const t=r.createScalarValue(p,"int32"),e=n.makeTensorInfo([],"int32",t),s=TC({inputs:{a:e,b:h},backend:n}),o=zk({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),a=xC({inputs:{a:o,b:i},backend:n}),c=SC({inputs:{x:a},backend:n,attrs:{axis:0,keepDims:!1}});l.push(c),u.push(e),u.push(s),u.push(o),u.push(a),u.push(c)}const d=jE({inputs:l,backend:n,attrs:{axis:0}});return u.forEach(t=>n.disposeIntermediateTensorInfo(t)),d}},ME];for(const YW of lT)ia(YW);const uT={},cT={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function hT(t){if(!(t in uT)){const e=function(t){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const e=function(t){if("undefined"!=typeof OffscreenCanvas&&2===t)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return e.addEventListener("webglcontextlost",e=>{e.preventDefault(),delete uT[t]},!1),1===t?e.getContext("webgl",cT)||e.getContext("experimental-webgl",cT):e.getContext("webgl2",cT)}(t);if(null===e)return console.log("Could not get context for WebGL version",t),null;uT[t]=e}const e=uT[t];return e.isContextLost()?(delete uT[t],hT(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),uT[t])}var dT,pT,fT;function mT(t,e){return[e,t]}function gT(t){const e=r.sizeFromShape(t),n=Math.ceil(e/4);return r.sizeToSquarishShape(n)}function bT(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function yT(t,e){const n=t;let r,s,i,o,a,l,u,c,h,d;return 2===qr().getNumber("WEBGL_VERSION")?(r=n.R32F,s=n.R16F,i=n.RGBA16F,o=n.RGBA32F,a=n.RED,u=4,c=1,h=n.HALF_FLOAT,d=n.FLOAT):(r=t.RGBA,s=t.RGBA,i=t.RGBA,o=n.RGBA,a=t.RGBA,u=4,c=4,h=null!=e?e.HALF_FLOAT_OES:null,d=t.FLOAT),l=t.RGBA,{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:h,textureTypeFloat:d}}function vT(t,e){const n=e();return qr().getBool("DEBUG")&&function(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+function(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}(t,e))}(t),n}function _T(t){return!!(qr().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||5.96e-8<Math.abs(t)&&Math.abs(t)<65504)}function wT(t,e){return OT(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}!function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"}(dT||(dT={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(pT||(pT={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(fT||(fT={}));const xT=/ERROR: [0-9]+:([0-9]+):/g;function kT(t,e){if(vT(t,()=>t.validateProgram(e)),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function ST(t,e,n,r,s,i,o){const a=t.getAttribLocation(e,n);return-1!==a&&(vT(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),vT(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,i,o)),vT(t,()=>t.enableVertexAttribArray(a)),!0)}function CT(t,e,n){vT(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),vT(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function IT(t,e){vT(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),vT(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function ET(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}(t,e))}function OT(t,e,n){const r=vT(t,()=>e());if(null==r)throw new Error(n);return r}function TT(t,e=2){return r.sizeFromShape(t.slice(0,t.length-e))}function NT(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function AT(t){let e=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(e=[TT(t),...NT(t)]),e}function RT(t){return t%2==0}function FT(t,e){if(t=t.slice(-2),e=e.slice(-2),r.arraysEqual(t,e))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(RT(n)&&RT(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&RT(t[0])&&RT(e[0])}let DT,PT;function $T(t,e){return null!=t.getExtension(e)}function MT(t){try{if(null!=hT(t))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function LT(t){const e=yT(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),s}function jT(t,e){Array.isArray(t)||(t=[t]),t.forEach(t=>{null!=t&&r.assert("complex64"!==t.dtype,()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}const zT=qr();function BT(){let t,e,n,r,s,i,o,a,l,u;return 2===qr().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",o="out vec4 outputColor;",a="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",o="",a="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}function VT(t,e,n="index"){const s=r.computeStrides(e);return s.map((e,r)=>`int ${t[r]} = ${n} / ${e}; ${r===s.length-1?`int ${t[r+1]} = ${n} - ${t[r]} * ${e}`:`index -= ${t[r]} * ${e}`};`).join("")}function UT(t){const e=r.computeStrides(t).map(t=>t.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;\n  }\n`}zT.registerFlag("HAS_WEBGL",()=>zT.getNumber("WEBGL_VERSION")>0),zT.registerFlag("WEBGL_VERSION",()=>MT(2)?2:MT(1)?1:0),zT.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),zT.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===zT.get("WEBGL_VERSION")),zT.registerFlag("WEBGL_CPU_FORWARD",()=>!0),zT.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),zT.registerFlag("WEBGL_PACK",()=>zT.getBool("HAS_WEBGL")),zT.registerFlag("WEBGL_PACK_NORMALIZATION",()=>zT.getBool("WEBGL_PACK")),zT.registerFlag("WEBGL_PACK_CLIP",()=>zT.getBool("WEBGL_PACK")),zT.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>zT.getBool("WEBGL_PACK")),zT.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>zT.getBool("WEBGL_PACK")),zT.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>zT.getBool("WEBGL_PACK")),zT.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>zT.getBool("WEBGL_PACK")),zT.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>zT.getBool("WEBGL_PACK")),zT.registerFlag("WEBGL_PACK_REDUCE",()=>zT.getBool("WEBGL_PACK")),zT.registerFlag("WEBGL_LAZILY_UNPACK",()=>zT.getBool("WEBGL_PACK")),zT.registerFlag("WEBGL_CONV_IM2COL",()=>zT.getBool("WEBGL_PACK")),zT.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>function(t){if(null==DT){const e=hT(t);DT=e.getParameter(e.MAX_TEXTURE_SIZE)}return DT}(zT.getNumber("WEBGL_VERSION"))),zT.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>function(t){if(null==PT){const e=hT(t);PT=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,PT)}(zT.getNumber("WEBGL_VERSION"))),zT.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=zT.getNumber("WEBGL_VERSION");return 0===t?0:function(t){if(0===t)return 0;let e;const n=hT(t);return e=$T(n,"EXT_disjoint_timer_query_webgl2")&&2===t?2:$T(n,"EXT_disjoint_timer_query")?1:0,e}(t)}),zT.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>zT.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!i.isMobile()),zT.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>function(t){if(0===t)return!1;const e=hT(t);if(1===t){if(!$T(e,"OES_texture_float"))return!1}else if(!$T(e,"EXT_color_buffer_float"))return!1;return LT(e)}(zT.getNumber("WEBGL_VERSION"))),zT.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!zT.getBool("WEBGL_FORCE_F16_TEXTURES")&&zT.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),zT.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>function(t){if(0===t)return!1;const e=hT(t);if(1!==t){if($T(e,"EXT_color_buffer_float"))return LT(e);const t="EXT_color_buffer_half_float";if($T(e,t)){const n=e.getExtension(t);return function(t,e){const n=yT(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(s),i}(e,n)}return!1}return!!$T(e,"OES_texture_float")&&!!$T(e,"WEBGL_color_buffer_float")&&LT(e)}(zT.getNumber("WEBGL_VERSION"))),zT.registerFlag("WEBGL_FENCE_API_ENABLED",()=>{return 2===(t=zT.getNumber("WEBGL_VERSION"))&&null!=hT(t).fenceSync;var t}),zT.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>zT.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),zT.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&-1!==t)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)}),zT.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>i.isMobile()&&zT.getBool("IS_CHROME")?1:-1,t=>{if(t<0&&-1!==t)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)}),zT.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);const WT="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";class HT{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=dT.DENSE;const e=gT(t),n=BT();this.outputShape=t,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${VT(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${e[0]}, ${e[1]}));\n        int index = 4 * (resTexRC.x * ${e[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${n.output} = result;\n      }\n    `}}class GT{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=dT.DENSE;const e=gT(t),n=BT();this.outputShape=t,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${VT(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${e[0]}, ${e[1]}));\n        int index = 4 * (resTexRC.x * ${e[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${n.output} = result;\n      }\n    `}}class qT{constructor(t){this.variableNames=["A"],this.outTexUsage=pT.DOWNLOAD;const e=BT();this.outputShape=t,this.userCode=`\n      ${WT}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${e.output} = encode_float(x);\n      }\n    `}}class ZT{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=pT.DOWNLOAD;const e=BT();this.outputShape=t,this.userCode=`\n      ${WT}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${e.output} = encode_float(x);\n      }\n    `}}class KT{constructor(t,e,n=!1){this.variableNames=["A"];const r=BT(),[s,i]=e;this.outputShape=t;let o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`\n      ${UT(t)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ${i};\n        int c = imod(flatIndex, ${i});\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(${i}.0, ${s}.0);\n        vec4 values = ${r.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${r.output} = vec4(${o}, 0., 0., 0.);\n      }\n    `}}class YT{constructor(t,e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const r=BT(),[s,i]=e;this.outputShape=t;let o="",a="result";n&&(a="floor(result * 255. + 0.5)");for(let l=0;l<=1;l++)for(let e=0;e<=1;e++){const n=2*l+e;o+=`\n          localCoords = coords;\n          if(localCoords[2] + ${e} < ${t[2]}) {\n            localCoords[2] += ${e};\n            if(localCoords[1] + ${l} < ${t[1]}) {\n              localCoords[1] += ${l};\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ${i};\n              c = imod(flatIndex, ${i});\n              uv = (vec2(c, r) + halfCR) / vec2(${i}.0, ${s}.0);\n              values = ${r.texture2D}(A, uv);\n\n              if(offset == 0) {\n                result[${n}] = values[0];\n              } else if(offset == 1) {\n                result[${n}] = values[1];\n              } else if(offset == 2) {\n                result[${n}] = values[2];\n              } else {\n                result[${n}] = values[3];\n              }\n            }\n          }\n        `}this.userCode=`\n      ${UT(t)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ${o}\n\n        ${r.output} = ${a};\n      }\n    `}}function XT(t,e,n,r,s,i){!function(t,e){const n=qr().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0)throw new Error(`Requested texture size [${t}x${e}] is invalid.`);if(t>n||e>n)throw new Error(`Requested texture size [${t}x${e}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}(e,n);const o=function(t){return OT(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}(t),a=t.TEXTURE_2D;return vT(t,()=>t.bindTexture(a,o)),vT(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),vT(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),vT(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),vT(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),vT(t,()=>t.texImage2D(a,0,r,e,n,0,s,i,null)),vT(t,()=>t.bindTexture(t.TEXTURE_2D,null)),o}function JT(t){return t.internalFormatFloat}function QT(t){return t.internalFormatHalfFloat}function tN(t){return t.downloadTextureFormat}function eN(t){return t.internalFormatPackedFloat}function nN(t){return t.internalFormatPackedHalfFloat}class rN{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const e=qr().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(t,e){uT[t]=e}(e,t)):this.gl=hT(e);let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(1===qr().getNumber("WEBGL_VERSION")){const t="OES_texture_half_float";if(this.textureFloatExtension=wT(this.gl,"OES_texture_float"),$T(this.gl,t))this.textureHalfFloatExtension=wT(this.gl,t);else if(qr().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),$T(this.gl,r))this.colorBufferHalfFloatExtension=wT(this.gl,r);else if(qr().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",$T(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!$T(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=function(t){return function(t,e){const n=OT(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return vT(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),vT(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}(t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}(this.gl),this.indexBuffer=function(t){return function(t,e){const n=OT(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return vT(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),vT(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}(t,new Uint16Array([0,1,2,2,1,3]))}(this.gl),this.framebuffer=function(t){return OT(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=yT(this.gl,this.textureHalfFloatExtension)}get debug(){return qr().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;vT(t,()=>t.finish()),vT(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),vT(t,()=>t.deleteFramebuffer(this.framebuffer)),vT(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),vT(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),vT(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[s,i]=mT(e,n);return XT(t,s,i,JT(r),r.textureFormatFloat,t.FLOAT)}(this.gl,t,e,this.textureConfig)}createFloat16MatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[s,i]=mT(e,n);return XT(t,s,i,QT(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,t,e,this.textureConfig)}createUnsignedBytesMatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[s,i]=mT(e,n);return XT(t,s,i,tN(r),t.RGBA,t.UNSIGNED_BYTE)}(this.gl,t,e,this.textureConfig)}uploadPixelDataToTexture(t,e){this.throwIfDisposed(),function(t,e,n){vT(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?vT(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):vT(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),vT(t,()=>t.bindTexture(t.TEXTURE_2D,null))}(this.gl,t,e)}uploadDenseMatrixToTexture(t,e,n,r){this.throwIfDisposed(),function(t,e,n,r,s,i){let o,a,l;vT(t,()=>t.bindTexture(t.TEXTURE_2D,e)),s instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),o.set(s),vT(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),vT(t,()=>t.bindTexture(t.TEXTURE_2D,null))}(this.gl,t,e,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[s,i]=bT(e,n);return XT(t,s,i,nN(r),t.RGBA,r.textureTypeHalfFloat)}(this.gl,t,e,this.textureConfig)}createPackedMatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[s,i]=bT(e,n);return XT(t,s,i,eN(r),t.RGBA,t.FLOAT)}(this.gl,t,e,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(IT(this.gl,this.framebuffer),this.outputTexture=null),vT(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,e,n){return this.downloadMatrixDriver(t,()=>function(t,e,n,r){const[s,i]=mT(e,n),o=new Uint8Array(e*n*4);return vT(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}(this.gl,e,n,this.textureConfig))}downloadPackedMatrixFromBuffer(t,e,n,r,s,i){return function(t,e,n,r,s,i,o,a){const l=t,u=new Float32Array(function(t,e){const[n,r]=bT(t,e);return n*r*4}(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}(this.gl,t,0,0,0,s,i)}downloadFloat32MatrixFromBuffer(t,e){return function(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}(this.gl,t,e)}createBufferFromTexture(t,e,n){this.bindTextureToFrameBuffer(t);const r=function(t,e,n,r){const s=t.createBuffer();vT(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const i=16*e*n;return vT(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)),vT(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),vT(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}(this.gl,e,n);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e,n;if(qr().getBool("WEBGL_FENCE_API_ENABLED")){const r=t,s=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=()=>{const t=r.clientWaitSync(s,0,0);return t===r.ALREADY_SIGNALED||t===r.CONDITION_SATISFIED},e=s}else qr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(e,qr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:e,isFencePassed:n}}downloadMatrixFromPackedTexture(t,e,n){return this.downloadMatrixDriver(t,()=>function(t,e,n){const r=new Float32Array(e*n*4);return vT(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}(this.gl,e,n))}createProgram(t){this.throwIfDisposed();const e=this.gl,n=function(t,e){const n=OT(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(vT(t,()=>t.shaderSource(n,e)),vT(t,()=>t.compileShader(n)),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw function(t,e){const n=xT.exec(e);if(null==n)return console.log(`Couldn't parse line number in error: ${e}`),void console.log(t);const s=+n[1],i=t.split("\n"),o=i.length.toString().length+2,a=i.map((t,e)=>r.rightPad((e+1).toString(),o)+t);let l=0;for(let r=0;r<a.length;r++)l=Math.max(a[r].length,l);const u=a.slice(0,s-1),c=a.slice(s-1,s),h=a.slice(s);console.log(u.join("\n")),console.log(e.split("\n")[0]),console.log(`%c ${r.rightPad(c[0],l)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e,t);null==this.vertexShader&&(this.vertexShader=function(t){const e=BT();return function(t,e){const n=OT(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(vT(t,()=>t.shaderSource(n,e)),vT(t,()=>t.compileShader(n)),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(t,`${e.version}\n    precision highp float;\n    ${e.attribute} vec3 clipSpacePos;\n    ${e.attribute} vec2 uv;\n    ${e.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}(e));const s=function(t){return OT(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}(e);return vT(e,()=>e.attachShader(s,this.vertexShader)),vT(e,()=>e.attachShader(s,n)),function(t,e){if(vT(t,()=>t.linkProgram(e)),!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}(e,s),this.debug&&kT(e,s),this.vertexAttrsAreBound||(this.setProgram(s),this.vertexAttrsAreBound=function(t,e,n){return vT(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),ST(t,e,"clipSpacePos",n,3,20,0)&&ST(t,e,"uv",n,2,20,12)}(e,this.program,this.vertexBuffer)),s}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&vT(this.gl,()=>this.gl.deleteProgram(t))}setProgram(t){this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&kT(this.gl,this.program),vT(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,e,n=!0){return this.throwIfDisposed(),n?function(t,e,n){return OT(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}(this.gl,t,e):function(t,e,n){return t.getUniformLocation(e,n)}(this.gl,t,e)}getAttributeLocation(t,e){return this.throwIfDisposed(),vT(this.gl,()=>this.gl.getAttribLocation(t,e))}getUniformLocationNoThrow(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)}setInputMatrixTexture(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),function(t,e,n,r){vT(t,()=>function(t,e,n){(function(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error(`textureUnit must be in [gl.TEXTURE0, gl.TEXTURE${n}].`)})(t,n),vT(t,()=>t.activeTexture(t.TEXTURE0+n)),vT(t,()=>t.bindTexture(t.TEXTURE_2D,e))}(t,e,r)),vT(t,()=>t.uniform1i(n,r))}(this.gl,t,e,n)}setOutputMatrixTexture(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)}setOutputPackedMatrixTexture(t,e,n){this.throwIfDisposed();const[r,s]=bT(e,n);this.setOutputMatrixTextureDriver(t,r,s)}setOutputMatrixWriteRegion(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)}setOutputPackedMatrixWriteRegion(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&kT(this.gl,this.program),ET(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;this.debug&&this.debugValidate(),vT(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),vT(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=wT(this.gl,2===qr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===qr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}const t=this.getQueryTimerExtensionWebGL1(),e=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,e),e}endQuery(){if(2===qr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2();return void t.endQuery(e.TIME_ELAPSED_EXT)}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await r.repeatedTry(()=>this.disposed||this.isQueryAvailable(t,qr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,qr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,e){if(0===e)return null;if(2===e){const e=this.gl;return e.getQueryParameter(t,e.QUERY_RESULT)/1e6}{const e=this.getQueryTimerExtensionWebGL1();return e.getQueryObjectEXT(t,e.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,e){if(0===e)return!0;if(2===e){const e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const e=this.getQueryTimerExtensionWebGL1(),n=e.getQueryObjectEXT(t,e.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(e.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(t){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})}pollItems(){const t=function(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}(this.itemsToPoll.map(t=>t.isDoneFn));for(let e=0;e<=t;++e){const{resolveFn:t}=this.itemsToPoll[e];t()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,e){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||r.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(t){this.throwIfDisposed(),CT(this.gl,t,this.framebuffer),this.debug&&ET(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(CT(this.gl,this.outputTexture,this.framebuffer),this.debug&&ET(this.gl)):IT(this.gl,this.framebuffer)}downloadMatrixDriver(t,e){this.bindTextureToFrameBuffer(t);const n=e();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(t,e,n){this.throwIfDisposed();const r=this.gl;CT(r,t,this.framebuffer),this.debug&&ET(r),this.outputTexture=t,vT(r,()=>r.viewport(0,0,e,n)),vT(r,()=>r.scissor(0,0,e,n))}setOutputMatrixWriteRegionDriver(t,e,n,r){this.throwIfDisposed(),vT(this.gl,()=>this.gl.scissor(t,e,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{getBroadcastDims:sN}=d;function iN(t,e,n,s){const i=[];t.forEach(t=>{const e=r.sizeFromShape(t.shapeInfo.logicalShape);t.shapeInfo.isUniform?i.push(`uniform float ${t.name}${e>1?`[${e}]`:""};`):(i.push(`uniform sampler2D ${t.name};`),i.push(`uniform int offset${t.name};`))});const o=i.join("\n"),a=t.map(t=>function(t,e,n=!1){let s="";return s+=n?aN(t):oN(t),t.shapeInfo.logicalShape.length<=e.logicalShape.length&&(s+=n?function(t,e){const n=t.name,s=n.charAt(0).toUpperCase()+n.slice(1),i="get"+s+"AtOutCoords",o=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,l=sN(t.shapeInfo.logicalShape,e.logicalShape),u=fN(a),c=a-o;let h;const d=["x","y","z","w","u","v"];h=0===o?"":a<2&&l.length>=1?"coords = 0;":l.map(t=>`coords.${d[t+c]} = 0;`).join("\n");let p="";p=a<2&&o>0?"coords":t.shapeInfo.logicalShape.map((t,e)=>`coords.${d[e+c]}`).join(", ");let f="return outputValue;";const m=1===r.sizeFromShape(t.shapeInfo.logicalShape),g=1===r.sizeFromShape(e.logicalShape);if(1!==o||m||g){if(m&&!g)f=1===a?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){const t=o-2,e=o-1;l.indexOf(t)>-1&&l.indexOf(e)>-1?f="return vec4(outputValue.x);":l.indexOf(t)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(e)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${i}() {\n      ${u} coords = getOutputCoords();\n      ${h}\n      vec4 outputValue = get${s}(${p});\n      ${f}\n    }\n  `}(t,e):function(t,e){const n=t.name,s=n.charAt(0).toUpperCase()+n.slice(1),i="get"+s+"AtOutCoords",o=t.shapeInfo.logicalShape.length,a=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===a&&null==t.shapeInfo.flatOffset&&r.arraysEqual(t.shapeInfo.texShape,e.texShape))return`\n      float ${i}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const l=fN(a),u=sN(t.shapeInfo.logicalShape,e.logicalShape),c=a-o;let h;const d=["x","y","z","w","u","v"];h=0===o?"":a<2&&u.length>=1?"coords = 0;":u.map(t=>`coords.${d[t+c]} = 0;`).join("\n");let p="";return p=a<2&&o>0?"coords":t.shapeInfo.logicalShape.map((t,e)=>`coords.${d[e+c]}`).join(", "),`\n    float ${i}() {\n      ${l} coords = getOutputCoords();\n      ${h}\n      return get${s}(${p});\n    }\n  `}(t,e)),s}(t,e,s)).join("\n"),l=e.texShape,u=BT(),c=function(t){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${t.texture2D}(textureSampler, uv).r;\n    }\n  `}(u);let h,d,p=function(t){return`${t.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${t.varyingFs} vec2 resultUV;\n    ${t.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${t.defineSpecialNaN}\n    ${t.defineSpecialInf}\n    ${t.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${lN}\n    ${uN}\n    ${cN}\n  `}(u);return e.isPacked?(h=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===n[0]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${n[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return 2 * (resTexRC.x * ${n[1]} + resTexRC.y);\n    }\n  `}(0,e);case 2:return function(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(r.arraysEqual(t,e))return`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `;const s=Math.ceil(t[1]/2);return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = 2 * (index / ${s});\n      int c = imod(index, ${s}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(t,e);case 3:return function(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[2]/2),s=r*Math.ceil(t[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      int b = index / ${s};\n      index -= b * ${s};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(t,e);default:return function(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),s=r*Math.ceil(t[t.length-2]/2);let i=s,o="",a="b, r, c";for(let l=2;l<t.length-1;l++)i*=t[t.length-l-1],o=`\n      int b${l} = index / ${i};\n      index -= b${l} * ${i};\n    `+o,a=`b${l}, `+a;return`\n    ivec${t.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${o}\n\n      int b = index / ${s};\n      index -= b * ${s};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec${t.length}(${a});\n    }\n  `}(t,e)}}(e.logicalShape,l),d=function(t){return`\n    void setOutput(vec4 val) {\n      ${t.output} = val;\n    }\n  `}(u)):(h=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return 1===(n=e)[0]?`\n      int getOutputCoords() {\n        return int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?`\n      int getOutputCoords() {\n        return int(resultUV.y * ${n[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return resTexRC.x * ${n[1]} + resTexRC.y;\n    }\n  `;case 2:return function(t,e){return r.arraysEqual(t,e)?`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));\n      }\n    `:1===t[1]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${e[0]}, ${e[1]}));\n        int index = resTexRC.x * ${e[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===t[0]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${e[0]}, ${e[1]}));\n        int index = resTexRC.x * ${e[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      int r = index / ${t[1]};\n      int c = index - r * ${t[1]};\n      return ivec2(r, c);\n    }\n  `}(t,e);case 3:return function(t,e){const n=VT(["r","c","d"],t);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${n}\n      return ivec3(r, c, d);\n    }\n  `}(t,e);case 4:return function(t,e){const n=VT(["r","c","d","d2"],t);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${n}\n      return ivec4(r, c, d, d2);\n    }\n  `}(t,e);case 5:return function(t,e){const n=VT(["r","c","d","d2","d3"],t);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},\n                             ${e[1]}));\n\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(t,e);case 6:return function(t,e){const n=VT(["r","c","d","d2","d3","d4"],t);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}var n}(e.logicalShape,l),d=function(t){return`\n    void setOutput(float val) {\n      ${t.output} = vec4(val, 0, 0, 0);\n    }\n  `}(u)),s&&(p+=hN),[p,c,d,o,h,a,n].join("\n")}function oN(t){const e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${n}() {return ${e};}`;const[r,s]=t.shapeInfo.texShape;if(1===r&&1===s)return`\n      float ${n}() {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const[i,o]=t.shapeInfo.texShape;return`\n    float ${n}() {\n      vec2 uv = uvFromFlat(${i}, ${o}, ${dN(e)});\n      return sampleTexture(${e}, uv);\n    }\n  `}(t);case 1:return function(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`\n      float ${n}(int index) {\n        ${pN(t)}\n      }\n    `;const r=t.shapeInfo.texShape,s=r[0],i=r[1];if(1===i&&1===s)return`\n      float ${n}(int index) {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const o=dN(e);return 1===i?`\n      float ${n}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${s}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `:1===s?`\n      float ${n}(int index) {\n        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${i}.0, 0.5);\n        return sampleTexture(${e}, uv);\n      }\n    `:`\n    float ${n}(int index) {\n      vec2 uv = uvFromFlat(${s}, ${i}, index + ${o});\n      return sampleTexture(${e}, uv);\n    }\n  `}(t);case 2:return function(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape;if(null!=i&&r.arraysEqual(e,i))return`\n    float ${s}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${i[1]}.0, ${i[0]}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `;const{newShape:o,keptDims:a}=r.squeezeShape(e);if(o.length<e.length){const e=["row","col"];return`\n      ${oN(mN(t,o))}\n      float ${s}(int row, int col) {\n        return ${s}(${gN(e,a)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));\n        ${pN(t)}\n      }\n    `;const l=i[0],u=i[1],c=dN(n);return 1===u?`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${c}), vec3(${e[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `:1===l?`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${c}), vec3(${e[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n  float ${s}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${e[1]} + col + ${c};\n    vec2 uv = uvFromFlat(${l}, ${u}, index);\n    return sampleTexture(${n}, uv);\n  }\n`}(t);case 3:return function(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[1]*e[2],o=e[2],{newShape:a,keptDims:l}=r.squeezeShape(e);if(a.length<e.length){const e=["row","col","depth"];return`\n        ${oN(mN(t,a))}\n        float ${s}(int row, int col, int depth) {\n          return ${s}(${gN(e,l)});\n        }\n      `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${i}, ${o}, 1)));\n        ${pN(t)}\n      }\n    `;const u=t.shapeInfo.texShape,c=u[0],h=u[1],d=t.shapeInfo.flatOffset;return h===i&&null==d?`\n        float ${s}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${o}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${h}.0, ${c}.0);\n          return sampleTexture(${n}, uv);\n        }\n      `:h===o&&null==d?`\n    float ${s}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${c}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n      float ${s}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${i} + col * ${o} + depth + ${dN(n)};\n        vec2 uv = uvFromFlat(${c}, ${h}, index);\n        return sampleTexture(${n}, uv);\n      }\n  `}(t);case 4:return function(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[3],o=e[2]*i,a=e[1]*o,{newShape:l,keptDims:u}=r.squeezeShape(e);if(l.length<e.length){const e=["row","col","depth","depth2"];return`\n      ${oN(mN(t,l))}\n      float ${s}(int row, int col, int depth, int depth2) {\n        return ${s}(${gN(e,u)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${a}, ${o}, ${i}, 1)));\n        ${pN(t)}\n      }\n    `;const c=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,d=h[0],p=h[1];return p===a&&null==c?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${o}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:p===i&&null==c?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${e[1]*e[2]}, ${e[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${a} + col * ${o} +\n          depth * ${i} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${p}, index + ${dN(n)});\n      return sampleTexture(${n}, uv);\n    }\n  `}(t);case 5:return function(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],o=e[3]*i,a=e[2]*o,l=e[1]*a,{newShape:u,keptDims:c}=r.squeezeShape(e);if(u.length<e.length){const e=["row","col","depth","depth2","depth3"];return`\n      ${oN(mN(t,u))}\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        return ${s}(${gN(e,c)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${l}, ${a}, ${o}, ${i})) +\n          depth3;\n        ${pN(t)}\n      }\n    `;const h=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1];return f===l&&null==h?`\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${a}, ${o}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:f===i&&null==h?`\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${e[1]*e[2]*e[3]},\n               ${e[2]*e[3]}, ${e[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${a} + depth * ${o} +\n          depth2 * ${i} + depth3 + ${dN(n)};\n      vec2 uv = uvFromFlat(${p}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(t);case 6:return function(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:o}=r.squeezeShape(e);if(i.length<e.length){const e=["row","col","depth","depth2","depth3","depth4"];return`\n      ${oN(mN(t,i))}\n      float ${s}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${s}(${gN(e,o)});\n      }\n    `}const a=e[5],l=e[4]*a,u=e[3]*l,c=e[2]*u,h=e[1]*c;if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${h}, ${c}, ${u}, ${l})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${a}, 1)));\n        ${pN(t)}\n      }\n    `;const d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,f=p[0],m=p[1];return m===h&&null==d?`\n      float ${s}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${c}, ${u}, ${l}, ${a})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${m}.0, ${f}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:m===a&&null==d?`\n      float ${s}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${e[1]*e[2]*e[3]*e[4]},\n               ${e[2]*e[3]*e[4]},\n               ${e[3]*e[4]},\n               ${e[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${m}.0, ${f}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${h} + col * ${c} + depth * ${u} +\n          depth2 * ${l} + depth3 * ${a} + depth4 + ${dN(n)};\n      vec2 uv = uvFromFlat(${f}, ${m}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(t);default:throw new Error(`${e.length}-D input sampling is not yet supported`)}}function aN(t){switch(t.shapeInfo.logicalShape.length){case 0:return function(t){const e=t.name;return`\n    vec4 ${"get"+e.charAt(0).toUpperCase()+e.slice(1)}() {\n      return ${BT().texture2D}(${e}, halfCR);\n    }\n  `}(t);case 1:return function(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,s=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=BT();return`\n    vec4 ${n}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${s[0]}, ${s[1]}, index);\n      return ${i.texture2D}(${e}, uv);\n    }\n  `}(t);case 2:return function(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,o=i[0],a=i[1],l=BT();if(null!=i&&r.arraysEqual(e,i))return`\n      vec4 ${s}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);\n\n        return ${l.texture2D}(${n}, uv);\n      }\n    `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`\n    vec4 ${s}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(e[1]/2)}, ${u[0]}, ${u[1]}, row, col);\n      return ${l.texture2D}(${n}, uv);\n    }\n  `}(t);case 3:return function(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(1===e[0]){const n=[1,2],s=["b","row","col"];return`\n        ${aN(mN(t,e.slice(1)))}\n        vec4 ${r}(int b, int row, int col) {\n          return ${r}(${gN(s,n)});\n        }\n      `}const o=i[0],a=i[1],l=Math.ceil(e[2]/2);return`\n    vec4 ${r}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${o}, ${a}, ${l*Math.ceil(e[1]/2)}, ${l}, b, row, col);\n      return ${BT().texture2D}(${n}, uv);\n    }\n  `}(t);default:return function(t){const e=t.shapeInfo.logicalShape,n=e.length,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],a=o[0],l=o[1],u=Math.ceil(e[n-1]/2);let c=u*Math.ceil(e[n-2]/2),h="int b, int row, int col",d=`b * ${c} + (row / 2) * ${u} + (col / 2)`;for(let p=2;p<n-1;p++)h=`int b${p}, `+h,c*=e[n-p-1],d=`b${p} * ${c} + `+d;return`\n    vec4 ${s}(${h}) {\n      int index = ${d};\n      int texR = index / ${l};\n      int texC = index - texR * ${l};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${a});\n      return ${BT().texture2D}(${r}, uv);\n    }\n  `}(t)}}const lN="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",uN="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",cN="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",hN="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function dN(t){return`offset${t}`}function pN(t){const e=t.name,n=r.sizeFromShape(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${e}[i];\n      }\n    }\n  `}function fN(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function mN(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function gN(t,e){return e.map(e=>t[e]).join(", ")}function bN(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((t,n)=>{const s=t.logicalShape,i=e[n],o=i.shape;if(!r.arraysEqual(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(t.isUniform&&i.isUniform)return;const a=t.texShape,l=i.isUniform?null:i.texData.texShape;if(!r.arraysEqual(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}const{addImpl:yN,bincountImpl:vN,bincountReduceImpl:_N,ceilImpl:wN,concatImpl:xN,equalImpl:kN,expImpl:SN,expm1Impl:CN,floorImpl:IN,gatherNdImpl:EN,gatherV2Impl:ON,greaterImpl:TN,greaterEqualImpl:NN,lessImpl:AN,lessEqualImpl:RN,linSpaceImpl:FN,logImpl:DN,maxImpl:PN,maximumImpl:$N,minimumImpl:MN,multiplyImpl:LN,negImpl:jN,notEqualImpl:zN,prodImpl:BN,rangeImpl:VN,rsqrtImpl:UN,simpleAbsImpl:WN,sliceImpl:HN,sparseFillEmptyRowsImpl:GN,sparseReshapeImpl:qN,sparseSegmentReductionImpl:ZN,stridedSliceImpl:KN,stringNGramsImpl:YN,stringSplitImpl:XN,stringToHashBucketFastImpl:JN,subImpl:QN,tileImpl:tA,topKImpl:eA,transposeImpl:nA,uniqueImpl:rA}=F;function sA(t,e){return["x","y","z","w","u","v"].slice(0,e).map(e=>`${t}.${e}`)}function iA(t,e){return 1===e?[t]:sA(t,e)}class oA{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;const e=t.length;if(0===e)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const n=iA("rc",e),r=fN(e),s=function(t,e,n){if(1===t)return`rc > ${e[0]}`;let r="";for(let s=t-2;s<t;s++)r+=`${n[s]} >= ${e[s]}`,s<t-1&&(r+="||");return r}(e,t,n),i=function(t,e,n,r){if(1===t)return"";const s=r.slice(-2);return`\n    int r = ${s[0]};\n    int c = ${s[1]};\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ${e};\n    bool rEdge = rp1 >= ${n};\n  `}(e,t[t.length-1],t[t.length-2],n),o=function(t,e){const n=t.length,r=function(t,e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${0===r?"r":"rp1"}, ${0===s?"c":"cp1"}`;for(let n=2;n<t;n++)i=`${e[e.length-1-n]},`+i;n.push(i)}return n}(n,e);return 1===n?`getA(rc),\n            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),\n            0, 0`:`getA(${r[0]}),\n          cEdge ? 0. : getA(${r[1]}),\n          rEdge ? 0. : getA(${r[2]}),\n          rEdge || cEdge ? 0. : getA(${r[3]})`}(t,n);this.userCode=`\n        void main() {\n          ${r} rc = getOutputCoords();\n\n          if(${s}) {\n            setOutput(vec4(0));\n          } else {\n            ${i}\n\n            setOutput(vec4(${o}));\n          }\n        }\n      `}}}class aA{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;let n="";for(let s=0;s<4;s++){let t="thisRC = rc;";s%2==1&&(t+="thisRC.z += 1;"),s>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${s}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${s>0?"}":""}\n      `}var r;this.userCode=`\n      ${r=e,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${VT(["r","c","d"],r)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${UT(t)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${t[1]};\n        int cols = ${t[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class lA{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(t,e,n){const r=cA(e,n),s=hA(t,r,n);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const i=uA(t,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const t=this.freeTextures[s].shift();return this.usedTextures[s].push(t),t}let o;return r===fT.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):r===fT.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):r===fT.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):r===fT.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):r===fT.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[s].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}releaseTexture(t,e,n,r){if(null==this.freeTextures)return;const s=cA(n,r),i=hA(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]);const o=uA(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r),a=qr().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==a&&this._numBytesAllocated>a?(this.gpgpu.deleteMatrixTexture(t),this._numBytesAllocated-=o):(this.freeTextures[i].push(t),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const l=this.usedTextures[i],u=l.indexOf(t);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(u,1),this.log()}log(){if(!this.logEnabled)return;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${this.numFreeTextures+this.numUsedTextures})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const t in this.freeTextures)this.freeTextures[t].forEach(t=>{this.gpgpu.deleteMatrixTexture(t)});for(const t in this.usedTextures)this.usedTextures[t].forEach(t=>{this.gpgpu.deleteMatrixTexture(t)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function uA(t,e,n,r,s){const i=function(t,e){switch(t){case fT.PACKED_2X2_FLOAT32:return eN(e);case fT.PACKED_2X2_FLOAT16:return nN(e);case fT.UNPACKED_FLOAT32:return JT(e);case fT.UNPACKED_FLOAT16:return QT(e);case fT.PACKED_4X1_UNSIGNED_BYTE:return tN(e);default:throw new Error(`Unknown physical texture type ${t}`)}}(e,r);let o;if(s){const[e,n]=bT(t[0],t[1]);o=e*n}else{const[e,n]=mT(t[0],t[1]);o=e*n}return o*function(t,e){if(e===t.R32F)return 4;if(e===t.R16F)return 2;if(e===t.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===t.RGBA16F)return 8;throw new Error(`Unknown internal format ${e}`)}(n,i)}function cA(t,e){if(t===pT.UPLOAD)return fT.PACKED_2X2_FLOAT32;if(t===pT.RENDER||null==t)return function(t){return qr().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?fT.PACKED_2X2_FLOAT32:fT.UNPACKED_FLOAT32:t?fT.PACKED_2X2_FLOAT16:fT.UNPACKED_FLOAT16}(e);if(t===pT.DOWNLOAD||t===pT.PIXELS)return fT.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function hA(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}class dA{constructor(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`\n      float unaryOperation(float x) {\n        ${e}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const pA="return abs(x);",fA="return x;";class mA{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${e}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class gA{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;const e=t.length,n=iA("rc",e),r=fN(e),s=function(t,e){if(1===t)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(e,n),i=n.slice(-2),o=e<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${s});\n\n        setOutput(getChannel(packedInput, ${o}));\n      }\n    `}}const bA=p.whereImpl,yA={},vA=qr().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class _A extends Yn{constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!qr().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){const t=hT(qr().getNumber("WEBGL_VERSION"));this.binaryCache=((e=qr().getNumber("WEBGL_VERSION"))in yA||(yA[e]={}),yA[e]),this.gpgpu=new rN(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=t,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=t.gl.canvas;var e;this.textureManager=new lA(this.gpgpu),this.numMBBeforeWarning=null==qr().global.screen?1024:qr().global.screen.height*qr().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Kn(this,ec())}nextDataId(){return _A.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(t,e,n){if((qr().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||qr().getBool("DEBUG"))&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:pT.UPLOAD,refCount:1}),r}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){this.texData.get(t).refCount++}decRef(t){this.texData.has(t)&&this.texData.get(t).refCount--}move(t,e,n,r,s){if(qr().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:pT.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const e=this.texData.get(t),{values:n,dtype:s,complexTensorInfos:i,slice:o,shape:a,isPacked:l}=e;if(null!=o){let e;e=l?new mA(a,fA):new dA(a,fA);const n=this.runWebGLProgram(e,[{dataId:t,shape:a,dtype:s}],s),r=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===s)return n;const u=null!=this.activeTimers;let c,h;if(u&&(c=r.now()),"complex64"===s){const t=this.readSync(i.real.dataId),e=this.readSync(i.imag.dataId);h=d.mergeRealAndImagArrays(t,e)}else h=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=r.now()-c),this.convertAndCacheOnCPU(t,h)}async read(t){if(this.pendingRead.has(t)){const e=this.pendingRead.get(t);return new Promise(t=>e.push(t))}const e=this.texData.get(t),{values:n,shape:s,slice:i,dtype:o,complexTensorInfos:a,isPacked:l}=e;if(null!=i){let e;e=l?new mA(s,fA):new dA(s,fA);const n=this.runWebGLProgram(e,[{dataId:t,shape:s,dtype:o}],o),r=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(t);if(!qr().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===qr().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u,c,h=null;if("complex64"!==o&&qr().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(t);const e=this.texData.get(u.dataId);h=this.gpgpu.createBufferFromTexture(e.texture,...gT(s))}if(this.pendingRead.set(t,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const t=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]);c=d.mergeRealAndImagArrays(t[0],t[1])}else if(null==h)c=this.getValuesFromTexture(t);else{const t=r.sizeFromShape(s);c=this.gpgpu.downloadFloat32MatrixFromBuffer(h,t)}null!=u&&this.disposeIntermediateTensorInfo(u);const p=this.convertAndCacheOnCPU(t,c),f=this.pendingRead.get(t);return this.pendingRead.delete(t),f.forEach(t=>t(p)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&ec().removeDataId(t,this),this.pendingDeletes--),p}bufferSync(t){const e=this.readSync(t.dataId);let n=e;if("string"===t.dtype)try{n=e.map(t=>r.decodeString(t))}catch(s){throw new Error("Failed to decode encoded string bytes into utf-8")}return hu(t.shape,t.dtype,n)}checkNumericalProblems(t){if(null!=t)for(let e=0;e<t.length;e++){const n=t[e];if(!_T(n)){if(qr().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(t){const{shape:e,dtype:n,isPacked:s}=this.texData.get(t),i=r.sizeFromShape(e);if(qr().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(t),r=this.texData.get(n.dataId),s=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...gT(e)).subarray(0,i);return this.disposeIntermediateTensorInfo(n),s}const o=qr().getBool("WEBGL_PACK")&&!0===s,a=o?AT(e):e,l=o?new ZT(a):new qT(a),u=this.runWebGLProgram(l,[{shape:a,dtype:n,dataId:t}],"float32"),c=this.texData.get(u.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),h}timerAvailable(){return qr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}async time(t){const e=this.activeTimers,n=[];let s=!1;null==this.programTimersStack?(this.programTimersStack=n,s=!0):this.activeTimers.push(n),this.activeTimers=n,t();const i=r.flatten(this.activeTimers.map(t=>t.query)).filter(t=>null!=t),o=r.flatten(this.activeTimers.map(t=>t.name)).filter(t=>null!=t);this.activeTimers=e,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(qr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const t=await Promise.all(i);a.kernelMs=r.sum(t),a.getExtraProfileInfo=()=>t.map((t,e)=>({name:o[e],ms:t})).map(t=>`${t.name}: ${t.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return qr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:r.now(),endMs:null}}endTimer(t){return qr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=r.now(),t)}async getQueryTime(t){return qr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.waitForQueryAndGetTime(t):t.endMs-t.startMs}disposeData(t,e=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(e?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!e&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:n}=this.texData.get(t);return null!=n&&(this.disposeData(n.real.dataId,e),this.disposeData(n.imag.dataId,e)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:e,dtype:n,texShape:r,usage:s,isPacked:i,slice:o}=this.texData.get(t),a=o&&o.origDataId||t,l=this.dataRefCount.get(a);l>1?this.dataRefCount.set(a,l-1):(this.dataRefCount.delete(a),null!=e&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(e,r,s,i)));const u=this.texData.get(t);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,e=vA){return qr().getBool("WEBGL_CPU_FORWARD")&&t.every(t=>null==this.texData.get(t.dataId).texture&&r.sizeFromShape(t.shape)<e)}getGPGPUContext(){return this.gpgpu}where(t){d.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const e=t.dataSync();return bA(t.shape,e)}packedUnaryOp(t,e,n){const r=new mA(t.shape,e),s=this.compileAndRun(r,[t],n);return ec().makeTensorFromDataId(s.dataId,s.shape,s.dtype)}abs(t){if(this.shouldExecuteOnCPU([t])&&"complex64"!==t.dtype){const e=WN(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,e)}if(qr().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,pA,t.dtype);const e=new dA(t.shape,pA),n=this.compileAndRun(e,[t]);return ec().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}makeTensorInfo(t,e,n){let s;if("string"===e&&null!=n&&n.length>0&&r.isString(n[0])){const i=n.map(t=>r.encodeString(t));s=this.write(i,t,e)}else s=this.write(n,t,e);return this.texData.get(s).usage=null,{dataId:s,shape:t,dtype:e}}makeOutput(t,e,n){const{dataId:r}=this.makeTensorInfo(t,e,n);return ec().makeTensorFromDataId(r,t,e,this)}unpackTensor(t){const e=new gA(t.shape);return this.runWebGLProgram(e,[t],t.dtype)}packTensor(t){const e=new oA(t.shape);return this.runWebGLProgram(e,[t],t.dtype,null,!0)}packedReshape(t,e){const n=[TT(t.shape),...NT(t.shape)],r={dtype:t.dtype,shape:n,dataId:t.dataId},s=[TT(e),...NT(e)],i=new aA(s,n),o=this.runWebGLProgram(i,[r],t.dtype,null,!0);return{dataId:o.dataId,shape:e,dtype:o.dtype}}decode(t){const e=this.texData.get(t),{isPacked:n,shape:r,dtype:s}=e,i=AT(r);let o;return o=n?new GT(i):new HT(i),{dtype:s,shape:r,dataId:this.runWebGLProgram(o,[{shape:i,dtype:s,dataId:t}],s,null,!0).dataId}}runWebGLProgram(t,e,n,s,i=!1){const o=this.makeTensorInfo(t.outputShape,n),a=this.texData.get(o.dataId);if(t.packedOutput&&(a.isPacked=!0),t.outPackingScheme===dT.DENSE){const e=gT(t.outputShape);a.texShape=e.map(t=>2*t)}if(null!=t.outTexUsage&&(a.usage=t.outTexUsage),0===r.sizeFromShape(o.shape))return a.values=r.getTypedArrayFromDType(o.dtype,0),o;const l=[],u=e.map(e=>{if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&r.sizeFromShape(e.shape)<=qr().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}else if(!!n.isPacked!=!!t.packedInputs)e=n.isPacked?this.unpackTensor(e):this.packTensor(e),l.push(e),n=this.texData.get(e.dataId);else if(n.isPacked&&!FT(n.shape,e.shape)){const t=e,r=e.shape;e.shape=n.shape,e=this.packedReshape(e,r),l.push(e),n=this.texData.get(e.dataId),t.shape=r}return this.uploadToGPU(e.dataId),{shape:e.shape,texData:n,isUniform:!1}});this.uploadToGPU(o.dataId);const c={shape:o.shape,texData:a,isUniform:!1},h=function(t,e,n){let r="";e.concat(n).forEach(t=>{r+=`${t.shape}_${t.isUniform?"uniform":t.texData.texShape}_${null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0}`});let s=t.constructor.name;return s+="_"+r+"_"+t.userCode,s}(t,u,c),d=this.getAndSaveBinary(h,()=>function(t,e,n,r){const s=e.userCode,i=n.map((t,n)=>{const r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}}),o=i.map(t=>t.shapeInfo),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=iN(i,a,s,e.packedInputs),u=t.createProgram(l);let c=null;const h=t.getUniformLocation(u,"NAN",!1);1===qr().getNumber("WEBGL_VERSION")&&(c=t.getUniformLocation(u,"INFINITY",!1));const d={};for(let p=0;p<e.variableNames.length;p++){const n=e.variableNames[p],r=!1;d[n]=t.getUniformLocation(u,n,r),d[`offset${n}`]=t.getUniformLocation(u,`offset${n}`,r)}return{program:e,source:l,webGLProgram:u,uniformLocations:d,inShapeInfos:o,outShapeInfo:a,infLoc:c,nanLoc:h}}(this.gpgpu,t,u,c)),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),function(t,e,n,s,i){bN(e.inShapeInfos,n),bN([e.outShapeInfo],[s]);const o=s.texData.texture,a=s.texData.texShape;s.texData.isPacked?t.setOutputPackedMatrixTexture(o,a[0],a[1]):t.setOutputMatrixTexture(o,a[0],a[1]),t.setProgram(e.webGLProgram),1===qr().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((n,s)=>{const i=e.program.variableNames[s],o=e.uniformLocations[i],a=e.uniformLocations[`offset${i}`];if(null!=o)if(n.isUniform)if(r.sizeFromShape(n.shape)<2)t.gl.uniform1f(o,n.uniformValues[0]);else{let e=n.uniformValues;e instanceof Float32Array||(e=new Float32Array(e)),t.gl.uniform1fv(o,e)}else null!=n.texData.slice&&null!=a&&t.gl.uniform1i(a,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture,o,s)}),null!=i&&i(t,e.webGLProgram),t.executeProgram()}(this.gpgpu,d,u,c,s),l.forEach(t=>this.disposeIntermediateTensorInfo(t)),p&&(f=this.endTimer(f),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(f)}));const m=qr().get("WEBGL_FLUSH_THRESHOLD");if(m>0){const t=r.now();t-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=t)}if(!qr().getBool("WEBGL_LAZILY_UNPACK")&&a.isPacked&&!1===i){const t=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),t}return o}compileAndRun(t,e,n,r,s=!1){return this.runWebGLProgram(t,e,n=n||e[0].dtype,r,s)}getAndSaveBinary(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(qr().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=rc(()=>{if(!qr().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=qr().getBool("DEBUG");qr().set("DEBUG",!1);const e=this.abs(lc(1e-8)).dataSync()[0];if(qr().set("DEBUG",t),e>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(t){const e=this.texData.get(t),{shape:n,dtype:s,values:i,texture:o,usage:a,isPacked:l}=e;if(null!=o)return;const u=null!=this.activeTimers;let c;u&&(c=r.now());let h=e.texShape;if(null==h&&(h=function(t,e=!1){let n=qr().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(n*=2,1===(t=t.map((e,n)=>n>=t.length-2?r.nearestLargerEven(t[n]):t[n])).length&&(t=[2,t[0]])),2!==t.length){const e=r.squeezeShape(t);t=e.newShape}let s=r.sizeFromShape(t);if(t.length<=1&&s<=n)return[1,s];if(2===t.length&&t[0]<=n&&t[1]<=n)return t;if(3===t.length&&t[0]*t[1]<=n&&t[2]<=n)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=n&&t[1]*t[2]<=n)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=n&&t[3]<=n)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n)return[t[0],t[1]*t[2]*t[3]];if(e){const e=TT(t);let n=2,i=2;return t.length&&([n,i]=NT(t)),s=e*(n/2)*(i/2),r.sizeToSquarishShape(s).map(t=>2*t)}return r.sizeToSquarishShape(s)}(n,l),e.texShape=h),null!=i){const t=AT(n);let o,a=h[1],d=h[0];const p=i instanceof Uint8Array;l?([a,d]=bT(h[0],h[1]),o=new YT(t,[d,a],p)):o=new KT(t,[d,a],p);const f=this.makeTensorInfo([d,a],s);this.texData.get(f.dataId).usage=p?pT.PIXELS:pT.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),a,d,i);const m=this.runWebGLProgram(o,[f],s,null,!0),g=this.texData.get(m.dataId);e.texture=g.texture,e.texShape=g.texShape,e.isPacked=g.isPacked,e.usage=g.usage,this.disposeIntermediateTensorInfo(f),this.texData.delete(m.dataId),e.values=null,u&&(this.uploadWaitMs+=r.now()-c)}else{const t=this.acquireTexture(h,a,s,l);e.texture=t}}convertAndCacheOnCPU(t,e){const n=this.texData.get(t),{dtype:r}=n;return this.releaseGPUData(t),null!=e&&(n.values=function(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){const n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length);for(let e=0;e<n.length;++e)n[e]=Math.round(t[e]);return n}throw new Error(`Unknown dtype ${e}`)}(e,r)),n.values}acquireTexture(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const t=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${t} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,e,r)}computeBytes(t,e){return t[0]*t[1]*r.bytesPerElement(e)}}_A.nextDataId=0,i.isBrowser()&&oc("webgl",()=>new _A,2);class wA{constructor(t,e,n){this.variableNames=["A","B"],this.outputShape=d.assertAndGetBroadcastShape(e,n),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${t}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}class xA{constructor(t,e,n,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=d.assertAndGetBroadcastShape(e,n);const i=this.outputShape.length;let o="";if(s)if(0===i||1===r.sizeFromShape(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o=`\n          ${fN(i)} coords = getOutputCoords();\n        `,1===i)o+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const t=iA("coords",i);o+=`\n            bool nextRowOutOfBounds =\n              (${t[i-2]} + 1) >= ${this.outputShape[i-2]};\n            bool nextColOutOfBounds =\n              (${t[i-1]} + 1) >= ${this.outputShape[i-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${t}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${o}\n\n        setOutput(result);\n      }\n    `}}function kA(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const SA={kernelName:ui,backendName:"webgl",kernelFunc:kA};function CA(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),a=kA({inputs:{x:r},backend:n}),l=kA({inputs:{x:s},backend:n});return o.complexTensorInfos={real:a,imag:l},i}const IA={kernelName:xs,backendName:"webgl",kernelFunc:CA},EA="return (a < 0.) ? b * a : a;",OA="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",TA={kernelName:mi,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{alpha:o}=s,a=n.makeTensorInfo([],"float32",r.createScalarValue(o,"float32")),l=qr().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xA(OA,i.shape,a.shape):new wA(EA,i.shape,a.shape),u=n.runWebGLProgram(l,[i,a],i.dtype);return n.disposeIntermediateTensorInfo(a),u}},NA="return (a < 0.) ? b * a : a;",AA="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",RA={kernelName:Yi,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=qr().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xA(AA,r.shape,s.shape):new wA(NA,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)}};function FA({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:o}=s,a=i,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&null!=n){const t=a.texData.get(o.dataId),e=n(t.values,l);return a.makeTensorInfo(o.shape,l,e)}let u;return u=qr().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=e?new mA(o.shape,e):new dA(o.shape,t),a.runWebGLProgram(u,[o],l)}}function DA({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:o,backend:a})=>{const{a:l,b:u}=o,c=a;if(r&&"complex64"===l.dtype){const e=c.texData.get(l.dataId),n=c.texData.get(u.dataId),[r,s]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(e=>{const[n,r]=e,s={dataId:n.dataId,dtype:n.dtype,shape:l.shape},i={dataId:r.dataId,dtype:r.dtype,shape:u.shape},o=new wA(t,l.shape,u.shape);return c.runWebGLProgram(o,[s,i],Ka(n.dtype,r.dtype))}),i=CA({inputs:{real:r,imag:s},backend:c});return c.disposeIntermediateTensorInfo(r),c.disposeIntermediateTensorInfo(s),i}const h=i||Ka(l.dtype,u.dtype);if(("string"===l.dtype||"string"===u.dtype||c.shouldExecuteOnCPU([l,u]))&&null!=s){const t=c.texData.get(l.dataId).values,e=c.texData.get(u.dataId).values,n="string"===l.dtype?d.fromUint8ToStringArray(t):t,r="string"===l.dtype?d.fromUint8ToStringArray(e):e,[i,o]=s(l.shape,u.shape,n,r,h),a=c.makeTensorInfo(o,h);return c.texData.get(a.dataId).values=i,a}let p;return p=qr().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=e?new xA(e,l.shape,u.shape,n):new wA(t,l.shape,u.shape),c.runWebGLProgram(p,[l,u],h)}}function PA(t,e=!1){if("linear"===t)return"return x;";if("relu"===t)return e?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===t)return e?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===t)return e?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===t)return e?AA:NA;if("leakyrelu"===t)return e?OA:EA;if("sigmoid"===t)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}class $A{constructor(t,e,n,r=!1,s=!1,i=!1,o=null,a=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;const u=Math.ceil((r?t[1]:t[2])/2),c=r?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",d=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let f="",m="";o&&(f=a?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${o}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${o}\n        }`:`vec4 activation(vec4 x) {\n          ${o}\n        }`,m="result = activation(result);");const g=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let b="rc.x",y="rc.x";t[0]<e[0]?b=`int(min(float(rc.x), ${t[0]-1}.))`:e[0]<t[0]&&(y=`int(min(float(rc.x), ${e[0]-1}.))`),this.userCode=`\n      ${f}\n\n      const float sharedDimension = ${u}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${u}; i++) {\n          int batchA = ${b};\n          int batchB = ${y};\n          vec4 a = getMatrixA(batchA, ${c});\n          vec4 b = getMatrixB(batchB, ${h});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${d[0]} * ${p[0]});\n          result += (${d[1]} * ${p[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${g}\n\n        ${m}\n\n        setOutput(result);\n      }\n    `}}class MA{constructor(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=d.assertAndGetBroadcastShape(e,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${t}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const LA="return a * b;";function jA(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=d.upcastType(r.dtype,s.dtype);if("complex64"===r.dtype){const t=n.texData.get(r.dataId),e=n.texData.get(s.dataId),i=new MA("return areal * breal - aimag * bimag;",r.shape,s.shape),o=new MA("return areal * bimag + aimag * breal;",r.shape,s.shape),a=[{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:r.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:s.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:s.shape}],l=n.runWebGLProgram(i,a,"float32"),u=n.runWebGLProgram(o,a,"float32"),c=CA({inputs:{real:l,imag:u},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}if(n.shouldExecuteOnCPU([r,s])){const t=n.texData.get(r.dataId),e=n.texData.get(s.dataId),[o,a]=LN(r.shape,s.shape,t.values,e.values,i),l=n.makeTensorInfo(a,i);return n.texData.get(l.dataId).values=o,l}let o;return o=qr().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xA(LA,r.shape,s.shape):new wA(LA,r.shape,s.shape),n.runWebGLProgram(o,[r,s],i)}const zA={kernelName:ji,backendName:"webgl",kernelFunc:jA};function BA(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{shape:o}=s,a=n,l=r.sizeFromShape(i.shape),u=r.inferFromImplicitShape(o,l),c=r.sizeFromShape(u);r.assert(l===c,()=>`The new shape (${u}) has ${c} elements and the old shape (${i.shape}) has ${l} elements. The new shape and old shape must have the same number of elements.`);const h=a.texData.get(i.dataId);return!h.isPacked||FT(i.shape,u)||null!==h.texture&&FT(h.shape,u)?(a.incRef(i.dataId),{dataId:i.dataId,shape:u,dtype:i.dtype}):function(t,e,n){const r=[TT(t.shape),...NT(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[TT(e),...NT(e)],o=new aA(i,r),a=n.runWebGLProgram(o,[s],t.dtype,null,!0);return{dataId:a.dataId,shape:e,dtype:a.dtype}}(i,u,a)}const VA={kernelName:no,backendName:"webgl",kernelFunc:BA};class UA{constructor(t,e){this.variableNames=["x"];const{windowSize:n,batchSize:s,inSize:i,outSize:o}=t;this.outputShape=[s,o];const a=4*Math.floor(n/4),l=n%4;let u="sumValue += dot(values, ones);";if(null!=e){const t=1/e;u=`sumValue += dot(values * ${r.isInt(t)?t.toPrecision(2):t}, ones);`}let c="";i%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===l}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}class WA{constructor(t,e){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:s,outSize:i}=t;this.outputShape=[r,i];let o="0.0",a="";"prod"===e?o="1.0":"min"===e?(o="1.0 / 1e-20",a="min"):"max"===e&&(o="-1.0 / 1e-20",a="max");let l=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===e?l="sumValue":"prod"===e?l="prodValue":"all"===e?l="allValue":"any"===e&&(l="anyValue");const u=4*Math.floor(n/4),c=n%4;let h=`\n      if (${"sum"===e}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===e}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${a}(values, minMaxValue);\n        if (${"min"===e} || ${"max"===e}) {\n          minMaxValue = ${a}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,d="vec4";"all"===e?(o="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===e&&(o="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";s%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${o};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${o});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${2===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${3===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${h}\n        }\n        setOutput(${l});\n      }\n    `}}function HA(t,e,n,r){const s=function(t){const e=[];for(;0===e.length||1!==e[e.length-1].outSize;){const n=e.length?e[e.length-1].outSize:t[1],r=d.computeOptimalWindowSize(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}(t.shape);let i=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:l,outSize:u}=s[o];let c,h;c="mean"===n?0===o?new UA({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},a):new UA({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u}):new WA({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},n),h=i,i=r.runWebGLProgram(c,[i],e),h.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(h)}return i}class GA{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let i=0;i<n.length;i++)n[i]=t[e[i]];this.outputShape=n,this.rank=n.length;const r=fN(this.rank),s=function(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}(e);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${s}));\n    }\n    `}}class qA{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(t.length);for(let u=0;u<n.length;u++)n[u]=t[e[u]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=fN(this.rank),s=sA("rc",this.rank),i=new Array(this.rank);for(let u=0;u<e.length;u++)i[e[u]]=s[u];const o=`vec2(${i.slice(-2).join()})`,a=`++${s[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${i.join()}), ${o})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${a}) {\n        result[1] = ${l};\n      }\n      --${s[this.rank-1]};\n      if(++${s[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${a}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function ZA(t,e,n){const r=qr().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qA(t.shape,e):new GA(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}function KA(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o,keepDims:a}=s;return function(t,e,n,s){const i=t.shape.length,o=r.parseAxisParam(e,t.shape);let a=o;const l=d.getAxesPermutation(a,i),u=null!=l;let c=t;u&&(c=ZA(t,l,s),a=d.getInnerMostAxes(a.length,i)),d.assertAxesAreInnerMostDims("sum",a,i);const[h,p]=d.computeOutAndReduceShapes(c.shape,a);let f=h;n&&(f=d.expandShapeToKeepDim(h,o));const m=r.sizeFromShape(p),g=BA({inputs:{x:c},attrs:{shape:[r.sizeFromShape(t.shape)/m,m]},backend:s}),b=HA(g,Ya(t.dtype),"sum",s),y=BA({inputs:{x:b},attrs:{shape:f},backend:s});return s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(b),u&&s.disposeIntermediateTensorInfo(c),y}(i,o,a,n)}const YA={kernelName:xo,backendName:"webgl",kernelFunc:KA};function XA(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,o=n,a=new Array(s.shape.length);for(let u=0;u<a.length;u++)a[u]=s.shape[i[u]];let l;if(o.shouldExecuteOnCPU([s])){const t=o.texData.get(s.dataId),e=nA(t.values,s.shape,s.dtype,i,a);l=o.makeTensorInfo(a,s.dtype),o.texData.get(l.dataId).values=e}else l=ZA(s,i,o);return l}const JA={kernelName:Uo,backendName:"webgl",kernelFunc:XA};function QA({a:t,b:e,transposeA:n,transposeB:s,backend:i,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:l=0,activation:u=null}){const c=t.shape.length,h=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],p=s?e.shape[h-1]:e.shape[h-2],f=n?t.shape[c-1]:t.shape[c-2],m=s?e.shape[h-2]:e.shape[h-1],g=t.shape.slice(0,-2),b=e.shape.slice(0,-2),y=r.sizeFromShape(g),v=r.sizeFromShape(b);r.assert(c>=2&&h>=2&&(y===v||1===y||1===v),()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${g}) and (${b}).`);const _=(y>v?t.shape.slice(0,-2):e.shape.slice(0,-2)).concat([f,m]);r.assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${s} must match.`);const w=n?[y,d,f]:[y,f,d],x=s?[v,m,p]:[v,p,m],k=BA({inputs:{x:t},backend:i,attrs:{shape:w}}),S=BA({inputs:{x:e},backend:i,attrs:{shape:x}}),C=[k,S],I=Math.max(y,v),E=n?k.shape[1]:k.shape[2],O=null!=o,T=null!=a,N="leakyrelu"===u,A=null!=u?PA(u,!0):null;let R;if((1===f||1===m)&&E>1e3&&!1===(O||T||N||null!=A)){let t=k,e=S;n&&(t=XA({inputs:{x:k},backend:i,attrs:{perm:[0,2,1]}}),C.push(t)),s&&(e=XA({inputs:{x:S},backend:i,attrs:{perm:[0,2,1]}}),C.push(e));const r=1===m;let o=t;1!==m&&(o=BA({inputs:{x:t},backend:i,attrs:{shape:[I,E,1]}}),C.push(o));const a=1===m?2:1;let l=e;r&&(l=BA({inputs:{x:e},backend:i,attrs:{shape:[I,1,E]}}),C.push(l));const u=jA({inputs:{a:o,b:l},backend:i});R=KA({inputs:{x:u},backend:i,attrs:{axis:a,keepDims:!0}}),C.push(u)}else{const u=Ka(t.dtype,e.dtype),c=new $A(w,x,[I,f,m],n,s,O,A,T,N),h=[k,S];if(null!=o&&h.push(o),T&&h.push(a),N){const t=i.makeTensorInfo([],"float32",r.createScalarValue(l,"float32"));h.push(t),C.push(t)}R=i.runWebGLProgram(c,h,u)}const F=BA({inputs:{x:R},backend:i,attrs:{shape:_}});C.push(R);for(const r of C)i.disposeIntermediateTensorInfo(r);return F}const tR={kernelName:Xo,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:h}=r;return QA({a:s,b:i,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:h,activation:c})}},eR="return abs(x);",nR={kernelName:Jr,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const t=n.texData.get(r.dataId),e=WN(t.values);return n.makeTensorInfo(r.shape,r.dtype,e)}let s;return s=qr().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new mA(r.shape,eR):new dA(r.shape,eR),n.runWebGLProgram(s,[r],r.dtype)}},rR=FA({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),sR={kernelName:Qr,backendName:"webgl",kernelFunc:rR},iR=FA({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),oR={kernelName:ts,backendName:"webgl",kernelFunc:iR},aR="return a + b;",lR=DA({opSnippet:aR,packedOpSnippet:aR,supportsComplex:!0,cpuKernelImpl:yN}),uR={kernelName:es,backendName:"webgl",kernelFunc:lR};class cR{constructor(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map((t,e)=>`T${e}`);const n=[];this.variableNames.forEach(t=>{n.push(`float v${t} = get${t}AtOutCoords();`)});const r=this.variableNames.map(t=>`v${t}`).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class hR{constructor(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((t,e)=>`T${e}`);const n=[];this.variableNames.forEach(t=>{n.push(`vec4 v${t} = get${t}AtOutCoords();`)});const r=this.variableNames.map(t=>`v${t}`).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}const dR={kernelName:ns,backendName:"webgl",kernelFunc:function t(e){const{inputs:n,backend:r}=e,s=n;if(1===s.length)return kA({inputs:{x:s[0]},backend:r});if(s.length>qr().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(s.length/2),n=t({inputs:s.slice(0,e),backend:r}),i=t({inputs:s.slice(e),backend:r});return t({inputs:[n,i],backend:r})}const i=s.map(t=>t.dtype).reduce((t,e)=>Ka(t,e)),o=s.map(t=>t.shape),a=qr().getBool("WEBGL_PACK")?new hR(s[0].shape,o):new cR(s[0].shape,o);return r.runWebGLProgram(a,s,i)}},pR={kernelName:rs,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o,keepDims:a}=s,l=i.shape.length,u=r.parseAxisParam(o,i.shape);let c=u;const h=d.getAxesPermutation(c,l);let p=i;null!=h&&(p=XA({inputs:{x:i},backend:n,attrs:{perm:h}}),c=d.getInnerMostAxes(c.length,l)),d.assertAxesAreInnerMostDims("all",c,l);const[f,m]=d.computeOutAndReduceShapes(p.shape,c),g=BA({inputs:{x:p},backend:n,attrs:{shape:[-1,r.sizeFromShape(m)]}}),b=HA(g,g.dtype,"all",n);let y;return y=BA(a?{inputs:{x:b},backend:n,attrs:{shape:d.expandShapeToKeepDim(f,u)}}:{inputs:{x:b},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),null!=h&&n.disposeIntermediateTensorInfo(p),y}},fR={kernelName:ss,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o,keepDims:a}=s,l=i.shape.length,u=r.parseAxisParam(o,i.shape);let c=u;const h=d.getAxesPermutation(c,l);let p=i;null!=h&&(p=XA({inputs:{x:i},backend:n,attrs:{perm:h}}),c=d.getInnerMostAxes(c.length,l)),d.assertAxesAreInnerMostDims("any",c,l);const[f,m]=d.computeOutAndReduceShapes(p.shape,c),g=BA({inputs:{x:p},backend:n,attrs:{shape:[-1,r.sizeFromShape(m)]}}),b=HA(g,g.dtype,"any",n);let y;return y=BA(a?{inputs:{x:b},backend:n,attrs:{shape:d.expandShapeToKeepDim(f,u)}}:{inputs:{x:b},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),null!=h&&n.disposeIntermediateTensorInfo(p),y}};class mR{constructor(t,e,n){this.variableNames=["A"];const{windowSize:r,batchSize:s,outSize:i}=t;n||this.variableNames.push("bestIndicesA"),this.outputShape=[s,i],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${"max"===e?">":"<"} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class gR{constructor(t,e,n,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,r.assert(t.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);const i=Math.ceil(t[t.length-1]/e);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),s||this.variableNames.push("bestIndicesA");const o=this.outputShape,a=o.length,l=fN(a),u=iA("coords",a);let c,h;if(1===i){h=a+1;const t=fN(h);c=`\n        ${t} sourceLocR = ${t}(${u.join()}, 0);\n        ++${u[a-1]};\n        ${t} sourceLocG = ${t}(${u.join()}, 0);\n        ++${u[a-2]};\n        ${t} sourceLocA = ${t}(${u.join()}, 0);\n        --${u[a-1]};\n        ${t} sourceLocB = ${t}(${u.join()}, 0);\n        --${u[a-2]};`}else h=a,c=`\n        ${l} sourceLocR = coords;\n        ++${u[a-1]};\n        ${l} sourceLocG = coords;\n        ++${u[a-2]};\n        ${l} sourceLocA = coords;\n        --${u[a-1]};\n        ${l} sourceLocB = coords;\n        --${u[a-2]};`;const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],f=d.map(t=>"int "+t),m=iA("sourceLocR",h-1).concat("inIdx.r"),g=iA("sourceLocG",h-1).concat("inIdx.g"),b=iA("sourceLocB",h-1).concat("inIdx.b"),y=iA("sourceLocA",h-1).concat("inIdx.a"),v="max"===n?"greaterThan":"lessThan",_=s?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${b.join()}),\n                             getBestIndicesAChannel(${y.join()})));`,w=`vec4(\n            getAChannel(${m.join()}),\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\n            hasNextRow ? getAChannel(${b.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,x=s?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${d.join()}),\n                                          vec2(${d.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${d.join()}),\n                               vec2(${d.slice(-2).join()}));\n      }\n      ${x}\n      void main() {\n        ${l} coords = getOutputCoords();\n        bool hasNextCol = ${u[a-1]} < ${o[a-1]-1};\n        bool hasNextRow = ${u[a-2]} < ${o[a-2]-1};\n        ${c}\n        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},\n          sourceLocB${p}, sourceLocA${p}) * ${e};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${w};\n\n        for (int i = 0; i < ${e}; i++) {\n          inIdx = srcIdx;\n          ${_}\n          vec4 candidate = ${w};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${v}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function bR(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];null!=r&&(s=r.shape[0],i=r.shape[1]);const o=d.computeOptimalWindowSize(i),a={windowSize:o,inSize:i,batchSize:s,outSize:Math.ceil(i/o)},l=new mR(a,n,null==r),u=[e];null!=r&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(1===c.shape[1])return c;const h=bR(t,e,n,c);return t.disposeIntermediateTensorInfo(c),h}function yR(t,e,n,r=null){const s=null!=r?r.shape:e.shape,i=d.computeOptimalWindowSize(s[s.length-1]),o=new gR(s,i,n,null==r),a=t.runWebGLProgram(o,null==r?[e]:[e,r],"int32");if(a.shape.length===e.shape.length){const r=yR(t,e,n,a);return t.disposeIntermediateTensorInfo(a),r}return a}function vR(t,e,n,s){const i=[n];if(d.assertAxesAreInnerMostDims("arg"+s.charAt(0).toUpperCase()+s.slice(1),i,e.shape.length),!qr().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const n=[],[o,a]=d.computeOutAndReduceShapes(e.shape,i),l=r.sizeFromShape(a),u=BA({inputs:{x:e},backend:t,attrs:{shape:[-1,l]}});n.push(u);const c=bR(t,u,s);n.push(c);const h=BA({inputs:{x:c},backend:t,attrs:{shape:o}});return n.forEach(e=>t.disposeIntermediateTensorInfo(e)),h}return yR(t,e,s)}const _R={kernelName:is,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o}=s;let a=r.parseAxisParam(o,i.shape);const l=d.getAxesPermutation(a,i.shape.length);let u=i;const c=[];null!=l&&(u=XA({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=d.getInnerMostAxes(a.length,u.shape.length)),d.assertAxesAreInnerMostDims("argMax",[a[0]],u.shape.length);const h=vR(n,u,a[0],"max");return c.forEach(t=>n.disposeIntermediateTensorInfo(t)),h}},wR={kernelName:os,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o}=s;let a=r.parseAxisParam(o,i.shape);const l=d.getAxesPermutation(a,i.shape.length);let u=i;const c=[];null!=l&&(u=XA({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=d.getInnerMostAxes(a.length,u.shape.length)),d.assertAxesAreInnerMostDims("argMin",[a[0]],u.shape.length);const h=vR(n,u,a[0],"min");return c.forEach(t=>n.disposeIntermediateTensorInfo(t)),h}},xR=FA({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),kR={kernelName:as,backendName:"webgl",kernelFunc:xR},SR=FA({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),CR={kernelName:ls,backendName:"webgl",kernelFunc:SR},IR=FA({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),ER={kernelName:us,backendName:"webgl",kernelFunc:IR},OR=DA({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),TR={kernelName:hs,backendName:"webgl",kernelFunc:OR},NR=FA({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),AR={kernelName:cs,backendName:"webgl",kernelFunc:NR};class RR{constructor(t,e,n,r=!1,s=!1){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const i=t.filterWidth,o=t.strideHeight,a=t.strideWidth,l=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;const f="avg"===e;let m="0.0";if(f||(m="-1.0 / 1e-20"),n)return void(this.userCode=`\n        const ivec2 strides = ivec2(${o}, ${a});\n        const ivec2 pads = ivec2(${d}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${c};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?s?`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`:`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`:`wR * ${h} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let g=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(g="avgValue / count");const b=4*Math.floor(i/4),y=i%4,v=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${o}, ${a});\n      const ivec2 pads = ivec2(${d}, ${p});\n      const float initializationValue = ${m};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${t.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${m});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${c};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${t.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${b}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${v}\n          }\n\n          int xC = xCCorner + ${b};\n          if (${1===y}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${v}\n          } else if (${2===y}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${v}\n          } else if (${3===y}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${v}\n          }\n        }\n        setOutput(${g});\n      }\n    `}}class FR{constructor(t,e,n,r=!1,s=!1){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const i=t.filterWidth,o=t.strideDepth,a=t.strideHeight,l=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,h=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,f=t.effectiveFilterWidth,m=t.padInfo.front,g=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;const y="avg"===e;let v="0.0";if(y||(v="-1.0 / 1e-20"),n)return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${o}, ${a}, ${l});\n        const ivec3 pads = ivec3(${m}, ${g}, ${b});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${t.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${c}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${t.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${h}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${t.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?s?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${p} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let _=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(_="avgValue / count");const w=4*Math.floor(i/4),x=i%4,k=`\n      if (${y}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${o}, ${a}, ${l});\n      const ivec3 pads = ivec3(${m}, ${g}, ${b});\n      const float initializationValue = ${v};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${t.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${v});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${t.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${w}; wC += 4) {\n              int xC = xCCorner + wC * ${h};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${h}, ch)\n              );\n\n              ${k}\n            }\n\n            int xC = xCCorner + ${w};\n            if (${1===x}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${k}\n            } else if (${2===x}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${k}\n            } else if (${3===x}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                initializationValue\n              );\n\n              ${k}\n            }\n          }\n          setOutput(${_});\n        }\n      }\n    `}}const DR={kernelName:ds,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e;jT(i,"avgPool");const{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=s;r.assert(d.eitherStridesOrDilationsAreOne(a,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`);const c=d.computePool2DInfo(i.shape,o,a,1,l,u);if(1===c.filterWidth&&1===c.filterHeight&&r.arraysEqual(c.inShape,c.outShape))return kA({inputs:{x:i},backend:n});const h=new RR(c,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}},PR={kernelName:fs,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r,c=d.computePool3DInfo(s.shape,i,o,[1,1,1],a,l,u),h=new FR(c,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}};class $R{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.effectiveFilterHeight,n=t.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-t.padInfo.top}, ${n-1-t.padInfo.left});\n      const float avgMultiplier = float(${1/(t.filterHeight*t.filterWidth)});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e};\n            wR += ${t.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${n};\n            wC+= ${t.dilationWidth}) {\n            float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class MR{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.effectiveFilterDepth,n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${e-1-t.padInfo.front}, ${n-1-t.padInfo.top}, ${r-1-t.padInfo.left});\n      const float avgMultiplier = float(${1/(t.filterDepth*t.filterHeight*t.filterWidth)});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${e};\n            wD += ${t.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${t.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${n};\n              wR += ${t.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${r};\n                wC += ${t.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const LR={kernelName:ms,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,h=d.computePool3DInfo(o.shape,a,l,[1,1,1],u,c),p=new MR(h);return n.runWebGLProgram(p,[s],o.dtype)}},jR={kernelName:ps,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;jT([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=d.computePool2DInfo(o.shape,a,l,1,u),h=new $R(c);return n.runWebGLProgram(h,[s],o.dtype)}},zR={kernelName:gs,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;return QA({a:s,b:i,transposeA:o,transposeB:a,backend:n})}};class BR{constructor(t,e,n,r,s,i){this.outputShape=[],this.variableNames=["x","mean","variance"],d.assertAndGetBroadcastShape(t,e),d.assertAndGetBroadcastShape(t,n);let o="0.0";null!=r&&(d.assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let a="1.0";null!=s&&(d.assertAndGetBroadcastShape(t,s),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${o};\n        float scale = ${a};\n        float inv = scale * inversesqrt(variance + float(${i}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class VR{constructor(t,e,n,r,s,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],d.assertAndGetBroadcastShape(t,e),d.assertAndGetBroadcastShape(t,n);let o="vec4(0.0)";null!=r&&(d.assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let a="vec4(1.0)";null!=s&&(d.assertAndGetBroadcastShape(t,s),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        vec4 offset = ${o};\n        vec4 scale = ${a};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${i}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const UR={kernelName:si,backendName:"webgl",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,mean:i,variance:o,offset:a,scale:l}=t;r.assert(i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),r.assert(null==a||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),r.assert(null==l||i.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;null==u&&(u=.001);const c=[s,i,o];let h=null;null!=a&&(h=a.shape,c.push(a));let d=null;null!=l&&(d=l.shape,c.push(l));const p=qr().getBool("WEBGL_PACK_NORMALIZATION")?new VR(s.shape,i.shape,o.shape,h,d,u):new BR(s.shape,i.shape,o.shape,h,d,u);return e.runWebGLProgram(p,c,c[0].dtype)}};class WR{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const e=fN(this.rank),n=`uniform int start[${this.rank}];`,r=function(t){if(1===t)return"sourceLoc";if(t<=6)return HR.slice(0,t).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}(this.rank);let s;s=`\n        ${e} sourceLoc;\n        ${e} coords = getOutputCoords();\n        ${t.map((t,e)=>`sourceLoc.${HR[e]} = start[${e}] + coords.${HR[e]};`).join("\n")}\n      `,this.userCode=`\n      ${n}\n      void main() {\n        ${s}\n        setOutput(getSource(${r}));\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${t.length})`);return(e,n)=>{null==this.startLoc&&(this.startLoc=e.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||e.gl.uniform1iv(this.startLoc,t)}}}const HR=["x","y","z","w","u","v"];class GR{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;const e=fN(this.rank),n=iA("coords",this.rank),r=iA("sourceLoc",this.rank),s=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,i=`getChannel(getSource(${r.join()}), ${s})`,o=`\n      result.x = ${i};\n      if (++${n[this.rank-1]} < ${t[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${i};\n        --${r[this.rank-1]};\n      }\n    `,a=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${t[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${i};\n        if (++${n[this.rank-1]} < ${t[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${i};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${e}(${t.map((t,e)=>`start[${e}]`).join()});`:t.map((t,e)=>`${r[e]} = ${n[e]} + start[${e}];`).join("\n");this.userCode=`\n      uniform int start[${this.rank}];\n      void main() {\n        ${e} coords = getOutputCoords();\n        ${e} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${o}\n        ${a}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${t.length})`);return(e,n)=>{null==this.startLoc&&(this.startLoc=e.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||e.gl.uniform1iv(this.startLoc,t)}}}function qR(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{begin:o,size:a}=s,[u,c]=l.parseSliceParams(i,o,a);if(l.assertParamsValid(i,u,c),0===r.sizeFromShape(c))return n.makeTensorInfo(c,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||"string"===i.dtype){const t=n.texData.get(i.dataId),e=HN(t.values,u,c,i.shape,i.dtype);return n.makeTensorInfo(c,i.dtype,e)}const{isPacked:h}=n.texData.get(i.dataId),d=l.isSliceContinous(i.shape,u,c);if(h||!d){const t=qr().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GR(c):new WR(c),e=t.getCustomSetupFunc(u);return n.runWebGLProgram(t,[i],i.dtype,e)}return n.uploadToGPU(i.dataId),function(t,e,n,s){const i=s.texData.get(t.dataId),o=s.makeTensorInfo(n,t.dtype),a=s.texData.get(o.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=t.dtype;let u=l.computeFlatOffset(e,r.computeStrides(t.shape));i.slice&&(u+=i.slice.flatOffset),a.slice={flatOffset:u,origDataId:i.slice&&i.slice.origDataId||t.dataId};const c=s.dataRefCount.get(a.slice.origDataId)||1;return s.dataRefCount.set(a.slice.origDataId,c+1),o}(i,u,c,n)}const ZR={kernelName:mo,backendName:"webgl",kernelFunc:qR},KR={kernelName:bs,backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{blockShape:o,crops:a}=s;r.assert(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const l=o.reduce((t,e)=>t*e),u=d.getReshaped(i.shape,o,l),c=d.getPermuted(u.length,o.length),h=d.getReshapedPermuted(i.shape,o,l),p=d.getSliceBeginCoords(a,o.length),f=d.getSliceSize(h,a,o.length),m=[],g=BA({inputs:{x:i},backend:n,attrs:{shape:u}}),b=XA({inputs:{x:g},backend:n,attrs:{perm:c}}),y=BA({inputs:{x:b},backend:n,attrs:{shape:h}}),v=qR({inputs:{x:y},backend:n,attrs:{begin:p,size:f}});return m.push(g),m.push(b),m.push(y),m.forEach(t=>n.disposeIntermediateTensorInfo(t)),v}},YR={kernelName:ys,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.readSync(s.dataId),l=n.readSync(i.dataId),u=vN(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}},XR=DA({opSnippet:"return float(a != b);",cpuKernelImpl:zN,dtype:"bool"}),JR={kernelName:Bi,backendName:"webgl",kernelFunc:XR};function QR(t){const{inputs:e,backend:n}=t,{input:r}=e;return kA({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const tF={kernelName:Qi,backendName:"webgl",kernelFunc:QR},eF={kernelName:vs,backendName:"webgl",kernelFunc:function t(e){const{inputs:n,backend:s,attrs:i}=e,{x:o}=n,{dtype:a}=i;if("complex64"===a){if("complex64"===o.dtype)return kA({inputs:{x:o},backend:s});const e=Mh(o.shape),n=t({inputs:{x:o},backend:s,attrs:{dtype:"float32"}}),r=CA({inputs:{real:n,imag:e},backend:s});return e.dispose(),s.disposeIntermediateTensorInfo(n),r}if("complex64"===o.dtype){const e=QR({inputs:{input:o},backend:s}),n=t({inputs:{x:e},backend:s,attrs:{dtype:a}});return s.disposeIntermediateTensorInfo(e),n}if(!r.hasEncodingLoss(o.dtype,a)){const t=kA({inputs:{x:o},backend:s});return{dataId:t.dataId,shape:t.shape,dtype:a}}if("int32"===a)return function(t,e){const n=new dA(t.shape,"return float(int(x));"),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,s);if("bool"===a){const t=s.makeTensorInfo([],"bool",r.getTypedArrayFromDType("bool",1)),e=XR({inputs:{a:o,b:t},backend:s});return s.disposeIntermediateTensorInfo(t),e}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${a}`)}},nF="return ceil(x);",rF=FA({opSnippet:nF,packedOpSnippet:nF,cpuKernelImpl:wN}),sF={kernelName:_s,backendName:"webgl",kernelFunc:rF};class iF{constructor(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}getCustomSetupFunc(t,e){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,t),n.gl.uniform1f(this.maxLoc,e)}}}class oF{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}getCustomSetupFunc(t,e){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,t),n.gl.uniform1f(this.maxLoc,e)}}}const aF={kernelName:ws,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:o}=r;let a;a=qr().getBool("WEBGL_PACK_CLIP")?new oF(s.shape):new iF(s.shape);const l=a.getCustomSetupFunc(i,o);return n.runWebGLProgram(a,[s],s.dtype,l)}};class lF{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function uF(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}const cF={kernelName:ks,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new lF(r.shape),o=[uF(r,s.complexTensorInfos.real),uF(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}};class hF{constructor(t){this.outputShape=[],this.outputShape=d.computeOutShape(t,1),this.variableNames=t.map((t,e)=>`T${e}`);const e=new Array(t.length-1);e[0]=t[0][1];for(let r=1;r<e.length;r++)e[r]=e[r-1]+t[r][1];const n=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let r=1;r<e.length;r++)n.push(`else if (yC < ${e[r]}) setOutput(getT${r}(yR, yC-${e[r-1]}));`);n.push(`else setOutput(getT${e.length}(yR, yC-${e[e.length-1]}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class dF{constructor(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=d.computeOutShape(t,e);const n=this.outputShape,r=n.length,s=fN(r),i=iA("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map((t,e)=>`T${e}`);const a=new Array(t.length-1);a[0]=t[0][e];for(let d=1;d<a.length;d++)a[d]=a[d-1]+t[d][e];const l=o[e],u=o.slice(-2),c=o.join();let h=`if (${l} < ${a[0]}) {\n        return getChannel(\n            getT0(${c}), vec2(${u.join()}));\n        }`;for(let d=1;d<a.length;d++){const t=a[d-1];h+=`\n        if (${l} < ${a[d]}  && ${l} >= ${a[d-1]}) {\n          return getChannel(\n            getT${d}(${pF(o,l,t)}),\n            vec2(${pF(u,l,t)}));\n        }`}const p=a[a.length-1];h+=`\n        return getChannel(\n          getT${a.length}(${pF(o,l,p)}),\n          vec2(${pF(u,l,p)}));`,this.userCode=`\n      float getValue(${o.map(t=>"int "+t)}) {\n        ${h}\n      }\n\n      void main() {\n        ${s} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${i}), 0., 0., 0.);\n\n        ${i[r-1]} = ${i[r-1]} + 1;\n        if (${i[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${i});\n        }\n\n        ${i[r-2]} = ${i[r-2]} + 1;\n        if (${i[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${i});\n        }\n\n        ${i[r-1]} = ${i[r-1]} - 1;\n        if (${i[r-2]} < ${n[r-2]} &&\n            ${i[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${i});\n        }\n        setOutput(result);\n      }\n    `}}function pF(t,e,n){const r=t.indexOf(e);return t.map((t,e)=>e===r?`${t} - ${n}`:t).join()}function fF(t){const{inputs:e,backend:n}=t,{input:r}=e;return kA({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const mF={kernelName:hi,backendName:"webgl",kernelFunc:fF};function gF(t,e,n){const s=t[0].dtype;if("complex64"===s){const r=t.map(t=>QR({inputs:{input:t},backend:n})),s=t.map(t=>fF({inputs:{input:t},backend:n})),i=gF(r,e,n),o=gF(s,e,n),a=CA({inputs:{real:i,imag:o},backend:n});return r.forEach(t=>n.disposeIntermediateTensorInfo(t)),s.forEach(t=>n.disposeIntermediateTensorInfo(t)),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),a}let i=n.shouldExecuteOnCPU(t);if("string"===s&&(i=!0),i){const i=t.map(t=>{const s=r.sizeFromShape(t.shape.slice(e));return BA({inputs:{x:t},backend:n,attrs:{shape:[-1,s]}})}),o=i.map(t=>({vals:n.readSync(t.dataId),shape:t.shape})),a=d.computeOutShape(i.map(t=>t.shape),1),l=xN(o,a,s,1===i[0].shape[0]),u=d.computeOutShape(t.map(t=>t.shape),e),c=n.makeTensorInfo(u,s,l);return i.forEach(t=>n.disposeIntermediateTensorInfo(t)),c}if(t.length>qr().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const r=Math.floor(t.length/2),s=gF(t.slice(0,r),e,n),i=gF(t.slice(r),e,n),o=gF([s,i],e,n);return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),o}if(qr().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].shape.length>1){const r=new dF(t.map(t=>t.shape),e);return n.runWebGLProgram(r,t,s)}const{tensors2D:o,outShape:a}=function(t,e,n){const s=d.computeOutShape(t.map(t=>t.shape),e);return{tensors2D:t.map(t=>BA({inputs:{x:t},attrs:{shape:[-1,r.sizeFromShape(t.shape.slice(e))]},backend:n})),outShape:s}}(t,e,n),l=new hF(o.map(t=>t.shape)),u=n.runWebGLProgram(l,o,s);o.forEach(t=>n.disposeIntermediateTensorInfo(t));const c=BA({inputs:{x:u},attrs:{shape:a},backend:n});return n.disposeIntermediateTensorInfo(u),c}function bF(t){const{inputs:e,backend:n,attrs:s}=t,{axis:i}=s,o=r.parseAxisParam(i,e[0].shape)[0],a=d.computeOutShape(e.map(t=>t.shape),o);if(0===r.sizeFromShape(a))return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(t=>r.sizeFromShape(t.shape)>0);if(1===l.length)return kA({inputs:{x:l[0]},backend:n});const u=l.map(t=>t.shape);return d.assertParamsConsistent(u,o),gF(l,o,n)}const yF={kernelName:Ss,backendName:"webgl",kernelFunc:bF};class vF{constructor(t,e=!1,n=null,r=!1,s=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,l=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),f=t.inChannels%4,m="channelsLast"===t.dataFormat,g=m?1:2,b=m?2:3,y=m?3:1;let v="",_="";n&&(v=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:s?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,_="result = activation(result);");const w=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${v}\n\n      const ivec2 strides = ivec2(${a}, ${l});\n      const ivec2 pads = ivec2(${i}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${y}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${b}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${h}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${t.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${t.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${p}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${p}) *\n                    getW(wR, wC, ${p}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${p}, xR, xC) *\n                    getW(wR, wC, ${p}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2),\n                getW(wR, wC, ${p} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1),\n                  getX(batch, xR, xC, ${p} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC),\n                  getX(batch, ${p} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${w}\n        ${_}\n        setOutput(result);\n      }\n    `}}class _F{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,s=t.strideDepth,i=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,l=t.dilationHeight,u=t.dilationWidth,c=t.filterDepth,h=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),f=t.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${s}, ${i}, ${o});\n      const ivec3 pads = ivec3(${e}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${a};\n\n          if (xF < 0 || xF >= ${t.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class wF{constructor(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;const{filterWidth:r,inChannels:s,strideWidth:i,strideHeight:o,padInfo:a,outWidth:l,dilationWidth:u,dilationHeight:c,dataFormat:h}=n,{left:d,top:p}=a,f=s*r,m=BT(),g="channelsLast"===h,b=g?0:1,y=g?1:2;let v="";for(let _=0;_<=1;_++)for(let n=0;n<=1;n++)v+=`\n          blockIndex = rc.y + ${n};\n          pos = rc.x + ${_};\n\n          if(blockIndex < ${t[1]} && pos < ${t[0]}) {\n            offsetY = int(blockIndex / (${l})) * ${o} - ${p};\n            d0 = offsetY + ${c} * (pos / ${f});\n\n            if(d0 < ${e[b]} && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ${l}.) * ${i}. - ${d}.);\n              d1 = offsetX + ${u} * (int(mod(float(pos), ${f}.) / ${s}.));\n\n              if(d1 < ${e[y]} && d1 >= 0) {\n\n                ch = int(mod(float(pos), ${s}.));\n\n                if (${g}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*_+n}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*_+n}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${v}\n\n        ${m.output} = result;\n      }\n    `}}function xF({x:t,filter:e,convInfo:n,backend:s,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const u=t.shape,c=s.texData.get(t.dataId),h="channelsLast"===n.dataFormat;let d;const p=[],f=u[2]%2!=0&&!!c.isPacked;if((1!=u[0]*u[1]*u[2]&&1!==n.outChannels||!(n.inChannels>1e3))&&qr().getBool("WEBGL_LAZILY_UNPACK")&&qr().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&f){const f={dataId:t.dataId,shape:[1,h?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),n.inChannels],dtype:t.dtype},m=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,r.assert(FT(c.shape,f.shape),()=>`packed reshape ${c.shape} to ${f.shape} isn't free`);const g=BA({inputs:{x:e},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}});p.push(g);const b=QA({a:f,b:g,backend:s,transposeA:!1,transposeB:!1,bias:i,activation:l,preluActivationWeights:o,leakyreluAlpha:a}),y=s.texData.get(b.dataId);r.assert(y.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=m,y.shape=n.outShape,d=kA({inputs:{x:b},backend:s}),d.shape=n.outShape,p.push(b)}else{const r=BA({inputs:{x:t},backend:s,attrs:{shape:[1,h?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],n.inChannels]}}),c=BA({inputs:{x:e},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}}),f=QA({a:r,b:c,transposeA:!1,transposeB:!1,backend:s,bias:i,activation:l,preluActivationWeights:o,leakyreluAlpha:a});d=BA({inputs:{x:f},backend:s,attrs:{shape:n.outShape}}),p.push(r),p.push(c),p.push(f)}for(const r of p)s.disposeIntermediateTensorInfo(r);return d}function kF({x:t,filter:e,convInfo:n,backend:s,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const{filterWidth:u,filterHeight:c,inChannels:h,outWidth:d,outHeight:p,dataFormat:f}=n,m="channelsLast"===f,g=u*c*h,b=p*d,y=[g,b],v=[],_=BA({inputs:{x:t},backend:s,attrs:{shape:t.shape.slice(1)}}),w=BA({inputs:{x:e},backend:s,attrs:{shape:[1,g,r.sizeFromShape(e.shape)/g]}});v.push(_),v.push(w);const x=new wF(y,_.shape,n),k=s.runWebGLProgram(x,[_],"float32"),S=BA({inputs:{x:k},backend:s,attrs:{shape:[1,y[0],y[1]]}});v.push(k),v.push(S);const C=null!=i,I=null!=o,E="leakyrelu"===l,O=l?PA(l,!0):null,T=new $A(S.shape,w.shape,[1,b,n.outChannels],!0,!1,C,O,I,E),N=[S,w];if(i&&N.push(i),I&&N.push(o),E){const t=s.makeTensorInfo([],"float32",r.createScalarValue(a,"float32"));N.push(t),v.push(t)}const A=s.runWebGLProgram(T,N,"float32"),R=BA({inputs:{x:A},backend:s,attrs:{shape:m?[1,p,d,n.outChannels]:[1,n.outChannels,p,d]}});v.push(A);for(const r of v)s.disposeIntermediateTensorInfo(r);return R}const SF={kernelName:Cs,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r,h=d.convertConv2DDataFormat(l),p=d.computeConv2DInfo(s.shape,i.shape,o,u,a,c,!1,h);let f;if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(qr().getBool("WEBGL_CONV_IM2COL")&&1===s.shape[0])f=kF({x:s,filter:i,convInfo:p,backend:n});else{const t=new vF(p);f=n.runWebGLProgram(t,[s,i],"float32")}else f=xF({x:s,filter:i,convInfo:p,backend:n});const m=BA({inputs:{x:f},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(f),m}};class CF{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yR = 0; yR < ${t.outHeight}; yR++) {\n            int xR = wR + yR * ${t.strideHeight} - ${t.padInfo.top};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${t.outWidth}; yC++) {\n              int xC = wC + yC * ${t.strideWidth} - ${t.padInfo.left};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              if (${"channelsLast"===t.dataFormat}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class IF{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r="channelsLast"===t.dataFormat;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-t.padInfo.top}, ${n-1-t.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${r?3:1}];\n\n        ivec2 dyCorner = ivec2(coords[${r?1:2}], coords[${r?2:3}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {\n\n              if (${r}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class EF{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yF = 0; yF < ${t.outDepth}; yF++) {\n            int xF = wF + yF * ${t.strideDepth} - ${t.padInfo.front};\n\n            if (xF < 0 || xF >= ${t.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${t.outHeight}; yR++) {\n              int xR = wR + yR * ${t.strideHeight} - ${t.padInfo.top};\n\n              if (xR < 0 || xR >= ${t.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${t.outWidth}; yC++) {\n                int xC = wC + yC * ${t.strideWidth} - ${t.padInfo.left};\n\n                if (xC < 0 || xC >= ${t.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class OF{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterDepth,n=t.filterHeight,r=t.filterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${e-1-t.padInfo.front}, ${n-1-t.padInfo.top}, ${r-1-t.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${e}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${t.strideDepth}.0;\n\n          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${e} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const TF={kernelName:Is,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,h=d.convertConv2DDataFormat(l),p=d.computeConv2DInfo(s.shape,c,o,1,a,u,!1,h),f=new CF(p);return n.runWebGLProgram(f,[s,i],"float32")}},NF={kernelName:Es,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r,h=d.convertConv2DDataFormat(u),p=d.computeConv2DInfo(o,i.shape,a,1,l,c,!1,h),f=new IF(p);return n.runWebGLProgram(f,[s,i],"float32")}},AF={kernelName:Os,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,u=d.computeConv3DInfo(s.shape,i.shape,o,l,a),c=new _F(u);return n.runWebGLProgram(c,[s,i],"float32")}},RF={kernelName:Ts,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r,u=d.computeConv3DInfo(s.shape,l,o,1,a),c=new EF(u);return n.runWebGLProgram(c,[s,i],"float32")}},FF={kernelName:Ns,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r,u=d.computeConv3DInfo(l,i.shape,a,1,o),c=new OF(u);return n.runWebGLProgram(c,[s,i],"float32")}},DF=FA({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),PF={kernelName:As,backendName:"webgl",kernelFunc:DF},$F=FA({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),MF={kernelName:Rs,backendName:"webgl",kernelFunc:$F};class LF{constructor(t,e,n,r,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,o,a,l]=t,[u]=e,[c,h]=n;this.outputShape=[u,c,h,l];const d="bilinear"===r?1:0,[p,f]=[o-1+".0",a-1+".0"],[m,g,b]=c>1?[""+(o-1)/(c-1),"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[y,v,_]=h>1?[""+(a-1)/(h-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${y});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${i}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${v};\n\n        float in_y = ${b};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${s}));\n          return;\n        }\n        float in_x = ${_};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${s}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const jF={kernelName:Ds,backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:u}=r,c=new LF(s.shape,i.shape,a,l,u);return n.runWebGLProgram(c,[s,i,o],"float32")}};class zF{constructor(t,e,n){this.variableNames=["x"],this.outputShape=t;const r=t.length,s=e?"0.0":`getX(${BF(r,"coords")})`,i=t[t.length-1];let o="",a="";e?(o=n?"end != "+(i-1):"end != 0",a=n?"end + 1":"end - 1"):(o=n?`end + pow2 < ${i}`:"end >= pow2",a=n?"end + pow2":"end - pow2"),this.userCode=`\n      uniform float index;\n      void main() {\n        ${fN(r)} coords = getOutputCoords();\n        int end = ${VF(r,"coords")};\n        float val = ${s};\n        int pow2 = int(pow(2.0, index));\n        if (${o}) {\n          int idx = ${a};\n          ${VF(r,"coords")} = idx;\n          val += getX(${BF(r,"coords")});\n        }\n        setOutput(val);\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.index&&(this.index=e.getUniformLocation(n,"index")),e.gl.uniform1f(this.index,t)}}}function BF(t,e){if(1===t)return`${e}`;if(2===t)return`${e}.x, ${e}.y`;if(3===t)return`${e}.x, ${e}.y, ${e}.z`;if(4===t)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw Error(`Cumulative sum for rank ${t} is not yet supported`)}function VF(t,e){if(1===t)return`${e}`;if(2===t)return`${e}.y`;if(3===t)return`${e}.z`;if(4===t)return`${e}.w`;throw Error(`Cumulative sum for rank ${t} is not yet supported`)}const UF={kernelName:Fs,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r,l=s.shape.length,u=d.getAxesPermutation([i],l);let c=s;null!=u&&(c=XA({inputs:{x:s},backend:n,attrs:{perm:u}}));const h=d.getInnerMostAxes(1,l)[0];if(h!==l-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${s.shape.length-1} but got axis=${i}`);const p=c.shape[h];let f=kA({inputs:{x:c},backend:n});for(let d=0;d<=Math.ceil(Math.log2(p))-1;d++){const t=new zF(c.shape,!1,a),e=t.getCustomSetupFunc(d),r=f;f=n.runWebGLProgram(t,[f],f.dtype,e),n.disposeIntermediateTensorInfo(r)}if(o){const t=new zF(c.shape,o,a),e=f;f=n.runWebGLProgram(t,[f],f.dtype),n.disposeIntermediateTensorInfo(e)}if(null!=u){const t=XA({inputs:{x:f},backend:n,attrs:{perm:d.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(c),t}return f}},WF={kernelName:Ps,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(1===s.shape.length){const t=n.readSync(s.dataId),e=n.readSync(i.dataId),r=vN(t,e,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,r)}if(2===s.shape.length){const t=n.bufferSync(s),e=n.bufferSync(i),r=_N(t,e,o,a);return n.makeTensorInfo(r.shape,i.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}};class HF{constructor(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${e};\n      int offset_h = imod(h, ${e});\n      int in_w = w / ${e};\n      int offset_w = imod(w, ${e});\n      int offset_d = (offset_h * ${e} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const GF={kernelName:$s,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{blockSize:o,dataFormat:a}=s;r.assert(o>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${o}`);const l=i.shape[0],u=("NHWC"===a?i.shape[1]:i.shape[2])*o,c=("NHWC"===a?i.shape[2]:i.shape[3])*o,h=("NHWC"===a?i.shape[3]:i.shape[1])/(o*o),d=new HF("NHWC"===a?[l,u,c,h]:[l,h,u,c],o,a);return n.runWebGLProgram(d,[i],i.dtype)}};class qF{constructor(t,e=!1,n=null,r=!1,s=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.inHeight,o=t.inWidth,a=t.padInfo.top,l=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,h=t.dilationHeight,d=t.dilationWidth,p=t.filterHeight,f=t.filterWidth,m=t.outChannels/t.inChannels;let g="",b="";n&&(g=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:s?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,b="result = activation(result);");const y=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${g}\n\n      const ivec2 strides = ivec2(${u}, ${c});\n      const ivec2 pads = ivec2(${a}, ${l});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${m};\n        int q = d2 - d1 * ${m};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${p}; wR++) {\n          int xR = xRCorner + wR * ${h};\n\n          if (xR < 0 || xR >= ${i}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${f}; wC++) {\n            int xC = xCCorner + wC * ${d};\n\n            if (xC < 0 || xC >= ${o}) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${y}\n        ${b}\n        setOutput(result);\n      }\n    `}}class ZF{constructor(t,e=!1,n=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;const o=t.outChannels/t.inChannels,a=t.inHeight,l=t.inWidth,u=t.padInfo.top,c=t.padInfo.left,h=t.strideHeight,d=t.strideWidth,p=t.dilationHeight,f=t.dilationWidth,m=t.filterHeight,g=t.filterWidth,b=g;let y="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let r=0;r<g;r++)y+=`\n          vec4 xTexelC${2*r};\n          int xTexelC${2*r}Ready;\n          vec4 xC${r};`;for(let x=0;x<m;x++){for(let t=0;t<g;t++)y+=`\n          xTexelC${2*t} = vec4(0.0);\n          xTexelC${2*t}Ready = 0;\n          xC${t} = vec4(0.0);`;y+=`\n        xR = xRCorner + ${x*p};\n        if (xR >=0 && xR < ${a}) {\n      `;for(let t=0;t<(b+1)/2;t++){const e=2*t,n=e*f;if(y+=`\n          xC = xCCorner + ${n};\n          `,1===d){if(e<g&&(c%2==1?(y+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < ${l} && xTexelC${n}Ready == 0) {\n                  xTexelC${n} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= ${l}) {\n                    xTexelC${n}.zw = vec2(0.0);\n                  }\n                  xTexelC${n}Ready = 1;\n                }\n              `,y+=1===f&&n>0?`\n                xC${e} = vec4(xTexelC${n-2}.zw, xTexelC${n}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < ${l}) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= ${l}) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${e} = vec4(previous.zw, xTexelC${n}.xy);\n                  } else {\n                    xC${e} = vec4(0.0, 0.0, xTexelC${n}.xy);\n                  }\n                  `):y+=`\n                if (xC >= 0 && xC < ${l} && xTexelC${n}Ready == 0) {\n                  xTexelC${n} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= ${l}) {\n                    xTexelC${n}.zw = vec2(0.0);\n                  }\n                  xTexelC${n}Ready = 1;\n                }\n\n                xC${e} = xTexelC${n};\n                `,n+1<g)){const t=c%2==0?r.nearestLargerEven(f):f;f%2==0&&c%2==1||f%2!=0&&c%2!=1?(y+=`\n                  xCOffset = xC + ${c%2} + ${t};\n\n                  if (xCOffset >= 0 && xCOffset < ${l} && xTexelC${n+2}Ready == 0) {\n                    xTexelC${n+2} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= ${l}) {\n                      xTexelC${n+2}.zw = vec2(0.0);\n                    }\n                    xTexelC${n+2}Ready = 1;\n                  }\n                  `,f>1&&(y+=`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < ${l} && xTexelC${n}Ready == 0) {\n                      xTexelC${n} = getX(batch, xR, xCOffset, d1);\n                      xTexelC${n}Ready = 1;\n                    }\n                    `),y+=`\n                  xC${e+1} = vec4(xTexelC${n}.zw, xTexelC${n+2}.xy);\n                  `):y+=1===t?`\n                    xC${e+1} = xTexelC${n};\n                    `:`\n                    xCOffset = xC + ${t};\n\n                    if (xCOffset >= 0 && xCOffset < ${l} && xTexelC${n+2}Ready == 0) {\n                      xTexelC${n+2} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= ${l}) {\n                        xTexelC${n+2}.zw = vec2(0.0);\n                      }\n                      xTexelC${n+2}Ready = 1;\n                    }\n\n                    xC${e+1} = xTexelC${n+2};\n                    `}}else n<g&&(c%2==1?(y+=`\n                xCOffset = xC + 1 - ${d};\n                if(xCOffset >= 0 && xCOffset < ${l} && xTexelC${n}Ready == 0) {\n                  xTexelC${n} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= ${l}) {\n                    xTexelC${n}.zw = vec2(0.0);\n                  }\n                  xTexelC${n}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ${l} && xTexelC${n+2}Ready == 0) {\n                  xTexelC${n+2} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= ${l}) {\n                    xTexelC${n+2}.zw = vec2(0.0);\n                  }\n                  xTexelC${n+2}Ready = 1;\n                }\n\n                xC${e} = vec4(xTexelC${n}.zw, xTexelC${n+2}.zw);\n              `,n+1<g&&(y+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + ${d};\n                  if(xCOffset >= 0 && xCOffset < ${l}) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${e+1} = vec4(xTexelC${n+2}.xy, final.xy);\n                `)):(y+=`\n                if(xC >= 0 && xC < ${l} && xTexelC${n}Ready == 0) {\n                  xTexelC${n} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= ${l}) {\n                    xTexelC${n}.zw = vec2(0.0);\n                  }\n                  xTexelC${n}Ready = 1;\n                }\n\n                xCOffset = xC + ${d};\n                if(xCOffset >= 0 && xCOffset < ${l} && xTexelC${n+2}Ready == 0) {\n                  xTexelC${n+2} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= ${l}) {\n                    xTexelC${n+2}.zw = vec2(0.);\n                  }\n                  xTexelC${n+2}Ready = 1;\n                }\n\n                xC${e} = vec4(\n                  xTexelC${n}.xy, xTexelC${n+2}.xy);\n              `,n+1<g&&(y+=`\n                  xC${e+1} = vec4(xTexelC${n}.zw, xTexelC${n+2}.zw);\n                `)));e<g&&(y+=`\n            wTexel = getW(${x}, ${n}, d1, q);\n            dotProd += xC${e} * vec4(wTexel.xz, wTexel.xz);\n          `,n+1<g&&(y+=`\n              wTexel = getW(${x}, ${n+1}, d1, q);\n              dotProd += xC${e+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}y+="\n        }\n      "}let v="",_="";n&&(v=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,_="result = activation(result);");const w=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${v}\n\n      const ivec2 strides = ivec2(${h}, ${d});\n      const ivec2 pads = ivec2(${u}, ${c});\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${o};\n        int q = d2 - d1 * ${o};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${y}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${w}\n        ${_}\n        setOutput(result);\n      }\n    `}}const KF={kernelName:Ms,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i,filter:o}=e,{strides:a,pad:l,dilations:u,dimRoundingMode:c}=s;let h=u;null==h&&(h=[1,1]),r.assert(d.eitherStridesOrDilationsAreOne(a,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${h}'`);const p=d.computeConv2DInfo(i.shape,o.shape,a,h,l,c,!0);let f;return f=qr().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels==1?new ZF(p):new qF(p),n.runWebGLProgram(f,[i,o],"float32")}};class YF{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${t.outChannels/t.inChannels} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yR = 0; yR < ${t.outHeight}; yR++) {\n            int xR = wR + yR * ${t.strideHeight} - ${t.padInfo.top};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${t.outWidth}; yC++) {\n              int xC = wC + yC * ${t.strideWidth} - ${t.padInfo.left};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class XF{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.outChannels/t.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-t.padInfo.top}, ${n-1-t.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${r}; dm++) {\n              int d2 = d1 * ${r} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const JF={kernelName:Ls,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r,h=d.computeConv2DInfo(s.shape,c,o,a,l,u,!0),p=new YF(h);return n.runWebGLProgram(p,[s,i],"float32")}},QF={kernelName:js,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r,h=d.computeConv2DInfo(c,i.shape,o,a,l,u,!0),p=new XF(h);return n.runWebGLProgram(p,[s,i],"float32")}};class tD{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const eD={kernelName:zs,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{x:s}=e,i=[...s.shape,...s.shape],o=r.sizeFromShape(s.shape),a=BA({inputs:{x:s},backend:n,attrs:{shape:[o]}}),l=new tD(o),u=n.runWebGLProgram(l,[a],a.dtype),c=BA({inputs:{x:u},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),c}};class nD{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:e,inWidth:n,padInfo:r,strideHeight:s,strideWidth:i,filterHeight:o,filterWidth:a,dilationHeight:l,dilationWidth:u}=t,{top:c,left:h}=r;this.userCode=`\n      const ivec2 strides = ivec2(${s}, ${i});\n      const ivec2 pads = ivec2(${c}, ${h});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${o}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${e}) {\n            for (int w = 0; w < ${a}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const rD={kernelName:Bs,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,u=d.computeDilation2DInfo(s.shape,i.shape,o,a,"NHWC",l);let c;const h=new nD(u);c=n.runWebGLProgram(h,[s,i],"float32");const p=BA({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),p}},sD={kernelName:Hs,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{equation:i}=s,o=e,{allDims:a,summedDims:l,idDims:u}=d.decodeEinsumEquation(i,o.length);d.checkEinsumDimSizes(a.length,u,o);const{path:c,steps:h}=d.getEinsumComputePath(l,u),p=h.length;let f=null,m=a.length;const g=[];for(let b=0;b<p;++b){for(const t of h[b]){const{permutationIndices:e,expandDims:s}=d.getEinsumPermutation(m,u[t]);let i;d.isIdentityPermutation(e)?i=o[t]:(i=XA({inputs:{x:o[t]},backend:n,attrs:{perm:e}}),g.push(i));const a=i.shape.slice();for(let t=0;t<s.length;++t)a.splice(s[t],0,1);r.arraysEqual(i.shape,a)||(i=BA({inputs:{x:i},backend:n,attrs:{shape:a}}),g.push(i)),null===f?f=i:(f=jA({inputs:{a:i,b:f},backend:n}),g.push(f))}b<p-1&&(c[b]>=0&&(f=KA({inputs:{x:f},backend:n,attrs:{axis:c[b]-(a.length-m),keepDims:!1}}),g.push(f)),m--)}for(const r of g)r!==f&&n.disposeIntermediateTensorInfo(r);return f}},iD=FA({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),oD={kernelName:Gs,backendName:"webgl",kernelFunc:iD},aD={kernelName:qs,backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=qr().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xA("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,s.shape):new wA("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)}},lD=DA({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:kN}),uD={kernelName:Ks,backendName:"webgl",kernelFunc:lD},cD=FA({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${d.ERF_P};\n  float a1 = ${d.ERF_A1};\n  float a2 = ${d.ERF_A2};\n  float a3 = ${d.ERF_A3};\n  float a4 = ${d.ERF_A4};\n  float a5 = ${d.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),hD={kernelName:Zs,backendName:"webgl",kernelFunc:cD},dD="return exp(x);",pD=FA({opSnippet:dD,packedOpSnippet:dD,cpuKernelImpl:SN}),fD={kernelName:Ys,backendName:"webgl",kernelFunc:pD};function mD(t){const{inputs:e,attrs:n,backend:s}=t,{dim:i}=n,{input:o}=e,a=o.shape.length,l=o.shape.slice();let u=i;return i<0&&(r.assert(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),u=a+i+1),l.splice(u,0,1),BA({inputs:{x:o},backend:s,attrs:{shape:l}})}const gD={kernelName:Xs,backendName:"webgl",kernelFunc:mD},bD="return exp(x) - 1.0;",yD=FA({opSnippet:bD,packedOpSnippet:bD,cpuKernelImpl:CN}),vD={kernelName:Js,backendName:"webgl",kernelFunc:yD};class _D{constructor(t,e,n){this.variableNames=["real","imag"];const r=e[1];this.outputShape=e;const s=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=n?`${r}.0`:"1.0";let o;if("real"===t)o="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);o="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${s};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${o}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${i};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function wD(t,e,n){const s=n.texData.get(t.dataId),i=r.sizeFromShape(t.shape),o=t.shape[t.shape.length-1],a=BA({inputs:{x:t},backend:n,attrs:{shape:[i/o,o]}}),l=a.shape,u=new _D("real",l,e),c=new _D("imag",l,e),h=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:l},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:l}],d=n.runWebGLProgram(u,h,"float32"),p=n.runWebGLProgram(c,h,"float32"),f=CA({inputs:{real:d,imag:p},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p);const m=BA({inputs:{x:f},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(f),m}const xD={kernelName:Qs,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{input:r}=e;return wD(r,!1,n)}};class kD{constructor(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}getCustomSetupFunc(t){return(e,n)=>{null==this.valueLoc&&(this.valueLoc=e.getUniformLocationNoThrow(n,"value")),e.gl.uniform1f(this.valueLoc,t)}}}function SD(t){const{backend:e,attrs:n}=t,{shape:s,value:i}=n;let{dtype:o}=n;if(o=o||r.inferDtype(i),"string"===o){const t=r.getArrayFromDType(o,r.sizeFromShape(s));return t.fill(i),e.makeTensorInfo(s,o,t)}{const t=new kD(s,i),n=t.getCustomSetupFunc(i);return e.runWebGLProgram(t,[],o,n)}}const CD={kernelName:ti,backendName:"webgl",kernelFunc:SD};class ID{constructor(t){this.variableNames=["Image"],this.outputShape=[];const e=t[2];this.outputShape=t,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${e} - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${e}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const ED={kernelName:ei,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new ID(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}},OD="return floor(x);",TD=FA({opSnippet:OD,packedOpSnippet:OD,cpuKernelImpl:IN}),ND={kernelName:ni,backendName:"webgl",kernelFunc:TD},AD=DA({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),RD={kernelName:ri,backendName:"webgl",kernelFunc:AD};class FD{constructor(t){this.variableNames=["A"];const e=BT(),[n,r]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${e.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class DD{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const e=BT(),[n,r]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${e.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${e.output} = result;\n      }\n    `}}const PD={kernelName:Ko,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,o="undefined"!=typeof HTMLVideoElement&&s instanceof HTMLVideoElement,a="undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement,[l,u]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],c=[u,l],h=[u,l,i];(a||o)&&(null==$D&&($D=document.createElement("canvas").getContext("2d")),$D.canvas.width=l,$D.canvas.height=u,$D.drawImage(s,0,0,l,u),s=$D.canvas);const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=pT.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),s);const p=qr().getBool("WEBGL_PACK")?new DD(h):new FD(h),f=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),f}};let $D;const MD={kernelName:Jo,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i,filter:o,bias:a,preluActivationWeights:l}=e,{strides:u,pad:c,dataFormat:h,dilations:p,dimRoundingMode:f,activation:m,leakyreluAlpha:g}=s,b=d.convertConv2DDataFormat(h),y=d.computeConv2DInfo(i.shape,o.shape,u,p,c,f,!1,b);let v;const _=[];if(1!==y.filterHeight||1!==y.filterWidth||1!==y.dilationHeight||1!==y.dilationWidth||1!==y.strideHeight||1!==y.strideWidth||"SAME"!==y.padInfo.type&&"VALID"!==y.padInfo.type)if(qr().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])v=kF({x:i,filter:o,convInfo:y,backend:n,bias:a,activation:m,preluActivationWeights:l,leakyreluAlpha:g});else{const t=null!=a,e=null!=l,s="leakyrelu"===m,u=m?PA(m,!1):null,c=new vF(y,t,u,e,s),h=[i,o];if(a&&h.push(a),l&&h.push(l),s){const t=n.makeTensorInfo([],"float32",r.createScalarValue(g,"float32"));h.push(t),_.push(t)}v=n.runWebGLProgram(c,h,"float32")}else v=xF({x:i,filter:o,convInfo:y,backend:n,bias:a,activation:m,preluActivationWeights:l,leakyreluAlpha:g});const w=BA({inputs:{x:v},backend:n,attrs:{shape:y.outShape}});return _.push(v),_.forEach(t=>n.disposeIntermediateTensorInfo(t)),w}},LD={kernelName:Qo,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i,filter:o,bias:a,preluActivationWeights:l}=e,{strides:u,pad:c,dilations:h,dimRoundingMode:p,activation:f,leakyreluAlpha:m}=s,g=[];let b=h;null==b&&(b=[1,1]),r.assert(d.eitherStridesOrDilationsAreOne(u,b),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${b}'`);const y=d.computeConv2DInfo(i.shape,o.shape,u,b,c,p,!0),v=qr().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels==1,_=f?PA(f,v):null,w=[i,o],x=null!=a,k=null!=l,S="leakyrelu"===f;if(x&&w.push(a),k&&w.push(l),S){const t=n.makeTensorInfo([],"float32",r.createScalarValue(m,"float32"));w.push(t),g.push(t)}let C;C=v?new ZF(y,x,_,k,S):new qF(y,x,_,k,S);const I=n.runWebGLProgram(C,w,"float32");return g.forEach(t=>n.disposeIntermediateTensorInfo(t)),I}};class jD{constructor(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;const r=fN(e.length),s=fN(n.length);this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${s} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${this.sliceDim>1?"strides[j]":"strides"};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}const zD={kernelName:oi,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{params:s,indices:i}=e,o=i.shape,a=o[o.length-1],l=r.sizeFromShape(s.shape),[u,c,h,p]=d.prepareAndValidate(s,i),f=BA({inputs:{x:i},backend:n,attrs:{shape:[c,a]}}),m=BA({inputs:{x:s},backend:n,attrs:{shape:[r.sizeFromShape(s.shape)/h,h]}});if(n.shouldExecuteOnCPU([s,i])||"string"===s.dtype){const t=n.readSync(i.dataId),e=n.bufferSync(s),r=EN(t,e,s.dtype,c,a,h,p,s.shape,l);return n.makeTensorInfo(u,s.dtype,r.values)}const g=new jD(a,p,[c,h]),b=n.runWebGLProgram(g,[m,f],m.dtype),y=BA({inputs:{x:b},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),y}};class BD{constructor(t,e){this.variableNames=["A","indices"],this.outputShape=e,this.rank=e.length;const n=fN(this.rank),r=function(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)r.push(2===s?"int(getIndices(resRC.x, resRC.z))":`${n[s]}`);return r.join()}(t);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        setOutput(getA(${r}));\n      }\n    `}}const VD={kernelName:ii,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i,indices:o}=e,{axis:a,batchDims:l}=s,u=r.parseAxisParam(a,i.shape)[0],c=d.segment_util.collectGatherOpShapeInfo(i,o,u,l),h=r.sizeFromShape(o.shape),p=[],f=BA({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),m=BA({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,h/c.batchSize]}});p.push(f),p.push(m);const g=[c.batchSize,c.outerSize,h/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,o])||"string"===i.dtype){const t=n.bufferSync(m),e=n.bufferSync(f),r=ON(e,t,g);return p.forEach(t=>n.disposeIntermediateTensorInfo(t)),n.makeTensorInfo(c.outputShape,r.dtype,r.values)}const b=new BD(f.shape,g),y=n.runWebGLProgram(b,[f,m],f.dtype);p.push(y);const v=BA({inputs:{x:y},backend:n,attrs:{shape:c.outputShape}});return p.forEach(t=>n.disposeIntermediateTensorInfo(t)),v}},UD=DA({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:TN,dtype:"bool"}),WD={kernelName:ai,backendName:"webgl",kernelFunc:UD},HD=DA({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:NN}),GD={kernelName:li,backendName:"webgl",kernelFunc:HD},qD={kernelName:ci,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{input:r}=e;return wD(r,!0,n)}},ZD=FA({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),KD={kernelName:di,backendName:"webgl",kernelFunc:ZD},YD=FA({opSnippet:"return float(isinf(x));",dtype:"bool"}),XD={kernelName:pi,backendName:"webgl",kernelFunc:YD},JD=FA({opSnippet:"return float(isnan(x));",dtype:"bool"}),QD={kernelName:fi,backendName:"webgl",kernelFunc:JD},tP=DA({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:AN,dtype:"bool"}),eP={kernelName:gi,backendName:"webgl",kernelFunc:tP},nP=DA({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:RN,dtype:"bool"}),rP={kernelName:bi,backendName:"webgl",kernelFunc:nP},sP={kernelName:yi,backendName:"webgl",kernelFunc:function(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=FN(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}},iP=FA({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:DN}),oP={kernelName:vi,backendName:"webgl",kernelFunc:iP},aP=FA({opSnippet:"return log(1.0 + x);"}),lP={kernelName:_i,backendName:"webgl",kernelFunc:aP},uP=DA({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),cP={kernelName:wi,backendName:"webgl",kernelFunc:uP},hP=FA({opSnippet:"return float(!(x >= 1.0));"}),dP={kernelName:xi,backendName:"webgl",kernelFunc:hP},pP=DA({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),fP={kernelName:ki,backendName:"webgl",kernelFunc:pP};class mP{constructor(t,e,n,r,s){this.variableNames=["x"],this.outputShape=[];const i=e,o=t[3]-1;let a;this.outputShape=t;const l=`float(${n}) + float(${r}) * sum`;a=.5===s?`inversesqrt(${l})`:1===s?`1.0/(${l})`:`exp(log(${l}) * float(-${s}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${i}; j <= ${i}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${o}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${a};\n        setOutput(val);\n      }\n    `}}class gP{constructor(t,e,n,r,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=e,o=t[3]-1;let a;this.outputShape=t;const l=`float(${n}) + float(${r}) * sum`;a=.5===s?`inversesqrt(${l})`:1===s?`1.0/(${l})`:`exp(log(${l}) * float(-${s}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${i};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${i}; j <= ${i}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${a};\n        setOutput(result);\n      }\n    `}}const bP={kernelName:Si,backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r,u=qr().getBool("WEBGL_PACK_NORMALIZATION")?new gP(s.shape,i,o,a,l):new mP(s.shape,i,o,a,l);return n.runWebGLProgram(u,[s],s.dtype)}};class yP{constructor(t,e,n,r,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=s,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${e})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${e} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${s})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${s});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const vP={kernelName:Ci,backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r,h=new yP(s.shape,a,l,u,c);return n.runWebGLProgram(h,[s,i,o],s.dtype)}};function _P(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{reductionIndices:o,keepDims:a}=s,l=i.shape.length,u=r.parseAxisParam(o,i.shape);let c=u;const h=d.getAxesPermutation(c,l),p=null!=h,f=n.shouldExecuteOnCPU([i]);let m=i;if(p){if(f){const t=n.texData.get(m.dataId).values,e=new Array(l);for(let n=0;n<e.length;n++)e[n]=i.shape[h[n]];const r=nA(t,i.shape,i.dtype,h,e);m=n.makeTensorInfo(e,i.dtype),n.texData.get(m.dataId).values=r}else m=ZA(i,h,n);c=d.getInnerMostAxes(c.length,l)}d.assertAxesAreInnerMostDims("max",c,l);const[g,b]=d.computeOutAndReduceShapes(m.shape,c);let y,v=g;if(a&&(v=d.expandShapeToKeepDim(g,u)),f){const t=n.texData.get(m.dataId),e=PN(t.values,r.sizeFromShape(b),v,i.dtype);y=n.makeTensorInfo(v,i.dtype),n.texData.get(y.dataId).values=e}else y=function(t,e,n,s){const i=r.sizeFromShape(e),o=BA({inputs:{x:t},attrs:{shape:[r.sizeFromShape(t.shape)/i,i]},backend:s}),a=HA(o,t.dtype,"max",s),l=BA({inputs:{x:a},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(a),l}(m,b,v,n);return p&&n.disposeIntermediateTensorInfo(m),y}const wP={kernelName:Ii,backendName:"webgl",kernelFunc:_P},xP=DA({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:$N}),kP={kernelName:Ei,backendName:"webgl",kernelFunc:xP},SP={kernelName:Oi,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e;jT(i,"maxPool");const{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=s;r.assert(d.eitherStridesOrDilationsAreOne(a,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`);const c=d.computePool2DInfo(i.shape,o,a,1,l,u);if(1===c.filterWidth&&1===c.filterHeight&&r.arraysEqual(c.inShape,c.outShape))return kA({inputs:{x:i},backend:n});const h=new RR(c,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}},CP={kernelName:Ni,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dataFormat:l,dimRoundingMode:u}=r,c=d.computePool3DInfo(s.shape,i,o,[1,1,1],a,u,l),h=new FR(c,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}};class IP{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.effectiveFilterHeight,n=t.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-t.padInfo.top}, ${n-1-t.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e};\n          wR += ${t.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${e*n-1} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${n} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class EP{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.effectiveFilterDepth,n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${e-1-t.padInfo.front}, ${n-1-t.padInfo.top}, ${r-1-t.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${e};\n           wD += ${t.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${t.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${n};\n              wR += ${t.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${r};\n                wC += ${t.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${e*n*r-1} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${n} * ${r} +\n                  wR * ${r} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const OP={kernelName:Ai,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,h=d.computePool3DInfo(o.shape,a,l,[1,1,1],u,c),p=new FR(h,"max",!0),f=n.runWebGLProgram(p,[o],o.dtype),m=new EP(h),g=n.runWebGLProgram(m,[s,f],o.dtype);return n.disposeIntermediateTensorInfo(f),g}},TP={kernelName:Ti,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;jT([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:h}=r,p=d.computePool2DInfo(a.shape,l,u,1,c,h),f=new RR(p,"max",!0),m=n.runWebGLProgram(f,[a],a.dtype),g=new IP(p),b=n.runWebGLProgram(g,[s,m],a.dtype);return n.disposeIntermediateTensorInfo(m),b}},NP={kernelName:Ri,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{filterSize:i,strides:o,pad:a,includeBatchInIndex:l}=e,u=n;r.assert(4===s.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`);const c=[1,1];r.assert(d.eitherStridesOrDilationsAreOne(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const h=d.computePool2DInfo(s.shape,i,o,c,a),[p,f]=function(t,e,n,r){let s=new RR(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");return s=new RR(n,"max",!0,!0,e),[i,r.runWebGLProgram(s,[t],"float32")]}(s,l,h,u);return[p,f]}},AP={kernelName:Fi,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{keepDims:i,axis:o}=e,a=n,l=s.shape.length,u=r.parseAxisParam(o,s.shape);let c=u;const h=d.getAxesPermutation(c,l),p=null!=h,f=a.shouldExecuteOnCPU([s]),m=[];let g=s;if(p){if(f){const t=a.texData.get(g.dataId).values,e=new Array(l);for(let r=0;r<e.length;r++)e[r]=s.shape[h[r]];const n=nA(t,s.shape,s.dtype,h,e);g=a.makeTensorInfo(e,s.dtype),a.texData.get(g.dataId).values=n}else g=ZA(s,h,a);m.push(g),c=d.getInnerMostAxes(c.length,l)}d.assertAxesAreInnerMostDims("sum",c,l);const[b,y]=d.computeOutAndReduceShapes(g.shape,c);let v=b;i&&(v=d.expandShapeToKeepDim(b,u));const _=function(t,e,n,s){const i=r.sizeFromShape(e),o=BA({inputs:{x:t},attrs:{shape:[r.sizeFromShape(t.shape)/i,i]},backend:s}),a=HA(o,"float32","mean",s),l=BA({inputs:{x:a},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(a),l}(g,y,v,a);for(const r of m)a.disposeIntermediateTensorInfo(r);return _}},RP={kernelName:Di,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o,keepDims:a}=s,l=i.shape.length,u=r.parseAxisParam(o,i.shape);let c=u;const h=d.getAxesPermutation(c,l);let p=i;null!=h&&(p=XA({inputs:{x:i},backend:n,attrs:{perm:h}}),c=d.getInnerMostAxes(c.length,i.shape.length)),d.assertAxesAreInnerMostDims("min",c,l);const[f,m]=d.computeOutAndReduceShapes(p.shape,c),g=BA({inputs:{x:p},backend:n,attrs:{shape:[-1,r.sizeFromShape(m)]}}),b=HA(g,g.dtype,"min",n);let y;return y=BA(a?{inputs:{x:b},backend:n,attrs:{shape:d.expandShapeToKeepDim(f,u)}}:{inputs:{x:b},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),null!=h&&n.disposeIntermediateTensorInfo(p),y}},FP=DA({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:MN}),DP={kernelName:Pi,backendName:"webgl",kernelFunc:FP};class PP{constructor(t,e,n){this.variableNames=["x"],this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,s=fN(r),i=e.map(t=>t[0]).join(","),o=e.map((e,n)=>e[0]+t[n]).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?`\n      ${s} start = ${s}(${i});\n      ${s} end = ${s}(${o});\n\n      void main() {\n        ${s} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${l};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};\n          }\n        }\n        ${s} coords = outC - start;\n        setOutput(getX(${a}));\n      }\n    `:`\n        int start = ${i};\n        int end = ${o};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${l};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${l};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class $P{constructor(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,s=fN(r),i=e.map(t=>t[0]).join(","),o=e.map((e,n)=>e[0]+t[n]).join(","),a=iA("rc",r),l=iA("source",r),u=`${a[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,h="reflect"===n?0:1;let d="";if(1===r){const t=`\n        ${s} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${h};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${h};\n        }\n        source -= start;\n      `;d=`\n        ${s} rc = outputLoc;\n        ${t}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${a[r-1]} += 1;\n        if(${u}) {\n          ${t}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n      `}else{const t=`\n        ${s} source = rc;\n        ${s} lt = ${s}(lessThan(source, start));\n        ${s} gte = ${s}(greaterThanEqual(source, end));\n        ${s} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${h}) +\n                gte * ((end - 1) * 2 - source + ${h});\n        source -= start;\n      `;d=`\n        ${s} rc = outputLoc;\n        ${t}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${a[r-1]} += 1;\n        if(${u}) {\n          ${t}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n        rc = outputLoc;\n        ${a[r-2]} += 1;\n        if(${a[r-2]} < ${this.outputShape[r-2]}) {\n          ${t}\n          result[2] = getChannel(getX(${l.join()}), ${c});\n          ${a[r-1]} += 1;\n          if(${u}) {\n            ${t}\n            result[3] = getChannel(getX(${l.join()}), ${c});\n          }\n        }\n      `}this.userCode=`\n      const ${s} start = ${s}(${i});\n      const ${s} end = ${s}(${o});\n\n      void main() {\n        ${s} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}const MP={kernelName:$i,backendName:"webgl",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,o=qr().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $P(r.shape,s,i):new PP(r.shape,s,i);return e.runWebGLProgram(o,[r],r.dtype)}},LP=DA({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),jP={kernelName:Mi,backendName:"webgl",kernelFunc:LP};class zP{constructor(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode=`\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${e-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${e-1}));\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.seedLoc&&(this.seedLoc=e.getUniformLocation(n,"seed")),e.gl.uniform1f(this.seedLoc,t)}}}const BP=DA({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),VP={kernelName:Ws,backendName:"webgl",kernelFunc:BP},UP="return a - b;",WP=DA({opSnippet:UP,packedOpSnippet:UP,supportsComplex:!0,cpuKernelImpl:QN}),HP={kernelName:Mo,backendName:"webgl",kernelFunc:WP};function GP(t){const{inputs:e,backend:n,attrs:s}=t,{logits:i}=e,{dim:o}=s,a=r.parseAxisParam([o],i.shape),l=_P({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),u=d.expandShapeToKeepDim(l.shape,a),c=BA({inputs:{x:l},backend:n,attrs:{shape:u}}),h=WP({inputs:{a:i,b:c},backend:n}),p=pD({inputs:{x:h},backend:n}),f=KA({inputs:{x:p},backend:n,attrs:{axis:a,keepDims:!1}}),m=BA({inputs:{x:f},backend:n,attrs:{shape:u}}),g=BP({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const qP={kernelName:Co,backendName:"webgl",kernelFunc:GP},ZP={kernelName:Li,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r,l=a?s:GP({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),u=new zP(l.shape[0],l.shape[1],i),c=u.getCustomSetupFunc(o),h=n.runWebGLProgram(u,[l],"int32",c);return a||n.disposeIntermediateTensorInfo(l),h}},KP="return -x;",YP={kernelName:zi,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const t=n.texData.get(r.dataId),[e,s]=jN(t.values,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,e)}let s;return s=qr().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new mA(r.shape,KP):new dA(r.shape,KP),n.runWebGLProgram(s,[r],r.dtype)}},XP=p.nonMaxSuppressionV3Impl,JP={kernelName:Vi,backendName:"webgl",kernelFunc:function(t){d.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,u=n.readSync(s.dataId),c=n.readSync(i.dataId),{selectedIndices:h}=XP(u,c,o,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},QP=p.nonMaxSuppressionV4Impl,t$={kernelName:Ui,backendName:"webgl",kernelFunc:function(t){d.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(s.dataId),h=n.readSync(i.dataId),{selectedIndices:p,validOutputs:f}=QP(c,h,o,a,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}},e$=p.nonMaxSuppressionV5Impl,n$={kernelName:Wi,backendName:"webgl",kernelFunc:function(t){d.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(s.dataId),h=n.readSync(i.dataId),p=o,f=a,m=l,g=u,{selectedIndices:b,selectedScores:y}=e$(c,h,p,f,m,g);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class r${constructor(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}const s$={kernelName:Gi,backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n,attrs:s}=t,{indices:i}=e,{depth:o,onValue:a,offValue:l}=s,u=r.sizeFromShape(i.shape),c=new r$(u,o,a,l),h=BA({inputs:{x:i},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(c,[h],i.dtype);n.disposeIntermediateTensorInfo(h);const p=BA({inputs:{x:d},backend:n,attrs:{shape:[...i.shape,o]}});return n.disposeIntermediateTensorInfo(d),p}};function i$(t){const{inputs:e,backend:n}=t,{x:r}=e;if("complex64"===r.dtype){const t=QR({inputs:{input:r},backend:n}),e=i$({inputs:{x:t},backend:n}),s=fF({inputs:{input:r},backend:n}),i=i$({inputs:{x:s},backend:n}),o=CA({inputs:{real:e,imag:i},backend:n});return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),o}return SD({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const o$={kernelName:qo,backendName:"webgl",kernelFunc:i$},a$={kernelName:Hi,backendName:"webgl",kernelFunc:function t(e){const{inputs:n,backend:r}=e,{x:s}=n;if("string"===s.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===s.dtype){const e=QR({inputs:{input:s},backend:r}),n=t({inputs:{x:e},backend:r}),i=fF({inputs:{input:s},backend:r}),o=i$({inputs:{x:i},backend:r}),a=CA({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(e),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),a}return SD({attrs:{shape:s.shape,dtype:s.dtype,value:1},backend:r})}},l$={kernelName:qi,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{axis:i}=s;if(1===e.length)return mD({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const o=e[0].shape,a=e[0].dtype;e.forEach(t=>{r.assertShapesMatch(o,t.shape,"All tensors passed to stack must have matching shapes"),r.assert(a===t.dtype,()=>"All tensors passed to stack must have matching dtypes")});const l=[],u=bF({inputs:e.map(t=>{const e=mD({inputs:{input:t},backend:n,attrs:{dim:i}});return l.push(e),e}),backend:n,attrs:{axis:i}});return l.forEach(t=>n.disposeIntermediateTensorInfo(t)),u}};class u${constructor(t,e,n){this.variableNames=["x"],this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,s=fN(r),i=e.map(t=>t[0]).join(","),o=e.map((e,n)=>e[0]+t[n]).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${s} start = ${s}(${i});\n      ${s} end = ${s}(${o});\n      uniform float value;\n\n      void main() {\n        ${s} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${s} coords = outC - start;\n          setOutput(getX(${a}));\n        }\n      }\n    `:`\n        int start = ${i};\n        int end = ${o};\n        uniform float value;\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}getCustomSetupFunc(t){return(e,n)=>{null==this.valueLoc&&(this.valueLoc=e.getUniformLocationNoThrow(n,"value")),e.gl.uniform1f(this.valueLoc,t)}}}class c${constructor(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,s=fN(r),i=e.map(t=>t[0]).join(","),o=e.map((e,n)=>e[0]+t[n]).join(","),a=iA("rc",r),l=iA("source",r),u=`${a[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,h=[`${s} rc = outputLoc;`,`${a[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${a[r-2]} += 1;\n       if(${a[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${a[r-1]} += 1;\n         if(${u}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===r?2:4;f<m;f++)p+=`\n        ${h[f]}\n        if (${d}) {\n          result[${f}] = float(value);\n        } else {\n          ${s} source = rc - start;\n          result[${f}] = getChannel(getX(${l.join()}), ${c});\n        }\n      `;p+=1===r?"} ":"}}",this.userCode=`\n      const ${s} start = ${s}(${i});\n      const ${s} end = ${s}(${o});\n      uniform float value;\n\n      void main() {\n        ${s} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.valueLoc&&(this.valueLoc=e.getUniformLocationNoThrow(n,"value")),e.gl.uniform1f(this.valueLoc,t)}}}const h$=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r,a=qr().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new c$(s.shape,i,o):new u$(s.shape,i,o),l=a.getCustomSetupFunc(o);return n.runWebGLProgram(a,[s],s.dtype,l)},d$={kernelName:Zi,backendName:"webgl",kernelFunc:h$},p$=DA({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),f$={kernelName:Ki,backendName:"webgl",kernelFunc:p$},m$={kernelName:Xi,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{axis:o,keepDims:a}=s,l=i.shape.length,u=[],c=r.parseAxisParam(o,i.shape);let h=c;const p=d.getAxesPermutation(h,l);let f,m=i;if(null!=p&&(m=XA({inputs:{x:i},backend:n,attrs:{perm:p}}),h=d.getInnerMostAxes(h.length,l),u.push(m)),d.assertAxesAreInnerMostDims("prod",h,l),n.shouldExecuteOnCPU([m])){const t=n.texData.get(m.dataId).values,{outVals:e,outShape:r,outDtype:s}=BN(m.shape,m.dtype,t,h);f=n.makeTensorInfo(r,s,e)}else{const[t,e]=d.computeOutAndReduceShapes(m.shape,h),s=r.sizeFromShape(e),o=BA({inputs:{x:m},backend:n,attrs:{shape:[-1,s]}}),a=HA(o,Ya(i.dtype),"prod",n);f=BA({inputs:{x:a},backend:n,attrs:{shape:t}}),u.push(o),u.push(a)}if(a){u.push(f);const t=d.expandShapeToKeepDim(f.shape,c);f=BA({inputs:{x:f},backend:n,attrs:{shape:t}})}return u.forEach(t=>n.disposeIntermediateTensorInfo(t)),f}},g$=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:o}=n,a=VN(r,s,i,o);return e.makeTensorInfo([a.length],o,a)},b$={kernelName:Ji,backendName:"webgl",kernelFunc:g$},y$=FA({opSnippet:"return 1.0 / x;"}),v$={kernelName:to,backendName:"webgl",kernelFunc:y$},_$=FA({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),w$={kernelName:eo,backendName:"webgl",kernelFunc:_$},x$=FA({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),k$={kernelName:ao,backendName:"webgl",kernelFunc:x$};class S${constructor(t,e,n,r,s){this.variableNames=["A"],this.outputShape=[];const[i,o,a,l]=t;this.outputShape=[i,e,n,l];const u=[r&&e>1?o-1:o,r&&n>1?a-1:a],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];let h;h=s?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${o}.0, ${a}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class C${constructor(t,e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,a,l]=t;this.outputShape=[i,e,n,l];const u=[r&&e>1?o-1:o,r&&n>1?a-1:a],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];let h;h=s?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${o}.0, ${a}.0,\n                                     ${a}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const I$={kernelName:io,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,u]=a,c=qr().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new C$(s.shape,l,u,i,o):new S$(s.shape,l,u,i,o);return n.runWebGLProgram(c,[s],"float32")}};class E${constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,r,s]=e,[,i,o]=t,a=[n&&i>1?r-1:r,n&&o>1?s-1:s],l=[n&&i>1?i-1:i,n&&o>1?o-1:o],u=a[0]/l[0],c=a[1]/l[1],h=1/u,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${i}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${o}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const O$={kernelName:oo,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new E$(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}};class T${constructor(t,e,n,r,s){this.variableNames=["A"],this.outputShape=[];const[i,o,a,l]=t;this.outputShape=[i,e,n,l];const u=[r&&e>1?o-1:o,r&&n>1?a-1:a],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];let h;h=s?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${o}.0, ${a}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class N${constructor(t,e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,a,l]=t;this.outputShape=[i,e,n,l];const u=[r&&e>1?o-1:o,r&&n>1?a-1:a],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];let h;h=s?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${o}.0, ${a}.0,\n                                     ${a}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${h};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const A$={kernelName:ro,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,u]=a,c=qr().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new N$(s.shape,l,u,i,o):new T$(s.shape,l,u,i,o);return n.runWebGLProgram(c,[s],s.dtype)}};class R${constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,r,s]=e,[,i,o]=t,a=[n&&i>1?r-1:r,n&&o>1?s-1:s],l=[n&&i>1?i-1:i,n&&o>1?o-1:o],u=a[0]/l[0],c=a[1]/l[1],h=1/u,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${i}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${o}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${a[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${a[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${s}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const F$={kernelName:so,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new R$(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}};class D${constructor(t,e){this.variableNames=["x"];const n=t.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=t,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${t[0]} - coord - 1));\n        }\n      `);const r=t.map((n,r)=>(n=>-1!==e.indexOf(n)&&1!==t[n]?`${t[n]} - coords[${n}] - 1`:`coords[${n}]`)(r)).join(","),s=fN(n);this.userCode=`\n      void main() {\n        ${s} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class P${constructor(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=t.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=t;const r=iA("rc",n),s=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,i=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,o=fN(n);function a(n){const r=t.map((r,s)=>function(n,r){return-1!==e.indexOf(n)&&1!==t[n]?`${t[n]} - ${r[n]} - 1`:`${r[n]}`}(s,n));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${t[0]} - rc - 1),\n            ${t[0]} - rc - 1);\n          if(${s}){\n              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),\n                ${t[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${o} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(t){return a(t)}(r.slice())};\n          if(${s}){\n            result.g = ${function(t){return t[n-1]="("+t[n-1]+" + 1)",a(t)}(r.slice())};\n          }\n          if(${i}) {\n            result.b = ${function(t){return t[n-2]="("+t[n-2]+" + 1)",a(t)}(r.slice())};\n            if(${s}) {\n              result.a = ${function(t){return t[n-1]="("+t[n-1]+" + 1)",t[n-2]="("+t[n-2]+" + 1)",a(t)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const $$={kernelName:lo,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{dims:o}=s,a=i.shape.length,l=r.parseAxisParam(o,i.shape);if(0===a)return kA({inputs:{x:i},backend:n});const u=qr().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new P$(i.shape,l):new D$(i.shape,l);return n.runWebGLProgram(u,[i],i.dtype)}};class M${constructor(t,e){this.variableNames=["Image"],this.outputShape=[];const n=t[1],r=t[2];this.outputShape=t;let s="";s="number"==typeof e?`float outputValue = ${e.toFixed(2)};`:`\n        vec3 fill = vec3(${e.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        uniform vec4 params;\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${s}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}getCustomSetupFunc(t,e,n,r){return(s,i)=>{null==this.paramsLoc&&(this.paramsLoc=s.getUniformLocationNoThrow(i,"params")),s.gl.uniform4f(this.paramsLoc,t,e,n,r)}}}const L$={kernelName:Yo,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=new M$(r.shape,i),[u,c]=d.getImageCenter(o,r.shape[1],r.shape[2]),h=l.getCustomSetupFunc(u,c,Math.sin(s),Math.cos(s));return a.runWebGLProgram(l,[r],r.dtype,h)}},j$=FA({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),z$={kernelName:uo,backendName:"webgl",kernelFunc:j$},B$=FA({opSnippet:"return inversesqrt(x);",cpuKernelImpl:UN}),V$={kernelName:co,backendName:"webgl",kernelFunc:B$};class U${constructor(t,e,n,r,s,i,o=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const a=fN(s.length),l=fN(i.length);let u="";1===n?u="i":2===n&&(u="i, j");let c="";1===r?c="i":2===r&&(c="i, coords[1]"),this.userCode=`\n        ${a} strides = ${a}(${s});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${t}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${e}; j++) {\n              int index = round(getIndices(${u}));\n              flattenedIndex += index * ${e>1?"strides[j]":"strides"};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += getUpdates(${c});\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}const W$={kernelName:ho,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=d.calculateShapes(i,s,o),p=[h/u,u];if(0===h)return n.makeTensorInfo(o,s.dtype);const f=BA({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),m=BA({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),b=new U$(l,a,f.shape.length,m.shape.length,c,p),y=n.runWebGLProgram(b,[m,f,g],m.dtype),v=BA({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),v}};class H${constructor(t,e,n){let r,s;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)s="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],o=[];for(let r=0;r<e.length;r++)o.push(`${n[r]}`),r<t&&i.push(`${n[r]}`);r=i.join(),s=o.join()}const i=fN(n);this.userCode=`\n      void main() {\n        ${i} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${s}));\n        } else {\n          setOutput(getB(${s}));\n        }\n      }\n    `}}const G$={kernelName:po,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,o=new H$(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(o,[r,s,i],Ka(s.dtype,i.dtype))}},q$=FA({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${d.SELU_SCALEALPHA};\n  float scale = ${d.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),Z$={kernelName:fo,backendName:"webgl",kernelFunc:q$},K$=FA({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"}),Y$={kernelName:vo,backendName:"webgl",kernelFunc:K$},X$=FA({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),J$={kernelName:yo,backendName:"webgl",kernelFunc:X$},Q$=FA({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),tM={kernelName:go,backendName:"webgl",kernelFunc:Q$},eM=FA({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),nM={kernelName:bo,backendName:"webgl",kernelFunc:eM},rM=FA({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),sM={kernelName:_o,backendName:"webgl",kernelFunc:rM},iM={kernelName:ko,backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{blockShape:o,paddings:a}=s;r.assert(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const l=o.reduce((t,e)=>t*e),u=[[0,0]];u.push(...a);for(let r=1+o.length;r<i.shape.length;++r)u.push([0,0]);const c=[],h=h$({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),p=d.getReshaped(h.shape,o,l,!1),f=d.getPermuted(p.length,o.length,!1),m=d.getReshapedPermuted(h.shape,o,l,!1),g=BA({inputs:{x:h},backend:n,attrs:{shape:p}}),b=XA({inputs:{x:g},backend:n,attrs:{perm:f}}),y=BA({inputs:{x:b},backend:n,attrs:{shape:m}});return c.push(h),c.push(g),c.push(b),c.forEach(t=>n.disposeIntermediateTensorInfo(t)),y}},oM={kernelName:Io,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(1!==i.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${i.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${r.shape}`);if(1!==s.shape.length)throw new Error(`Values must be a vector, saw:\n         ${s.shape}`);if(0!==o.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),u=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],[h,d,p,f,m]=GN(a,r.shape,r.dtype,l,s.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],s.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(t=>Number(t)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}},aM={kernelName:Eo,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==s.shape.length)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(1!==i.shape.length)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[u,c,h]=qN(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}},lM={kernelName:Oo,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${s.shape}`);if(1!==i.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[u,c]=ZN(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}},uM={kernelName:To,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${s.shape}`);if(1!==i.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[u,c]=ZN(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}},cM={kernelName:No,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,strides:c,outputSize:h}=d.calculateShapes(i,s,a),p=new U$(u,l,s.shape.length,i.shape.length,c,[h,1],!1),f=n.runWebGLProgram(p,[i,s,o],i.dtype),m=BA({inputs:{x:f},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(f),m}},hM={kernelName:So,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{numOrSizeSplits:o,axis:a}=s,l=r.parseAxisParam(a,i.shape)[0],u=d.prepareSplitSize(i,o,l),c=new Array(i.shape.length).fill(0),h=i.shape.slice();return u.map(t=>{const e=[...h];e[l]=t;const r=qR({inputs:{x:i},backend:n,attrs:{begin:c,size:e}});return c[l]+=t,r})}},dM=FA({opSnippet:"return sqrt(x);"}),pM={kernelName:wo,backendName:"webgl",kernelFunc:dM},fM={kernelName:Ro,backendName:"webgl",kernelFunc:FA({opSnippet:"return x * x;"})},mM="return (a - b) * (a - b);",gM=DA({opSnippet:mM,packedOpSnippet:mM}),bM={kernelName:Ao,backendName:"webgl",kernelFunc:gM},yM={kernelName:Zo,backendName:"webgl",kernelFunc:function({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=new dA(r.shape,`if (isnan(x)) return x;\n    return x > 0.0 ? 1.0 : float(${e.alpha});\n  `);return n.runWebGLProgram(s,[r],r.dtype)}};class vM{constructor(t,e,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,s=fN(n.length),i=fN(n.length);let o="";if(1===r)o="coords * strides + begin";else{let t=0;o=n.map((e,r)=>(t++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${t-1}] * strides[${r}] + begin[${r}]`)).join(",")}this.userCode=`\n      ${s} begin = ${s}(${t});\n      ${s} strides = ${s}(${e});\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        setOutput(getX(${o}));\n      }\n    `}}const _M={kernelName:Fo,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:u,endMask:c,ellipsisMask:h,newAxisMask:d,shrinkAxisMask:p}=r,{nonStrided:f,$begin:m,$strides:g,size:b,newShape:y,outShape:v}=l.sliceInfo(s.shape,i,o,a,u,c,h,d,p),_=BA({inputs:{x:s},backend:n,attrs:{shape:y}});let w;if(f){const t=qR({inputs:{x:_},backend:n,attrs:{begin:m,size:b}});w=BA({inputs:{x:t},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(t)}else if(v.some(t=>0===t))w=n.makeTensorInfo(v,s.dtype,[]);else if(n.shouldExecuteOnCPU([_])){const t=n.texData.get(_.dataId),e=hu(_.shape,_.dtype,t.values),r=KN(v,e,g,m);w=n.makeTensorInfo(v,_.dtype,r.values)}else{const t=new vM(m,g,v);w=n.runWebGLProgram(t,[_],_.dtype)}const x=BA({inputs:{x:w},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(w),x}},wM={kernelName:Do,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:h}=e,d=n.readSync(c.dataId),p=n.readSync(h.dataId),[f,m]=YN(d,p,s,i,o,a,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}},xM={kernelName:Po,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(1!==i.shape.length)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[u,c,h]=XN(a,l,s),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}},kM={kernelName:$o,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),a=JN(o,s);return n.makeTensorInfo(i.shape,"int32",a)}},SM=FA({opSnippet:"return tan(x);"}),CM={kernelName:Lo,backendName:"webgl",kernelFunc:SM},IM=FA({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),EM={kernelName:jo,backendName:"webgl",kernelFunc:IM};class OM{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let i=0;i<n.length;i++)n[i]=t[i]*e[i];this.outputShape=n,this.rank=n.length;const r=fN(this.rank),s=function(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(1===e)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}(t);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${s}));\n      }\n    `}}function TM(t){const{inputs:e,backend:n,attrs:s}=t,{x:i}=e,{reps:o}=s;if("string"===i.dtype||i.shape.length>5){const t=n.readSync(i.dataId),e="string"===i.dtype?t.map(t=>r.decodeString(t)):t,s=hu(i.shape,i.dtype,e),a=tA(s,o);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const a=new OM(i.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const NM={kernelName:zo,backendName:"webgl",kernelFunc:TM},AM={kernelName:Bo,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r,a=n.readSync(s.dataId),[l,u]=eA(a,s.shape,s.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}};class RM{constructor(t,e,n,r,s,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const o="nearest"===n?1:2;let a;switch(r){case"constant":a=1;break;case"reflect":a=2;break;case"wrap":a=3;break;case"nearest":a=4;break;default:a=1}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${a} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${a} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${a} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${e}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${s});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${s});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${e}));\n                float mapY = mapCoord(inY, float(${t}));\n\n                if (${o} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const FM={kernelName:Vo,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=r,[c,h,d,p]=s.shape,[f,m]=null!=u?u:[h,d],g=new RM(h,d,o,a,l,[c,f,m,p]);return n.runWebGLProgram(g,[s,i],"float32")}},DM={kernelName:Wo,backendName:"webgl",kernelFunc:function(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;jT(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:u}=rA(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}},PM={kernelName:Ho,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s,a=o.shape.length,l=s.shape[i],u=new Array(a-1);let c=0;for(let m=0;m<a;m++)m!==i&&(u[c++]=o.shape[m]);const h=[],d=new Array(a).fill(0),p=o.shape.slice();p[i]=1;const f=new Array(l);for(let m=0;m<f.length;m++){d[i]=m;const t=qR({inputs:{x:o},backend:n,attrs:{begin:d,size:p}}),e=BA({inputs:{x:t},backend:n,attrs:{shape:u}});f[m]=e,h.push(t)}return h.forEach(t=>n.disposeIntermediateTensorInfo(t)),f}};class $M{constructor(t,e){this.variableNames=["x","segmentIds"];const n=t.windowSize,r=t.batchSize,s=t.inSize,i=t.numSegments,o=i*Math.ceil(s/n);this.outputShape=[r,o];const a=4*Math.floor(n/4),l=n%4,u="\n        sumValue += dot(values, segFilter);\n    ";let c="";s%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return initializationValue;\n        }\n      `);let h="";s%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${h}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${i})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${i})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}const MM=[bP,vP,tR,nR,sR,oR,uR,dR,pR,fR,_R,wR,kR,CR,TR,ER,AR,PR,DR,LR,jR,zR,UR,KR,YR,eF,sF,aF,cF,IA,yF,TF,NF,SF,RF,FF,AF,PF,MF,jF,UF,WF,GF,JF,QF,KF,eD,rD,sD,oD,aD,uD,hD,fD,gD,vD,xD,CD,ED,ND,RD,PD,MD,LD,zD,VD,WD,GD,SA,qD,mF,KD,XD,QD,TA,eP,rP,sP,lP,oP,cP,dP,fP,wP,CP,SP,OP,TP,NP,kP,AP,RP,DP,MP,jP,ZP,zA,YP,JP,t$,n$,JR,s$,a$,l$,d$,f$,RA,m$,b$,tF,VP,v$,k$,w$,VA,I$,O$,A$,F$,$$,L$,z$,V$,W$,G$,Z$,Y$,J$,tM,nM,ZR,qP,sM,iM,oM,aM,lM,uM,cM,hM,pM,fM,bM,yM,_M,wM,xM,kM,HP,YA,CM,EM,NM,AM,FM,JA,DM,PM,{kernelName:Go,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:s}=t,{x:i,segmentIds:o}=e,{numSegments:a}=s,l=i.shape.length,u=[];let c=0;const h=d.getAxesPermutation([c],l);let p=i;null!=h&&(p=XA({inputs:{x:i},backend:n,attrs:{perm:h}}),u.push(p),c=d.getInnerMostAxes(1,l)[0]);const f=d.segment_util.computeOutShape(p.shape,c,a),m=r.sizeFromShape([p.shape[c]]),g=BA({inputs:{x:p},backend:n,attrs:{shape:[-1,m]}});u.push(g);const b=Ya(i.dtype),y=(t,e,r,s,i)=>{const o=t.shape[0],a=t.shape[1],l=d.segment_util.segOpComputeOptimalWindowSize(a,i),c=new $M({windowSize:l,inSize:a,batchSize:o,numSegments:i},e),h=n.compileAndRun(c,[t,r],s);if(u.push(h),h.shape[1]===i)return h;const p=g$({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),f=TM({inputs:{x:p},backend:n,attrs:{reps:[a/l]}});return u.push(p),u.push(f),y(h,e,f,s,i)},v=BA({inputs:{x:y(g,"unsortedSegmentSum",o,b,a)},backend:n,attrs:{shape:f}});let _=v;if(null!=h){u.push(v);const t=d.getUndoAxesPermutation(h);_=XA({inputs:{x:_},backend:n,attrs:{perm:t}})}return u.forEach(t=>n.disposeIntermediateTensorInfo(t)),_}},o$];for(const YW of MM)ia(YW);let LM=(()=>{class t{constructor(t,e,n){this.api=t,this.state=e,this.authService=n,this.cache=new $({max:50,maxAge:864e5})}getModelFile(t){const e=this.cache.get(t);return e?Object(j.a)(e):this.api.get(t,!0,void 0,!1).pipe(Object(V.a)(e=>{const n="404 Not Found";if("string"==typeof e&&e.indexOf(n)>-1)return Object(L.a)(n);this.cache.set(t,e)}))}getModel(t){const e=this.cache.get(t);if(e)return Object(j.a)(e);const n=new Headers,r="Bearer "+this.authService.getToken();n.append("Authorization",r);const s={requestInit:{headers:n}};return Object(Zn.a)((i=o.http(t,s),null==a&&(a={}),async function(t,e){if(null==e&&(e={}),"string"==typeof t){const n=o.getLoadHandlers(t,e);if(0===n.length)n.push(o.browserHTTPRequest(t,e));else if(n.length>1)throw new rb(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return async function(t,e,n){if(null==n&&(n={}),null==t.load)throw new rb("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let s=r.modelTopology;null!=s.model_config&&(s=s.model_config);const i=null==n.strict||n.strict,a=null!=r.weightData&&null!=r.weightSpecs&&i,l=mv(Bv(s),void 0,a),u=r.trainingConfig;if(null!=u&&l.loadTrainingConfig(u),null!=r.userDefinedMetadata&&l.setUserDefinedMetadata(r.userDefinedMetadata),null!=r.weightData){if(null==r.weightSpecs)throw new rb("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:t,optimizerWeights:e}=function(t,e){const n=o.decodeWeights(t,e),r={},s=[];return e.forEach(t=>{"optimizer"===t.group?s.push({name:t.name,tensor:n[t.name]}):r[t.name]=n[t.name]}),{modelWeights:r,optimizerWeights:s}}(r.weightData,r.weightSpecs);l.loadWeights(t,i),null!=l.optimizer&&e.length>0&&await l.optimizer.setWeights(e),sc(t),sc(e.map(t=>t.tensor))}return l}(t,0,e)}(i,a))).pipe(Object(V.a)(e=>{this.cache.set(t,e)}));var i,a}}return t.\u0275fac=function(e){return new(e||t)(tt.Zb(P.a),tt.Zb(Mn),tt.Zb(P.d))},t.\u0275prov=tt.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),jM=(()=>{class t{constructor(t,e,n){this.state=t,this.modelService=e,this.trackingService=n,this.trackingService.isFeatureEnabled("next-word",t=>{t&&this.init()})}init(){const t=this.state.stash.pipe(Object(W.a)(t=>null!==t),Object(z.a)(t=>t),Object(Gn.a)("id"));t.pipe(Object(qn.a)(t=>Object(Hn.a)([this.getTokenizer(t.url,"search"),this.getMaxLength(t.url,"search"),this.getModel(t.url,"search")]).pipe(Object(B.a)(t=>Object(j.a)([void 0,void 0,void 0]))))).subscribe(t=>{this.searchModelData={tokenizer:t[0],maxLength:t[1],model:t[2]}}),t.pipe(Object(qn.a)(t=>Object(Hn.a)([this.getTokenizer(t.url,"doc"),this.getMaxLength(t.url,"doc"),this.getModel(t.url,"doc")]).pipe(Object(B.a)(t=>Object(j.a)([void 0,void 0,void 0]))))).subscribe(t=>{this.docModelData={tokenizer:t[0],maxLength:t[1],model:t[2]}})}getTokenizer(t,e){return this.modelService.getModelFile(t+`/@models/autocomplete/model_files/tokenizer_${e}.json`).pipe(Object(z.a)(t=>JSON.parse(t)))}getMaxLength(t,e){return this.modelService.getModelFile(t+`/@models/autocomplete/model_files/${e}_max_len.txt`).pipe(Object(z.a)(t=>parseInt(t)))}getModel(t,e){return this.modelService.getModel(t+`/@models/autocomplete/json_${e}/model.json`)}compute(t,e){const n="search"===e?this.searchModelData:this.docModelData;if(!(n&&n.tokenizer&&n.model&&n.maxLength))return;const r=t.trim().split(" ").map(t=>n.tokenizer.word_index[t]||0);if(r.some(t=>0!==t)&&r.length<n.maxLength){for(;r.length<n.maxLength-1;)r.unshift(0);const t=dd([r]),e=n.model.predict(t),s=fc(e,-1).dataSync();return n.tokenizer.index_word[s[0]]}}}return t.\u0275fac=function(e){return new(e||t)(tt.Zb(Mn),tt.Zb(LM),tt.Zb(P.j))},t.\u0275prov=tt.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const zM={max:50,maxAge:36e5},BM=new $(zM),VM=(new $(zM),{MAIN:"main",MAYBE_INTERESTED:"maybe_interested",TAGS:"tags",PARAGRAPH:"paragraph",NEXT_WORDS:"next_words"});let UM=(()=>{class t{constructor(t,e,n,r,s){this.api=t,this.state=e,this.entities=n,this.ontologies=r,this.nextWord=s,this.searchOption=[],this.default_size=10,this.default_size_paragraph=3,this.resources=[],this.selectedResources=[],this.labels=[],this.filters=[],this.addValueAutocompleteRender=(t,e,n)=>{const r=t.find(t=>t.name===e);r?r.values.push(n):t.push({name:e,name_i18n:`autocomplete.section.${e}`,values:[n]})},BM.reset(),this.onResourcesChanged=new M.a([]),this.onSelectedResourcesChanged=new M.a(null),this.onCurrentResourceChanged=new M.a([]),this.onFoldersChanged=new M.a([]),this.onFiltersChanged=new M.a([]);const i=new ue([]);this.onLabelsChanged=new M.a(i),this.autocomplete_render=new M.a({append:!1,items:[]}),this.stash_entities=new Q(!0),this.stash_named_entities=new Q(!1),this.state.stash.subscribe(t=>{t&&(this.stash_entities.loading=!0,this.entities.getCustomEntities().subscribe(t=>{this.stash_entities.addEntities(t,!0),this.stash_entities.loading=!1}),this.stash_named_entities.loading=!0,this.entities.getNamedEntities().subscribe(t=>{this.stash_named_entities.addEntities(t,!0),this.stash_named_entities.loading=!1}))})}getSearchUrl(){let t=this.state.getContextUrl();return t+="/@search",t}mainResources(){const t=this.getSearchUrl();return t?this.api.get(t):Object(L.a)("Not in stash")}suggest(t){const e=this.state.getStashUrl(!0)+"/@suggest?q="+t;return this.api.get(e,!0,void 0,!0).pipe(Object(z.a)(t=>t,t=>{}))}search(t,e,n,r,s,i,o,a,l,u){null===r&&(r=""),s||(s=""!==r||o&&o.length>0||a&&a.length>0||l&&l.length>0||u&&u.length>0?this.default_size:0);let c="";if(c=t&&e&&n?"/"+t+"/"+e+"/"+n+"/":this.state.getStashUrl(!0)+"/",c+="/@search?size="+s+"&q="+r,i&&(c+="&from="+i),o)for(const h of o)c+="&tags="+h;if(u)for(const h of u)c+="&users="+h;if(a)for(const h of a)c+="&origins="+h;if(l)for(const h of l)c+="&types="+h;return this.api.get(c,!0,void 0,!0).pipe(Object(z.a)(t=>new Zt(t)),Object(B.a)(()=>Object(j.a)(new Zt({}))))}classify({db:t,account:e,stash:n,query:r}){null===r&&(r="");let s="";if(t&&e&&n)s=`/${t}/${e}/${n}`;else{const t=this.state.getStashUrl(!0);t&&(s=t)}return s+="/@classify?q="+r,this.api.get(s,!0,void 0,!0).pipe(Object(z.a)(t=>new Xt(t)))}flaps(t,e,n,r,s){null===r&&(r="");let i="/";return t&&(i+=t),e&&(i+="/"+e),n&&(i+="/"+n),null===s&&(s=10),i+="/@flaps?q="+r+"&size="+s,this.api.get(i,!0,void 0,!0).pipe(Object(z.a)(t=>new Kt(t)),Object(B.a)(()=>Object(j.a)(new Kt({}))))}paragraph({db:t,account:e,stash:n,query:r,size:s,from:i,tags:o,fast:a=!1}){null===r&&(r=""),s||(s=""!==r||o&&o.length>0?this.default_size_paragraph:0);let l="";if(t&&e&&n)l=`/${t}/${e}/${n}`;else{const t=this.state.getStashUrl(!0);t&&(l=t)}if(l+="/@paragraph?size="+s+"&q="+r,i&&(l+="&from="+i),o)for(const u of o)l+="&tags="+u;return a&&(l+="&fast"),this.api.get(l,!0,void 0,!0).pipe(Object(z.a)(t=>t),Object(B.a)(()=>Object(j.a)({resultPerPage:void 0,results:void 0,time:void 0,total:void 0})))}qa(t,e,n,r,s,i,o,a){null===r&&(r="");let l="/";return t&&(l+=t),e&&(l+="/"+e),n&&(l+="/"+n),l+="/@answer",this.api.post(l,{q:r,text:i,textUuid:o,uuids:a,lang:s},!0,void 0,void 0,!0).pipe(Object(z.a)(t=>new Yt(t),t=>new Yt({})))}home(t,e,n,r){let s="";if(s=t&&e&&n?`/${t}/${e}/${n}/@home`:this.state.getStashUrl(!0)+"/@home",r){const t=[];for(const e of r)t.push(`labels=${btoa(e)}`);s+=`?${t.join("&")}`}const i=BM.get(s);return i?Object(j.a)(i):this.api.get(s,!0,void 0,!0).pipe(Object(z.a)(t=>(BM.set(s,t),t)),Object(B.a)(()=>Object(j.a)({})))}toggleSelectedResource(t){if(this.selectedResources.length>0)for(const e of this.selectedResources)if(e.id===t){const t=this.selectedResources.indexOf(e);if(-1!==t)return this.selectedResources.splice(t,1),void this.onSelectedResourcesChanged.next(this.selectedResources)}this.selectedResources.push(this.resources.find(e=>e&&e.id===t)),this.onSelectedResourcesChanged.next(this.selectedResources)}toggleSelectAll(){this.selectedResources.length>0?this.deselectResources():this.selectResources()}selectResources(t,e){this.selectedResources=[],void 0===t||void 0===e?this.selectedResources=this.resources:this.selectedResources.push(...this.resources.filter(n=>{if(n.h)return n[t]===e})),this.onSelectedResourcesChanged.next(this.selectedResources)}deselectResources(){this.selectedResources=[],this.onSelectedResourcesChanged.next(this.selectedResources)}setCurrentResource(t,e=!0){this.currentResource=t,e&&this.onCurrentResourceChanged.next(this.currentResource)}loadLabels(){let t=this.state.getContextUrl();t+="/@ontologies",t&&this.api.get(t,!0,void 0,!1).pipe(Object(z.a)(t=>new ue(t.items))).subscribe(t=>{this.onLabelsChanged.next(t)})}autocompletClassify(t){this.classify({query:t}).pipe(Object(B.a)(()=>Object(j.a)({classes:[]}))).subscribe(t=>{console.log("Classify data",t)})}typeahead(t,e,n,r,s){e.length<3&&1===n||(void 0!==this.timeout_search&&clearTimeout(this.timeout_search),this.timeout_search=setTimeout(()=>{this._typeahead(t,e,n,r,s)},200))}_typeahead(t,e,n,r,s){this.autocomplete_render.next({append:!1,items:[]}),console.log(n);const i=this.stash_entities.search(e),o=Math.min(3,i.length),a=i.slice(0,o),l=[];for(const f of a){const t=f.matches;t.length>0&&(r[n-1]=t[0].value,this.addValueAutocompleteRender(l,VM.MAIN,{value:r.join(" ")}))}const u=[],c={three_words:0,two_words:0,one_word:0};if(n>2){const t=r.slice(n-3,n-1);t.push(e),console.log("buscant per 3 "+t.join(" ")),u.push(...this.stash_named_entities.search(t.join(" "))),c.three_words=u.length}if(n>1&&u.length<3){const t=r.slice(n-2,n-1);t.push(e),console.log("buscant per 2 "+t.join(" ")),u.push(...this.stash_named_entities.search(t.join(" "))),c.two_words=u.length}u.length<1&&(u.push(...this.stash_named_entities.search(e)),c.one_word=u.length);const h=Math.min(3,u.length),d=u.slice(0,h);let p=[];for(const f of d){const t=f.matches;if(p=[...r],t.length>0){const e=t[0].value;c.three_words>0?(p.splice(n-3,n-1),p[n-3]=e,c.three_words-=1,c.two_words-=1):c.two_words>0?(p.splice(n-2,n-1),p[n-2]=e,c.two_words-=1):p[n-1]=e,this.addValueAutocompleteRender(l,VM.MAIN,{value:p.join(" ")})}}if(" "===s&&this.suggest(t).pipe(Object(B.a)(t=>(console.error(t),Object(j.a)({}))),Object(V.a)(t=>{const e=[];if(void 0!==t.mk){const n=t.mk.slice(0,3);for(const t of n)this.addValueAutocompleteRender(e,VM.MAIN,{value:t.proposal.toLowerCase()})}if(void 0!==t.ac){const n=t.ac.slice(0,3);for(const t of n)this.addValueAutocompleteRender(e,VM.MAIN,{value:t.proposal.join(" ").toLowerCase()})}if(void 0!==t.to){const n=t.to.slice(0,3);for(const t of n)this.addValueAutocompleteRender(e,VM.MAYBE_INTERESTED,{value:t.toLowerCase()})}this.autocomplete_render.next({append:!0,items:e})}),Object(U.a)(()=>this.paragraph({fast:!0,query:t})),Object(W.a)(t=>void 0!==t.total&&t.total>0)).subscribe(t=>{var e;const n=[];null===(e=t.results)||void 0===e||e.map(t=>{this.addValueAutocompleteRender(n,VM.PARAGRAPH,{value:t.body,id:t.id})}),this.autocomplete_render.next({append:!0,items:n})}),n>0){const t=this.nextWord.compute(r.join(" "),"search");t&&this.addValueAutocompleteRender(l,VM.NEXT_WORDS,{value:[...r,t].join(" "),icon:"previous"});const e=this.nextWord.compute(r.join(" "),"doc");e&&this.addValueAutocompleteRender(l,VM.NEXT_WORDS,{value:[...r,e].join(" "),icon:"eyeglass"})}this.autocomplete_render.next({append:!1,items:l})}}return t.\u0275fac=function(e){return new(e||t)(tt.Zb(P.a),tt.Zb(Mn),tt.Zb(jn),tt.Zb(Wn),tt.Zb(jM))},t.\u0275prov=tt.Lb({token:t,factory:t.\u0275fac}),t})();const WM=new $({max:50,maxAge:36e5});let HM=(()=>{class t{constructor(t,e){this.api=t,this.state=e}getStash(t,e,n){let r="";r=t&&e&&n?"/"+t+"/"+e+"/"+n:this.state.getStashUrl(!0);const s=WM.get(r);return s?Object(j.a)(s):r?this.api.get(r,!0,void 0,!0).pipe(Object(z.a)(t=>new te(t))):Object(L.a)("Not found url to call")}getStashes(t,e){if(t&&e){const n="/"+t+"/"+e+"/@stashes",r=WM.get(n);return r?Object(j.a)(r):this.api.get(n,!0,void 0,!0).pipe(Object(z.a)(t=>new ee(t)))}return Object(j.a)(new ee({items:[]}))}removeUser(t,e,n){}publishStash(t){return this.api.post(t+"/@publish",{},!0,void 0,void 0,!1)}retireStash(t){return this.api.post(t+"/@retire",{},!0,void 0,void 0,!1)}deleteStash(t){return this.api.delete(t,!0,!1)}}return t.\u0275fac=function(e){return new(e||t)(tt.Zb(P.a),tt.Zb(Mn))},t.\u0275prov=tt.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var GM=n("aaBP");const qM="/@edit-token";let ZM=(()=>{class t{constructor(t,e,n){this.api=t,this.router=e,this.state=n,this.editable=new tt.n(!1)}getResourceFromURL(t,e){return e&&(t+="?include=*"),this.api.get(t,!0,void 0,!1).pipe(Object(z.a)(t=>new Gt(t)))}getResource(t,e,n,r,s){let i="";return i=t&&e&&n?"/"+t+"/"+e+"/"+n+"/"+r:this.state.getStashUrl(!0)+"/"+r,s&&(i+="?include=*"),this.api.get(i,!0,void 0,!0).pipe(Object(z.a)(t=>new Gt(t)))}getConversationList(t,e){return this.api.get(t+"/@conversation/"+e,!0,void 0,!1).pipe(Object(z.a)(t=>new Nt(t)))}deleteLink(t){const e=new GM.ArrayBuffer,n=new ArrayBuffer(2*t.length),r=new Uint16Array(n);for(let a=0,l=t.length;a<l;a++)r[a]=t.charCodeAt(a);e.append(n);const s=e.end(!0),i=btoa(s).replace("/","-");if(void 0===i||""===i)return Object(j.a)(void 0);const o=this.state.getStashUrl()+"/"+i;return this.api.delete(o,!0,!0)}createPage(t,e,n,r){const s={};for(const a of r)s.hasOwnProperty(a.list)?s[a.list].push(a.id):s[a.list]=[a.id];const i={"@type":"Resource",icon:"application/stf-page","@behaviors":["stashify_content.interfaces.behaviors.IStashifyHTML","stashify_content.interfaces.behaviors.IStashifyMetadata"],"guillotina.behaviors.dublincore.IDublinCore":{title:t,description:e},"stashify_content.interfaces.behaviors.IStashifyHTML":{html:n},"stashify_content.interfaces.behaviors.IStashifyMetadata":{classifications:s}},o=this.state.getStashUrl();return null==o?Object(L.a)("Not in stash"):this.api.post(o,i,!0,void 0,"application/json",!1)}createLink(t,e){const n=GM.hash(t),r=btoa(n).replace("/","-"),s={};for(const l of e)s.hasOwnProperty(l.list)?s[l.list].push(l.id):s[l.list]=[l.id];const i={};i[t]={added:(new Date).toString(),cookies:{},basic:""};const o={"@type":"Resource",id:r,title:t,icon:"application/stf-link","@behaviors":["stashify_content.interfaces.behaviors.ILinks","stashify_content.interfaces.behaviors.IStashifyMetadata"],"stashify_content.interfaces.behaviors.ILinks":{links:i},"stashify_content.interfaces.behaviors.IStashifyMetadata":{classifications:s}},a=this.state.getStashUrl();return null==a?Object(L.a)("Not in stash"):this.api.post(a,o,!0,void 0,"application/json",!1)}deleteResource(t){return this.api.delete(t,!0)}indexResource(t){return this.api.get(t+"/@index",!0,void 0,!1)}toggleStar(t){t.following=!t.following,void 0===t._modified&&(t._modified=[]),t._modified.push("following")}serialize(t){var e;if(0===(null===(e=t._modified)||void 0===e?void 0:e.length))return;const n={"@behaviors":[]};for(const r in t._modified)"following"===r&&(n["@behaviors"].push(Et),n[Et]={subscriptors:t.following});return n}updateResource(t){const e=this.serialize(t);if(e)return this.api.post(t.url,e,!0,void 0,"application/json",!1).pipe(Object(z.a)(t=>new Gt(t)))}patchResource(t,e){const n=new Jt(e,t);return this.api.patch(t.url,n.payload,!0,void 0,!1)}patchBrowseResource(t,e){const n=new Jt(e);return this.api.patch(t["@id"],n.payload,!0,void 0,!1)}patchResourceThumbnail(t,e,n,r,s){const i=this.api.uploadFile(t+"/@upload"+e,n,r,s),o=this.api.patch(t,{thumbnail:e},!0,void 0,!1);return Object(Hn.a)([i,o])}deleteResources(t){for(const e of t)this.deleteResource(e.url).subscribe()}searchParagraph(t,e){return this.api.get(t.url+"/@paragraphs?q="+e,!0,void 0).pipe(Object(z.a)(t=>(t.results&&(t.results=t.results.map(t=>new Vt(t))),t)))}toggleLabelOnSelectedResources(t){}getEditToken(t,e,n,r){let s="";return s=t?t.url+qM:this.state.getStashUrl()+qM,s+=n?"?"+e+"=create":"?"+e+"=edit",r&&(s+="&id="+r),this.api.get(s,!0,void 0).pipe(Object(z.a)(t=>t))}getResources(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=20);let s=this.state.getStashUrl();return null==s?Object(L.a)("Not in stash"):(s+="/@elements?page="+t,s+="&page_size="+e,n&&(s+="&include="+n.join(",")),r&&(s+="&exclude="+r.join(",")),this.api.get(s,!0,void 0).pipe(Object(z.a)(t=>new qt(t))))}browseResources(t=20,e,n,r,s,i,o,a){let l=this.state.getStashUrl();return null==l?Object(L.a)("Not in stash"):(l+="/@browse?_size="+t,e&&(l+="&_from="+e),n&&r&&("desc"===r?l+="&_sort_des="+n:"asc"===r&&(l+="&_sort_asc="+n)),s&&(l+="&title="+encodeURIComponent(s)),i&&(l+="&status="+i),o&&o.length>0&&(l+="&classifications="+o[0]),a&&a.length>0&&(l+="&icon="+a[0]),this.api.get(l,!0,void 0,!1))}getPageUrl(t,e){return`${t.url}/@page/${Ot}/${e}`}}return t.\u0275fac=function(e){return new(e||t)(tt.Zb(P.a),tt.Zb(he.e),tt.Zb(Mn))},t.\u0275prov=tt.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var KM=n("J66h"),YM=n("GBY4"),XM=n.n(YM);function JM(t){return(JM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tL(t,e){return!e||"object"!==JM(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function eL(t){var e="function"==typeof Map?new Map:void 0;return(eL=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return nL(t,arguments,iL(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),sL(n,t)})(t)}function nL(t,e,n){return(nL=rL()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var s=new(Function.bind.apply(t,r));return n&&sL(s,n.prototype),s}).apply(null,arguments)}function rL(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function sL(t,e){return(sL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function iL(t){return(iL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sL(t,e)}(r,t);var e,n=(e=r,function(){var t,n=iL(e);if(rL()){var r=iL(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return tL(this,t)});function r(t){var e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(QM(this,r),(e=n.call(this,t)).originalRequest=i,e.originalResponse=o,e.causingError=s,null!=s&&(t+=", caused by ".concat(s.toString())),null!=i){var a=i.getHeader("X-Request-ID")||"n/a",l=i.getMethod(),u=i.getURL(),c=o?o.getStatus():"n/a",h=o?o.getBody()||"":"n/a";t+=", originated from request (method: ".concat(l,", url: ").concat(u,", response code: ").concat(c,", response text: ").concat(h,", request id: ").concat(a,")")}return e.message=t,e}return r}(eL(Error)),aL=!1;function lL(){aL=!0}function uL(t){aL&&console.log(t)}function cL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function hL(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cL(Object(n),!0).forEach(function(e){dL(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cL(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function dL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var fL=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"resume"in n&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=n,this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var e,n,r;return e=t,r=[{key:"terminate",value:function(e,n){if(arguments.length>1&&"function"==typeof arguments[arguments.length-1])throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");void 0===n&&(n={});var r=bL("DELETE",e,n);return yL(r,null,n).then(function(t){if(204!==t.getStatus())throw new oL("tus: unexpected response while terminating upload",null,r,t)}).catch(function(s){if(s instanceof oL||(s=new oL("tus: failed to terminate upload",s,r,null)),!vL(s,0,n))throw s;var i=n.retryDelays[0],o=n.retryDelays.slice(1),a=hL({},n,{retryDelays:o});return new Promise(function(t){return setTimeout(t,i)}).then(function(){return t.terminate(e,a)})})}}],(n=[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then(function(e){return t._urlStorage.findUploadsByFingerprint(e)})}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,e=this.file;if(e)if(this.options.endpoint||this.options.uploadUrl){var n=this.options.retryDelays;null==n||"[object Array]"===Object.prototype.toString.call(n)?(this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach(function(e){t.options[e]&&t._emitError(new Error("tus: cannot use the ".concat(e," option when parallelUploads is enabled")))}),this.options.fingerprint(e,this.options).then(function(n){return uL(null==n?"No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.":"Calculated fingerprint: ".concat(n)),t._fingerprint=n,t._source?t._source:t.options.fileReader.openFile(e,t.options.chunkSize)}).then(function(e){t._source=e,t.options.parallelUploads>1||null!=t._parallelUploadUrls?t._startParallelUpload():t._startSingleUpload()}).catch(function(e){t._emitError(e)})):this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var e=this,n=this._size=this._source.size,r=0;this._parallelUploads=[];var s=function(t,e,n){for(var r=Math.floor(t/e),s=[],i=0;i<e;i++)s.push({start:r*i,end:r*(i+1)});return s[e-1].end=t,n&&s.forEach(function(t,e){t.uploadUrl=n[e]||null}),s}(this._source.size,null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,this._parallelUploadUrls);this._parallelUploadUrls=new Array(s.length);var i,o=s.map(function(i,o){var a=0;return e._source.slice(i.start,i.end).then(function(l){var u=l.value;return new Promise(function(l,c){var h=hL({},e.options,{uploadUrl:i.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,metadata:{},headers:hL({},e.options.headers,{"Upload-Concat":"partial"}),onSuccess:l,onError:c,onProgress:function(t){r=r-a+t,a=t,e._emitProgress(r,n)},_onUploadUrlAvailable:function(){e._parallelUploadUrls[o]=d.url,e._parallelUploadUrls.filter(function(t){return!!t}).length===s.length&&e._saveUploadInUrlStorage()}}),d=new t(u,h);d.start(),e._parallelUploads.push(d)})})});Promise.all(o).then(function(){(i=e._openRequest("POST",e.options.endpoint)).setHeader("Upload-Concat","final;".concat(e._parallelUploadUrls.join(" ")));var t=mL(e.options.metadata);return""!==t&&i.setHeader("Upload-Metadata",t),e._sendRequest(i,null)}).then(function(t){if(gL(t.getStatus(),200)){var n=t.getHeader("Location");null!=n?(e.url=_L(e.options.endpoint,n),uL("Created upload at ".concat(e.url)),e._emitSuccess()):e._emitHttpError(i,t,"tus: invalid or missing Location header")}else e._emitHttpError(i,t,"tus: unexpected response while creating upload")}).catch(function(t){e._emitError(t)})}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=this._source.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));return this._aborted=!1,null!=this.url?(uL("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?(uL("Resuming upload from provided URL: ".concat(this.options.url)),this.url=this.options.uploadUrl,void this._resumeUpload()):(uL("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(e){var n=this;if(arguments.length>1&&"function"==typeof arguments[1])throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return null!=this._parallelUploads&&this._parallelUploads.forEach(function(t){t.abort(e)}),null!==this._req&&(this._req.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),e&&null!=this.url?t.terminate(this.url,this.options).then(function(){return n._removeFromUrlStorage()}):Promise.resolve()}},{key:"_emitHttpError",value:function(t,e,n,r){this._emitError(new oL(n,r,t,e))}},{key:"_emitError",value:function(t){var e=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),vL(t,this._retryAttempt,this.options))){var n=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout(function(){e.start()},n))}if("function"!=typeof this.options.onError)throw t;this.options.onError(t)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(t,e){"function"==typeof this.options.onProgress&&this.options.onProgress(t,e)}},{key:"_emitChunkComplete",value:function(t,e,n){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(t,e,n)}},{key:"_createUpload",value:function(){var t=this;if(this.options.endpoint){var e=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?e.setHeader("Upload-Defer-Length",1):e.setHeader("Upload-Length",this._size);var n,r=mL(this.options.metadata);""!==r&&e.setHeader("Upload-Metadata",r),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,n=this._addChunkToRequest(e)):n=this._sendRequest(e,null),n.then(function(n){if(gL(n.getStatus(),200)){var r=n.getHeader("Location");if(null!=r){if(t.url=_L(t.options.endpoint,r),uL("Created upload at ".concat(t.url)),"function"==typeof t.options._onUploadUrlAvailable&&t.options._onUploadUrlAvailable(),0===t._size)return t._emitSuccess(),void t._source.close();t._saveUploadInUrlStorage(),t.options.uploadDataDuringCreation?t._handleUploadResponse(e,n):(t._offset=0,t._performUpload())}else t._emitHttpError(e,n,"tus: invalid or missing Location header")}else t._emitHttpError(e,n,"tus: unexpected response while creating upload")}).catch(function(n){t._emitHttpError(e,null,"tus: failed to create upload",n)})}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var t=this,e=this._openRequest("HEAD",this.url);this._sendRequest(e,null).then(function(n){var r=n.getStatus();if(!gL(r,200))return gL(r,400)&&t._removeFromUrlStorage(),423===r?void t._emitHttpError(e,n,"tus: upload is currently locked; retry later"):t.options.endpoint?(t.url=null,void t._createUpload()):void t._emitHttpError(e,n,"tus: unable to resume upload (new upload cannot be created without an endpoint)");var s=parseInt(n.getHeader("Upload-Offset"),10);if(isNaN(s))t._emitHttpError(e,n,"tus: invalid or missing offset value");else{var i=parseInt(n.getHeader("Upload-Length"),10);if(!isNaN(i)||t.options.uploadLengthDeferred){if("function"==typeof t.options._onUploadUrlAvailable&&t.options._onUploadUrlAvailable(),s===i)return t._emitProgress(i,i),void t._emitSuccess();t._offset=s,t._performUpload()}else t._emitHttpError(e,n,"tus: invalid or missing length value")}}).catch(function(n){t._emitHttpError(e,null,"tus: failed to resume upload",n)})}},{key:"_performUpload",value:function(){var t,e=this;this._aborted||(this.options.overridePatchMethod?(t=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):t=this._openRequest("PATCH",this.url),t.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(t).then(function(n){gL(n.getStatus(),200)?e._handleUploadResponse(t,n):e._emitHttpError(t,n,"tus: unexpected response while uploading chunk")}).catch(function(n){e._aborted||e._emitHttpError(t,null,"tus: failed to upload chunk at offset ".concat(e._offset),n)}))}},{key:"_addChunkToRequest",value:function(t){var e=this,n=this._offset,r=this._offset+this.options.chunkSize;return t.setProgressHandler(function(t){e._emitProgress(n+t,e._size)}),t.setHeader("Content-Type","application/offset+octet-stream"),(r===1/0||r>this._size)&&!this.options.uploadLengthDeferred&&(r=this._size),this._source.slice(n,r).then(function(n){var r=n.value;return e.options.uploadLengthDeferred&&n.done&&(e._size=e._offset+(r&&r.size?r.size:0),t.setHeader("Upload-Length",e._size)),null===r?e._sendRequest(t):(e._emitProgress(e._offset,e._size),e._sendRequest(t,r))})}},{key:"_handleUploadResponse",value:function(t,e){var n=parseInt(e.getHeader("Upload-Offset"),10);if(isNaN(n))this._emitHttpError(t,e,"tus: invalid or missing offset value");else{if(this._emitProgress(n,this._size),this._emitChunkComplete(n-this._offset,n,this._size),this._offset=n,n==this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(t,e){var n=bL(t,e,this.options);return this._req=n,n}},{key:"_removeFromUrlStorage",value:function(){var t=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(e){t._emitError(e)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(this.options.storeFingerprintForResuming&&this._fingerprint){var e={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};this._parallelUploads?e.parallelUploadUrls=this._parallelUploadUrls:e.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,e).then(function(e){return t._urlStorageKey=e}).catch(function(e){t._emitError(e)})}}},{key:"_sendRequest",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return yL(t,e,this.options)}}])&&pL(e.prototype,n),r&&pL(e,r),t}();function mL(t){var e=[];for(var n in t)e.push("".concat(n," ").concat(KM.Base64.encode(t[n])));return e.join(",")}function gL(t,e){return t>=e&&t<e+100}function bL(t,e,n){var r=n.httpStack.createRequest(t,e);r.setHeader("Tus-Resumable","1.0.0");var s=n.headers||{};for(var i in s)r.setHeader(i,s[i]);if(n.addRequestId){var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)});r.setHeader("X-Request-ID",o)}return r}function yL(t,e,n){return("function"==typeof n.onBeforeRequest?Promise.resolve(n.onBeforeRequest(t)):Promise.resolve()).then(function(){return t.send(e).then(function(e){return("function"==typeof n.onAfterResponse?Promise.resolve(n.onAfterResponse(t,e)):Promise.resolve()).then(function(){return e})})})}function vL(t,e,n){if(null==n.retryDelays||e>=n.retryDelays.length||null==t.originalRequest)return!1;if(n&&"function"==typeof n.onShouldRetry)return n.onShouldRetry(t,e,n);var r,s=t.originalResponse?t.originalResponse.getStatus():0;return(!gL(s,400)||409===s||423===s)&&(r=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(r=!1),r)}function _L(t,e){return new XM.a(e,t).toString()}fL.defaultOptions={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null};var wL=fL;var xL=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,e){return Promise.resolve(null)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();var kL=!1;try{kL="localStorage"in window;var SL="tusSupport";localStorage.setItem(SL,localStorage.getItem(SL))}catch(KW){if(KW.code!==KW.SECURITY_ERR&&KW.code!==KW.QUOTA_EXCEEDED_ERR)throw KW;kL=!1}var CL=kL,IL=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"findAllUploads",value:function(){var t=this._findEntries("tus::");return Promise.resolve(t)}},{key:"findUploadsByFingerprint",value:function(t){var e=this._findEntries("tus::".concat(t,"::"));return Promise.resolve(e)}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,e){var n=Math.round(1e12*Math.random()),r="tus::".concat(t,"::").concat(n);return localStorage.setItem(r,JSON.stringify(e)),Promise.resolve(r)}},{key:"_findEntries",value:function(t){for(var e=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);if(0===r.indexOf(t))try{var s=JSON.parse(localStorage.getItem(r));s.urlStorageKey=r,e.push(s)}catch(KW){}}return e}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function EL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function TL(t,e,n){return e&&OL(t.prototype,e),n&&OL(t,n),t}var NL=function(){function t(){EL(this,t)}return TL(t,[{key:"createRequest",value:function(t,e){return new AL(t,e)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),t}(),AL=function(){function t(e,n){EL(this,t),this._xhr=new XMLHttpRequest,this._xhr.open(e,n,!0),this._method=e,this._url=n,this._headers={}}return TL(t,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,e){this._xhr.setRequestHeader(t,e),this._headers[t]=e}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(e){e.lengthComputable&&t(e.loaded)})}},{key:"send",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise(function(n,r){t._xhr.onload=function(){n(new RL(t._xhr))},t._xhr.onerror=function(t){r(t)},t._xhr.send(e)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),RL=function(){function t(e){EL(this,t),this._xhr=e}return TL(t,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),FL=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function DL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $L(t,e,n){return e&&PL(t.prototype,e),n&&PL(t,n),t}var ML=function(){function t(e){DL(this,t),this._file=e,this.size=e.size}return $L(t,[{key:"slice",value:function(t,e){if("undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova))return n=this._file.slice(t,e),new Promise(function(t,e){var r=new FileReader;r.onload=function(){var e=new Uint8Array(r.result);t({value:e})},r.onerror=function(t){e(t)},r.readAsArrayBuffer(n)});var n,r=this._file.slice(t,e);return Promise.resolve({value:r})}},{key:"close",value:function(){}}]),t}(),LL=function(){function t(e,n){DL(this,t),this._chunkSize=n,this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}return $L(t,[{key:"slice",value:function(t,e){return t<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,e)}},{key:"_readUntilEnoughDataOrDone",value:function(t,e){var n=this,r=e<=this._bufferOffset+jL(this._buffer);if(this._done||r){var s=this._getDataFromBuffer(t,e);return Promise.resolve({value:s,done:null==s&&this._done})}return this._reader.read().then(function(r){var s=r.value;return r.done?n._done=!0:n._buffer=void 0===n._buffer?s:function(t,e){if(t.concat)return t.concat(e);if(t instanceof Blob)return new Blob([t,e],{type:t.type});if(t.set){var n=new t.constructor(t.length+e.length);return n.set(t),n.set(e,t.length),n}throw new Error("Unknown data type")}(n._buffer,s),n._readUntilEnoughDataOrDone(t,e)})}},{key:"_getDataFromBuffer",value:function(t,e){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var n=0===jL(this._buffer);return this._done&&n?null:this._buffer.slice(0,e-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),t}();function jL(t){return void 0===t?0:void 0!==t.size?t.size:t.length}var zL=function(){function t(){DL(this,t)}return $L(t,[{key:"openFile",value:function(t,e){return FL()&&t&&void 0!==t.uri?(n=t.uri,new Promise(function(t,e){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){t(r.response)},r.onerror=function(t){e(t)},r.open("GET",n),r.send()})).then(function(t){return new ML(t)}).catch(function(t){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(t))}):"function"==typeof t.slice&&void 0!==t.size?Promise.resolve(new ML(t)):"function"==typeof t.read?(e=+e,isFinite(e)?Promise.resolve(new LL(t,e)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));var n}}]),t}();function BL(t){return(BL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function WL(t,e){return(WL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function HL(t,e){return!e||"object"!==BL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function GL(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(KW){return!1}}function qL(t){return(qL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ZL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function KL(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ZL(Object(n),!0).forEach(function(e){YL(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZL(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function YL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var XL=KL({},wL.defaultOptions,{httpStack:new NL,fileReader:new zL,urlStorage:CL?new IL:new xL,fingerprint:function(t,e){return FL()?Promise.resolve(function(t,e){var n=t.exif?function(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e}(JSON.stringify(t.exif)):"noexif";return["tus-rn",t.name||"noname",t.size||"nosize",n,e.endpoint].join("/")}(t,e)):Promise.resolve(["tus-br",t.name,t.type,t.size,t.lastModified,e.endpoint].join("-"))}}),JL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&WL(t,e)}(i,t);var e,n,r,s=(e=i,function(){var t,n=qL(e);if(GL()){var r=qL(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return HL(this,t)});function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return VL(this,i),e=KL({},XL,{},e),s.call(this,t,e)}return n=i,(r=[{key:"terminate",value:function(t,e,n){return e=KL({},XL,{},e),wL.terminate(t,e,n)}}])&&UL(n,r),i}(wL),QL=window,tj=QL.Blob,ej=QL.XMLHttpRequest&&tj&&"function"==typeof tj.prototype.slice;n("Kj3r"),n("/uUt"),n("/q54"),n("mrSG"),n("HDdC");const nj="/@users",rj={max:50,maxAge:36e5},sj=new $(rj),ij=new $(rj),oj=new tt.r("USER_INFO_FROM_STASH");let aj=(()=>{class t{constructor(t,e,n){this.api=t,this.state=e,this.fromStash=n}user(t){if("root"===t)return Object(j.a)({});const e=ij.get(t);if(e)return Object(j.a)(e);const n=sj.get(t);if(n)return n;const r=this.getUserInfo(),s=this.api.get(r+"?id="+t,!0,void 0,!1).pipe(Object(z.a)(e=>{const n=e;return ij.set(t,n),n}));return sj.set(t,s),s}stashUsers(t){return this.api.get(t+nj,!0,void 0,!1)}accountUsers(t){return this.api.get(t+nj,!0,void 0,!1)}setUserOnStash(t,e,n){return this.api.patch(t+nj,{add:[{user:e,role:n}],delete:[]},!0,void 0,!1)}setUserOnAccount(t,e,n){return this.api.patch(t+nj,{add:[{user:e,role:n}],delete:[]},!0,void 0,!1)}delUserOnStash(t,e,n){return this.api.patch(t+nj,{add:[],delete:[{user:e,role:n}]},!0,void 0,!1)}delUserOnAccount(t,e,n){return this.api.patch(t+nj,{add:[],delete:[{user:e,role:n}]},!0,void 0,!1)}searchUsers(t,e=!1){let n=this.state.getContextUrl(e);return n+="/@searchusers",t&&(n+="?term="+t),n?this.api.get(n,!0,void 0,!1).pipe(Object(z.a)(t=>{const e=t;for(const n of e.items)ij.set(n.id,n);return e})):Object(j.a)({})}getUserInfo(){var t,e;let n;return n=this.fromStash?null===(t=this.state.getStash())||void 0===t?void 0:t.url:null===(e=this.state.getAccount())||void 0===e?void 0:e.url,n+="/@user",n}addableUser(t){return this.api.get(t+="/@addable",!0,void 0,!1)}addUserToStash(t,e,n){t+="/@invite";const r={email:e};return n&&(r.role=n),this.api.post(t,r,!0,void 0,void 0,!1)}setPassword(t){return this.api.post("/@setpassword",{password:t},!0,void 0,void 0,!0)}}return t.\u0275fac=function(e){return new(e||t)(tt.Zb(P.a),tt.Zb(Mn),tt.Zb(oj,8))},t.\u0275prov=tt.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new $({max:50,maxAge:36e5}),n("IheW");var lj,uj,cj=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};1===(lj=cj).length&&(uj=lj,lj=function(t,e){return cj(uj(t),e)}),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var hj={value:function(){}};function dj(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new pj(r)}function pj(t){this._=t}function fj(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function mj(t,e){for(var n,r=0,s=t.length;r<s;++r)if((n=t[r]).name===e)return n.value}function gj(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=hj,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}pj.prototype=dj.prototype={constructor:pj,on:function(t,e){var n,r=this._,s=fj(t+"",r),i=-1,o=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<o;)if(n=(t=s[i]).type)r[n]=gj(r[n],t.name,e);else if(null==e)for(n in r)r[n]=gj(r[n],t.name,null);return this}for(;++i<o;)if((n=(t=s[i]).type)&&(n=mj(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new pj(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,s=new Array(n),i=0;i<n;++i)s[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,s)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,i=r.length;s<i;++s)r[s].value.apply(e,n)}};var bj=dj;function yj(){}var vj=function(t){return null==t?yj:function(){return this.querySelector(t)}};function _j(){return[]}var wj=function(t){return null==t?_j:function(){return this.querySelectorAll(t)}},xj=function(t){return function(){return this.matches(t)}},kj=function(t){return new Array(t.length)};function Sj(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Cj(t,e,n,r,s,i){for(var o,a=0,l=e.length,u=i.length;a<u;++a)(o=e[a])?(o.__data__=i[a],r[a]=o):n[a]=new Sj(t,i[a]);for(;a<l;++a)(o=e[a])&&(s[a]=o)}function Ij(t,e,n,r,s,i,o){var a,l,u,c={},h=e.length,d=i.length,p=new Array(h);for(a=0;a<h;++a)(l=e[a])&&(p[a]=u="$"+o.call(l,l.__data__,a,e),u in c?s[a]=l:c[u]=l);for(a=0;a<d;++a)(l=c[u="$"+o.call(t,i[a],a,i)])?(r[a]=l,l.__data__=i[a],c[u]=null):n[a]=new Sj(t,i[a]);for(a=0;a<h;++a)(l=e[a])&&c[p[a]]===l&&(s[a]=l)}function Ej(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Sj.prototype={constructor:Sj,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Oj="http://www.w3.org/1999/xhtml",Tj={svg:"http://www.w3.org/2000/svg",xhtml:Oj,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Nj=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Tj.hasOwnProperty(e)?{space:Tj[e],local:t}:t};function Aj(t){return function(){this.removeAttribute(t)}}function Rj(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fj(t,e){return function(){this.setAttribute(t,e)}}function Dj(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Pj(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function $j(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var Mj=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Lj(t){return function(){this.style.removeProperty(t)}}function jj(t,e,n){return function(){this.style.setProperty(t,e,n)}}function zj(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Bj(t,e){return t.style.getPropertyValue(e)||Mj(t).getComputedStyle(t,null).getPropertyValue(e)}function Vj(t){return function(){delete this[t]}}function Uj(t,e){return function(){this[t]=e}}function Wj(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Hj(t){return t.trim().split(/^|\s+/)}function Gj(t){return t.classList||new qj(t)}function qj(t){this._node=t,this._names=Hj(t.getAttribute("class")||"")}function Zj(t,e){for(var n=Gj(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function Kj(t,e){for(var n=Gj(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function Yj(t){return function(){Zj(this,t)}}function Xj(t){return function(){Kj(this,t)}}function Jj(t,e){return function(){(e.apply(this,arguments)?Zj:Kj)(this,t)}}function Qj(){this.textContent=""}function tz(t){return function(){this.textContent=t}}function ez(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function nz(){this.innerHTML=""}function rz(t){return function(){this.innerHTML=t}}function sz(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function iz(){this.nextSibling&&this.parentNode.appendChild(this)}function oz(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function az(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Oj&&e.documentElement.namespaceURI===Oj?e.createElement(t):e.createElementNS(n,t)}}function lz(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}qj.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var uz=function(t){var e=Nj(t);return(e.local?lz:az)(e)};function cz(){return null}function hz(){var t=this.parentNode;t&&t.removeChild(this)}function dz(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pz(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var fz={},mz=null;function gz(t,e,n){return t=bz(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function bz(t,e,n){return function(r){var s=mz;mz=r;try{t.call(this,this.__data__,e,n)}finally{mz=s}}}function yz(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function vz(t){return function(){var e=this.__on;if(e){for(var n,r=0,s=-1,i=e.length;r<i;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++s]=n:this.removeEventListener(n.type,n.listener,n.capture);++s?e.length=s:delete this.__on}}}function _z(t,e,n){var r=fz.hasOwnProperty(t.type)?gz:bz;return function(s,i,o){var a,l=this.__on,u=r(e,i,o);if(l)for(var c=0,h=l.length;c<h;++c)if((a=l[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=n),void(a.value=e);this.addEventListener(t.type,u,n),a={type:t.type,name:t.name,value:e,listener:u,capture:n},l?l.push(a):this.__on=[a]}}function wz(t,e,n){var r=Mj(t),s=r.CustomEvent;"function"==typeof s?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function xz(t,e){return function(){return wz(this,t,e)}}function kz(t,e){return function(){return wz(this,t,e.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(fz={mouseenter:"mouseover",mouseleave:"mouseout"}));var Sz=[null];function Cz(t,e){this._groups=t,this._parents=e}function Iz(){return new Cz([[document.documentElement]],Sz)}Cz.prototype=Iz.prototype={constructor:Cz,select:function(t){"function"!=typeof t&&(t=vj(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var i,o,a=e[s],l=a.length,u=r[s]=new Array(l),c=0;c<l;++c)(i=a[c])&&(o=t.call(i,i.__data__,c,a))&&("__data__"in i&&(o.__data__=i.__data__),u[c]=o);return new Cz(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=wj(t));for(var e=this._groups,n=e.length,r=[],s=[],i=0;i<n;++i)for(var o,a=e[i],l=a.length,u=0;u<l;++u)(o=a[u])&&(r.push(t.call(o,o.__data__,u,a)),s.push(o));return new Cz(r,s)},filter:function(t){"function"!=typeof t&&(t=xj(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var i,o=e[s],a=o.length,l=r[s]=[],u=0;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o)&&l.push(i);return new Cz(r,this._parents)},data:function(t,e){if(!t)return f=new Array(this.size()),c=-1,this.each(function(t){f[++c]=t}),f;var n,r=e?Ij:Cj,s=this._parents,i=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=i.length,a=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var h=s[c],d=i[c],p=d.length,f=t.call(h,h&&h.__data__,c,s),m=f.length,g=l[c]=new Array(m),b=a[c]=new Array(m);r(h,d,g,b,u[c]=new Array(p),f,e);for(var y,v,_=0,w=0;_<m;++_)if(y=g[_]){for(_>=w&&(w=_+1);!(v=b[w])&&++w<m;);y._next=v||null}}return(a=new Cz(a,s))._enter=l,a._exit=u,a},enter:function(){return new Cz(this._enter||this._groups.map(kj),this._parents)},exit:function(){return new Cz(this._exit||this._groups.map(kj),this._parents)},join:function(t,e,n){var r=this.enter(),s=this,i=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(s=e(s)),null==n?i.remove():n(i),r&&s?r.merge(s).order():s},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,s=Math.min(r,n.length),i=new Array(r),o=0;o<s;++o)for(var a,l=e[o],u=n[o],c=l.length,h=i[o]=new Array(c),d=0;d<c;++d)(a=l[d]||u[d])&&(h[d]=a);for(;o<r;++o)i[o]=e[o];return new Cz(i,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,s=t[e],i=s.length-1,o=s[i];--i>=0;)(r=s[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Ej);for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o,a=n[i],l=a.length,u=s[i]=new Array(l),c=0;c<l;++c)(o=a[c])&&(u[c]=o);u.sort(e)}return new Cz(s,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s,i=e[n],o=0,a=i.length;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this},attr:function(t,e){var n=Nj(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Rj:Aj:"function"==typeof e?n.local?$j:Pj:n.local?Dj:Fj)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Lj:"function"==typeof e?zj:jj)(t,e,null==n?"":n)):Bj(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Vj:"function"==typeof e?Wj:Uj)(t,e)):this.node()[t]},classed:function(t,e){var n=Hj(t+"");if(arguments.length<2){for(var r=Gj(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each(("function"==typeof e?Jj:e?Yj:Xj)(n,e))},text:function(t){return arguments.length?this.each(null==t?Qj:("function"==typeof t?ez:tz)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?nz:("function"==typeof t?sz:rz)(t)):this.node().innerHTML},raise:function(){return this.each(iz)},lower:function(){return this.each(oz)},append:function(t){var e="function"==typeof t?t:uz(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:uz(t),r=null==e?cz:"function"==typeof e?e:vj(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(hz)},clone:function(t){return this.select(t?pz:dz)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,s,i=yz(t+""),o=i.length;if(!(arguments.length<2)){for(a=e?_z:vz,null==n&&(n=!1),r=0;r<o;++r)this.each(a(i[r],e,n));return this}var a=this.node().__on;if(a)for(var l,u=0,c=a.length;u<c;++u)for(r=0,l=a[u];r<o;++r)if((s=i[r]).type===l.type&&s.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?kz:xz)(t,e))}};var Ez=Iz,Oz=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function Tz(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Nz(){}var Az=.7,Rz=1/Az,Fz="\\s*([+-]?\\d+)\\s*",Dz="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pz="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$z=/^#([0-9a-f]{3,8})$/,Mz=new RegExp("^rgb\\("+[Fz,Fz,Fz]+"\\)$"),Lz=new RegExp("^rgb\\("+[Pz,Pz,Pz]+"\\)$"),jz=new RegExp("^rgba\\("+[Fz,Fz,Fz,Dz]+"\\)$"),zz=new RegExp("^rgba\\("+[Pz,Pz,Pz,Dz]+"\\)$"),Bz=new RegExp("^hsl\\("+[Dz,Pz,Pz]+"\\)$"),Vz=new RegExp("^hsla\\("+[Dz,Pz,Pz,Dz]+"\\)$"),Uz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Wz(){return this.rgb().formatHex()}function Hz(){return this.rgb().formatRgb()}function Gz(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$z.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?qz(e):3===n?new Xz(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Zz(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Zz(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Mz.exec(t))?new Xz(e[1],e[2],e[3],1):(e=Lz.exec(t))?new Xz(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=jz.exec(t))?Zz(e[1],e[2],e[3],e[4]):(e=zz.exec(t))?Zz(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Bz.exec(t))?eB(e[1],e[2]/100,e[3]/100,1):(e=Vz.exec(t))?eB(e[1],e[2]/100,e[3]/100,e[4]):Uz.hasOwnProperty(t)?qz(Uz[t]):"transparent"===t?new Xz(NaN,NaN,NaN,0):null}function qz(t){return new Xz(t>>16&255,t>>8&255,255&t,1)}function Zz(t,e,n,r){return r<=0&&(t=e=n=NaN),new Xz(t,e,n,r)}function Kz(t){return t instanceof Nz||(t=Gz(t)),t?new Xz((t=t.rgb()).r,t.g,t.b,t.opacity):new Xz}function Yz(t,e,n,r){return 1===arguments.length?Kz(t):new Xz(t,e,n,null==r?1:r)}function Xz(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Jz(){return"#"+tB(this.r)+tB(this.g)+tB(this.b)}function Qz(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function tB(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function eB(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new rB(t,e,n,r)}function nB(t){if(t instanceof rB)return new rB(t.h,t.s,t.l,t.opacity);if(t instanceof Nz||(t=Gz(t)),!t)return new rB;if(t instanceof rB)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(o=e===i?(n-r)/a+6*(n<r):n===i?(r-e)/a+2:(e-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new rB(o,a,l,t.opacity)}function rB(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function sB(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function iB(t,e,n,r,s){var i=t*t,o=i*t;return((1-3*t+3*i-o)*e+(4-6*i+3*o)*n+(1+3*t+3*i-3*o)*r+o*s)/6}Oz(Nz,Gz,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Wz,formatHex:Wz,formatHsl:function(){return nB(this).formatHsl()},formatRgb:Hz,toString:Hz}),Oz(Xz,Yz,Tz(Nz,{brighter:function(t){return t=null==t?Rz:Math.pow(Rz,t),new Xz(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Az:Math.pow(Az,t),new Xz(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jz,formatHex:Jz,formatRgb:Qz,toString:Qz})),Oz(rB,function(t,e,n,r){return 1===arguments.length?nB(t):new rB(t,e,n,null==r?1:r)},Tz(Nz,{brighter:function(t){return t=null==t?Rz:Math.pow(Rz,t),new rB(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Az:Math.pow(Az,t),new rB(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Xz(sB(t>=240?t-240:t+120,s,r),sB(t,s,r),sB(t<120?t+240:t-120,s,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var oB=function(t){return function(){return t}};function aB(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):oB(isNaN(t)?e:t)}var lB=function t(e){var n=function(t){return 1==(t=+t)?aB:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):oB(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=Yz(t)).r,(e=Yz(e)).r),s=n(t.g,e.g),i=n(t.b,e.b),o=aB(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=s(e),t.b=i(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function uB(t){return function(e){var n,r,s=e.length,i=new Array(s),o=new Array(s),a=new Array(s);for(n=0;n<s;++n)r=Yz(e[n]),i[n]=r.r||0,o[n]=r.g||0,a[n]=r.b||0;return i=t(i),o=t(o),a=t(a),r.opacity=1,function(t){return r.r=i(t),r.g=o(t),r.b=a(t),r+""}}}uB(function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),s=t[r],i=t[r+1];return iB((n-r/e)*e,r>0?t[r-1]:2*s-i,s,i,r<e-1?t[r+2]:2*i-s)}}),uB(function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e);return iB((n-r/e)*e,t[(r+e-1)%e],t[r%e],t[(r+1)%e],t[(r+2)%e])}});var cB,hB,dB=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},pB=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fB=new RegExp(pB.source,"g"),mB=function(t,e){var n,r,s,i=pB.lastIndex=fB.lastIndex=0,o=-1,a=[],l=[];for(t+="",e+="";(n=pB.exec(t))&&(r=fB.exec(e));)(s=r.index)>i&&(s=e.slice(i,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:dB(n,r)})),i=fB.lastIndex;return i<e.length&&(s=e.slice(i),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)a[(n=l[r]).i]=n.x(t);return a.join("")})},gB=0,bB=0,yB=0,vB=0,_B=0,wB=0,xB="object"==typeof performance&&performance.now?performance:Date,kB="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function SB(){return _B||(kB(CB),_B=xB.now()+wB)}function CB(){_B=0}function IB(){this._call=this._time=this._next=null}function EB(t,e,n){var r=new IB;return r.restart(t,e,n),r}function OB(){_B=(vB=xB.now())+wB,gB=bB=0;try{!function(){SB(),++gB;for(var t,e=cB;e;)(t=_B-e._time)>=0&&e._call.call(null,t),e=e._next;--gB}()}finally{gB=0,function(){for(var t,e,n=cB,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:cB=e);hB=t,NB(r)}(),_B=0}}function TB(){var t=xB.now(),e=t-vB;e>1e3&&(wB-=e,vB=t)}function NB(t){gB||(bB&&(bB=clearTimeout(bB)),t-_B>24?(t<1/0&&(bB=setTimeout(OB,t-xB.now()-wB)),yB&&(yB=clearInterval(yB))):(yB||(vB=xB.now(),yB=setInterval(TB,1e3)),gB=1,kB(OB)))}IB.prototype=EB.prototype={constructor:IB,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?SB():+n)+(null==e?0:+e),this._next||hB===this||(hB?hB._next=this:cB=this,hB=this),this._call=t,this._time=n,NB()},stop:function(){this._call&&(this._call=null,this._time=1/0,NB())}};var AB=function(t,e,n){var r=new IB;return r.restart(function(n){r.stop(),t(n+e)},e=null==e?0:+e,n),r},RB=bj("start","end","cancel","interrupt"),FB=[],DB=function(t,e,n,r,s,i){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,s=t.__transition;function i(l){var u,c,h,d;if(1!==n.state)return a();for(u in s)if((d=s[u]).name===n.name){if(3===d.state)return AB(i);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete s[u]):+u<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete s[u])}if(AB(function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function o(e){for(var s=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),i=-1,o=r.length;++i<o;)r[i].call(t,s);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var r in n.state=6,n.timer.stop(),delete s[e],s)return;delete t.__transition}s[e]=n,n.timer=EB(function(t){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:s,on:RB,tween:FB,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})};function PB(t,e){var n=MB(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function $B(t,e){var n=MB(t,e);if(n.state>3)throw new Error("too late; already running");return n}function MB(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var LB,jB,zB,BB,VB=180/Math.PI,UB={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},WB=function(t,e,n,r,s,i){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(e,t)*VB,skewX:Math.atan(l)*VB,scaleX:o,scaleY:a}};function HB(t,e,n,r){function s(t){return t.length?t.pop()+" ":""}return function(i,o){var a=[],l=[];return i=t(i),o=t(o),function(t,r,s,i,o,a){if(t!==s||r!==i){var l=o.push("translate(",null,e,null,n);a.push({i:l-4,x:dB(t,s)},{i:l-2,x:dB(r,i)})}else(s||i)&&o.push("translate("+s+e+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,a,l),function(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(s(n)+"rotate(",null,r)-2,x:dB(t,e)})):e&&n.push(s(n)+"rotate("+e+r)}(i.rotate,o.rotate,a,l),function(t,e,n,i){t!==e?i.push({i:n.push(s(n)+"skewX(",null,r)-2,x:dB(t,e)}):e&&n.push(s(n)+"skewX("+e+r)}(i.skewX,o.skewX,a,l),function(t,e,n,r,i,o){if(t!==n||e!==r){var a=i.push(s(i)+"scale(",null,",",null,")");o.push({i:a-4,x:dB(t,n)},{i:a-2,x:dB(e,r)})}else 1===n&&1===r||i.push(s(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,a,l),i=o=null,function(t){for(var e,n=-1,r=l.length;++n<r;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var GB=HB(function(t){return"none"===t?UB:(LB||(LB=document.createElement("DIV"),jB=document.documentElement,zB=document.defaultView),LB.style.transform=t,t=zB.getComputedStyle(jB.appendChild(LB),null).getPropertyValue("transform"),jB.removeChild(LB),t=t.slice(7,-1).split(","),WB(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),qB=HB(function(t){return null==t?UB:(BB||(BB=document.createElementNS("http://www.w3.org/2000/svg","g")),BB.setAttribute("transform",t),(t=BB.transform.baseVal.consolidate())?WB((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):UB)},", ",")",")");function ZB(t,e){var n,r;return function(){var s=$B(this,t),i=s.tween;if(i!==n)for(var o=0,a=(r=n=i).length;o<a;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}s.tween=r}}function KB(t,e,n){var r,s;if("function"!=typeof n)throw new Error;return function(){var i=$B(this,t),o=i.tween;if(o!==r){s=(r=o).slice();for(var a={name:e,value:n},l=0,u=s.length;l<u;++l)if(s[l].name===e){s[l]=a;break}l===u&&s.push(a)}i.tween=s}}function YB(t,e,n){var r=t._id;return t.each(function(){var t=$B(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return MB(t,r).value[e]}}var XB=function(t,e){var n;return("number"==typeof e?dB:e instanceof Gz?lB:(n=Gz(e))?(e=n,lB):mB)(t,e)};function JB(t){return function(){this.removeAttribute(t)}}function QB(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tV(t,e,n){var r,s,i=n+"";return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function eV(t,e,n){var r,s,i=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function nV(t,e,n){var r,s,i;return function(){var o,a,l=n(this);if(null!=l)return(o=this.getAttribute(t))===(a=l+"")?null:o===r&&a===s?i:(s=a,i=e(r=o,l));this.removeAttribute(t)}}function rV(t,e,n){var r,s,i;return function(){var o,a,l=n(this);if(null!=l)return(o=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:o===r&&a===s?i:(s=a,i=e(r=o,l));this.removeAttributeNS(t.space,t.local)}}function sV(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function iV(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function oV(t,e){var n,r;function s(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&iV(t,s)),n}return s._value=e,s}function aV(t,e){var n,r;function s(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&sV(t,s)),n}return s._value=e,s}function lV(t,e){return function(){PB(this,t).delay=+e.apply(this,arguments)}}function uV(t,e){return e=+e,function(){PB(this,t).delay=e}}function cV(t,e){return function(){$B(this,t).duration=+e.apply(this,arguments)}}function hV(t,e){return e=+e,function(){$B(this,t).duration=e}}function dV(t,e){if("function"!=typeof e)throw new Error;return function(){$B(this,t).ease=e}}function pV(t,e,n){var r,s,i=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?PB:$B;return function(){var o=i(this,t),a=o.on;a!==r&&(s=(r=a).copy()).on(e,n),o.on=s}}var fV=Ez.prototype.constructor;function mV(t){return function(){this.style.removeProperty(t)}}function gV(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function bV(t,e,n){var r,s;function i(){var i=e.apply(this,arguments);return i!==s&&(r=(s=i)&&gV(t,i,n)),r}return i._value=e,i}function yV(t){return function(e){this.textContent=t.call(this,e)}}function vV(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&yV(r)),e}return r._value=t,r}var _V=0;function wV(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function xV(){return++_V}var kV=Ez.prototype;wV.prototype=(function(t){return Ez().transition(t)}).prototype={constructor:wV,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=vj(t));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var a,l,u=r[o],c=u.length,h=i[o]=new Array(c),d=0;d<c;++d)(a=u[d])&&(l=t.call(a,a.__data__,d,u))&&("__data__"in a&&(l.__data__=a.__data__),h[d]=l,DB(h[d],e,n,d,h,MB(a,n)));return new wV(i,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=wj(t));for(var r=this._groups,s=r.length,i=[],o=[],a=0;a<s;++a)for(var l,u=r[a],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var d,p=t.call(l,l.__data__,h,u),f=MB(l,n),m=0,g=p.length;m<g;++m)(d=p[m])&&DB(d,e,n,m,p,f);i.push(p),o.push(l)}return new wV(i,o,e,n)},filter:function(t){"function"!=typeof t&&(t=xj(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var i,o=e[s],a=o.length,l=r[s]=[],u=0;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o)&&l.push(i);return new wV(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=Math.min(r,n.length),i=new Array(r),o=0;o<s;++o)for(var a,l=e[o],u=n[o],c=l.length,h=i[o]=new Array(c),d=0;d<c;++d)(a=l[d]||u[d])&&(h[d]=a);for(;o<r;++o)i[o]=e[o];return new wV(i,this._parents,this._name,this._id)},selection:function(){return new fV(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=xV(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o,a=r[i],l=a.length,u=0;u<l;++u)if(o=a[u]){var c=MB(o,e);DB(o,t,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new wV(r,this._parents,t,n)},call:kV.call,nodes:kV.nodes,node:kV.node,size:kV.size,empty:kV.empty,each:kV.each,on:function(t,e){var n=this._id;return arguments.length<2?MB(this.node(),n).on.on(t):this.each(pV(n,t,e))},attr:function(t,e){var n=Nj(t),r="transform"===n?qB:XB;return this.attrTween(t,"function"==typeof e?(n.local?rV:nV)(n,r,YB(this,"attr."+t,e)):null==e?(n.local?QB:JB)(n):(n.local?eV:tV)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Nj(t);return this.tween(n,(r.local?oV:aV)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?GB:XB;return null==e?this.styleTween(t,function(t,e){var n,r,s;return function(){var i=Bj(this,t),o=(this.style.removeProperty(t),Bj(this,t));return i===o?null:i===n&&o===r?s:s=e(n=i,r=o)}}(t,r)).on("end.style."+t,mV(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,s,i;return function(){var o=Bj(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=Bj(this,t)),o===l?null:o===r&&l===s?i:(s=l,i=e(r=o,a))}}(t,r,YB(this,"style."+t,e))).each(function(t,e){var n,r,s,i,o="style."+e,a="end."+o;return function(){var l=$B(this,t),u=l.on,c=null==l.value[o]?i||(i=mV(e)):void 0;u===n&&s===c||(r=(n=u).copy()).on(a,s=c),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,s,i=n+"";return function(){var o=Bj(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,bV(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(YB(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,vV(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,s=MB(this.node(),n).tween,i=0,o=s.length;i<o;++i)if((r=s[i]).name===t)return r.value;return null}return this.each((null==e?ZB:KB)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?lV:uV)(e,t)):MB(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?cV:hV)(e,t)):MB(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(dV(e,t)):MB(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var a={value:o},l={value:function(){0==--s&&i()}};n.each(function(){var n=$B(this,r),s=n.on;s!==t&&((e=(t=s).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e})})}};var SV={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function CV(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return SV.time=SB(),SV;return n}function IV(t){return{type:t}}Ez.prototype.interrupt=function(t){return this.each(function(){!function(t,e){var n,r,s,i=t.__transition,o=!0;if(i){for(s in e=null==e?null:e+"",i)(n=i[s]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete i[s]):o=!1;o&&delete t.__transition}}(this,t)})},Ez.prototype.transition=function(t){var e,n;t instanceof wV?(e=t._id,t=t._name):(e=xV(),(n=SV).time=SB(),t=null==t?null:t+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o,a=r[i],l=a.length,u=0;u<l;++u)(o=a[u])&&DB(o,t,e,u,a,n||CV(o,e));return new wV(r,this._parents,t,e)},["w","e"].map(IV),["n","s"].map(IV),["n","w","e","s","nw","ne","sw","se"].map(IV),Math,Math,Math,Math;var EV=Math.PI,OV=2*EV,TV=1e-6,NV=OV-TV;function AV(){this._x0=this._y0=this._x1=this._y1=null,this._=""}AV.prototype=(function(){return new AV}).prototype={constructor:AV,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,s,i){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+s)+","+(this._y1=+i)},arcTo:function(t,e,n,r,s){var i=this._x1,o=this._y1,a=(n=+n)-(t=+t),l=(r=+r)-(e=+e),u=i-t,c=o-e,h=u*u+c*c;if((s=+s)<0)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>TV)if(Math.abs(c*a-l*u)>TV&&s){var d=n-i,p=r-o,f=a*a+l*l,m=d*d+p*p,g=Math.sqrt(f),b=Math.sqrt(h),y=s*Math.tan((EV-Math.acos((f+h-m)/(2*g*b)))/2),v=y/b,_=y/g;Math.abs(v-1)>TV&&(this._+="L"+(t+v*u)+","+(e+v*c)),this._+="A"+s+","+s+",0,0,"+ +(c*d>u*p)+","+(this._x1=t+_*a)+","+(this._y1=e+_*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,s,i){t=+t,e=+e,i=!!i;var o=(n=+n)*Math.cos(r),a=n*Math.sin(r),l=t+o,u=e+a,c=1^i,h=i?r-s:s-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>TV||Math.abs(this._y1-u)>TV)&&(this._+="L"+l+","+u),n&&(h<0&&(h=h%OV+OV),h>NV?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):h>TV&&(this._+="A"+n+","+n+",0,"+ +(h>=EV)+","+c+","+(this._x1=t+n*Math.cos(s))+","+(this._y1=e+n*Math.sin(s))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var RV="$";function FV(){}function DV(t,e){var n=new FV;if(t instanceof FV)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,s=-1,i=t.length;if(null==e)for(;++s<i;)n.set(s,t[s]);else for(;++s<i;)n.set(e(r=t[s],s,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}function PV(){}FV.prototype=DV.prototype={constructor:FV,has:function(t){return RV+t in this},get:function(t){return this[RV+t]},set:function(t,e){return this[RV+t]=e,this},remove:function(t){var e=RV+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===RV&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===RV&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===RV&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===RV&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===RV&&++t;return t},empty:function(){for(var t in this)if(t[0]===RV)return!1;return!0},each:function(t){for(var e in this)e[0]===RV&&t(this[e],e.slice(1),this)}};var $V=DV.prototype;function MV(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var s,i,o,a,l,u,c,h,d,p=t._root,f={data:r},m=t._x0,g=t._y0,b=t._x1,y=t._y1;if(!p)return t._root=f,t;for(;p.length;)if((u=e>=(i=(m+b)/2))?m=i:b=i,(c=n>=(o=(g+y)/2))?g=o:y=o,s=p,!(p=p[h=c<<1|u]))return s[h]=f,t;if(a=+t._x.call(null,p.data),l=+t._y.call(null,p.data),e===a&&n===l)return f.next=p,s?s[h]=f:t._root=f,t;do{s=s?s[h]=new Array(4):t._root=new Array(4),(u=e>=(i=(m+b)/2))?m=i:b=i,(c=n>=(o=(g+y)/2))?g=o:y=o}while((h=c<<1|u)==(d=(l>=o)<<1|a>=i));return s[d]=p,s[h]=f,t}PV.prototype=(function(t,e){var n=new PV;if(t instanceof PV)t.each(function(t){n.add(t)});else if(t){var r=-1,s=t.length;if(null==e)for(;++r<s;)n.add(t[r]);else for(;++r<s;)n.add(e(t[r],r,t))}return n}).prototype={constructor:PV,has:$V.has,add:function(t){return this[RV+(t+="")]=t,this},remove:$V.remove,clear:$V.clear,values:$V.keys,size:$V.size,empty:$V.empty,each:$V.each};var LV=function(t,e,n,r,s){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=s};function jV(t){return t[0]}function zV(t){return t[1]}function BV(t,e,n,r,s,i){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=s,this._y1=i,this._root=void 0}function VV(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var UV=(function(t,e,n){var r=new BV(null==e?jV:e,null==n?zV:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}).prototype=BV.prototype;UV.copy=function(){var t,e,n=new BV(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=VV(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var s=0;s<4;++s)(e=r.source[s])&&(e.length?t.push({source:e,target:r.target[s]=new Array(4)}):r.target[s]=VV(e));return n},UV.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return MV(this.cover(e,n),e,n,t)},UV.addAll=function(t){var e,n,r,s,i=t.length,o=new Array(i),a=new Array(i),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=r,a[n]=s,r<l&&(l=r),r>c&&(c=r),s<u&&(u=s),s>h&&(h=s));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),n=0;n<i;++n)MV(this,o[n],a[n],t[n]);return this},UV.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,s=this._x1,i=this._y1;if(isNaN(n))s=(n=Math.floor(t))+1,i=(r=Math.floor(e))+1;else{for(var o,a,l=s-n,u=this._root;n>t||t>=s||r>e||e>=i;)switch(a=(e<r)<<1|t<n,(o=new Array(4))[a]=u,u=o,l*=2,a){case 0:s=n+l,i=r+l;break;case 1:n=s-l,i=r+l;break;case 2:s=n+l,r=i-l;break;case 3:n=s-l,r=i-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=s,this._y1=i,this},UV.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},UV.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},UV.find=function(t,e,n){var r,s,i,o,a,l,u,c=this._x0,h=this._y0,d=this._x1,p=this._y1,f=[],m=this._root;for(m&&f.push(new LV(m,c,h,d,p)),null==n?n=1/0:(c=t-n,h=e-n,d=t+n,p=e+n,n*=n);l=f.pop();)if(!(!(m=l.node)||(s=l.x0)>d||(i=l.y0)>p||(o=l.x1)<c||(a=l.y1)<h))if(m.length){var g=(s+o)/2,b=(i+a)/2;f.push(new LV(m[3],g,b,o,a),new LV(m[2],s,b,g,a),new LV(m[1],g,i,o,b),new LV(m[0],s,i,g,b)),(u=(e>=b)<<1|t>=g)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-u],f[f.length-1-u]=l)}else{var y=t-+this._x.call(null,m.data),v=e-+this._y.call(null,m.data),_=y*y+v*v;if(_<n){var w=Math.sqrt(n=_);c=t-w,h=e-w,d=t+w,p=e+w,r=m.data}}return r},UV.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,s,i,o,a,l,u,c,h,d,p=this._root,f=this._x0,m=this._y0,g=this._x1,b=this._y1;if(!p)return this;if(p.length)for(;;){if((u=i>=(a=(f+g)/2))?f=a:g=a,(c=o>=(l=(m+b)/2))?m=l:b=l,e=p,!(p=p[h=c<<1|u]))return this;if(!p.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(s=p.next)&&delete p.next,r?(s?r.next=s:delete r.next,this):e?(s?e[h]=s:delete e[h],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=s,this)},UV.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},UV.root=function(){return this._root},UV.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},UV.visit=function(t){var e,n,r,s,i,o,a=[],l=this._root;for(l&&a.push(new LV(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,r=e.x0,s=e.y0,i=e.x1,o=e.y1)&&l.length){var u=(r+i)/2,c=(s+o)/2;(n=l[3])&&a.push(new LV(n,u,c,i,o)),(n=l[2])&&a.push(new LV(n,r,c,u,o)),(n=l[1])&&a.push(new LV(n,u,s,i,c)),(n=l[0])&&a.push(new LV(n,r,s,u,c))}return this},UV.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new LV(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var s=e.node;if(s.length){var i,o=e.x0,a=e.y0,l=e.x1,u=e.y1,c=(o+l)/2,h=(a+u)/2;(i=s[0])&&n.push(new LV(i,o,a,c,h)),(i=s[1])&&n.push(new LV(i,c,a,l,h)),(i=s[2])&&n.push(new LV(i,o,h,c,u)),(i=s[3])&&n.push(new LV(i,c,h,l,u))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},UV.x=function(t){return arguments.length?(this._x=t,this):this._x},UV.y=function(t){return arguments.length?(this._y=t,this):this._y},Math,Math.sqrt(5);var WV=function(){return Math.random()},HV=(function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(WV),function t(e){function n(t,n){var r,s;return t=null==t?0:+t,n=null==n?1:+n,function(){var i;if(null!=r)i=r,r=null;else do{r=2*e()-1,i=2*e()-1,s=r*r+i*i}while(!s||s>1);return t+n*i*Math.sqrt(-2*Math.log(s)/s)}}return n.source=t,n}(WV)),GV=(function t(e){function n(){var t=HV.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(WV),function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(WV));(function t(e){function n(t){var n=GV.source(e)(t);return function(){return n()/t}}return n.source=t,n})(WV),function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(WV);var qV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ZV(t){if(!(e=qV.exec(t)))throw new Error("invalid format: "+t);var e;return new KV({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function KV(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}ZV.prototype=KV.prototype,KV.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var YV,XV=Array.prototype.map;void 0===(YV={decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}).grouping||void 0===YV.thousands||XV.call(YV.grouping,Number),void 0===YV.numerals||XV.call(YV.numerals,String);var JV=new Date,QV=new Date;function tU(t,e,n,r){function s(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return t(e=new Date(+e)),e},s.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},s.range=function(n,r,i){var o,a=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;do{a.push(o=new Date(+n)),e(n,i),t(n)}while(o<n&&n<r);return a},s.filter=function(n){return tU(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(s.count=function(e,r){return JV.setTime(+e),QV.setTime(+r),t(JV),t(QV),Math.floor(n(JV,QV))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(r?function(e){return r(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}var eU=tU(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});eU.every=function(t){return isFinite(t=Math.floor(t))&&t>0?tU(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var nU=eU,rU=(tU(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),1e3),sU=6e4,iU=36e5,oU=864e5,aU=6048e5;function lU(t){return tU(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*sU)/aU})}var uU=lU(0),cU=lU(1),hU=(lU(2),lU(3),lU(4)),dU=(lU(5),lU(6),tU(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*sU)/oU},function(t){return t.getDate()-1})),pU=(tU(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*rU-t.getMinutes()*sU)},function(t,e){t.setTime(+t+e*iU)},function(t,e){return(e-t)/iU},function(t){return t.getHours()}),tU(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*rU)},function(t,e){t.setTime(+t+e*sU)},function(t,e){return(e-t)/sU},function(t){return t.getMinutes()}),tU(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*rU)},function(t,e){return(e-t)/rU},function(t){return t.getUTCSeconds()}),tU(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t}));function fU(t){return tU(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/aU})}pU.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?tU(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):pU:null};var mU=fU(0),gU=fU(1),bU=(fU(2),fU(3),fU(4)),yU=(fU(5),fU(6),tU(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/oU},function(t){return t.getUTCDate()-1})),vU=tU(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});vU.every=function(t){return isFinite(t=Math.floor(t))&&t>0?tU(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var _U=vU;var wU={"-":"",_:" ",0:"0"},xU=/[\\^$*+?|[\]().{}]/g;function kU(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(e)+s:s)}function SU(t){return t.replace(xU,"\\$&")}function CU(t){return new RegExp("^(?:"+t.map(SU).join("|")+")","i")}function IU(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function EU(t,e){return kU(t.getDate(),e,2)}function OU(t,e){return kU(t.getHours(),e,2)}function TU(t,e){return kU(t.getHours()%12||12,e,2)}function NU(t,e){return kU(1+dU.count(nU(t),t),e,3)}function AU(t,e){return kU(t.getMilliseconds(),e,3)}function RU(t,e){return AU(t,e)+"000"}function FU(t,e){return kU(t.getMonth()+1,e,2)}function DU(t,e){return kU(t.getMinutes(),e,2)}function PU(t,e){return kU(t.getSeconds(),e,2)}function $U(t){var e=t.getDay();return 0===e?7:e}function MU(t,e){return kU(uU.count(nU(t)-1,t),e,2)}function LU(t,e){var n=t.getDay();return t=n>=4||0===n?hU(t):hU.ceil(t),kU(hU.count(nU(t),t)+(4===nU(t).getDay()),e,2)}function jU(t){return t.getDay()}function zU(t,e){return kU(cU.count(nU(t)-1,t),e,2)}function BU(t,e){return kU(t.getFullYear()%100,e,2)}function VU(t,e){return kU(t.getFullYear()%1e4,e,4)}function UU(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+kU(e/60|0,"0",2)+kU(e%60,"0",2)}function WU(t,e){return kU(t.getUTCDate(),e,2)}function HU(t,e){return kU(t.getUTCHours(),e,2)}function GU(t,e){return kU(t.getUTCHours()%12||12,e,2)}function qU(t,e){return kU(1+yU.count(_U(t),t),e,3)}function ZU(t,e){return kU(t.getUTCMilliseconds(),e,3)}function KU(t,e){return ZU(t,e)+"000"}function YU(t,e){return kU(t.getUTCMonth()+1,e,2)}function XU(t,e){return kU(t.getUTCMinutes(),e,2)}function JU(t,e){return kU(t.getUTCSeconds(),e,2)}function QU(t){var e=t.getUTCDay();return 0===e?7:e}function tW(t,e){return kU(mU.count(_U(t)-1,t),e,2)}function eW(t,e){var n=t.getUTCDay();return t=n>=4||0===n?bU(t):bU.ceil(t),kU(bU.count(_U(t),t)+(4===_U(t).getUTCDay()),e,2)}function nW(t){return t.getUTCDay()}function rW(t,e){return kU(gU.count(_U(t)-1,t),e,2)}function sW(t,e){return kU(t.getUTCFullYear()%100,e,2)}function iW(t,e){return kU(t.getUTCFullYear()%1e4,e,4)}function oW(){return"+0000"}function aW(){return"%"}function lW(t){return+t}function uW(t){return Math.floor(+t/1e3)}function cW(){this._=null}function hW(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function dW(t,e){var n=e,r=e.R,s=n.U;s?s.L===n?s.L=r:s.R=r:t._=r,r.U=s,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function pW(t,e){var n=e,r=e.L,s=n.U;s?s.L===n?s.L=r:s.R=r:t._=r,r.U=s,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function fW(t){for(;t.L;)t=t.L;return t}(function(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,i=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=(CU(s),IU(s),CU(i),IU(i),CU(o),IU(o),CU(a),IU(a),CU(l),IU(l),{a:function(t){return o[t.getDay()]},A:function(t){return i[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:EU,e:EU,f:RU,H:OU,I:TU,j:NU,L:AU,m:FU,M:DU,p:function(t){return s[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:lW,s:uW,S:PU,u:$U,U:MU,V:LU,w:jU,W:zU,x:null,X:null,y:BU,Y:VU,Z:UU,"%":aW}),c={a:function(t){return o[t.getUTCDay()]},A:function(t){return i[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:WU,e:WU,f:KU,H:HU,I:GU,j:qU,L:ZU,m:YU,M:XU,p:function(t){return s[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:lW,s:uW,S:JU,u:QU,U:tW,V:eW,w:nW,W:rW,x:null,X:null,y:sW,Y:iW,Z:oW,"%":aW};function h(t,e){return function(n){var r,s,i,o=[],a=-1,l=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++a<u;)37===t.charCodeAt(a)&&(o.push(t.slice(l,a)),null!=(s=wU[r=t.charAt(++a)])?r=t.charAt(++a):s="e"===r?" ":"0",(i=e[r])&&(r=i(n,s)),o.push(r),l=a+1);return o.push(t.slice(l,a)),o.join("")}}u.x=h(n,u),u.X=h(r,u),u.c=h(e,u),c.x=h(n,c),c.X=h(r,c),c.c=h(e,c)})({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),tU(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),tU(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*iU)},function(t,e){return(e-t)/iU},function(t){return t.getUTCHours()}),tU(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*sU)},function(t,e){return(e-t)/sU},function(t){return t.getUTCMinutes()}),cW.prototype={constructor:cW,insert:function(t,e){var n,r,s;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=fW(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(s=r.R)&&s.C?(n.C=s.C=!1,r.C=!0,t=r):(t===n.R&&(dW(this,n),n=(t=n).U),n.C=!1,r.C=!0,pW(this,r)):(s=r.L)&&s.C?(n.C=s.C=!1,r.C=!0,t=r):(t===n.L&&(pW(this,n),n=(t=n).U),n.C=!1,r.C=!0,dW(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,s=t.U,i=t.L,o=t.R;if(n=i?o?fW(o):i:o,s?s.L===t?s.L=n:s.R=n:this._=n,i&&o?(r=n.C,n.C=t.C,n.L=i,i.U=n,n!==o?(s=n.U,n.U=t.U,s.L=t=n.R,n.R=o,o.U=n):(n.U=s,s=n,t=n.R)):(r=t.C,t=n),t&&(t.U=s),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===s.L){if((e=s.R).C&&(e.C=!1,s.C=!0,dW(this,s),e=s.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,pW(this,e),e=s.R),e.C=s.C,s.C=e.R.C=!1,dW(this,s),t=this._;break}}else if((e=s.L).C&&(e.C=!1,s.C=!0,pW(this,s),e=s.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,dW(this,e),e=s.L),e.C=s.C,s.C=e.L.C=!1,pW(this,s),t=this._;break}e.C=!0,t=s,s=s.U}while(!t.C);t&&(t.C=!1)}}};var mW=cW;function gW(t,e,n,r){var s=[null,null],i=zW.push(s)-1;return s.left=t,s.right=e,n&&yW(s,t,e,n),r&&yW(s,e,t,r),LW[t.index].halfedges.push(i),LW[e.index].halfedges.push(i),s}function bW(t,e,n){var r=[e,n];return r.left=t,r}function yW(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function vW(t,e,n,r,s){var i,o=t[0],a=t[1],l=o[0],u=o[1],c=0,h=1,d=a[0]-l,p=a[1]-u;if(i=e-l,d||!(i>0)){if(i/=d,d<0){if(i<c)return;i<h&&(h=i)}else if(d>0){if(i>h)return;i>c&&(c=i)}if(i=r-l,d||!(i<0)){if(i/=d,d<0){if(i>h)return;i>c&&(c=i)}else if(d>0){if(i<c)return;i<h&&(h=i)}if(i=n-u,p||!(i>0)){if(i/=p,p<0){if(i<c)return;i<h&&(h=i)}else if(p>0){if(i>h)return;i>c&&(c=i)}if(i=s-u,p||!(i<0)){if(i/=p,p<0){if(i>h)return;i>c&&(c=i)}else if(p>0){if(i<c)return;i<h&&(h=i)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*d,u+c*p]),h<1&&(t[1]=[l+h*d,u+h*p]),!0)}}}}}function _W(t,e,n,r,s){var i=t[1];if(i)return!0;var o,a,l=t[0],u=t.left,c=t.right,h=u[0],d=u[1],p=c[0],f=c[1],m=(h+p)/2;if(f===d){if(m<e||m>=r)return;if(h>p){if(l){if(l[1]>=s)return}else l=[m,n];i=[m,s]}else{if(l){if(l[1]<n)return}else l=[m,s];i=[m,n]}}else if(a=(d+f)/2-(o=(h-p)/(f-d))*m,o<-1||o>1)if(h>p){if(l){if(l[1]>=s)return}else l=[(n-a)/o,n];i=[(s-a)/o,s]}else{if(l){if(l[1]<n)return}else l=[(s-a)/o,s];i=[(n-a)/o,n]}else if(d<f){if(l){if(l[0]>=r)return}else l=[e,o*e+a];i=[r,o*r+a]}else{if(l){if(l[0]<e)return}else l=[r,o*r+a];i=[e,o*e+a]}return t[0]=l,t[1]=i,!0}function wW(t,e){var n=t.site,r=e.left,s=e.right;return n===s&&(s=r,r=n),s?Math.atan2(s[1]-r[1],s[0]-r[0]):(n===r?(r=e[1],s=e[0]):(r=e[0],s=e[1]),Math.atan2(r[0]-s[0],s[1]-r[1]))}function xW(t,e){return e[+(e.left!==t.site)]}function kW(t,e){return e[+(e.left===t.site)]}var SW,CW=[];function IW(){hW(this),this.x=this.y=this.arc=this.site=this.cy=null}function EW(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,s=t.site,i=n.site;if(r!==i){var o=s[0],a=s[1],l=r[0]-o,u=r[1]-a,c=i[0]-o,h=i[1]-a,d=2*(l*h-u*c);if(!(d>=-VW)){var p=l*l+u*u,f=c*c+h*h,m=(h*p-u*f)/d,g=(l*f-c*p)/d,b=CW.pop()||new IW;b.arc=t,b.site=s,b.x=m+o,b.y=(b.cy=g+a)+Math.sqrt(m*m+g*g),t.circle=b;for(var y=null,v=jW._;v;)if(b.y<v.y||b.y===v.y&&b.x<=v.x){if(!v.L){y=v.P;break}v=v.L}else{if(!v.R){y=v;break}v=v.R}jW.insert(y,b),y||(SW=b)}}}}function OW(t){var e=t.circle;e&&(e.P||(SW=e.N),jW.remove(e),CW.push(e),hW(e),t.circle=null)}var TW=[];function NW(){hW(this),this.edge=this.site=this.circle=null}function AW(t){var e=TW.pop()||new NW;return e.site=t,e}function RW(t){OW(t),MW.remove(t),TW.push(t),hW(t)}function FW(t){var e=t.circle,n=e.x,r=e.cy,s=[n,r],i=t.P,o=t.N,a=[t];RW(t);for(var l=i;l.circle&&Math.abs(n-l.circle.x)<BW&&Math.abs(r-l.circle.cy)<BW;)i=l.P,a.unshift(l),RW(l),l=i;a.unshift(l),OW(l);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<BW&&Math.abs(r-u.circle.cy)<BW;)o=u.N,a.push(u),RW(u),u=o;a.push(u),OW(u);var c,h=a.length;for(c=1;c<h;++c)yW((u=a[c]).edge,(l=a[c-1]).site,u.site,s);(u=a[h-1]).edge=gW((l=a[0]).site,u.site,null,s),EW(l),EW(u)}function DW(t){for(var e,n,r,s,i=t[0],o=t[1],a=MW._;a;)if((r=PW(a,o)-i)>BW)a=a.L;else{if(!((s=i-$W(a,o))>BW)){r>-BW?(e=a.P,n=a):s>-BW?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){LW[t.index]={site:t,halfedges:[]}}(t);var l=AW(t);if(MW.insert(e,l),e||n){if(e===n)return OW(e),n=AW(e.site),MW.insert(l,n),l.edge=n.edge=gW(e.site,l.site),EW(e),void EW(n);if(n){OW(e),OW(n);var u=e.site,c=u[0],h=u[1],d=t[0]-c,p=t[1]-h,f=n.site,m=f[0]-c,g=f[1]-h,b=2*(d*g-p*m),y=d*d+p*p,v=m*m+g*g,_=[(g*y-p*v)/b+c,(d*v-m*y)/b+h];yW(n.edge,u,f,_),l.edge=gW(u,t,null,_),n.edge=gW(t,f,null,_),EW(e),EW(n)}else l.edge=gW(e.site,l.site)}}function PW(t,e){var n=t.site,r=n[0],s=n[1],i=s-e;if(!i)return r;var o=t.P;if(!o)return-1/0;var a=(n=o.site)[0],l=n[1],u=l-e;if(!u)return a;var c=a-r,h=1/i-1/u,d=c/u;return h?(-d+Math.sqrt(d*d-2*h*(c*c/(-2*u)-l+u/2+s-i/2)))/h+r:(r+a)/2}function $W(t,e){var n=t.N;if(n)return PW(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var MW,LW,jW,zW,BW=1e-6,VW=1e-12;function UW(t,e){return e[1]-t[1]||e[0]-t[0]}function WW(t,e){var n,r,s,i=t.sort(UW).pop();for(zW=[],LW=new Array(t.length),MW=new mW,jW=new mW;;)if(s=SW,i&&(!s||i[1]<s.y||i[1]===s.y&&i[0]<s.x))i[0]===n&&i[1]===r||(DW(i),n=i[0],r=i[1]),i=t.pop();else{if(!s)break;FW(s.arc)}if(function(){for(var t,e,n,r,s=0,i=LW.length;s<i;++s)if((t=LW[s])&&(r=(e=t.halfedges).length)){var o=new Array(r),a=new Array(r);for(n=0;n<r;++n)o[n]=n,a[n]=wW(t,zW[e[n]]);for(o.sort(function(t,e){return a[e]-a[t]}),n=0;n<r;++n)a[n]=e[o[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var o=+e[0][0],a=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,r){for(var s,i=zW.length;i--;)_W(s=zW[i],t,e,n,r)&&vW(s,t,e,n,r)&&(Math.abs(s[0][0]-s[1][0])>BW||Math.abs(s[0][1]-s[1][1])>BW)||delete zW[i]}(o,a,l,u),function(t,e,n,r){var s,i,o,a,l,u,c,h,d,p,f,m,g=LW.length,b=!0;for(s=0;s<g;++s)if(i=LW[s]){for(o=i.site,a=(l=i.halfedges).length;a--;)zW[l[a]]||l.splice(a,1);for(a=0,u=l.length;a<u;)f=(p=kW(i,zW[l[a]]))[0],m=p[1],h=(c=xW(i,zW[l[++a%u]]))[0],d=c[1],(Math.abs(f-h)>BW||Math.abs(m-d)>BW)&&(l.splice(a,0,zW.push(bW(o,p,Math.abs(f-t)<BW&&r-m>BW?[t,Math.abs(h-t)<BW?d:r]:Math.abs(m-r)<BW&&n-f>BW?[Math.abs(d-r)<BW?h:n,r]:Math.abs(f-n)<BW&&m-e>BW?[n,Math.abs(h-n)<BW?d:e]:Math.abs(m-e)<BW&&f-t>BW?[Math.abs(d-e)<BW?h:t,e]:null))-1),++u);u&&(b=!1)}if(b){var y,v,_,w=1/0;for(s=0,b=null;s<g;++s)(i=LW[s])&&(_=(y=(o=i.site)[0]-t)*y+(v=o[1]-e)*v)<w&&(w=_,b=i);if(b){var x=[t,e],k=[t,r],S=[n,r],C=[n,e];b.halfedges.push(zW.push(bW(o=b.site,x,k))-1,zW.push(bW(o,k,S))-1,zW.push(bW(o,S,C))-1,zW.push(bW(o,C,x))-1)}}for(s=0;s<g;++s)(i=LW[s])&&(i.halfedges.length||delete LW[s])}(o,a,l,u)}this.edges=zW,this.cells=LW,MW=jW=zW=LW=null}function HW(t,e,n){this.k=t,this.x=e,this.y=n}WW.prototype={constructor:WW,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return xW(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(i=(s=n.halfedges).length)for(var s,i,o,a,l,u,c=n.site,h=-1,d=e[s[i-1]],p=d.left===c?d.right:d.left;++h<i;)o=p,p=(d=e[s[h]]).left===c?d.right:d.left,o&&p&&r<o.index&&r<p.index&&((a=c)[0]-(u=p)[0])*((l=o)[1]-a[1])-(a[0]-l[0])*(u[1]-a[1])<0&&t.push([c.data,o.data,p.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,s,i=this,o=i._found||0,a=i.cells.length;!(s=i.cells[o]);)if(++o>=a)return null;var l=t-s.site[0],u=e-s.site[1],c=l*l+u*u;do{s=i.cells[r=o],o=null,s.halfedges.forEach(function(n){var r=i.edges[n],a=r.left;if(a!==s.site&&a||(a=r.right)){var l=t-a[0],u=e-a[1],h=l*l+u*u;h<c&&(c=h,o=a.index)}})}while(null!==o);return i._found=r,null==n||c<=n*n?s.site:null}},Math,HW.prototype={constructor:HW,scale:function(t){return 1===t?this:new HW(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new HW(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new HW(1,0,0),n("1G5W");var GW=n("jtHE");let qW=(()=>{class t{constructor(t){this.document=t,this.loadedLibraries={}}loadScript(t){if(this.loadedLibraries[t])return this.loadedLibraries[t].asObservable();this.loadedLibraries[t]=new GW.a;const e=this.document.createElement("script");return e.type="text/javascript",e.src=t,e.onload=()=>{this.loadedLibraries[t].next(),this.loadedLibraries[t].complete()},this.document.body.appendChild(e),this.loadedLibraries[t].asObservable()}}return t.\u0275fac=function(e){return new(e||t)(tt.Zb(Dn.d))},t.\u0275prov=tt.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},PDX0:function(t,e){(function(e){t.exports=e}).call(this,{})},PZkE:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("/uUt");function s(t,e){return Object(r.a)((n,r)=>e?e(n[t],r[t]):n[t]===r[t])}},PjsD:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n("8Y7J"),s=n("SVse"),i=n("PqYM");const o=new r.r("JWT_OPTIONS");let a=(()=>{class t{constructor(t=null){this.tokenGetter=t&&t.tokenGetter||function(){}}urlBase64Decode(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(e)}b64decode(t){let e="";if((t=String(t).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let n,r,s=0,i=0;r=t.charAt(i++);~r&&(n=s%4?64*n+r:r,s++%4)?e+=String.fromCharCode(255&n>>(-2*s&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return e}b64DecodeUnicode(t){return decodeURIComponent(Array.prototype.map.call(this.b64decode(t),t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(t=this.tokenGetter()){if(null===t)return null;const e=t.split(".");if(3!==e.length)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");const n=this.urlBase64Decode(e[1]);if(!n)throw new Error("Cannot decode the token.");return JSON.parse(n)}getTokenExpirationDate(t=this.tokenGetter()){let e;if(e=this.decodeToken(t),!e.hasOwnProperty("exp"))return null;const n=new Date(0);return n.setUTCSeconds(e.exp),n}isTokenExpired(t=this.tokenGetter(),e){if(null===t||""===t)return!0;const n=this.getTokenExpirationDate(t);return e=e||0,null===n||!(n.valueOf()>(new Date).valueOf()+1e3*e)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(o))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();var l=n("qJj6"),u=n("G8sH");const c="JWT_KEY",h="JWT_REFRESH_KEY",d="NEXT_URL_KEY",p="NEXT_URL_PARAMS";let f=(()=>{class t{constructor(t,e){this.config=e,this.jwtHelper=new a,this.isBrowser=!0,this.refresh=new r.n,this.updated=new r.n,this.user=null,this.isBrowser=Object(s.w)(t)}getToken(){if(this.isBrowser)return localStorage.getItem(c)}getNextUrl(){return this.isBrowser?localStorage.getItem(d):null}setNextUrl(t){if(!this.isBrowser)return null;t?localStorage.setItem(d,t):localStorage.removeItem(d)}getNextParams(){return localStorage.getItem(p)}setNextParams(t){t?localStorage.setItem(p,JSON.stringify(t)):localStorage.removeItem(p)}tryLoadLocalCreds(){const t=localStorage.getItem(c),e=localStorage.getItem(h);return null!==t&&(this._update({access_token:t,refresh_token:e||void 0}),!0)}storeLocalCreds(t){localStorage.setItem(c,t.access_token),localStorage.setItem(h,t.refresh_token||"")}removeLocalCreds(){this.isBrowser&&(localStorage.removeItem(c),localStorage.removeItem(h)),this.user=null}_update(t){var e;const n=null===(e=this.jwtHelper.getTokenExpirationDate(t.access_token))||void 0===e?void 0:e.getTime();if(n){const e=n-(new Date).getTime()-172800,r=Object(i.a)(e);this.timerRefreshTokenSubscription=r.subscribe(()=>{this.refresh.emit(t)}),this.user=this.getJwtUser(t.access_token),this.updated.emit(!0)}}getJwtUser(t){const e=this.jwtHelper.decodeToken(t);return this.config.getNewApi()?new u.b(e):e}update(t){this.storeLocalCreds(t),this._update(t)}clear(){this.removeLocalCreds()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.C),r.Zb(l.a))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},PqYM:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),s=n("D0XW"),i=n("Y7HM"),o=n("z+Ro");function a(t=0,e,n){let a=-1;return Object(i.a)(e)?a=Number(e)<1?1:Number(e):Object(o.a)(e)&&(n=e),Object(o.a)(n)||(n=s.a),new r.a(e=>{const r=Object(i.a)(t)?t:+t-n.now();return n.schedule(l,r,{index:0,period:a,subscriber:e})})}function l(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}},QpMS:function(t,e,n){"use strict";n.d(e,"c",function(){return r.a}),n.d(e,"a",function(){return w}),n.d(e,"e",function(){return l.a}),n.d(e,"l",function(){return B}),n.d(e,"d",function(){return _}),n.d(e,"j",function(){return U}),n.d(e,"i",function(){return Z}),n.d(e,"b",function(){return K}),n.d(e,"k",function(){return X}),n.d(e,"g",function(){return Q}),n.d(e,"h",function(){return tt}),n.d(e,"f",function(){return R});var r=n("Fa5o"),s=n("IheW"),i=n("HDdC"),o=n("LRne"),a=n("JIr8"),l=n("+zAX"),u=n("8Y7J"),c=n("SVse"),h=n("PqYM");const d=new u.r("JWT_OPTIONS");let p=(()=>{class t{constructor(t=null){this.tokenGetter=t&&t.tokenGetter||function(){}}urlBase64Decode(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(e)}b64decode(t){let e="";if((t=String(t).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let n,r,s=0,i=0;r=t.charAt(i++);~r&&(n=s%4?64*n+r:r,s++%4)?e+=String.fromCharCode(255&n>>(-2*s&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return e}b64DecodeUnicode(t){return decodeURIComponent(Array.prototype.map.call(this.b64decode(t),t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(t=this.tokenGetter()){if(null===t)return null;const e=t.split(".");if(3!==e.length)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");const n=this.urlBase64Decode(e[1]);if(!n)throw new Error("Cannot decode the token.");return JSON.parse(n)}getTokenExpirationDate(t=this.tokenGetter()){let e;if(e=this.decodeToken(t),!e.hasOwnProperty("exp"))return null;const n=new Date(0);return n.setUTCSeconds(e.exp),n}isTokenExpired(t=this.tokenGetter(),e){if(null===t||""===t)return!0;const n=this.getTokenExpirationDate(t);return e=e||0,null===n||!(n.valueOf()>(new Date).valueOf()+1e3*e)}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(d))},t.\u0275prov=u.Lb({token:t,factory:t.\u0275fac}),t})();class f{constructor(t){this.user=t}get first_name(){return this.user.ext.first_name}get type(){return this.user.ext.type}get id(){return this.user.sub}get iat(){return this.user.iat}get exp(){return this.user.exp}get identifier(){return""}get session(){return""}}class m{constructor(t){this.data=t}get access_token(){return this.data.token}get refresh_token(){}}const g="JWT_KEY",b="JWT_REFRESH_KEY",y="NEXT_URL_KEY",v="NEXT_URL_PARAMS";let _=(()=>{class t{constructor(t,e){this.config=e,this.jwtHelper=new p,this.isBrowser=!0,this.refresh=new u.n,this.updated=new u.n,this.user=null,this.isBrowser=Object(c.w)(t)}getToken(){if(this.isBrowser)return localStorage.getItem(g)}getNextUrl(){return this.isBrowser?localStorage.getItem(y):null}setNextUrl(t){if(!this.isBrowser)return null;t?localStorage.setItem(y,t):localStorage.removeItem(y)}getNextParams(){return localStorage.getItem(v)}setNextParams(t){t?localStorage.setItem(v,JSON.stringify(t)):localStorage.removeItem(v)}tryLoadLocalCreds(){const t=localStorage.getItem(g),e=localStorage.getItem(b);return null!==t&&(this._update({access_token:t,refresh_token:e||void 0}),!0)}storeLocalCreds(t){localStorage.setItem(g,t.access_token),localStorage.setItem(b,t.refresh_token||"")}removeLocalCreds(){this.isBrowser&&(localStorage.removeItem(g),localStorage.removeItem(b)),this.user=null}_update(t){var e;const n=null===(e=this.jwtHelper.getTokenExpirationDate(t.access_token))||void 0===e?void 0:e.getTime();if(n){const e=n-(new Date).getTime()-172800,r=Object(h.a)(e);this.timerRefreshTokenSubscription=r.subscribe(()=>{this.refresh.emit(t)}),this.user=this.getJwtUser(t.access_token),this.updated.emit(!0)}}getJwtUser(t){const e=this.jwtHelper.decodeToken(t);return this.config.getNewApi()?new f(e):e}update(t){this.storeLocalCreds(t),this._update(t)}clear(){this.removeLocalCreds()}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(u.C),u.Zb(l.a))},t.\u0275prov=u.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),w=(()=>{class t{constructor(t,e,n){this.http=t,this.config=e,this.authService=n}createHeaders(t=!0){let e=new s.c;if(e=e.set("Content-Type","application/json"),e=e.set("Accept","application/json"),t){let t="";t="Bearer "+this.authService.getToken(),e=e.set("Authorization",t)}return e}get(t,e,n,r){r&&(t=this.config.getAPIURL()+t);const s={headers:this.createHeaders(e)};return n&&(s.responseType=n),this.http.get(t,s)}getFile(t){return new i.a(e=>{let n=null;return this.http.get(t,{headers:this.createHeaders(!0),responseType:"blob"}).pipe(Object(a.a)(t=>404===t.status?Object(o.a)("notfound"):Object(o.a)("error"))).subscribe(t=>{n="error"===t||"notfound"===t?"/assets/images/default_image.jpg":URL.createObjectURL(t),e.next(n)}),()=>{n&&(URL.revokeObjectURL(n),n=null)}})}post(t,e,n,r,s,i,o){let a=this.createHeaders(n);if(s&&(a=a.set("Content-Type",s)),o)for(const u of o)a=a.set(u[0],u[1]);i&&(t=this.config.getAPIURL()+t);const l={headers:a};return r&&(l.responseType=r),this.http.post(t,e,l)}put(t,e,n,r){const s=this.createHeaders(n);return r&&(t=this.config.getAPIURL()+t),this.http.put(t,e,{headers:s})}head(t,e,n){const r=this.createHeaders(e);return n&&(t=this.config.getAPIURL()+t),this.http.head(t,{headers:r})}delete(t,e,n){const r=this.createHeaders(e);return n&&(t=this.config.getAPIURL()+t),this.http.delete(t,{headers:r})}patch(t,e,n,r,s,i){let o=this.createHeaders(n);if(r&&(o=o.set("Content-Type",r)),i)for(const a of i)o=o.set(a[0],a[1]);return s&&(t=this.config.getAPIURL()+t),this.http.patch(t,e,{headers:o})}getBlob(t,e){let n=this.createHeaders(e);return n=n.set("Accept","*/*"),this.http.get(t,{headers:n,responseType:"blob"})}getFileText(t,e){let n=this.createHeaders(e);return n=n.set("Accept","*/*"),this.http.get(t,{headers:n,responseType:"text"})}uploadFile(t,e,n,r,s){const i=[["X-UPLOAD-FILENAME",n]];if(e.byteLength&&i.push(["X-UPLOAD-SIZE",e.byteLength.toString()]),n.split(".").length>1){const t=n.split(".").splice(-1)[0];i.push(["X-UPLOAD-EXTENSION",t])}return this.patch(t,e,!0,r,s,i)}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(s.a),u.Zb(l.a),u.Zb(_))},t.\u0275prov=u.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var x=n("lJxs"),k=function(t){return t.Allow="Allow",t.Deny="Deny",t.AllowSingle="AllowSingle",t}({});const S=["guillotina.Owner","guillotina.Reader","guillotina.Editor","guillotina.Reviewer","guillotina.Manager","guillotina.Member","stashify.StashifyManager"],C=["guillotina.Owner","guillotina.Editor","guillotina.Manager","stashify.AccountManager"],I=["guillotina.Owner","guillotina.Manager","stashify.AccountManager"];class E{constructor(t){this.users=[],this.users=t}}class O{constructor(t){this.permissions=t}get contrib(){return this.permissions.indexOf("CONTRIB")>-1}get admin(){return this.permissions.indexOf("ADMIN")>-1}get sidebar(){return this.contrib||this.admin}}class T{constructor(t,e){this.viewers=[],this.editors=[],this.owners=[],this.local=t,this.inherit=e,this._local()}_local(){this.viewers=[],this.owners=[],this.editors=[],Object.entries(this.local.prinrole).forEach(([t,e])=>{Object.entries(e).forEach(([e,n])=>{S.indexOf(e)>=0&&(n===k.Allow||n===k.AllowSingle)&&-1===this.viewers.indexOf(t)&&"root"!==t&&!t.startsWith("sa:")&&this.viewers.push(t),I.indexOf(e)>=0&&(n===k.Allow||n===k.AllowSingle)&&-1===this.owners.indexOf(t)&&this.owners.push(t),C.indexOf(e)>=0&&(n===k.Allow||n===k.AllowSingle)&&-1===this.editors.indexOf(t)&&this.editors.push(t)})})}areAllowed(t){const e=[];return Object.entries(this.local.prinrole).forEach(([n,r])=>{Object.entries(r).forEach(([r,s])=>{t!==r||s!==k.Allow&&s!==k.AllowSingle||e.push(n)})}),e}isOwner(t){return this.owners.indexOf(t)>=0}isEditor(t){return this.editors.indexOf(t)>=0}}var N=n("fwsW");const A="STF-";let R=(()=>{class t{constructor(t){this.storage=t,this.updated=new u.n}create(){return this.storage.create()}getStoredState(t){return this.storage.get(A+t)}storeLocalState(t,e){return this.storage.set(A+t,e)}removeStoredState(t){return this.storage.remove(A+t)}update(t,e){var n;null===(n=this.storeLocalState(t,e))||void 0===n||n.then(n=>{this.updated.emit({key:t,state:e})})}}return t.\u0275fac=function(e){return new(e||t)(u.Pb(N.b))},t.\u0275dir=u.Kb({type:t,outputs:{updated:"updated"}}),t})();class F{constructor(t){"error"in t?this.errors=t.error:this.actions=t}isError(){return void 0!==this.errors}}class D{constructor(t){Object.assign(this,t)}get url(){return this["@id"]}get id(){return this["@name"]}}class P{constructor(t){this.id=t["@name"],this.url=t["@id"],this.logo=t["@id"]+"/@logo",this.title=t.title,this.description=t["guillotina.behaviors.dublincore.IDublinCore"].description,this.manage_users=t.manage_users,this.manage_stash=t.manage_stash,this.kind=t.kind,this.db=new D(t.parent),this.g_speech_to_text=t.g_speech_to_text}}class ${constructor(t){this.user=t,this._preferences=new M(t.preferences)}get accounts(){return this.user.accounts}get preferences(){return this._preferences}get create(){return this.user.create}get part(){return""}}class M{constructor(t){this.pref=t}get name(){return this.pref.name||""}get email(){return this.pref.email}get picture(){return""}get locale(){var t;return(null===(t=this.pref.language)||void 0===t?void 0:t.toLowerCase())||"en"}get id(){}}const L="/@me";let j=(()=>{class t{constructor(t,e){this.config=t,this.api=e}checkEmail(t,e){const n=[["X-VALIDATION-STF",e]];return this.api.post(this.config.getAPIURL()+"/@check",JSON.stringify({email:t}),!1,"json","application/json",!1,n)}login(t,e){if(this.config.getNewApi()){const n=[["X-STF-VALIDATION",e]];return this.api.post(this.config.getAPIURL()+"/auth/login",JSON.stringify(t),!1,"json","application/json",!1,n).pipe(Object(x.a)(t=>t))}{const n=[["X-VALIDATION-STF",e]];return this.api.post(this.config.getAPIURL()+"/@login",JSON.stringify(t),!1,"json","application/json",!1,n).pipe(Object(x.a)(t=>new m(t)))}}recover(t,e){if(this.config.getNewApi()){const n=[["X-STF-VALIDATION",e]];return this.api.post(this.config.getAPIURL()+"/auth/recover",JSON.stringify(t),!1,"json","application/json",!1,n)}{const n=[["X-VALIDATION-STF",e]];return this.api.post(this.config.getAPIURL()+"/@recover",JSON.stringify(t),!1,"json","application/json",!1,n)}}reset(t,e){if(this.config.getNewApi()){const n=[["X-STF-VALIDATION",e]];return this.api.post(this.config.getAPIURL()+"/auth/reset",JSON.stringify(t),!1,"json","application/json",!1,n)}{const n=[["X-VALIDATION-STF",e]];return this.api.post(this.config.getAPIURL()+"/@reset",JSON.stringify(t),!1,"json","application/json",!1,n)}}signup(t,e){const n=[["X-VALIDATION-STF",e]];return this.api.post(this.config.getAPIURL()+"/@hydra-join",JSON.stringify(t),!1,"json","application/json",!1,n)}refreshUserToken(t){if(this.config.getNewApi()){const e={refresh_token:t.refresh_token};return this.api.post(this.config.getAPIURL()+"/auth/refresh",JSON.stringify(e),!0,"json","application/json").pipe(Object(x.a)(t=>t))}return this.api.post(this.config.getAPIURL()+"/@login-renew",JSON.stringify(t.access_token),!0,"json","application/json").pipe(Object(x.a)(t=>new m(t)))}setPrefs(t){return this.api.patch(this.config.getAPIURL()+L,t,!0,"application/json",!1)}getPrefs(){return this.api.get(this.config.getAPIURL()+L,!0,void 0,!1)}getWelcome(){return this.config.getNewApi()?this.api.get(this.config.getAPIURL()+"/v1/user/welcome").pipe(Object(x.a)(t=>new $(t))):this.api.get(this.config.getAPIURL()+"/@welcome")}logout(){return this.config.getNewApi()?this.api.post(this.config.getAPIURL()+"/auth/logout",JSON.stringify({}),!0,"json","application/json"):this.api.post(this.config.getAPIURL()+"/@logout",JSON.stringify({}),!0,"json","application/json")}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(l.a),u.Zb(w))},t.\u0275prov=u.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var z=n("2Vo4");let B=(()=>{class t{constructor(t,e,n,r,s,i,o){this.http=t,this.platformLocation=e,this.location=n,this.storage=r,this.loginService=s,this.authService=i,this.logged=!1,this.create=!1,this.isBrowser=!1,this.accounts=[],this.prefs={name:"",email:"",picture:"",locale:""},this.loggedin=new u.n,this.userinfo=new u.n,this.loggedout=new u.n,this.messages=new u.n,this.isBrowser=Object(c.w)(o),this.isBrowser&&(this.logged=this.authService.tryLoadLocalCreds()),this.loggedout.subscribe(()=>{this.authService.removeLocalCreds(),this.logged=!1}),this.loggedin.subscribe(t=>{this.authService.update(t),this.logged=!0}),this.userPrefs=new z.a(void 0),this.userinfo.subscribe(()=>this.userPrefs.next(this.prefs)),this.authService.refresh.subscribe(t=>{this.refreshUserToken(t)}),this.loggedin.subscribe(()=>{this.updateWelcome()}),this.logged&&this.updateWelcome()}createHeaders(t=!0){let e=new s.c;if(e=e.set("Content-Type","application/json"),e=e.set("Accept","application/json"),t){let t="";t="Bearer "+this.authService.getToken(),e=e.set("Authorization",t)}return e}updateWelcome(){this.loginService.getWelcome().subscribe(t=>{this.accounts=t.accounts,this.prefs=t.preferences,this.create=t.create,this.part=t.part,this.userinfo.emit(this)},t=>{this.loggedout.emit(),console.log("Failes to get Welcome")})}refreshUserToken(t){this.loginService.refreshUserToken(t).subscribe(t=>{this.loggedin.emit(t)},t=>{this.messages.emit("Error on refreshing token"+t),this.loginService.logout()})}logout(){var t;const e=null===(t=this.authService.user)||void 0===t?void 0:t.id;this.loginService.logout().subscribe(t=>console.log("Exit!"),t=>console.log("Invalid logged out")),this.isBrowser&&this.authService.clear(),this.loggedout.emit(e)}checkLogin(){return void 0!==this.authService.user}getPicture(){return""!==this.prefs.picture?'<img class="avatar mr-0 mr-sm-16" src="'+this.prefs.picture+'">':'<div class="avatar-text">'+this.constructInitials(this.prefs.name.split(" ")).substring(0,2)+"</div>"}constructInitials(t){return t&&t.length?t.filter(t=>t&&t.length>0).map(t=>t[0].toUpperCase()).join(""):""}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(s.a),u.Zb(c.t),u.Zb(c.i),u.Zb(N.b),u.Zb(j),u.Zb(_),u.Zb(u.C))},t.\u0275prov=u.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var V=n("e6bL");let U=(()=>{class t{constructor(t,e,n,r){this.config=t,this.apiService=e,this.userService=n,this.authService=r,this.isBrowser=!1,this.userService.loggedin.subscribe(()=>{this.authService.user&&this.login(this.authService.user.id)}),this.config.isBrowser&&this.authService.user&&this.login(this.authService.user.id)}navigation(t){this.config.isBrowser&&(this.authService.user?V.a.capture("visited",{page_path:t.url,user_id:this.authService.user.id}):V.a.capture("public",{page_path:t.url}))}login(t){this.config.isBrowser&&(V.a.identify(t),V.a.people.set({email:t}))}logout(t){this.config.isBrowser&&V.a.reset(!0)}search(t,e,n){this.config.isBrowser&&t&&e&&V.a.capture("search_results",{total:t,stash:e,search:n})}searchclick(t,e){this.config.isBrowser&&e&&V.a.capture("search_click",{type:t,position:e})}successResult(t,e,n){this.config.isBrowser&&(V.a.capture("success",{search_query:t,success:e}),this.apiService.get(n+"/@feedback?"+e+"="+t,!0,void 0,!0).subscribe(t=>{}))}isFeatureEnabled(t,e){this.config.isBrowser&&V.a.onFeatureFlags(()=>{e(V.a.isFeatureEnabled(t,{send_event:!1}))})}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(l.a),u.Zb(w),u.Zb(B),u.Zb(_))},t.\u0275prov=u.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var W=n("GS7A"),H=n("iInd"),G=n("pLZG"),q=n("IzEk");let Z=(()=>{class t{constructor(t,e,n){this._animationBuilder=t,this._document=e,this._router=n,this._init(),this.last="Be patient my friend "+String.fromCodePoint(128513),this.shown=!1}_init(){this.splashScreenEl=this._document.body.querySelector("#stf-splash-screen"),this.splashScreenEl&&this._router.events.pipe(Object(G.a)(t=>t instanceof H.c),Object(q.a)(1)).subscribe(()=>{setTimeout(()=>{this.hide()})})}show(t,e){t?(this.last=this.splashScreenEl.querySelector("#stf-splash-screen-text").textContent,e&&(t=t+" "+String.fromCodePoint(e)),this.splashScreenEl.querySelector("#stf-splash-screen-text").innerText=t):this.splashScreenEl.querySelector("#stf-splash-screen-text").innerText=this.last,this.shown=!0,this.player=this._animationBuilder.build([Object(W.n)({opacity:"0",zIndex:"99999"}),Object(W.e)("400ms ease",Object(W.n)({opacity:"1"}))]).create(this.splashScreenEl),setTimeout(()=>{var t;null===(t=this.player)||void 0===t||t.play()},0)}hide(){this.shown=!1,this.player=this._animationBuilder.build([Object(W.n)({opacity:"1"}),Object(W.e)("400ms ease",Object(W.n)({opacity:"0",zIndex:"-10"}))]).create(this.splashScreenEl),setTimeout(()=>{var t;null===(t=this.player)||void 0===t||t.play()},0)}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(W.b),u.Zb(c.d),u.Zb(H.e))},t.\u0275prov=u.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),K=(()=>{class t{constructor(t){this.api=t}getAccount(t,e){return this.api.get("/"+t+"/"+e,!0,void 0,!0).pipe(Object(x.a)(t=>new P(t)))}getAccounts(){return this.api.get("/@accounts",!0,void 0,!0)}updateAccount(t,e){return this.api.patch(t,e,!0,void 0,!1)}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(w))},t.\u0275prov=u.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Y=n("z6cu");let X=(()=>{class t{constructor(t,e){this.api=t,this.config=e}validate(t){if(t){const e=this.config.getAPIURL()+"/@magic?token="+t;return this.api.post(e,{},!1,void 0).pipe(Object(x.a)(t=>new F(t)))}return Object(Y.a)("Empty token")}getTempToken(t=!1){const e=t?"/@token":"/@wstoken",n=this.config.getAPIURL()+e;return this.api.get(n,!0,void 0).pipe(Object(x.a)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(w),u.Zb(l.a))},t.\u0275prov=u.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var J=n("EY2u");let Q=(()=>{class t{constructor(t){this.api=t}getPermissions(t){return this.api.get(t+"/@sharing",!0,void 0).pipe(Object(x.a)(t=>new T(t.local,t.inherit)),Object(a.a)((t,e)=>J.a))}getUsers(t){return this.api.get(t+"/@users",!0,void 0).pipe(Object(x.a)(t=>new E(t.users)),Object(a.a)((t,e)=>J.a))}getRoles(t){return this.api.get(t+"/@permissions",!0,void 0).pipe(Object(x.a)(t=>new O(t.permissions)),Object(a.a)((t,e)=>J.a))}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(w))},t.\u0275prov=u.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();n("cUpR"),n("t8gH");let tt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.Nb({type:t}),t.\u0275inj=u.Mb({imports:[[c.c]]}),t})()},RA0T:function(t,e,n){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},SCoL:function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return m}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return d}),n.d(e,"f",function(){return p});var r=n("8Y7J"),s=n("SVse");let i;try{i="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(g){i=!1}let o,a,l,u,c=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Object(s.w)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!i)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.C))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Zb)(r.C))},token:t,providedIn:"root"}),t})(),h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})();function d(t){return function(){if(null==o&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>o=!0}))}finally{o=o||!1}return o}()?t:!!t.capture}function p(){if(null==l){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return l=!1,l;if("scrollBehavior"in document.documentElement.style)l=!0;else{const t=Element.prototype.scrollTo;l=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return l}function f(){if("object"!=typeof document||!document)return 0;if(null==a){const t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const n=document.createElement("div"),r=n.style;r.width="2px",r.height="1px",t.appendChild(n),document.body.appendChild(t),a=0,0===t.scrollLeft&&(t.scrollLeft=1,a=0===t.scrollLeft?1:2),t.parentNode.removeChild(t)}return a}function m(t){if(function(){if(null==u){const t="undefined"!=typeof document?document.head:null;u=!(!t||!t.createShadowRoot&&!t.attachShadow)}return u}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}},SVse:function(t,e,n){"use strict";n.d(e,"a",function(){return _}),n.d(e,"b",function(){return Ct}),n.d(e,"c",function(){return At}),n.d(e,"d",function(){return l}),n.d(e,"e",function(){return Ot}),n.d(e,"f",function(){return x}),n.d(e,"g",function(){return Tt}),n.d(e,"h",function(){return h}),n.d(e,"i",function(){return k}),n.d(e,"j",function(){return y}),n.d(e,"k",function(){return It}),n.d(e,"l",function(){return lt}),n.d(e,"m",function(){return ct}),n.d(e,"n",function(){return dt}),n.d(e,"o",function(){return yt}),n.d(e,"p",function(){return gt}),n.d(e,"q",function(){return bt}),n.d(e,"r",function(){return vt}),n.d(e,"s",function(){return w}),n.d(e,"t",function(){return u}),n.d(e,"u",function(){return Et}),n.d(e,"v",function(){return Pt}),n.d(e,"w",function(){return Ft}),n.d(e,"x",function(){return Dt}),n.d(e,"y",function(){return a}),n.d(e,"z",function(){return Rt}),n.d(e,"A",function(){return i}),n.d(e,"B",function(){return at}),n.d(e,"C",function(){return o});var r=n("8Y7J");let s=null;function i(){return s}function o(t){s||(s=t)}class a{}const l=new r.r("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Lb)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Zb)(d)}const h=new r.r("Location Initialized");let d=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=i().getLocation(),this._history=i().getHistory()}getBaseHrefFromDOM(){return i().getBaseHref(this._doc)}onPopState(t){i().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){i().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){p()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){p()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(l))},t.\u0275prov=Object(r.Lb)({factory:f,token:t,providedIn:"platform"}),t})();function p(){return!!window.history.pushState}function f(){return new d(Object(r.Zb)(l))}function m(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function g(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function b(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Lb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(r.Zb)(l).location;return new w(Object(r.Zb)(u),e&&e.origin||"")}const _=new r.r("appBaseHref");let w=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return m(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+b(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const s=this.prepareExternalUrl(n+b(r));this._platformLocation.pushState(t,e,s)}replaceState(t,e,n,r){const s=this.prepareExternalUrl(n+b(r));this._platformLocation.replaceState(t,e,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(u),r.Zb(_,8))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),x=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=m(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let s=this.prepareExternalUrl(n+b(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,e,s)}replaceState(t,e,n,r){let s=this.prepareExternalUrl(n+b(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(u),r.Zb(_,8))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),k=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=g(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+b(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+b(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+b(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(y),r.Zb(u))},t.normalizeQueryParams=b,t.joinWithSlash=m,t.stripTrailingSlash=g,t.\u0275prov=Object(r.Lb)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new k(Object(r.Zb)(y),Object(r.Zb)(u))}function C(t){return t.replace(/\/index.html$/,"")}var I=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),E=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),O=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),T=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),N=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function A(t,e){return M(Object(r.nb)(t)[r.eb.DateFormat],e)}function R(t,e){return M(Object(r.nb)(t)[r.eb.TimeFormat],e)}function F(t,e){return M(Object(r.nb)(t)[r.eb.DateTimeFormat],e)}function D(t,e){const n=Object(r.nb)(t),s=n[r.eb.NumberSymbols][e];if(void 0===s){if(e===N.CurrencyDecimal)return n[r.eb.NumberSymbols][N.Decimal];if(e===N.CurrencyGroup)return n[r.eb.NumberSymbols][N.Group]}return s}const P=r.qb;function $(t){if(!t[r.eb.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.eb.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function M(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function L(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const j=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,z={},B=/((?:[^GyYMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var V=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),U=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),W=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function H(t,e,n,r){let s=function(t){if(st(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[e,n=1,r=1]=t.split("-").map(t=>+t);return G(e,n-1,r)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let n;if(n=t.match(j))return function(t){const e=new Date(0);let n=0,r=0;const s=t[8]?e.setUTCFullYear:e.setFullYear,i=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),s.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,l=Number(t[6]||0),u=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return i.call(e,o,a,l,u),e}(n)}const e=new Date(t);if(!st(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=q(n,e)||e;let i,o=[];for(;e;){if(i=B.exec(e),!i){o.push(e);break}{o=o.concat(i.slice(1));const t=o.pop();if(!t)break;e=t}}let a=s.getTimezoneOffset();r&&(a=rt(r,a),s=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(rt(e,r)-r))}(s,r));let l="";return o.forEach(t=>{const e=function(t){if(nt[t])return nt[t];let e;switch(t){case"G":case"GG":case"GGG":e=X(W.Eras,O.Abbreviated);break;case"GGGG":e=X(W.Eras,O.Wide);break;case"GGGGG":e=X(W.Eras,O.Narrow);break;case"y":e=Y(U.FullYear,1,0,!1,!0);break;case"yy":e=Y(U.FullYear,2,0,!0,!0);break;case"yyy":e=Y(U.FullYear,3,0,!1,!0);break;case"yyyy":e=Y(U.FullYear,4,0,!1,!0);break;case"Y":e=et(1);break;case"YY":e=et(2,!0);break;case"YYY":e=et(3);break;case"YYYY":e=et(4);break;case"M":case"L":e=Y(U.Month,1,1);break;case"MM":case"LL":e=Y(U.Month,2,1);break;case"MMM":e=X(W.Months,O.Abbreviated);break;case"MMMM":e=X(W.Months,O.Wide);break;case"MMMMM":e=X(W.Months,O.Narrow);break;case"LLL":e=X(W.Months,O.Abbreviated,E.Standalone);break;case"LLLL":e=X(W.Months,O.Wide,E.Standalone);break;case"LLLLL":e=X(W.Months,O.Narrow,E.Standalone);break;case"w":e=tt(1);break;case"ww":e=tt(2);break;case"W":e=tt(1,!0);break;case"d":e=Y(U.Date,1);break;case"dd":e=Y(U.Date,2);break;case"E":case"EE":case"EEE":e=X(W.Days,O.Abbreviated);break;case"EEEE":e=X(W.Days,O.Wide);break;case"EEEEE":e=X(W.Days,O.Narrow);break;case"EEEEEE":e=X(W.Days,O.Short);break;case"a":case"aa":case"aaa":e=X(W.DayPeriods,O.Abbreviated);break;case"aaaa":e=X(W.DayPeriods,O.Wide);break;case"aaaaa":e=X(W.DayPeriods,O.Narrow);break;case"b":case"bb":case"bbb":e=X(W.DayPeriods,O.Abbreviated,E.Standalone,!0);break;case"bbbb":e=X(W.DayPeriods,O.Wide,E.Standalone,!0);break;case"bbbbb":e=X(W.DayPeriods,O.Narrow,E.Standalone,!0);break;case"B":case"BB":case"BBB":e=X(W.DayPeriods,O.Abbreviated,E.Format,!0);break;case"BBBB":e=X(W.DayPeriods,O.Wide,E.Format,!0);break;case"BBBBB":e=X(W.DayPeriods,O.Narrow,E.Format,!0);break;case"h":e=Y(U.Hours,1,-12);break;case"hh":e=Y(U.Hours,2,-12);break;case"H":e=Y(U.Hours,1);break;case"HH":e=Y(U.Hours,2);break;case"m":e=Y(U.Minutes,1);break;case"mm":e=Y(U.Minutes,2);break;case"s":e=Y(U.Seconds,1);break;case"ss":e=Y(U.Seconds,2);break;case"S":e=Y(U.FractionalSeconds,1);break;case"SS":e=Y(U.FractionalSeconds,2);break;case"SSS":e=Y(U.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=J(V.Short);break;case"ZZZZZ":e=J(V.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=J(V.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=J(V.Long);break;default:return null}return nt[t]=e,e}(t);l+=e?e(s,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function G(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function q(t,e){const n=function(t){return Object(r.nb)(t)[r.eb.LocaleId]}(t);if(z[n]=z[n]||{},z[n][e])return z[n][e];let s="";switch(e){case"shortDate":s=A(t,T.Short);break;case"mediumDate":s=A(t,T.Medium);break;case"longDate":s=A(t,T.Long);break;case"fullDate":s=A(t,T.Full);break;case"shortTime":s=R(t,T.Short);break;case"mediumTime":s=R(t,T.Medium);break;case"longTime":s=R(t,T.Long);break;case"fullTime":s=R(t,T.Full);break;case"short":const e=q(t,"shortTime"),n=q(t,"shortDate");s=Z(F(t,T.Short),[e,n]);break;case"medium":const r=q(t,"mediumTime"),i=q(t,"mediumDate");s=Z(F(t,T.Medium),[r,i]);break;case"long":const o=q(t,"longTime"),a=q(t,"longDate");s=Z(F(t,T.Long),[o,a]);break;case"full":const l=q(t,"fullTime"),u=q(t,"fullDate");s=Z(F(t,T.Full),[l,u])}return s&&(z[n][e]=s),s}function Z(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function K(t,e,n="-",r,s){let i="";(t<0||s&&t<=0)&&(s?t=1-t:(t=-t,i=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.substr(o.length-e)),i+o}function Y(t,e,n=0,r=!1,s=!1){return function(i,o){let a=function(t,e){switch(t){case U.FullYear:return e.getFullYear();case U.Month:return e.getMonth();case U.Date:return e.getDate();case U.Hours:return e.getHours();case U.Minutes:return e.getMinutes();case U.Seconds:return e.getSeconds();case U.FractionalSeconds:return e.getMilliseconds();case U.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,i);if((n>0||a>-n)&&(a+=n),t===U.Hours)0===a&&-12===n&&(a=12);else if(t===U.FractionalSeconds)return l=e,K(a,3).substr(0,l);var l;const u=D(o,N.MinusSign);return K(a,e,u,r,s)}}function X(t,e,n=E.Format,s=!1){return function(i,o){return function(t,e,n,s,i,o){switch(n){case W.Months:return function(t,e,n){const s=Object(r.nb)(t),i=M([s[r.eb.MonthsFormat],s[r.eb.MonthsStandalone]],e);return M(i,n)}(e,i,s)[t.getMonth()];case W.Days:return function(t,e,n){const s=Object(r.nb)(t),i=M([s[r.eb.DaysFormat],s[r.eb.DaysStandalone]],e);return M(i,n)}(e,i,s)[t.getDay()];case W.DayPeriods:const a=t.getHours(),l=t.getMinutes();if(o){const t=function(t){const e=Object(r.nb)(t);return $(e),(e[r.eb.ExtraData][2]||[]).map(t=>"string"==typeof t?L(t):[L(t[0]),L(t[1])])}(e),n=function(t,e,n){const s=Object(r.nb)(t);$(s);const i=M([s[r.eb.ExtraData][0],s[r.eb.ExtraData][1]],e)||[];return M(i,n)||[]}(e,i,s),o=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&l>=e.minutes,s=a<n.hours||a===n.hours&&l<n.minutes;if(e.hours<n.hours){if(r&&s)return!0}else if(r||s)return!0}else if(t.hours===a&&t.minutes===l)return!0;return!1});if(-1!==o)return n[o]}return function(t,e,n){const s=Object(r.nb)(t),i=M([s[r.eb.DayPeriodsFormat],s[r.eb.DayPeriodsStandalone]],e);return M(i,n)}(e,i,s)[a<12?0:1];case W.Eras:return function(t,e){return M(Object(r.nb)(t)[r.eb.Eras],e)}(e,s)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,o,t,e,n,s)}}function J(t){return function(e,n,r){const s=-1*r,i=D(n,N.MinusSign),o=s>0?Math.floor(s/60):Math.ceil(s/60);switch(t){case V.Short:return(s>=0?"+":"")+K(o,2,i)+K(Math.abs(s%60),2,i);case V.ShortGMT:return"GMT"+(s>=0?"+":"")+K(o,1,i);case V.Long:return"GMT"+(s>=0?"+":"")+K(o,2,i)+":"+K(Math.abs(s%60),2,i);case V.Extended:return 0===r?"Z":(s>=0?"+":"")+K(o,2,i)+":"+K(Math.abs(s%60),2,i);default:throw new Error(`Unknown zone width "${t}"`)}}}function Q(t){return G(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function tt(t,e=!1){return function(n,r){let s;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();s=1+Math.floor((e+t)/7)}else{const t=Q(n),e=function(t){const e=G(t,0,1).getDay();return G(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();s=1+Math.round(r/6048e5)}return K(s,t,D(r,N.MinusSign))}}function et(t,e=!1){return function(n,r){return K(Q(n).getFullYear(),t,D(r,N.MinusSign),e)}}const nt={};function rt(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function st(t){return t instanceof Date&&!isNaN(t.valueOf())}class it{}let ot=(()=>{class t extends it{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(P(e||this.locale)(t)){case I.Zero:return"zero";case I.One:return"one";case I.Two:return"two";case I.Few:return"few";case I.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.v))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();function at(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,s]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let lt=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.tb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.zb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.t),r.Pb(r.u),r.Pb(r.l),r.Pb(r.F))},t.\u0275dir=r.Kb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class ut{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ct=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ut(null,this._ngForOf,-1,-1),null===r?void 0:r),s=new ht(t,n);e.push(s)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const s=this._viewContainer.get(n);this._viewContainer.move(s,r);const i=new ht(t,s);e.push(i)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.R),r.Pb(r.N),r.Pb(r.t))},t.\u0275dir=r.Kb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class ht{constructor(t,e){this.record=t,this.view=e}}let dt=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new pt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ft("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ft("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.R),r.Pb(r.N))},t.\u0275dir=r.Kb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class pt{constructor(){this.$implicit=null,this.ngIf=null}}function ft(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.zb)(e)}'.`)}class mt{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let gt=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Kb({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),bt=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new mt(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.R),r.Pb(r.N),r.Pb(gt,1))},t.\u0275dir=r.Kb({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),yt=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.u),r.Pb(r.F))},t.\u0275dir=r.Kb({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),vt=(()=>{class t{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(t){const e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}_hasContextShapeChanged(t){const e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){for(let t of n)if(-1===e.indexOf(t))return!0;return!1}return!0}_updateExistingContext(t){for(let e of Object.keys(t))this._viewRef.context[e]=this.ngTemplateOutletContext[e]}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.R))},t.\u0275dir=r.Kb({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[r.Cb]}),t})();function _t(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.zb)(t)}'`)}class wt{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class xt{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const kt=new xt,St=new wt;let Ct=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Object(r.vb)(e))return kt;if(Object(r.wb)(e))return St;throw _t(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.bc())},t.\u0275pipe=r.Ob({name:"async",type:t,pure:!1}),t})(),It=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw _t(t,e);return e.toLowerCase()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Ob({name:"lowercase",type:t,pure:!0}),t})(),Et=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw _t(t,e);return e.toUpperCase()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Ob({name:"uppercase",type:t,pure:!0}),t})(),Ot=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",r,s){if(null==e||""===e||e!=e)return null;try{return H(e,n,s||this.locale,r)}catch(i){throw _t(t,i.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.v))},t.\u0275pipe=r.Ob({name:"date",type:t,pure:!0}),t})(),Tt=(()=>{class t{constructor(t){this.differs=t,this.keyValues=[]}transform(t,e=Nt){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const n=this.differ.diff(t);return n&&(this.keyValues=[],n.forEachItem(t=>{this.keyValues.push({key:t.key,value:t.currentValue})}),this.keyValues.sort(e)),this.keyValues}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.u))},t.\u0275pipe=r.Ob({name:"keyvalue",type:t,pure:!1}),t})();function Nt(t,e){const n=t.key,r=e.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;const s=String(n),i=String(r);return s==i?0:s<i?-1:1}let At=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:[{provide:it,useClass:ot}]}),t})();const Rt="browser";function Ft(t){return t===Rt}function Dt(t){return"server"===t}let Pt=(()=>{class t{}return t.\u0275prov=Object(r.Lb)({token:t,providedIn:"root",factory:()=>new $t(Object(r.Zb)(l),window)}),t})();class $t{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Mt(this.window.history)||Mt(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Mt(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("ngJS"),s=n("NJ4a"),i=n("Lhse"),o=n("kJWO"),a=n("I55L"),l=n("c2HN"),u=n("XoHu");const c=t=>{if(t&&"function"==typeof t[o.a])return c=t,t=>{const e=c[o.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(l.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s.a),t);if(t&&"function"==typeof t[i.a])return e=t,t=>{const n=e[i.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(u.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,c}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},TSSN:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return $}),n.d(e,"c",function(){return P}),n.d(e,"d",function(){return D});var r=n("8Y7J"),s=n("LRne"),i=n("7+OI"),o=n("cp0P"),a=n("GyhO"),l=n("NXyV"),u=n("IzEk"),c=n("UXun"),h=n("lJxs"),d=n("bOdf"),p=n("eIep");class f{}let m=(()=>{class t extends f{getTranslation(t){return Object(s.a)({})}}return t.\u0275fac=function(e){return g(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const g=r.Xb(m);class b{}let y=(()=>{class t{handle(t){return t.key}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();function v(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;let n,r,s,i=typeof t;if(i==typeof e&&"object"==i){if(!Array.isArray(t)){if(Array.isArray(e))return!1;for(r in s=Object.create(null),t){if(!v(t[r],e[r]))return!1;s[r]=!0}for(r in e)if(!(r in s)&&void 0!==e[r])return!1;return!0}if(!Array.isArray(e))return!1;if((n=t.length)==e.length){for(r=0;r<n;r++)if(!v(t[r],e[r]))return!1;return!0}}return!1}function _(t){return null!=t}function w(t){return t&&"object"==typeof t&&!Array.isArray(t)}function x(t,e){let n=Object.assign({},t);return w(t)&&w(e)&&Object.keys(e).forEach(r=>{w(e[r])?r in t?n[r]=x(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class k{}let S=(()=>{class t extends k{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(t,e){let n;return n="string"==typeof t?this.interpolateString(t,e):"function"==typeof t?this.interpolateFunction(t,e):t,n}getValue(t,e){let n="string"==typeof e?e.split("."):[e];e="";do{e+=n.shift(),!_(t)||!_(t[e])||"object"!=typeof t[e]&&n.length?n.length?e+=".":t=void 0:(t=t[e],e="")}while(n.length);return t}interpolateFunction(t,e){return t(e)}interpolateString(t,e){return e?t.replace(this.templateMatcher,(t,n)=>{let r=this.getValue(e,n);return _(r)?r:t}):t}}return t.\u0275fac=function(e){return C(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const C=r.Xb(S);class I{}let E=(()=>{class t extends I{compile(t,e){return t}compileTranslations(t,e){return t}}return t.\u0275fac=function(e){return O(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const O=r.Xb(E);class T{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new r.n,this.onLangChange=new r.n,this.onDefaultLangChange=new r.n}}const N=new r.r("USE_STORE"),A=new r.r("USE_DEFAULT_LANG"),R=new r.r("DEFAULT_LANGUAGE"),F=new r.r("USE_EXTEND");let D=(()=>{class t{constructor(t,e,n,s,i,o=!0,a=!1,l=!1,u){this.store=t,this.currentLoader=e,this.compiler=n,this.parser=s,this.missingTranslationHandler=i,this.useDefaultLang=o,this.isolate=a,this.extend=l,this.pending=!1,this._onTranslationChange=new r.n,this._onLangChange=new r.n,this._onDefaultLangChange=new r.n,this._langs=[],this._translations={},this._translationRequests={},u&&this.setDefaultLang(u)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}setDefaultLang(t){if(t===this.defaultLang)return;let e=this.retrieveTranslations(t);void 0!==e?(null==this.defaultLang&&(this.defaultLang=t),e.pipe(Object(u.a)(1)).subscribe(e=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return Object(s.a)(this.translations[t]);let e=this.retrieveTranslations(t);return void 0!==e?(this.currentLang||(this.currentLang=t),e.pipe(Object(u.a)(1)).subscribe(e=>{this.changeLang(t)}),e):(this.changeLang(t),Object(s.a)(this.translations[t]))}retrieveTranslations(t){let e;return(void 0===this.translations[t]||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),e=this._translationRequests[t]),e}getTranslation(t){this.pending=!0;const e=this.currentLoader.getTranslation(t).pipe(Object(c.a)(1),Object(u.a)(1));return this.loadingTranslations=e.pipe(Object(h.a)(e=>this.compiler.compileTranslations(e,t)),Object(c.a)(1),Object(u.a)(1)),this.loadingTranslations.subscribe({next:e=>{this.translations[t]=this.extend&&this.translations[t]?Object.assign(Object.assign({},e),this.translations[t]):e,this.updateLangs(),this.pending=!1},error:t=>{this.pending=!1}}),e}setTranslation(t,e,n=!1){e=this.compiler.compileTranslations(e,t),this.translations[t]=(n||this.extend)&&this.translations[t]?x(this.translations[t],e):e,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(t=>{-1===this.langs.indexOf(t)&&this.langs.push(t)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,e,n){let r;if(e instanceof Array){let r={},a=!1;for(let s of e)r[s]=this.getParsedResult(t,s,n),Object(i.a)(r[s])&&(a=!0);if(a){const t=e.map(t=>Object(i.a)(r[t])?r[t]:Object(s.a)(r[t]));return Object(o.a)(t).pipe(Object(h.a)(t=>{let n={};return t.forEach((t,r)=>{n[e[r]]=t}),n}))}return r}if(t&&(r=this.parser.interpolate(this.parser.getValue(t,e),n)),void 0===r&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(r=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],e),n)),void 0===r){let t={key:e,translateService:this};void 0!==n&&(t.interpolateParams=n),r=this.missingTranslationHandler.handle(t)}return void 0!==r?r:e}get(t,e){if(!_(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(Object(d.a)(n=>(n=this.getParsedResult(n,t,e),Object(i.a)(n)?n:Object(s.a)(n))));{let n=this.getParsedResult(this.translations[this.currentLang],t,e);return Object(i.a)(n)?n:Object(s.a)(n)}}getStreamOnTranslationChange(t,e){if(!_(t)||!t.length)throw new Error('Parameter "key" required');return Object(a.a)(Object(l.a)(()=>this.get(t,e)),this.onTranslationChange.pipe(Object(p.a)(n=>{const r=this.getParsedResult(n.translations,t,e);return"function"==typeof r.subscribe?r:Object(s.a)(r)})))}stream(t,e){if(!_(t)||!t.length)throw new Error('Parameter "key" required');return Object(a.a)(Object(l.a)(()=>this.get(t,e)),this.onLangChange.pipe(Object(p.a)(n=>{const r=this.getParsedResult(n.translations,t,e);return Object(i.a)(r)?r:Object(s.a)(r)})))}instant(t,e){if(!_(t)||!t.length)throw new Error('Parameter "key" required');let n=this.getParsedResult(this.translations[this.currentLang],t,e);if(Object(i.a)(n)){if(t instanceof Array){let e={};return t.forEach((n,r)=>{e[t[r]]=t[r]}),e}return t}return n}set(t,e,n=this.currentLang){this.translations[n][t]=this.compiler.compile(e,n),this.updateLangs(),this.onTranslationChange.emit({lang:n,translations:this.translations[n]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),null==this.defaultLang&&this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,void 0!==t?(-1!==t.indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t):void 0}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(T),r.Zb(f),r.Zb(I),r.Zb(k),r.Zb(b),r.Zb(A),r.Zb(N),r.Zb(F),r.Zb(R))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),P=(()=>{class t{constructor(t,e){this.translate=t,this._ref=e,this.value=""}updateValue(t,e,n){let r=e=>{this.value=void 0!==e?e:t,this.lastKey=t,this._ref.markForCheck()};if(n){let s=this.translate.getParsedResult(n,t,e);Object(i.a)(s.subscribe)?s.subscribe(r):r(s)}this.translate.get(t,e).subscribe(r)}transform(t,...e){if(!t||!t.length)return t;if(v(t,this.lastKey)&&v(e,this.lastParams))return this.value;let n;if(_(e[0])&&e.length)if("string"==typeof e[0]&&e[0].length){let t=e[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{n=JSON.parse(t)}catch(r){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${e[0]}`)}}else"object"!=typeof e[0]||Array.isArray(e[0])||(n=e[0]);return this.lastKey=t,this.lastParams=e,this.updateValue(t,n),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(e=>{this.lastKey&&e.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,n,e.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(e=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,n,e.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,n))})),this.value}_dispose(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(D),r.bc())},t.\u0275pipe=r.Ob({name:"translate",type:t,pure:!1}),t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),$=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[e.loader||{provide:f,useClass:m},e.compiler||{provide:I,useClass:E},e.parser||{provide:k,useClass:S},e.missingTranslationHandler||{provide:b,useClass:y},T,{provide:N,useValue:e.isolate},{provide:A,useValue:e.useDefaultLang},{provide:F,useValue:e.extend},{provide:R,useValue:e.defaultLanguage},D]}}static forChild(e={}){return{ngModule:t,providers:[e.loader||{provide:f,useClass:m},e.compiler||{provide:I,useClass:E},e.parser||{provide:k,useClass:S},e.missingTranslationHandler||{provide:b,useClass:y},{provide:N,useValue:e.isolate},{provide:A,useValue:e.useDefaultLang},{provide:F,useValue:e.extend},{provide:R,useValue:e.defaultLanguage},D]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})()},Tj54:function(t,e,n){"use strict";n.d(e,"a",function(){return F}),n.d(e,"b",function(){return D});var r=n("8Y7J"),s=n("UhP/"),i=n("8LU1"),o=n("SVse"),a=n("LRne"),l=n("z6cu"),u=n("cp0P"),c=n("quSY"),h=n("vkgz"),d=n("lJxs"),p=n("JIr8"),f=n("nYR2"),m=n("w1tV"),g=n("IzEk"),b=n("IheW"),y=n("cUpR");const v=["*"];function _(t){return Error(`Unable to find icon with the name "${t}"`)}function w(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function x(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class k{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let S=(()=>{class t{constructor(t,e,n,r){this._httpClient=t,this._sanitizer=e,this._errorHandler=r,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,r){return this._addSvgIconConfig(t,e,new k(n,null,r))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,n,s){const i=this._sanitizer.sanitize(r.J.HTML,n);if(!i)throw x(n);return this._addSvgIconConfig(t,e,new k("",i,s))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new k(e,null,n))}addSvgIconSetLiteralInNamespace(t,e,n){const s=this._sanitizer.sanitize(r.J.HTML,e);if(!s)throw x(e);return this._addSvgIconSetConfig(t,new k("",s,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(r.J.RESOURCE_URL,t);if(!e)throw w(t);const n=this._cachedIconsByUrl.get(e);return n?Object(a.a)(C(n)):this._loadSvgIconFromConfig(new k(t,null)).pipe(Object(h.a)(t=>this._cachedIconsByUrl.set(e,t)),Object(d.a)(t=>C(t)))}getNamedSvgIcon(t,e=""){const n=I(e,t);let r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(e,t),r)return this._svgIconConfigs.set(n,r),this._getSvgFromConfig(r);const s=this._iconSetConfigs.get(e);return s?this._getSvgFromIconSetConfigs(t,s):Object(l.a)(_(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Object(a.a)(C(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Object(d.a)(t=>C(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);if(n)return Object(a.a)(n);const s=e.filter(t=>!t.svgText).map(t=>this._loadSvgIconSetFromConfig(t).pipe(Object(p.a)(e=>{const n=this._sanitizer.sanitize(r.J.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${e.message}`)),Object(a.a)(null)})));return Object(u.a)(s).pipe(Object(d.a)(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw _(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.svgText&&r.svgText.indexOf(t)>-1){const e=this._svgElementFromConfig(r),n=this._extractSvgIconFromSet(e,t,r.options);if(n)return n}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Object(h.a)(e=>t.svgText=e),Object(d.a)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Object(a.a)(null):this._fetchIcon(t).pipe(Object(h.a)(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,n){const r=t.querySelector(`[id="${e}"]`);if(!r)return null;const s=r.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,n);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),n);const i=this._svgElementFromString("<svg></svg>");return i.appendChild(s),this._setSvgAttributes(i,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let r=0;r<n.length;r++){const{name:t,value:s}=n[r];"id"!==t&&e.setAttribute(t,s)}for(let r=0;r<t.childNodes.length;r++)t.childNodes[r].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[r].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:n,options:s}=t,i=null!==(e=null==s?void 0:s.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(r.J.RESOURCE_URL,n);if(!o)throw w(n);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:i}).pipe(Object(f.a)(()=>this._inProgressUrlFetches.delete(o)),Object(m.a)());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(I(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){const e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](e,t);if(s)return(n=s).url&&n.options?new k(s.url,null,s.options):new k(s,null)}var n}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(b.a,8),r.Zb(y.b),r.Zb(o.d,8),r.Zb(r.m))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Zb)(b.a,8),Object(r.Zb)(y.b),Object(r.Zb)(o.d,8),Object(r.Zb)(r.m))},token:t,providedIn:"root"}),t})();function C(t){return t.cloneNode(!0)}function I(t,e){return t+":"+e}class E{constructor(t){this._elementRef=t}}const O=Object(s.d)(E),T=new r.r("mat-icon-location",{providedIn:"root",factory:function(){const t=Object(r.Y)(o.d),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),N=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],A=N.map(t=>`[${t}]`).join(", "),R=/^url\(['"]?#(.*?)['"]?\)$/;let F=(()=>{class t extends O{constructor(t,e,n,r,s){super(t),this._iconRegistry=e,this._location=r,this._errorHandler=s,this._inline=!1,this._currentIconFetch=c.a.EMPTY,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Object(i.b)(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let r=0;r<e.length;r++)e[r].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(A),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<e.length;r++)N.forEach(t=>{const s=e[r],i=s.getAttribute(t),o=i?i.match(R):null;if(o){let e=n.get(s);e||(e=[],n.set(s,e)),e.push({name:t,value:o[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[e,n]=this._splitIconName(t);e&&(this._svgNamespace=e),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,e).pipe(Object(g.a)(1)).subscribe(t=>this._setSvgElement(t),t=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${e}:${n}! ${t.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(S),r.ac("aria-hidden"),r.Pb(T),r.Pb(r.m))},t.\u0275cmp=r.Jb({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,e){2&t&&(r.Fb("data-mat-icon-type",e._usingFontIcon()?"font":"svg")("data-mat-icon-name",e._svgName||e.fontIcon)("data-mat-icon-namespace",e._svgNamespace||e.fontSet),r.Hb("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[r.Bb],ngContentSelectors:v,decls:1,vars:0,template:function(t,e){1&t&&(r.mc(),r.lc(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[s.a],s.a]}),t})()},UXun:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("jtHE");function s(t,e,n){let s;return s=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:s}){let i,o,a=0,l=!1,u=!1;return function(c){let h;a++,!i||l?(l=!1,i=new r.a(t,e,s),h=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){l=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}})):h=i.subscribe(this),this.add(()=>{a--,h.unsubscribe(),o&&!u&&n&&0===a&&(o.unsubscribe(),o=void 0,i=void 0)})}}(s))}},"UhP/":function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return C}),n.d(e,"c",function(){return I}),n.d(e,"d",function(){return g}),n.d(e,"e",function(){return b}),n.d(e,"f",function(){return m});var r=n("8Y7J"),s=n("YEUz"),i=n("9gLZ");const o=new r.Q("11.2.11");var a=n("SVse"),l=n("8LU1"),u=(n("XNiG"),n("HDdC"),n("SCoL")),c=(n("JX91"),n("omvX"));n("Ht+U");const h=new r.Q("11.2.11"),d=new r.r("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let p,f=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return Object(r.Z)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&h.full!==o.full&&console.warn("The Angular Material version ("+h.full+") does not match the Angular CDK version ("+o.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s.f),r.Zb(d,8),r.Zb(a.d))},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[i.a],i.a]}),t})();function m(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Object(l.b)(t)}}}function g(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),e&&this._elementRef.nativeElement.classList.add(`mat-${e}`),this._color=e)}}}function b(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Object(l.b)(t)}}}try{p="undefined"!=typeof Intl}catch(E){p=!1}class y{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const v={enterDuration:450,exitDuration:400},_=Object(u.e)({passive:!0}),w=["mousedown","touchstart"],x=["mouseup","mouseleave","touchend","touchcancel"];class k{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Object(l.d)(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},v),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const i=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),s=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+s*s)}(t,e,r),o=t-r.left,a=e-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=o-i+"px",u.style.top=a-i+"px",u.style.height=2*i+"px",u.style.width=2*i+"px",null!=n.color&&(u.style.backgroundColor=n.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)";const c=new y(this,u,n);return c.state=0,this._activeRipples.add(c),n.persistent||(this._mostRecentTransientRipple=c),this._runTimeoutOutsideZone(()=>{const t=c===this._mostRecentTransientRipple;c.state=1,n.persistent||t&&this._isPointerDown||c.fadeOut()},l),c}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},v),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=Object(l.d)(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(w))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(x),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=Object(s.g)(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Object(s.h)(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,_)})})}_removeTriggerEvents(){this._triggerElement&&(w.forEach(t=>{this._triggerElement.removeEventListener(t,this,_)}),this._pointerUpEventsRegistered&&x.forEach(t=>{this._triggerElement.removeEventListener(t,this,_)}))}}const S=new r.r("mat-ripple-global-options");let C=(()=>{class t{constructor(t,e,n,r,s){this._elementRef=t,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new k(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.A),r.Pb(u.a),r.Pb(S,8),r.Pb(c.a,8))},t.\u0275dir=r.Kb({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&r.Hb("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[f,u.b],f]}),t})()},VDRc:function(t,e,n){"use strict";n.d(e,"f",function(){return ut}),n.d(e,"b",function(){return $}),n.d(e,"a",function(){return q}),n.d(e,"d",function(){return b}),n.d(e,"c",function(){return Q}),n.d(e,"e",function(){return S});var r=n("8Y7J"),s=n("/q54"),i=n("9gLZ"),o=n("XNiG"),a=n("1G5W");const l="inline",u=["row","column","row-reverse","column-reverse"];function c(t){t=t?t.toLowerCase():"";let[e,n,r]=t.split(" ");return u.find(t=>t===e)||(e=u[0]),n===l&&(n=r!==l?r:"",r=l),[e,d(n),!!r]}function h(t){let[e]=c(t);return e.indexOf("row")>-1}function d(t){if(t)switch(t.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":t="wrap-reverse";break;case"no":case"none":case"nowrap":t="nowrap";break;default:t="wrap"}return t}let p=(()=>{class t extends s.i{buildStyles(t){return function(t){let[e,n,r]=c(t);return function(t,e=null,n=!1){return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":t,"flex-wrap":e||null}}(e,n,r)}(t)}}return t.\u0275fac=function(e){return f(e||t)},t.\u0275prov=Object(r.Lb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const f=r.Xb(p),m=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let g=(()=>{class t extends s.b{constructor(t,e,n,r){super(t,n,e,r),this.DIRECTIVE_KEY="layout",this.styleCache=v,this.init()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(s.j),r.Pb(p),r.Pb(s.f))},t.\u0275dir=r.Kb({type:t,features:[r.Bb]}),t})(),b=(()=>{class t extends g{constructor(){super(...arguments),this.inputs=m}}return t.\u0275fac=function(e){return y(e||t)},t.\u0275dir=r.Kb({type:t,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[r.Bb]}),t})();const y=r.Xb(b),v=new Map,_={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let w=(()=>{class t extends s.i{constructor(t){super(),this._styler=t}buildStyles(t,e){return t.endsWith(N)?function(t,e){const[n,r]=t.split(" "),s=t=>`-${t}`;let i="0px",o=s(r||n),a="0px";return"rtl"===e?a=s(n):i=s(n),{margin:`0px ${i} ${o} ${a}`}}(t=t.slice(0,t.indexOf(N)),e.directionality):{}}sideEffect(t,e,n){const r=n.items;if(t.endsWith(N)){const e=function(t,e){const[n,r]=t.split(" ");let s="0px",i="0px";return"rtl"===e?i=n:s=n,{padding:`0px ${s} ${r||n} ${i}`}}(t=t.slice(0,t.indexOf(N)),n.directionality);this._styler.applyStyleToElements(e,n.items)}else{const e=r.pop(),s=function(t,e){const n=A(e.directionality,e.layout),r=Object.assign({},_);return r[n]=t,r}(t,n);this._styler.applyStyleToElements(s,r),this._styler.applyStyleToElements(_,[e])}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s.j))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Zb)(s.j))},token:t,providedIn:"root"}),t})();const x=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let k=(()=>{class t extends s.b{constructor(t,e,n,r,s,i){super(t,s,r,i),this.zone=e,this.directionality=n,this.styleUtils=r,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new o.a;const l=[this.directionality.change,this.observerSubject.asObservable()];this.init(l),this.marshal.trackValue(this.nativeElement,"layout").pipe(Object(a.a)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const t=this.nativeElement.children,e=[];for(let n=t.length;n--;)e[n]=t[n];return e}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(t){const e=t.value.split(" ");this.layout=e[0],u.find(t=>t===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(t){const e=this.childrenNodes.filter(t=>1===t.nodeType&&this.willDisplay(t)).sort((t,e)=>{const n=+this.styler.lookupStyle(t,"order"),r=+this.styler.lookupStyle(e,"order");return isNaN(n)||isNaN(r)||n===r?0:n>r?1:-1});if(e.length>0){const n=this.directionality.value,r=this.layout;"row"===r&&"rtl"===n?this.styleCache=I:"row"===r&&"rtl"!==n?this.styleCache=O:"column"===r&&"rtl"===n?this.styleCache=E:"column"===r&&"rtl"!==n&&(this.styleCache=T),this.addStyles(t,{directionality:n,items:e,layout:r})}}clearStyles(){const t=Object.keys(this.mru).length>0,e=t?"padding":A(this.directionality.value,this.layout);t&&super.clearStyles(),this.styleUtils.applyStyleToElements({[e]:""},this.childrenNodes)}willDisplay(t){const e=this.marshal.getValue(t,"show-hide");return!0===e||void 0===e&&"none"!==this.styleUtils.lookupStyle(t,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{"undefined"!=typeof MutationObserver&&(this.observer=new MutationObserver(t=>{t.some(t=>t.addedNodes&&t.addedNodes.length>0||t.removedNodes&&t.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.A),r.Pb(i.b),r.Pb(s.j),r.Pb(w),r.Pb(s.f))},t.\u0275dir=r.Kb({type:t,features:[r.Bb]}),t})(),S=(()=>{class t extends k{constructor(){super(...arguments),this.inputs=x}}return t.\u0275fac=function(e){return C(e||t)},t.\u0275dir=r.Kb({type:t,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[r.Bb]}),t})();const C=r.Xb(S),I=new Map,E=new Map,O=new Map,T=new Map,N=" grid";function A(t,e){switch(e){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":return"rtl"===t?"margin-left":"margin-right";case"row-reverse":return"rtl"===t?"margin-right":"margin-left";default:return"rtl"===t?"margin-left":"margin-right"}}function R(t,...e){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(let n of e)if(null!=n)for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}let F=(()=>{class t extends s.i{constructor(t){super(),this.layoutConfig=t}buildStyles(t,e){let[n,r,...s]=t.split(" "),i=s.join(" ");const o=e.direction.indexOf("column")>-1?"column":"row",a=h(o)?"max-width":"max-height",l=h(o)?"min-width":"min-height",u=String(i).indexOf("calc")>-1,c=u||"auto"===i,d=String(i).indexOf("%")>-1&&!u,p=String(i).indexOf("px")>-1||String(i).indexOf("rem")>-1||String(i).indexOf("em")>-1||String(i).indexOf("vw")>-1||String(i).indexOf("vh")>-1;let f=u||p;n="0"==n?0:n,r="0"==r?0:r;const m=!n&&!r;let g={};const b={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(i||""){case"":const t=!1!==this.layoutConfig.useColumnBasisZero;i="row"===o?"0%":t?"0.000000001px":"auto";break;case"initial":case"nogrow":n=0,i="auto";break;case"grow":i="100%";break;case"noshrink":r=0,i="auto";break;case"auto":break;case"none":n=0,r=0,i="auto";break;default:f||d||isNaN(i)||(i+="%"),"0%"===i&&(f=!0),"0px"===i&&(i="0%"),g=R(b,u?{"flex-grow":n,"flex-shrink":r,"flex-basis":f?i:"100%"}:{flex:`${n} ${r} ${f?i:"100%"}`})}return g.flex||g["flex-grow"]||(g=R(b,u?{"flex-grow":n,"flex-shrink":r,"flex-basis":i}:{flex:`${n} ${r} ${i}`})),"0%"!==i&&"0px"!==i&&"0.000000001px"!==i&&"auto"!==i&&(g[l]=m||f&&n?i:null,g[a]=m||!c&&r?i:null),g[l]||g[a]?e.hasWrap&&(g[u?"flex-basis":"flex"]=g[a]?u?g[a]:`${n} ${r} ${g[a]}`:u?g[l]:`${n} ${r} ${g[l]}`):g=R(b,u?{"flex-grow":n,"flex-shrink":r,"flex-basis":i}:{flex:`${n} ${r} ${i}`}),R(g,{"box-sizing":"border-box"})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s.e))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Zb)(s.e))},token:t,providedIn:"root"}),t})();const D=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let P=(()=>{class t extends s.b{constructor(t,e,n,r,s){super(t,r,e,s),this.layoutConfig=n,this.marshal=s,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(t){this.flexShrink=t||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(t){this.flexGrow=t||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(Object(a.a)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(Object(a.a)(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(t){const e=t.value.split(" ");this.direction=e[0],this.wrap=void 0!==e[1]&&"wrap"===e[1],this.triggerUpdate()}updateWithValue(t){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const e=this.direction,n=e.startsWith("row"),r=this.wrap;n&&r?this.styleCache=z:n&&!r?this.styleCache=L:!n&&r?this.styleCache=B:n||r||(this.styleCache=j);const i=String(t).replace(";",""),o=Object(s.k)(i,this.flexGrow,this.flexShrink);this.addStyles(o.join(" "),{direction:e,hasWrap:r})}triggerReflow(){const t=this.activatedValue;if(void 0!==t){const e=Object(s.k)(t+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,e.join(" "))}}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(s.j),r.Pb(s.e),r.Pb(F),r.Pb(s.f))},t.\u0275dir=r.Kb({type:t,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[r.Bb]}),t})(),$=(()=>{class t extends P{constructor(){super(...arguments),this.inputs=D}}return t.\u0275fac=function(e){return M(e||t)},t.\u0275dir=r.Kb({type:t,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[r.Bb]}),t})();const M=r.Xb($),L=new Map,j=new Map,z=new Map,B=new Map;new Map,new Map,new Map,new Map,new Map;let V=(()=>{class t extends s.i{buildStyles(t){const e={};switch(t=t||"stretch"){case"start":e["align-self"]="flex-start";break;case"end":e["align-self"]="flex-end";break;default:e["align-self"]=t}return e}}return t.\u0275fac=function(e){return U(e||t)},t.\u0275prov=Object(r.Lb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const U=r.Xb(V),W=["fxFlexAlign","fxFlexAlign.xs","fxFlexAlign.sm","fxFlexAlign.md","fxFlexAlign.lg","fxFlexAlign.xl","fxFlexAlign.lt-sm","fxFlexAlign.lt-md","fxFlexAlign.lt-lg","fxFlexAlign.lt-xl","fxFlexAlign.gt-xs","fxFlexAlign.gt-sm","fxFlexAlign.gt-md","fxFlexAlign.gt-lg"];let H=(()=>{class t extends s.b{constructor(t,e,n,r){super(t,n,e,r),this.DIRECTIVE_KEY="flex-align",this.styleCache=G,this.init()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(s.j),r.Pb(V),r.Pb(s.f))},t.\u0275dir=r.Kb({type:t,features:[r.Bb]}),t})();const G=new Map;let q=(()=>{class t extends H{constructor(){super(...arguments),this.inputs=W}}return t.\u0275fac=function(e){return Z(e||t)},t.\u0275dir=r.Kb({type:t,selectors:[["","fxFlexAlign",""],["","fxFlexAlign.xs",""],["","fxFlexAlign.sm",""],["","fxFlexAlign.md",""],["","fxFlexAlign.lg",""],["","fxFlexAlign.xl",""],["","fxFlexAlign.lt-sm",""],["","fxFlexAlign.lt-md",""],["","fxFlexAlign.lt-lg",""],["","fxFlexAlign.lt-xl",""],["","fxFlexAlign.gt-xs",""],["","fxFlexAlign.gt-sm",""],["","fxFlexAlign.gt-md",""],["","fxFlexAlign.gt-lg",""]],inputs:{fxFlexAlign:"fxFlexAlign","fxFlexAlign.xs":"fxFlexAlign.xs","fxFlexAlign.sm":"fxFlexAlign.sm","fxFlexAlign.md":"fxFlexAlign.md","fxFlexAlign.lg":"fxFlexAlign.lg","fxFlexAlign.xl":"fxFlexAlign.xl","fxFlexAlign.lt-sm":"fxFlexAlign.lt-sm","fxFlexAlign.lt-md":"fxFlexAlign.lt-md","fxFlexAlign.lt-lg":"fxFlexAlign.lt-lg","fxFlexAlign.lt-xl":"fxFlexAlign.lt-xl","fxFlexAlign.gt-xs":"fxFlexAlign.gt-xs","fxFlexAlign.gt-sm":"fxFlexAlign.gt-sm","fxFlexAlign.gt-md":"fxFlexAlign.gt-md","fxFlexAlign.gt-lg":"fxFlexAlign.gt-lg"},features:[r.Bb]}),t})();const Z=r.Xb(q);new Map;let K=(()=>{class t extends s.i{buildStyles(t,e){const n={},[r,s]=t.split(" ");switch(r){case"center":n["justify-content"]="center";break;case"space-around":n["justify-content"]="space-around";break;case"space-between":n["justify-content"]="space-between";break;case"space-evenly":n["justify-content"]="space-evenly";break;case"end":case"flex-end":n["justify-content"]="flex-end";break;case"start":case"flex-start":default:n["justify-content"]="flex-start"}switch(s){case"start":case"flex-start":n["align-items"]=n["align-content"]="flex-start";break;case"center":n["align-items"]=n["align-content"]="center";break;case"end":case"flex-end":n["align-items"]=n["align-content"]="flex-end";break;case"space-between":n["align-content"]="space-between",n["align-items"]="stretch";break;case"space-around":n["align-content"]="space-around",n["align-items"]="stretch";break;case"baseline":n["align-content"]="stretch",n["align-items"]="baseline";break;case"stretch":default:n["align-items"]=n["align-content"]="stretch"}return R(n,{display:e.inline?"inline-flex":"flex","flex-direction":e.layout,"box-sizing":"border-box","max-width":"stretch"===s?h(e.layout)?null:"100%":null,"max-height":"stretch"===s&&h(e.layout)?"100%":null})}}return t.\u0275fac=function(e){return Y(e||t)},t.\u0275prov=Object(r.Lb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const Y=r.Xb(K),X=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let J=(()=>{class t extends s.b{constructor(t,e,n,r){super(t,n,e,r),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(Object(a.a)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const e=this.layout||"row",n=this.inline;"row"===e&&n?this.styleCache=it:"row"!==e||n?"row-reverse"===e&&n?this.styleCache=at:"row-reverse"!==e||n?"column"===e&&n?this.styleCache=ot:"column"!==e||n?"column-reverse"===e&&n?this.styleCache=lt:"column-reverse"!==e||n||(this.styleCache=st):this.styleCache=nt:this.styleCache=rt:this.styleCache=et,this.addStyles(t,{layout:e,inline:n})}onLayoutChange(t){const e=t.value.split(" ");this.layout=e[0],this.inline=t.value.includes("inline"),u.find(t=>t===this.layout)||(this.layout="row"),this.triggerUpdate()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(s.j),r.Pb(K),r.Pb(s.f))},t.\u0275dir=r.Kb({type:t,features:[r.Bb]}),t})(),Q=(()=>{class t extends J{constructor(){super(...arguments),this.inputs=X}}return t.\u0275fac=function(e){return tt(e||t)},t.\u0275dir=r.Kb({type:t,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[r.Bb]}),t})();const tt=r.Xb(Q),et=new Map,nt=new Map,rt=new Map,st=new Map,it=new Map,ot=new Map,at=new Map,lt=new Map;let ut=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[s.c,i.a]]}),t})()},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),s=n("z+Ro"),i=n("bHdf"),o=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(s.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(i.a)(e)(Object(o.a)(t,n))}},VVxe:function(t,e,n){var r,s;void 0===(s="function"==typeof(r=function(){function t(e){return"string"==typeof e?e.replace(/[^A-Za-z0-9]/g,function(e){return t.characters[e]||e}):e}return t.characters={"\xc1":"A","\u0102":"A","\u1eae":"A","\u1eb6":"A","\u1eb0":"A","\u1eb2":"A","\u1eb4":"A","\u01cd":"A","\xc2":"A","\u1ea4":"A","\u1eac":"A","\u1ea6":"A","\u1ea8":"A","\u1eaa":"A","\xc4":"A","\u01de":"A","\u0226":"A","\u01e0":"A","\u1ea0":"A","\u0200":"A","\xc0":"A","\u1ea2":"A","\u0202":"A","\u0100":"A","\u0104":"A","\xc5":"A","\u01fa":"A","\u1e00":"A","\u023a":"A","\xc3":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u1e02":"B","\u1e04":"B","\u0181":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0106":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0108":"C","\u010a":"C","\u0187":"C","\u023b":"C","\u010e":"D","\u1e10":"D","\u1e12":"D","\u1e0a":"D","\u1e0c":"D","\u018a":"D","\u1e0e":"D","\u01f2":"D","\u01c5":"D","\u0110":"D","\xd0":"D","\u018b":"D","\u01f1":"DZ","\u01c4":"DZ","\xc9":"E","\u0114":"E","\u011a":"E","\u0228":"E","\u1e1c":"E","\xca":"E","\u1ebe":"E","\u1ec6":"E","\u1ec0":"E","\u1ec2":"E","\u1ec4":"E","\u1e18":"E","\xcb":"E","\u0116":"E","\u1eb8":"E","\u0204":"E","\xc8":"E","\u1eba":"E","\u0206":"E","\u0112":"E","\u1e16":"E","\u1e14":"E","\u0118":"E","\u0246":"E","\u1ebc":"E","\u1e1a":"E","\ua76a":"ET","\u1e1e":"F","\u0191":"F","\u01f4":"G","\u011e":"G","\u01e6":"G","\u0122":"G","\u011c":"G","\u0120":"G","\u0193":"G","\u1e20":"G","\u01e4":"G","\u1e2a":"H","\u021e":"H","\u1e28":"H","\u0124":"H","\u2c67":"H","\u1e26":"H","\u1e22":"H","\u1e24":"H","\u0126":"H","\xcd":"I","\u012c":"I","\u01cf":"I","\xce":"I","\xcf":"I","\u1e2e":"I","\u0130":"I","\u1eca":"I","\u0208":"I","\xcc":"I","\u1ec8":"I","\u020a":"I","\u012a":"I","\u012e":"I","\u0197":"I","\u0128":"I","\u1e2c":"I","\u0406":"I","\ua779":"D","\ua77b":"F","\ua77d":"G","\ua782":"R","\ua784":"S","\ua786":"T","\ua76c":"IS","\u0134":"J","\u0248":"J","\u1e30":"K","\u01e8":"K","\u0136":"K","\u2c69":"K","\ua742":"K","\u1e32":"K","\u0198":"K","\u1e34":"K","\ua740":"K","\ua744":"K","\u0139":"L","\u023d":"L","\u013d":"L","\u013b":"L","\u1e3c":"L","\u1e36":"L","\u1e38":"L","\u2c60":"L","\ua748":"L","\u1e3a":"L","\u013f":"L","\u2c62":"L","\u01c8":"L","\u0141":"L","\u01c7":"LJ","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u0143":"N","\u0147":"N","\u0145":"N","\u1e4a":"N","\u1e44":"N","\u1e46":"N","\u01f8":"N","\u019d":"N","\u1e48":"N","\u0220":"N","\u01cb":"N","\xd1":"N","\u01ca":"NJ","\xd3":"O","\u014e":"O","\u01d1":"O","\xd4":"O","\u1ed0":"O","\u1ed8":"O","\u1ed2":"O","\u1ed4":"O","\u1ed6":"O","\xd6":"O","\u022a":"O","\u022e":"O","\u0230":"O","\u1ecc":"O","\u0150":"O","\u020c":"O","\xd2":"O","\u1ece":"O","\u01a0":"O","\u1eda":"O","\u1ee2":"O","\u1edc":"O","\u1ede":"O","\u1ee0":"O","\u020e":"O","\ua74a":"O","\ua74c":"O","\u014c":"O","\u1e52":"O","\u1e50":"O","\u019f":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\xd5":"O","\u1e4c":"O","\u1e4e":"O","\u022c":"O","\u01a2":"OI","\ua74e":"OO","\u0190":"E","\u0186":"O","\u0222":"OU","\u1e54":"P","\u1e56":"P","\ua752":"P","\u01a4":"P","\ua754":"P","\u2c63":"P","\ua750":"P","\ua758":"Q","\ua756":"Q","\u0154":"R","\u0158":"R","\u0156":"R","\u1e58":"R","\u1e5a":"R","\u1e5c":"R","\u0210":"R","\u0212":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua73e":"C","\u018e":"E","\u015a":"S","\u1e64":"S","\u0160":"S","\u1e66":"S","\u015e":"S","\u015c":"S","\u0218":"S","\u1e60":"S","\u1e62":"S","\u1e68":"S","\xdf":"ss","\u0164":"T","\u0162":"T","\u1e70":"T","\u021a":"T","\u023e":"T","\u1e6a":"T","\u1e6c":"T","\u01ac":"T","\u1e6e":"T","\u01ae":"T","\u0166":"T","\u2c6f":"A","\ua780":"L","\u019c":"M","\u0245":"V","\ua728":"TZ","\xda":"U","\u016c":"U","\u01d3":"U","\xdb":"U","\u1e76":"U","\xdc":"U","\u01d7":"U","\u01d9":"U","\u01db":"U","\u01d5":"U","\u1e72":"U","\u1ee4":"U","\u0170":"U","\u0214":"U","\xd9":"U","\u1ee6":"U","\u01af":"U","\u1ee8":"U","\u1ef0":"U","\u1eea":"U","\u1eec":"U","\u1eee":"U","\u0216":"U","\u016a":"U","\u1e7a":"U","\u0172":"U","\u016e":"U","\u0168":"U","\u1e78":"U","\u1e74":"U","\ua75e":"V","\u1e7e":"V","\u01b2":"V","\u1e7c":"V","\ua760":"VY","\u1e82":"W","\u0174":"W","\u1e84":"W","\u1e86":"W","\u1e88":"W","\u1e80":"W","\u2c72":"W","\u1e8c":"X","\u1e8a":"X","\xdd":"Y","\u0176":"Y","\u0178":"Y","\u1e8e":"Y","\u1ef4":"Y","\u1ef2":"Y","\u01b3":"Y","\u1ef6":"Y","\u1efe":"Y","\u0232":"Y","\u024e":"Y","\u1ef8":"Y","\u0407":"YI","\u0179":"Z","\u017d":"Z","\u1e90":"Z","\u2c6b":"Z","\u017b":"Z","\u1e92":"Z","\u0224":"Z","\u1e94":"Z","\u01b5":"Z","\xde":"TH","\u0132":"IJ","\u0152":"OE","\u1d00":"A","\u1d01":"AE","\u0299":"B","\u1d03":"B","\u1d04":"C","\u1d05":"D","\u1d07":"E","\ua730":"F","\u0262":"G","\u029b":"G","\u029c":"H","\u026a":"I","\u0281":"R","\u1d0a":"J","\u1d0b":"K","\u029f":"L","\u1d0c":"L","\u1d0d":"M","\u0274":"N","\u1d0f":"O","\u0276":"OE","\u1d10":"O","\u1d15":"OU","\u1d18":"P","\u0280":"R","\u1d0e":"N","\u1d19":"R","\ua731":"S","\u1d1b":"T","\u2c7b":"E","\u1d1a":"R","\u1d1c":"U","\u1d20":"V","\u1d21":"W","\u028f":"Y","\u1d22":"Z","\xe1":"a","\u0103":"a","\u1eaf":"a","\u1eb7":"a","\u1eb1":"a","\u1eb3":"a","\u1eb5":"a","\u01ce":"a","\xe2":"a","\u1ea5":"a","\u1ead":"a","\u1ea7":"a","\u1ea9":"a","\u1eab":"a","\xe4":"a","\u01df":"a","\u0227":"a","\u01e1":"a","\u1ea1":"a","\u0201":"a","\xe0":"a","\u1ea3":"a","\u0203":"a","\u0101":"a","\u0105":"a","\u1d8f":"a","\u1e9a":"a","\xe5":"a","\u01fb":"a","\u1e01":"a","\u2c65":"a","\xe3":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u1e03":"b","\u1e05":"b","\u0253":"b","\u1e07":"b","\u1d6c":"b","\u1d80":"b","\u0180":"b","\u0183":"b","\u0275":"o","\u0107":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0109":"c","\u0255":"c","\u010b":"c","\u0188":"c","\u023c":"c","\u010f":"d","\u1e11":"d","\u1e13":"d","\u0221":"d","\u1e0b":"d","\u1e0d":"d","\u0257":"d","\u1d91":"d","\u1e0f":"d","\u1d6d":"d","\u1d81":"d","\u0111":"d","\u0256":"d","\u018c":"d","\xf0":"d","\u0131":"i","\u0237":"j","\u025f":"j","\u0284":"j","\u01f3":"dz","\u01c6":"dz","\xe9":"e","\u0115":"e","\u011b":"e","\u0229":"e","\u1e1d":"e","\xea":"e","\u1ebf":"e","\u1ec7":"e","\u1ec1":"e","\u1ec3":"e","\u1ec5":"e","\u1e19":"e","\xeb":"e","\u0117":"e","\u1eb9":"e","\u0205":"e","\xe8":"e","\u1ebb":"e","\u0207":"e","\u0113":"e","\u1e17":"e","\u1e15":"e","\u2c78":"e","\u0119":"e","\u1d92":"e","\u0247":"e","\u1ebd":"e","\u1e1b":"e","\ua76b":"et","\u1e1f":"f","\u0192":"f","\u1d6e":"f","\u1d82":"f","\u01f5":"g","\u011f":"g","\u01e7":"g","\u0123":"g","\u011d":"g","\u0121":"g","\u0260":"g","\u1e21":"g","\u1d83":"g","\u01e5":"g","\u1e2b":"h","\u021f":"h","\u1e29":"h","\u0125":"h","\u2c68":"h","\u1e27":"h","\u1e23":"h","\u1e25":"h","\u0266":"h","\u1e96":"h","\u0127":"h","\u0195":"hv","\xed":"i","\u012d":"i","\u01d0":"i","\xee":"i","\xef":"i","\u1e2f":"i","\u1ecb":"i","\u0209":"i","\xec":"i","\u1ec9":"i","\u020b":"i","\u012b":"i","\u012f":"i","\u1d96":"i","\u0268":"i","\u0129":"i","\u1e2d":"i","\u0456":"i","\ua77a":"d","\ua77c":"f","\u1d79":"g","\ua783":"r","\ua785":"s","\ua787":"t","\ua76d":"is","\u01f0":"j","\u0135":"j","\u029d":"j","\u0249":"j","\u1e31":"k","\u01e9":"k","\u0137":"k","\u2c6a":"k","\ua743":"k","\u1e33":"k","\u0199":"k","\u1e35":"k","\u1d84":"k","\ua741":"k","\ua745":"k","\u013a":"l","\u019a":"l","\u026c":"l","\u013e":"l","\u013c":"l","\u1e3d":"l","\u0234":"l","\u1e37":"l","\u1e39":"l","\u2c61":"l","\ua749":"l","\u1e3b":"l","\u0140":"l","\u026b":"l","\u1d85":"l","\u026d":"l","\u0142":"l","\u01c9":"lj","\u017f":"s","\u1e9c":"s","\u1e9b":"s","\u1e9d":"s","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u1d6f":"m","\u1d86":"m","\u0144":"n","\u0148":"n","\u0146":"n","\u1e4b":"n","\u0235":"n","\u1e45":"n","\u1e47":"n","\u01f9":"n","\u0272":"n","\u1e49":"n","\u019e":"n","\u1d70":"n","\u1d87":"n","\u0273":"n","\xf1":"n","\u01cc":"nj","\xf3":"o","\u014f":"o","\u01d2":"o","\xf4":"o","\u1ed1":"o","\u1ed9":"o","\u1ed3":"o","\u1ed5":"o","\u1ed7":"o","\xf6":"o","\u022b":"o","\u022f":"o","\u0231":"o","\u1ecd":"o","\u0151":"o","\u020d":"o","\xf2":"o","\u1ecf":"o","\u01a1":"o","\u1edb":"o","\u1ee3":"o","\u1edd":"o","\u1edf":"o","\u1ee1":"o","\u020f":"o","\ua74b":"o","\ua74d":"o","\u2c7a":"o","\u014d":"o","\u1e53":"o","\u1e51":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\xf5":"o","\u1e4d":"o","\u1e4f":"o","\u022d":"o","\u01a3":"oi","\ua74f":"oo","\u025b":"e","\u1d93":"e","\u0254":"o","\u1d97":"o","\u0223":"ou","\u1e55":"p","\u1e57":"p","\ua753":"p","\u01a5":"p","\u1d71":"p","\u1d88":"p","\ua755":"p","\u1d7d":"p","\ua751":"p","\ua759":"q","\u02a0":"q","\u024b":"q","\ua757":"q","\u0155":"r","\u0159":"r","\u0157":"r","\u1e59":"r","\u1e5b":"r","\u1e5d":"r","\u0211":"r","\u027e":"r","\u1d73":"r","\u0213":"r","\u1e5f":"r","\u027c":"r","\u1d72":"r","\u1d89":"r","\u024d":"r","\u027d":"r","\u2184":"c","\ua73f":"c","\u0258":"e","\u027f":"r","\u015b":"s","\u1e65":"s","\u0161":"s","\u1e67":"s","\u015f":"s","\u015d":"s","\u0219":"s","\u1e61":"s","\u1e63":"s","\u1e69":"s","\u0282":"s","\u1d74":"s","\u1d8a":"s","\u023f":"s","\u0261":"g","\u1d11":"o","\u1d13":"o","\u1d1d":"u","\u0165":"t","\u0163":"t","\u1e71":"t","\u021b":"t","\u0236":"t","\u1e97":"t","\u2c66":"t","\u1e6b":"t","\u1e6d":"t","\u01ad":"t","\u1e6f":"t","\u1d75":"t","\u01ab":"t","\u0288":"t","\u0167":"t","\u1d7a":"th","\u0250":"a","\u1d02":"ae","\u01dd":"e","\u1d77":"g","\u0265":"h","\u02ae":"h","\u02af":"h","\u1d09":"i","\u029e":"k","\ua781":"l","\u026f":"m","\u0270":"m","\u1d14":"oe","\u0279":"r","\u027b":"r","\u027a":"r","\u2c79":"r","\u0287":"t","\u028c":"v","\u028d":"w","\u028e":"y","\ua729":"tz","\xfa":"u","\u016d":"u","\u01d4":"u","\xfb":"u","\u1e77":"u","\xfc":"u","\u01d8":"u","\u01da":"u","\u01dc":"u","\u01d6":"u","\u1e73":"u","\u1ee5":"u","\u0171":"u","\u0215":"u","\xf9":"u","\u1ee7":"u","\u01b0":"u","\u1ee9":"u","\u1ef1":"u","\u1eeb":"u","\u1eed":"u","\u1eef":"u","\u0217":"u","\u016b":"u","\u1e7b":"u","\u0173":"u","\u1d99":"u","\u016f":"u","\u0169":"u","\u1e79":"u","\u1e75":"u","\u1d6b":"ue","\ua778":"um","\u2c74":"v","\ua75f":"v","\u1e7f":"v","\u028b":"v","\u1d8c":"v","\u2c71":"v","\u1e7d":"v","\ua761":"vy","\u1e83":"w","\u0175":"w","\u1e85":"w","\u1e87":"w","\u1e89":"w","\u1e81":"w","\u2c73":"w","\u1e98":"w","\u1e8d":"x","\u1e8b":"x","\u1d8d":"x","\xfd":"y","\u0177":"y","\xff":"y","\u1e8f":"y","\u1ef5":"y","\u1ef3":"y","\u01b4":"y","\u1ef7":"y","\u1eff":"y","\u0233":"y","\u1e99":"y","\u024f":"y","\u1ef9":"y","\u0457":"yi","\u017a":"z","\u017e":"z","\u1e91":"z","\u0291":"z","\u2c6c":"z","\u017c":"z","\u1e93":"z","\u0225":"z","\u1e95":"z","\u1d76":"z","\u1d8e":"z","\u0290":"z","\u01b6":"z","\u0240":"z","\xfe":"th","\ufb00":"ff","\ufb03":"ffi","\ufb04":"ffl","\ufb01":"fi","\ufb02":"fl","\u0133":"ij","\u0153":"oe","\ufb06":"st","\u2090":"a","\u2091":"e","\u1d62":"i","\u2c7c":"j","\u2092":"o","\u1d63":"r","\u1d64":"u","\u1d65":"v","\u2093":"x","\u0401":"YO","\u0419":"I","\u0426":"TS","\u0423":"U","\u041a":"K","\u0415":"E","\u041d":"N","\u0413":"G","\u0490":"G","\u0428":"SH","\u0429":"SCH","\u0417":"Z","\u0425":"H","\u042a":"'","\u0451":"yo","\u0439":"i","\u0446":"ts","\u0443":"u","\u043a":"k","\u0435":"e","\u043d":"n","\u0433":"g","\u0491":"g","\u0448":"sh","\u0449":"sch","\u0437":"z","\u0445":"h","\u044a":"'","\u0424":"F","\u042b":"I","\u0412":"V","\u0410":"a","\u041f":"P","\u0420":"R","\u041e":"O","\u041b":"L","\u0414":"D","\u0416":"ZH","\u042d":"E","\u0444":"f","\u044b":"i","\u0432":"v","\u0430":"a","\u043f":"p","\u0440":"r","\u043e":"o","\u043b":"l","\u0434":"d","\u0436":"zh","\u044d":"e","\u042f":"Ya","\u0427":"CH","\u0421":"S","\u041c":"M","\u0418":"I","\u0422":"T","\u042c":"'","\u0411":"B","\u042e":"YU","\u044f":"ya","\u0447":"ch","\u0441":"s","\u043c":"m","\u0438":"i","\u0442":"t","\u044c":"'","\u0431":"b","\u044e":"yu"},t})?r.call(e,n,e,t):r)||(t.exports=s)},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("EY2u"),s=n("LRne"),i=n("z6cu");let o=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(s.a)(this.value);case"E":return Object(i.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},WOAq:function(t,e,n){"use strict";(function(t){var r=n("Ju5/"),s=n("L3Qv"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.a.Buffer:void 0;e.a=(a?a.isBuffer:void 0)||s.a}).call(this,n("3UD+")(t))},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});var r=n("HDdC"),s=n("7o/Q"),i=n("quSY"),o=n("9ppp"),a=n("Ylt2"),l=n("2QA8");class u extends s.a{constructor(t){super(t),this.destination=t}}let c=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[l.a](){return new u(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let s=0;s<n;s++)r[s].next(t)}}error(t){if(this.closed)throw new o.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let s=0;s<n;s++)r[s].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.a;return this.hasError?(t.error(this.thrownError),i.a.EMPTY):this.isStopped?(t.complete(),i.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends c{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):i.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},XqMk:function(t,e,n){"use strict";var r="object"==typeof global&&global&&global.Object===Object&&global;e.a=r},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("DH7j");function s(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},YEUz:function(t,e,n){"use strict";n.d(e,"a",function(){return U}),n.d(e,"b",function(){return S}),n.d(e,"c",function(){return E}),n.d(e,"d",function(){return M}),n.d(e,"e",function(){return R}),n.d(e,"f",function(){return V}),n.d(e,"g",function(){return F}),n.d(e,"h",function(){return D});var r=n("SVse"),s=n("8Y7J"),i=n("XNiG"),o=n("quSY"),a=n("LRne"),l=n("Ht+U"),u=n("vkgz"),c=n("Kj3r"),h=n("pLZG"),d=n("lJxs"),p=n("IzEk"),f=n("8LU1"),m=n("SCoL");n("HDdC");let g=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(s.Lb)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({providers:[g]}),t})();function y(t,e){return(t.getAttribute(e)||"").match(/\S+/g)||[]}const v="cdk-describedby-message-container",_="cdk-describedby-host";let w=0;const x=new Map;let k=null,S=(()=>{class t{constructor(t){this._document=t}describe(t,e,n){if(!this._canBeDescribed(t,e))return;const r=C(e,n);"string"!=typeof e?(I(e),x.set(r,{messageElement:e,referenceCount:0})):x.has(r)||this._createMessageElement(e,n),this._isElementDescribedByMessage(t,r)||this._addMessageReference(t,r)}removeDescription(t,e,n){if(!e||!this._isElementNode(t))return;const r=C(e,n);if(this._isElementDescribedByMessage(t,r)&&this._removeMessageReference(t,r),"string"==typeof e){const t=x.get(r);t&&0===t.referenceCount&&this._deleteMessageElement(r)}k&&0===k.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const t=this._document.querySelectorAll("[cdk-describedby-host]");for(let e=0;e<t.length;e++)this._removeCdkDescribedByReferenceIds(t[e]),t[e].removeAttribute(_);k&&this._deleteMessagesContainer(),x.clear()}_createMessageElement(t,e){const n=this._document.createElement("div");I(n),n.textContent=t,e&&n.setAttribute("role",e),this._createMessagesContainer(),k.appendChild(n),x.set(C(t,e),{messageElement:n,referenceCount:0})}_deleteMessageElement(t){const e=x.get(t),n=e&&e.messageElement;k&&n&&k.removeChild(n),x.delete(t)}_createMessagesContainer(){if(!k){const t=this._document.getElementById(v);t&&t.parentNode&&t.parentNode.removeChild(t),k=this._document.createElement("div"),k.id=v,k.style.visibility="hidden",k.classList.add("cdk-visually-hidden"),this._document.body.appendChild(k)}}_deleteMessagesContainer(){k&&k.parentNode&&(k.parentNode.removeChild(k),k=null)}_removeCdkDescribedByReferenceIds(t){const e=y(t,"aria-describedby").filter(t=>0!=t.indexOf("cdk-describedby-message"));t.setAttribute("aria-describedby",e.join(" "))}_addMessageReference(t,e){const n=x.get(e);!function(t,e,n){const r=y(t,e);r.some(t=>t.trim()==n.trim())||(r.push(n.trim()),t.setAttribute(e,r.join(" ")))}(t,"aria-describedby",n.messageElement.id),t.setAttribute(_,""),n.referenceCount++}_removeMessageReference(t,e){const n=x.get(e);n.referenceCount--,function(t,e,n){const r=y(t,e).filter(t=>t!=n.trim());r.length?t.setAttribute(e,r.join(" ")):t.removeAttribute(e)}(t,"aria-describedby",n.messageElement.id),t.removeAttribute(_)}_isElementDescribedByMessage(t,e){const n=y(t,"aria-describedby"),r=x.get(e),s=r&&r.messageElement.id;return!!s&&-1!=n.indexOf(s)}_canBeDescribed(t,e){if(!this._isElementNode(t))return!1;if(e&&"object"==typeof e)return!0;const n=null==e?"":`${e}`.trim(),r=t.getAttribute("aria-label");return!(!n||r&&r.trim()===n)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(r.d))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(r.d))},token:t,providedIn:"root"}),t})();function C(t,e){return"string"==typeof t?`${e||""}/${t}`:t}function I(t){t.id||(t.id="cdk-describedby-message-"+w++)}class E extends class{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new i.a,this._typeaheadSubscription=o.a.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new i.a,this.change=new i.a,t instanceof s.E&&t.changes.subscribe(t=>{if(this._activeItem){const e=t.toArray().indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Object(u.a)(t=>this._pressedLetters.push(t)),Object(c.a)(t),Object(h.a)(()=>this._pressedLetters.length>0),Object(d.a)(()=>this._pressedLetters.join(""))).subscribe(t=>{const e=this._getItemsArray();for(let n=1;n<e.length+1;n++){const r=(this._activeItemIndex+n)%e.length,s=e[r];if(!this._skipPredicateFn(s)&&0===s.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(r);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(e=>!t[e]||this._allowedModifierKeys.indexOf(e)>-1);switch(e){case l.k:return void this.tabOut.next();case l.b:if(this._vertical&&n){this.setNextItemActive();break}return;case l.l:if(this._vertical&&n){this.setPreviousItemActive();break}return;case l.i:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case l.g:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case l.f:if(this._homeAndEnd&&n){this.setFirstItemActive();break}return;case l.c:if(this._homeAndEnd&&n){this.setLastItemActive();break}return;default:return void((n||Object(l.o)(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=l.a&&e<=l.m||e>=l.n&&e<=l.h)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),r=e[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const r=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof s.E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let O=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(e){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){if(-1===N(e))return!1;if(!this.isVisible(e))return!1}let r=t.nodeName.toLowerCase(),s=N(t);return t.hasAttribute("contenteditable")?-1!==s:"iframe"!==r&&"object"!==r&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,e){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||T(t))}(t)&&!this.isDisabled(t)&&((null==e?void 0:e.ignoreVisibility)||this.isVisible(t))}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(m.a))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(m.a))},token:t,providedIn:"root"}),t})();function T(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function N(t){if(!T(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class A{constructor(t,e,n,r,s=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){const e=this._getFirstTabbableElement(t);return null==e||e.focus(),!!e}return t.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){const t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Object(p.a)(1)).subscribe(t)}}let R=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new A(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(O),s.Zb(s.A),s.Zb(r.d))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(O),Object(s.Zb)(s.A),Object(s.Zb)(r.d))},token:t,providedIn:"root"}),t})();function F(t){return 0===t.buttons}function D(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const P=new s.r("cdk-focus-monitor-default-options"),$=Object(m.e)({passive:!0,capture:!0});let M=(()=>{class t{constructor(t,e,n,r){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=F(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{D(t)?this._lastTouchTarget||this._setOriginForCurrentEventQueue("keyboard"):(null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=L(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650))},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=L(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(t,e=!1){const n=Object(f.d)(t);if(!this._platform.isBrowser||1!==n.nodeType)return Object(a.a)(null);const r=Object(m.c)(n)||this._getDocument(),s=this._elementInfo.get(n);if(s)return e&&(s.checkChildren=!0),s.subject;const o={checkChildren:e,subject:new i.a,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(t){const e=Object(f.d)(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=Object(f.d)(t);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([t,n])=>this._originChanged(t,e,n)):(this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=L(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);n&&(n.checkChildren||e===L(t))&&this._originChanged(e,this._getFocusOrigin(t),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,$),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,$)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,$),t.addEventListener("mousedown",this._documentMousedownListener,$),t.addEventListener("touchstart",this._documentTouchstartListener,$),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,$),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,$),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,$),t.removeEventListener("mousedown",this._documentMousedownListener,$),t.removeEventListener("touchstart",this._documentTouchstartListener,$),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){const e=[];return this._elementInfo.forEach((n,r)=>{(r===t||n.checkChildren&&r.contains(t))&&e.push([r,n])}),e}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(s.A),s.Zb(m.a),s.Zb(r.d,8),s.Zb(P,8))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(s.A),Object(s.Zb)(m.a),Object(s.Zb)(r.d,8),Object(s.Zb)(P,8))},token:t,providedIn:"root"}),t})();function L(t){return t.composedPath?t.composedPath()[0]:t.target}const j="cdk-high-contrast-black-on-white",z="cdk-high-contrast-white-on-black",B="cdk-high-contrast-active";let V=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(B),t.remove(j),t.remove(z);const e=this.getHighContrastMode();1===e?(t.add(B),t.add(j)):2===e&&(t.add(B),t.add(z))}}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(m.a),s.Zb(r.d))},t.\u0275prov=Object(s.Lb)({factory:function(){return new t(Object(s.Zb)(m.a),Object(s.Zb)(r.d))},token:t,providedIn:"root"}),t})(),U=(()=>{class t{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(V))},t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({imports:[[m.b,b]]}),t})()},YSVl:function(t,e,n){var r=n("EhIR"),s=n("uDiL"),i=n("pJ6O"),o=n("yuCN"),a=n("euyF"),l=n("ie1u"),u=n("pJ3+");u.alea=r,u.xor128=s,u.xorwow=i,u.xorshift7=o,u.xor4096=a,u.tychei=l,t.exports=u},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("quSY");class s extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},YrdD:function(t,e,n){"use strict";n.d(e,"a",function(){return O});var r=n("8Y7J"),s=n("Oh6u"),i=n("XNiG"),o=n("1G5W"),a=n("s7LF"),l=n("SVse"),u=n("VDRc"),c=n("ura0"),h=n("q8q0"),d=n("Tj54"),p=n("BCSS"),f=n("TSSN");const m=["filter"];function g(t,e){if(1&t&&r.Qb(0,"stf-tag",7),2&t){const t=r.hc().$implicit,e=r.hc(2);r.nc("tag",e.ontology.getTagsNameById(t))("secondary",e.isSecondary(t))("size",e.size)}}function b(t,e){if(1&t){const t=r.Wb();r.Vb(0,"stf-tag",8),r.dc("clickIcon",function(){r.xc(t);const e=r.hc().$implicit;return r.hc(2).deleteTag(e)}),r.Ub()}if(2&t){const t=r.hc().$implicit,e=r.hc(2);r.nc("tag",e.ontology.getTagsNameById(t))("deleteIcon",!0)("secondary",e.isSecondary(t))("size",e.size)}}function y(t,e){if(1&t&&(r.Tb(0),r.Fc(1,g,1,3,"stf-tag",5),r.Fc(2,b,1,4,"stf-tag",6),r.Sb()),2&t){const t=e.$implicit,n=r.hc(2);r.Eb(1),r.nc("ngIf",t&&n.ontology.getTagsNameById(t)&&!n.show_editable),r.Eb(1),r.nc("ngIf",t&&n.ontology.getTagsNameById(t)&&n.show_editable)}}function v(t,e){if(1&t){const t=r.Wb();r.Vb(0,"mat-icon",9),r.dc("click",function(){return r.xc(t),r.hc(2).showLabels()}),r.Hc(1,"add"),r.Ub()}}const _=function(t){return{large:t}};function w(t,e){if(1&t&&(r.Vb(0,"div",2),r.Fc(1,y,3,2,"ng-container",3),r.Fc(2,v,2,0,"mat-icon",4),r.Ub()),2&t){const t=r.hc();r.nc("ngClass",r.qc(3,_,t.large)),r.Eb(1),r.nc("ngForOf",t.tags),r.Eb(1),r.nc("ngIf",t.show_editable)}}const x=function(t){return{selected_prediction:t}};function k(t,e){if(1&t){const t=r.Wb();r.Vb(0,"div",19),r.dc("click",function(){r.xc(t);const n=e.$implicit,s=r.hc(2).$implicit;return r.hc(3).selectSentence(n,s)}),r.Hc(1),r.Ub()}if(2&t){const t=e.$implicit,n=e.index,s=r.hc(2).index,i=r.hc(3);r.nc("ngClass",r.qc(2,x,i.selected&&n===i.selected.index&&s===i.selected.sectionIndex)),r.Eb(1),r.Jc(" ",t.value," ")}}function S(t,e){if(1&t&&(r.Tb(0),r.Vb(1,"div"),r.Vb(2,"div",17),r.Vb(3,"strong"),r.Hc(4),r.ic(5,"uppercase"),r.Ub(),r.Ub(),r.Fc(6,k,2,4,"div",18),r.Ub(),r.Sb()),2&t){const t=r.hc().$implicit;r.Eb(4),r.Ic(r.jc(5,2,t.name)),r.Eb(2),r.nc("ngForOf",t.values)}}function C(t,e){if(1&t&&(r.Vb(0,"div",16),r.Fc(1,S,7,4,"ng-container",1),r.Ub()),2&t){const t=e.$implicit;r.Eb(1),r.nc("ngIf",t.values.length>0)}}function I(t,e){if(1&t){const t=r.Wb();r.Vb(0,"div",11),r.Vb(1,"form",12),r.Vb(2,"stf-input",13,14),r.dc("enterPressed",function(e){return r.xc(t),r.hc(2).addTag(e)})("click",function(e){return r.xc(t),r.hc(2).keyDown(e)})("keyDown",function(e){return r.xc(t),r.hc(2).keyDown(e)})("keyUp",function(e){return r.xc(t),r.hc(2).keyUp(e)}),r.ic(4,"translate"),r.Hc(5),r.ic(6,"translate"),r.Ub(),r.Ub(),r.Fc(7,C,2,1,"div",15),r.Ub()}if(2&t){const t=r.hc(2);r.Eb(1),r.nc("formGroup",t.newTagForm),r.Eb(1),r.oc("ariaLabel",r.jc(4,5,"generic.select_tags")),r.nc("small_widget",!0),r.Eb(3),r.Ic(r.jc(6,7,"generic.select_tags")),r.Eb(2),r.nc("ngForOf",t.options)}}function E(t,e){if(1&t&&(r.Vb(0,"div"),r.Fc(1,I,8,9,"div",10),r.Ub()),2&t){const t=r.hc();r.Eb(1),r.nc("ngIf",t.autocomplete_show)}}let O=(()=>{class t{constructor(t,e){this.formBuilder=t,this.ontologyService=e,this.tags=[],this.large=!0,this.size="normal",this.change=new r.n,this.valueAdd=new r.n,this.valueDel=new r.n,this.show_editable=!1,this.autocomplete_show=!1,this.selectedValue="",this.newTagForm=this.formBuilder.group({filter:[""]}),this.options=[],this.selected=null,this.unsubscribeAll=new i.a}ngOnInit(){this.autocomplete_show=!1,this.ontologyService.getOntology().pipe(Object(o.a)(this.unsubscribeAll)).subscribe(t=>{this.ontology=t,this.options=[],this.ontology&&(this.options=this.ontology.getOntologyList())})}ngAfterViewInit(){var t;null===(t=this.editable)||void 0===t||t.pipe(Object(o.a)(this.unsubscribeAll)).subscribe(t=>{this.show_editable=t})}isSecondary(t){var e,n;return!(null===(n=null===(e=this.ontology)||void 0===e?void 0:e.getPrimaryList())||void 0===n?void 0:n.idCards.includes(t))}ngOnDestroy(){this.unsubscribeAll&&(this.unsubscribeAll.next(),this.unsubscribeAll.complete())}keyUp(t){this.ontology&&(this.options=this.ontology.getOntologyList(t)),this.selectedValue=t,console.log(t)}keyDown(t){const e=t.key;if(void 0!==e)return"Escape"===e?(this.autocomplete_show=!1,void(this.selected=null)):"ArrowDown"===t.key&&this.autocomplete_show?(null!==this.selected?(this.selected.index+=1,this.options[this.selected.sectionIndex].values.length-1<this.selected.index&&(this.selected.sectionIndex+=1,this.options.length-1<this.selected.sectionIndex&&(this.selected.sectionIndex=0),this.selected.index=0)):this.selected={sectionIndex:0,index:0},t.stopPropagation(),void t.preventDefault()):"ArrowUp"===t.key&&this.autocomplete_show?(this.selected&&(this.selected.index-=1,this.selected.index<0&&(this.selected.sectionIndex-=1,this.selected.sectionIndex<0&&(this.selected.sectionIndex=this.options.length-1),this.selected.index=this.options[this.selected.sectionIndex].values.length-1)),t.stopPropagation(),void t.preventDefault()):void(this.autocomplete_show=!0);this.autocomplete_show=!0}showLabels(){this.autocomplete_show=!this.autocomplete_show}addTag(t){null!==this.selected&&this.newTagForm.controls.newtag.setValue(this.options[this.selected.sectionIndex].values[this.selected.index]),this.autocomplete_show=!1}selectSentence(t,e){this.valueAdd.emit({id:t.id,list:e.id,display:t.name}),this.change.emit({bhr:"stashify_content.interfaces.behaviors.IStashifyMetadata",field:"classifications",key:e.id,op:"add",value:t.id}),this.tags.push(t.id),this.autocomplete_show=!1}deleteTag(t){var e,n;const r=null===(e=this.ontology)||void 0===e?void 0:e.getTagsListIdById(t);this.tags=null===(n=this.tags)||void 0===n?void 0:n.filter(e=>e!==t),this.valueDel.emit(t),r&&this.change.emit({bhr:"stashify_content.interfaces.behaviors.IStashifyMetadata",field:"classifications",key:r,op:"del",value:t}),this.autocomplete_show=!1}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a.d),r.Pb(s.e))},t.\u0275cmp=r.Jb({type:t,selectors:[["stf-render-tags"]],viewQuery:function(t,e){if(1&t&&r.Lc(m,3),2&t){let t;r.sc(t=r.ec())&&(e.search=t.first)}},inputs:{tags:"tags",large:"large",editable:"editable",size:"size",show_editable:"show_editable"},outputs:{change:"change",valueAdd:"valueAdd",valueDel:"valueDel"},decls:2,vars:2,consts:[["fxLayout","row wrap","fxFlexAlign","start center","class","render-tags",3,"ngClass",4,"ngIf"],[4,"ngIf"],["fxLayout","row wrap","fxFlexAlign","start center",1,"render-tags",3,"ngClass"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"tag","secondary","size",4,"ngIf"],[3,"tag","deleteIcon","secondary","size","clickIcon",4,"ngIf"],[3,"tag","secondary","size"],[3,"tag","deleteIcon","secondary","size","clickIcon"],[3,"click"],["class","autocomplete",4,"ngIf"],[1,"autocomplete"],["fxLayout","row","fxLayoutAlign","space-between center",1,"tags-editor",3,"formGroup"],["formControlName","filter","autocomplete","off","type","text","required","",3,"small_widget","ariaLabel","enterPressed","click","keyDown","keyUp"],["filter",""],["class","autocomplete-element",4,"ngFor","ngForOf"],[1,"autocomplete-element"],[1,"mb-4"],["class","autocomplete-option",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"autocomplete-option",3,"ngClass","click"]],template:function(t,e){1&t&&(r.Fc(0,w,3,5,"div",0),r.Fc(1,E,2,1,"div",1)),2&t&&(r.nc("ngIf",e.ontology&&e.tags),r.Eb(1),r.nc("ngIf",e.show_editable))},directives:[l.n,u.d,u.a,l.l,c.a,l.m,h.a,d.a,a.p,a.k,u.c,a.f,p.a,a.j,a.e,a.o],pipes:[f.c,l.u],styles:[".render-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:var(--stf-font-weight-bold);margin-right:10px}.render-tags-divider[_ngcontent-%COMP%]{background:var(--stf-primary);margin-right:10px;width:2px}stf-tag[_ngcontent-%COMP%]{margin-bottom:4px;margin-right:4px;margin-top:4px}.large[_ngcontent-%COMP%]   stf-tag[_ngcontent-%COMP%]{margin-bottom:12px;margin-right:12px}.autocomplete[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 5px 5px;box-shadow:0 3px 4px -2px #333;font-weight:300;max-width:150px;position:absolute;z-index:15}.autocomplete-element[_ngcontent-%COMP%]{padding:10px 10px 5px}.autocomplete[_ngcontent-%COMP%]   .filtered[_ngcontent-%COMP%]{display:none}.autocomplete-option[_ngcontent-%COMP%]{cursor:pointer;overflow:hidden;padding-bottom:4px;padding-left:10px;padding-top:4px;text-overflow:ellipsis;white-space:nowrap}.autocomplete-option[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}"]}),t})()},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"ZFy/":function(t,e,n){"use strict";n.d(e,"a",function(){return L}),n.d(e,"b",function(){return z});var r=n("1O3W"),s=n("YEUz"),i=n("SVse"),o=n("8Y7J"),a=n("UhP/"),l=n("7KAL"),u=n("8LU1"),c=n("Ht+U"),h=n("XNiG"),d=n("itXk"),p=n("GyhO"),f=n("HDdC"),m=n("IzEk"),g=n("7o/Q");class b{constructor(t){this.total=t}call(t,e){return e.subscribe(new y(t,this.total))}}class y extends g.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}var v=n("Kj3r"),_=n("lJxs"),w=n("JX91"),x=n("1G5W"),k=n("SCoL");const S=new Set;let C,I=(()=>{class t{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):E}matchMedia(t){return this._platform.WEBKIT&&function(t){if(!S.has(t))try{C||(C=document.createElement("style"),C.setAttribute("type","text/css"),document.head.appendChild(C)),C.sheet&&(C.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),S.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return t.\u0275fac=function(e){return new(e||t)(o.Zb(k.a))},t.\u0275prov=Object(o.Lb)({factory:function(){return new t(Object(o.Zb)(k.a))},token:t,providedIn:"root"}),t})();function E(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let O=(()=>{class t{constructor(t,e){this._mediaMatcher=t,this._zone=e,this._queries=new Map,this._destroySubject=new h.a}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return T(Object(u.a)(t)).some(t=>this._registerQuery(t).mql.matches)}observe(t){const e=T(Object(u.a)(t)).map(t=>this._registerQuery(t).observable);let n=Object(d.b)(e);return n=Object(p.a)(n.pipe(Object(m.a)(1)),n.pipe(t=>t.lift(new b(1)),Object(v.a)(0))),n.pipe(Object(_.a)(t=>{const e={matches:!1,breakpoints:{}};return t.forEach(({matches:t,query:n})=>{e.matches=e.matches||t,e.breakpoints[n]=t}),e}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const e=this._mediaMatcher.matchMedia(t),n={observable:new f.a(t=>{const n=e=>this._zone.run(()=>t.next(e));return e.addListener(n),()=>{e.removeListener(n)}}).pipe(Object(w.a)(e),Object(_.a)(({matches:e})=>({query:t,matches:e})),Object(x.a)(this._destroySubject)),mql:e};return this._queries.set(t,n),n}}return t.\u0275fac=function(e){return new(e||t)(o.Zb(I),o.Zb(o.A))},t.\u0275prov=Object(o.Lb)({factory:function(){return new t(Object(o.Zb)(I),Object(o.Zb)(o.A))},token:t,providedIn:"root"}),t})();function T(t){return t.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var N=n("1z/I"),A=n("GS7A"),R=n("9gLZ");const F={tooltipState:Object(A.p)("state",[Object(A.m)("initial, void, hidden",Object(A.n)({opacity:0,transform:"scale(0)"})),Object(A.m)("visible",Object(A.n)({transform:"scale(1)"})),Object(A.o)("* => visible",Object(A.e)("200ms cubic-bezier(0, 0, 0.2, 1)",Object(A.i)([Object(A.n)({opacity:0,transform:"scale(0)",offset:0}),Object(A.n)({opacity:.5,transform:"scale(0.99)",offset:.5}),Object(A.n)({opacity:1,transform:"scale(1)",offset:1})]))),Object(A.o)("* => hidden",Object(A.e)("100ms cubic-bezier(0, 0, 0.2, 1)",Object(A.n)({opacity:0})))])},D=Object(k.e)({passive:!0}),P=new o.r("mat-tooltip-scroll-strategy"),$={provide:P,deps:[r.a],useFactory:function(t){return()=>t.scrollStrategies.reposition({scrollThrottle:20})}},M=new o.r("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let L=(()=>{class t{constructor(t,e,n,r,s,i,o,a,l,u,d,p){this._overlay=t,this._elementRef=e,this._scrollDispatcher=n,this._viewContainerRef=r,this._ngZone=s,this._platform=i,this._ariaDescriber=o,this._focusMonitor=a,this._dir=u,this._defaultOptions=d,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new h.a,this._handleKeydown=t=>{this._isTooltipVisible()&&t.keyCode===c.e&&!Object(c.o)(t)&&(t.preventDefault(),t.stopPropagation(),this._ngZone.run(()=>this.hide(0)))},this._scrollStrategy=l,d&&(d.position&&(this.position=d.position),d.touchGestures&&(this.touchGestures=d.touchGestures)),s.runOutsideAngular(()=>{e.nativeElement.addEventListener("keydown",this._handleKeydown)})}get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&this._tooltipInstance.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(t){this._disabled=Object(u.b)(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Object(x.a)(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),t.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach(([e,n])=>{t.removeEventListener(e,n,D)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const e=this._createOverlay();this._detach(),this._portal=this._portal||new N.c(j,this._viewContainerRef),this._tooltipInstance=e.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(Object(x.a)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(t)}hide(t=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(t)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const t=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),e=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(".mat-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withScrollableContainers(t);return e.positionChanges.pipe(Object(x.a)(this._destroyed)).subscribe(t=>{this._tooltipInstance&&t.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:e,panelClass:"mat-tooltip-panel",scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(Object(x.a)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(){const t=this._overlayRef.getConfig().positionStrategy,e=this._getOrigin(),n=this._getOverlayPosition();t.withPositions([Object.assign(Object.assign({},e.main),n.main),Object.assign(Object.assign({},e.fallback),n.fallback)])}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,e=this.position;let n;"above"==e||"below"==e?n={originX:"center",originY:"above"==e?"top":"bottom"}:"before"==e||"left"==e&&t||"right"==e&&!t?n={originX:"start",originY:"center"}:("after"==e||"right"==e&&t||"left"==e&&!t)&&(n={originX:"end",originY:"center"});const{x:r,y:s}=this._invertPosition(n.originX,n.originY);return{main:n,fallback:{originX:r,originY:s}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,e=this.position;let n;"above"==e?n={overlayX:"center",overlayY:"bottom"}:"below"==e?n={overlayX:"center",overlayY:"top"}:"before"==e||"left"==e&&t||"right"==e&&!t?n={overlayX:"end",overlayY:"center"}:("after"==e||"right"==e&&t||"left"==e&&!t)&&(n={overlayX:"start",overlayY:"center"});const{x:r,y:s}=this._invertPosition(n.overlayX,n.overlayY);return{main:n,fallback:{overlayX:r,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Object(m.a)(1),Object(x.a)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,e){return"above"===this.position||"below"===this.position?"top"===e?e="bottom":"bottom"===e&&(e="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:e}}_setupPointerEnterEventsIfNeeded(){!this._disabled&&this.message&&this._viewInitialized&&!this._passiveListeners.length&&(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",()=>this.hide()],["wheel",t=>this._wheelListener(t)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const e=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",e],["touchcancel",e])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([t,e])=>{this._elementRef.nativeElement.addEventListener(t,e,D)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const e=(this._document||document).elementFromPoint(t.clientX,t.clientY),n=this._elementRef.nativeElement;e===n||n.contains(e)||this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const e=this._elementRef.nativeElement,n=e.style;("on"===t||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName)&&(n.userSelect=n.msUserSelect=n.webkitUserSelect=n.MozUserSelect="none"),"on"!==t&&e.draggable||(n.webkitUserDrag="none"),n.touchAction="none",n.webkitTapHighlightColor="transparent"}}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(r.a),o.Pb(o.l),o.Pb(l.e),o.Pb(o.R),o.Pb(o.A),o.Pb(k.a),o.Pb(s.b),o.Pb(s.d),o.Pb(P),o.Pb(R.b,8),o.Pb(M,8),o.Pb(i.d))},t.\u0275dir=o.Kb({type:t,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],inputs:{showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]}),t})(),j=(()=>{class t{constructor(t,e){this._changeDetectorRef=t,this._breakpointObserver=e,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new h.a,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)")}show(t){this._hideTimeoutId&&(clearTimeout(this._hideTimeoutId),this._hideTimeoutId=null),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=null,this._markForCheck()},t)}hide(t){this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=null),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=null,this._markForCheck()},t)}afterHidden(){return this._onHide}isVisible(){return"visible"===this._visibility}ngOnDestroy(){this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(t){const e=t.toState;"hidden"!==e||this.isVisible()||this._onHide.next(),"visible"!==e&&"hidden"!==e||(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(o.h),o.Pb(O))},t.\u0275cmp=o.Jb({type:t,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,e){1&t&&o.dc("click",function(){return e._handleBodyInteraction()},!1,o.uc)("auxclick",function(){return e._handleBodyInteraction()},!1,o.uc),2&t&&o.Cc("zoom","visible"===e._visibility?1:null)},decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(t,e){if(1&t&&(o.Vb(0,"div",0),o.dc("@state.start",function(){return e._animationStart()})("@state.done",function(t){return e._animationDone(t)}),o.ic(1,"async"),o.Hc(2),o.Ub()),2&t){let t=null;o.Hb("mat-tooltip-handset",null==(t=o.jc(1,5,e._isHandset))?null:t.matches),o.nc("ngClass",e.tooltipClass)("@state",e._visibility),o.Eb(2),o.Ic(e.message)}},directives:[i.l],pipes:[i.b],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[F.tooltipState]},changeDetection:0}),t})(),z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Nb({type:t}),t.\u0275inj=o.Mb({providers:[$],imports:[[s.a,i.c,r.d,a.a],a.a,l.b]}),t})()},ZUHj:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("7o/Q");class s extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var i=n("SeVD"),o=n("HDdC");function a(t,e,n,r,a=new s(t,n,r)){if(!a.closed)return e instanceof o.a?e.subscribe(a):Object(i.a)(e)(a)}},aTZX:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("iInd"),s=n("2Vo4"),i=n("XNiG"),o=n("1G5W"),a=n("8Y7J");let l=(()=>{class t{constructor(t,e){this.router=t,this.route=e,this.loadingSearchSubject=new s.a(!1),this.isOpenModalSubject=new s.a(!1),this.loadingSearch=this.loadingSearchSubject.asObservable(),this.isOpenModal=this.isOpenModalSubject.asObservable(),this.prevPage=null,this.unsubscribeAll=new i.a,this.setupLoadingSpinner()}setLoading(t){this.loadingSearchSubject.next(t)}setOpenModal(t){this.isOpenModalSubject.next(t)}search(t){this.router.navigate(["search"],{queryParams:{q:t}}),this.setOpenModal(!0)}showInput(t){this.router.navigate(["input"],{queryParams:{q:t}}),this.setOpenModal(!0)}showResource(t,e){this.prevPage=e;const n={term:t.searchTerm||void 0};t.paragraph&&(n.fromParagraph=t.paragraph.init,n.fromSource=t.paragraph.source),this.router.navigate([`resource/${t.resourceId}`],{queryParams:n}),this.setOpenModal(!0)}closeModal(){this.router.navigate([""]),this.setOpenModal(!1)}goBackFromResource(){null!==this.prevPage&&("input"===this.prevPage.pageType?this.showInput(this.prevPage.searchTerm):"search-grid"===this.prevPage.pageType&&this.search(this.prevPage.searchTerm),this.prevPage=null)}setupLoadingSpinner(){this.router.events.pipe(Object(o.a)(this.unsubscribeAll)).subscribe(t=>{t instanceof r.d?this.setLoading(!0):(t instanceof r.c||t instanceof r.b)&&this.setLoading(!1)})}ngOnDestroy(){this.unsubscribeAll&&(this.unsubscribeAll.next(),this.unsubscribeAll.complete())}}return t.\u0275fac=function(e){return new(e||t)(a.Zb(r.e),a.Zb(r.a))},t.\u0275prov=a.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},aaBP:function(t,e,n){t.exports=function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(t,e){var n=t[0],r=t[1],s=t[2],i=t[3];r=((r+=((s=((s+=((i=((i+=((n=((n+=(r&s|~r&i)+e[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&s)+e[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+e[2]+606105819|0)<<17|s>>>15)+i|0)&i|~s&n)+e[3]-1044525330|0)<<22|r>>>10)+s|0,r=((r+=((s=((s+=((i=((i+=((n=((n+=(r&s|~r&i)+e[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&s)+e[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+e[6]-1473231341|0)<<17|s>>>15)+i|0)&i|~s&n)+e[7]-45705983|0)<<22|r>>>10)+s|0,r=((r+=((s=((s+=((i=((i+=((n=((n+=(r&s|~r&i)+e[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&s)+e[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+e[10]-42063|0)<<17|s>>>15)+i|0)&i|~s&n)+e[11]-1990404162|0)<<22|r>>>10)+s|0,r=((r+=((s=((s+=((i=((i+=((n=((n+=(r&s|~r&i)+e[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&s)+e[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+e[14]-1502002290|0)<<17|s>>>15)+i|0)&i|~s&n)+e[15]+1236535329|0)<<22|r>>>10)+s|0,r=((r+=((s=((s+=((i=((i+=((n=((n+=(r&i|s&~i)+e[1]-165796510|0)<<5|n>>>27)+r|0)&s|r&~s)+e[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+e[11]+643717713|0)<<14|s>>>18)+i|0)&n|i&~n)+e[0]-373897302|0)<<20|r>>>12)+s|0,r=((r+=((s=((s+=((i=((i+=((n=((n+=(r&i|s&~i)+e[5]-701558691|0)<<5|n>>>27)+r|0)&s|r&~s)+e[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+e[15]-660478335|0)<<14|s>>>18)+i|0)&n|i&~n)+e[4]-405537848|0)<<20|r>>>12)+s|0,r=((r+=((s=((s+=((i=((i+=((n=((n+=(r&i|s&~i)+e[9]+568446438|0)<<5|n>>>27)+r|0)&s|r&~s)+e[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+e[3]-187363961|0)<<14|s>>>18)+i|0)&n|i&~n)+e[8]+1163531501|0)<<20|r>>>12)+s|0,r=((r+=((s=((s+=((i=((i+=((n=((n+=(r&i|s&~i)+e[13]-1444681467|0)<<5|n>>>27)+r|0)&s|r&~s)+e[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+e[7]+1735328473|0)<<14|s>>>18)+i|0)&n|i&~n)+e[12]-1926607734|0)<<20|r>>>12)+s|0,r=((r+=((s=((s+=((i=((i+=((n=((n+=(r^s^i)+e[5]-378558|0)<<4|n>>>28)+r|0)^r^s)+e[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+e[11]+1839030562|0)<<16|s>>>16)+i|0)^i^n)+e[14]-35309556|0)<<23|r>>>9)+s|0,r=((r+=((s=((s+=((i=((i+=((n=((n+=(r^s^i)+e[1]-1530992060|0)<<4|n>>>28)+r|0)^r^s)+e[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+e[7]-155497632|0)<<16|s>>>16)+i|0)^i^n)+e[10]-1094730640|0)<<23|r>>>9)+s|0,r=((r+=((s=((s+=((i=((i+=((n=((n+=(r^s^i)+e[13]+681279174|0)<<4|n>>>28)+r|0)^r^s)+e[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+e[3]-722521979|0)<<16|s>>>16)+i|0)^i^n)+e[6]+76029189|0)<<23|r>>>9)+s|0,r=((r+=((s=((s+=((i=((i+=((n=((n+=(r^s^i)+e[9]-640364487|0)<<4|n>>>28)+r|0)^r^s)+e[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+e[15]+530742520|0)<<16|s>>>16)+i|0)^i^n)+e[2]-995338651|0)<<23|r>>>9)+s|0,r=((r+=((i=((i+=(r^((n=((n+=(s^(r|~i))+e[0]-198630844|0)<<6|n>>>26)+r|0)|~s))+e[7]+1126891415|0)<<10|i>>>22)+n|0)^((s=((s+=(n^(i|~r))+e[14]-1416354905|0)<<15|s>>>17)+i|0)|~n))+e[5]-57434055|0)<<21|r>>>11)+s|0,r=((r+=((i=((i+=(r^((n=((n+=(s^(r|~i))+e[12]+1700485571|0)<<6|n>>>26)+r|0)|~s))+e[3]-1894986606|0)<<10|i>>>22)+n|0)^((s=((s+=(n^(i|~r))+e[10]-1051523|0)<<15|s>>>17)+i|0)|~n))+e[1]-2054922799|0)<<21|r>>>11)+s|0,r=((r+=((i=((i+=(r^((n=((n+=(s^(r|~i))+e[8]+1873313359|0)<<6|n>>>26)+r|0)|~s))+e[15]-30611744|0)<<10|i>>>22)+n|0)^((s=((s+=(n^(i|~r))+e[6]-1560198380|0)<<15|s>>>17)+i|0)|~n))+e[13]+1309151649|0)<<21|r>>>11)+s|0,r=((r+=((i=((i+=(r^((n=((n+=(s^(r|~i))+e[4]-145523070|0)<<6|n>>>26)+r|0)|~s))+e[11]-1120210379|0)<<10|i>>>22)+n|0)^((s=((s+=(n^(i|~r))+e[2]+718787259|0)<<15|s>>>17)+i|0)|~n))+e[9]-343485551|0)<<21|r>>>11)+s|0,t[0]=n+t[0]|0,t[1]=r+t[1]|0,t[2]=s+t[2]|0,t[3]=i+t[3]|0}function r(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function s(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function i(t){var e,s,i,o,a,l,u=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=u;e+=64)n(c,r(t.substring(e-64,e)));for(s=(t=t.substring(e-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<s;e+=1)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(n(c,i),e=0;e<16;e+=1)i[e]=0;return o=(o=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),l=parseInt(o[1],16)||0,i[14]=a,i[15]=l,n(c,i),c}function o(t){var n,r="";for(n=0;n<4;n+=1)r+=e[t>>8*n+4&15]+e[t>>8*n&15];return r}function a(t){var e;for(e=0;e<t.length;e+=1)t[e]=o(t[e]);return t.join("")}function l(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function u(t){var e,n=[],r=t.length;for(e=0;e<r-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function c(){this.reset()}return a(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(e,n){var r,s,i,o,a=this.byteLength,l=t(e,a),u=a;return void 0!==n&&(u=t(n,a)),l>u?new ArrayBuffer(0):(r=u-l,s=new ArrayBuffer(r),i=new Uint8Array(s),o=new Uint8Array(this,l,r),i.set(o),s)}}(),c.prototype.append=function(t){return this.appendBinary(l(t)),this},c.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,s=this._buff.length;for(e=64;e<=s;e+=64)n(this._hash,r(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},c.prototype.end=function(t){var e,n,r=this._buff,s=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<s;e+=1)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(i,s),n=a(this._hash),t&&(n=u(n)),this.reset(),n},c.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},c.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},c.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},c.prototype._finish=function(t,e){var r,s,i,o=e;if(t[o>>2]|=128<<(o%4<<3),o>55)for(n(this._hash,t),o=0;o<16;o+=1)t[o]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(r[2],16),i=parseInt(r[1],16)||0,t[14]=s,t[15]=i,n(this._hash,t)},c.hash=function(t,e){return c.hashBinary(l(t),e)},c.hashBinary=function(t,e){var n=a(i(t));return e?u(n):n},(c.ArrayBuffer=function(){this.reset()}).prototype.append=function(t){var e,r,i,o,a=(r=this._buff.buffer,i=t,!0,(o=new Uint8Array(r.byteLength+i.byteLength)).set(new Uint8Array(r)),o.set(new Uint8Array(i),r.byteLength),o),l=a.length;for(this._length+=t.byteLength,e=64;e<=l;e+=64)n(this._hash,s(a.subarray(e-64,e)));return this._buff=e-64<l?new Uint8Array(a.buffer.slice(e-64)):new Uint8Array(0),this},c.ArrayBuffer.prototype.end=function(t){var e,n,r=this._buff,s=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<s;e+=1)i[e>>2]|=r[e]<<(e%4<<3);return this._finish(i,s),n=a(this._hash),t&&(n=u(n)),this.reset(),n},c.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.ArrayBuffer.prototype.getState=function(){var t=c.prototype.getState.call(this);return t.buff=String.fromCharCode.apply(null,new Uint8Array(t.buff)),t},c.ArrayBuffer.prototype.setState=function(t){return t.buff=function(t,e){var n,r=t.length,s=new ArrayBuffer(r),i=new Uint8Array(s);for(n=0;n<r;n+=1)i[n]=t.charCodeAt(n);return i}(t.buff),c.prototype.setState.call(this,t)},c.ArrayBuffer.prototype.destroy=c.prototype.destroy,c.ArrayBuffer.prototype._finish=c.prototype._finish,c.ArrayBuffer.hash=function(t,e){var r=a(function(t){var e,r,i,o,a,l,u=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=u;e+=64)n(c,s(t.subarray(e-64,e)));for(r=(t=e-64<u?t.subarray(e-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<r;e+=1)i[e>>2]|=t[e]<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(n(c,i),e=0;e<16;e+=1)i[e]=0;return o=(o=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),l=parseInt(o[1],16)||0,i[14]=a,i[15]=l,n(c,i),c}(new Uint8Array(t)));return e?u(r):r},c}()},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("5+tZ"),s=n("SpAZ");function i(t=Number.POSITIVE_INFINITY){return Object(r.a)(s.a,t)}},bOdf:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("5+tZ");function s(t,e){return Object(r.a)(t,e,1)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},cUpR:function(t,e,n){"use strict";n.d(e,"a",function(){return M}),n.d(e,"b",function(){return A}),n.d(e,"c",function(){return P}),n.d(e,"d",function(){return w});var r=n("SVse"),s=n("8Y7J");class i extends r.y{constructor(){super()}supportsDOMEvents(){return!0}}class o extends i{static makeCurrent(){Object(r.C)(new o)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=l||(l=document.querySelector("base"),l)?l.getAttribute("href"):null;return null==e?null:(n=e,a||(a=document.createElement("a")),a.setAttribute("href",n),"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname);var n}resetBaseElement(){l=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Object(r.B)(document.cookie,t)}}let a,l=null;const u=new s.r("TRANSITION_ID"),c=[{provide:s.d,useFactory:function(t,e,n){return()=>{n.get(s.e).donePromise.then(()=>{const n=Object(r.A)();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[u,r.d,s.s],multi:!0}];class h{static init(){Object(s.bb)(new h)}addToWindow(t){s.sb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},s.sb.getAllAngularTestabilities=()=>t.getAllTestabilities(),s.sb.getAllAngularRootElements=()=>t.getAllRootElements(),s.sb.frameworkStabilizers||(s.sb.frameworkStabilizers=[]),s.sb.frameworkStabilizers.push(t=>{const e=s.sb.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const s=t.getTestability(e);return null!=s?s:n?Object(r.A)().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const d=new s.r("EventManagerPlugins");let p=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(d),s.Zb(s.A))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})();class f{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const s=Object(r.A)().getGlobalEventTarget(this._doc,t);if(!s)throw new Error(`Unsupported event target ${s} for event ${e}`);return this.addEventListener(s,e,n)}}let m=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})(),g=(()=>{class t extends m{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Object(r.A)().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(r.d))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})();const b={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},y=/%COMP%/g;function v(t,e,n){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?v(t,s,n):(s=s.replace(y,t),n.push(s))}return n}function _(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let w=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new x(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case s.S.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new k(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case s.S.ShadowDom:return new S(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=v(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(p),s.Zb(g),s.Zb(s.c))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})();class x{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(b[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=b[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=b[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(s.H.DashCase|s.H.Important)?t.style.setProperty(e,n,r&s.H.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&s.H.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,_(n)):this.eventManager.addEventListener(t,e,_(n))}}class k extends x{constructor(t,e,n,r){super(t),this.component=n;const s=v(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(y,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(y,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class S extends x{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=v(r.id,r.styles,[]);for(let i=0;i<s.length;i++){const t=document.createElement("style");t.textContent=s[i],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let C=(()=>{class t extends f{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(r.d))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})();const I=["alt","control","meta","shift"],E={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},O={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},T={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let N=(()=>{class t extends f{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,s){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Object(r.A)().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=t._normalizeKey(n.pop());let i="";if(I.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),i+=t+".")}),i+=s,0!=n.length||0===s.length)return null;const o={};return o.domEventName=r,o.fullKey=i,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&O.hasOwnProperty(e)&&(e=O[e]))}return E[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),I.forEach(r=>{r!=n&&(0,T[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return s=>{t.getEventFullKey(s)===e&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(r.d))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})(),A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(s.Lb)({factory:function(){return Object(s.Zb)(F)},token:t,providedIn:"root"}),t})();function R(t){return new F(t.get(r.d))}let F=(()=>{class t extends A{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case s.J.NONE:return e;case s.J.HTML:return Object(s.hb)(e,"HTML")?Object(s.Ab)(e):Object(s.fb)(this._doc,String(e)).toString();case s.J.STYLE:return Object(s.hb)(e,"Style")?Object(s.Ab)(e):e;case s.J.SCRIPT:if(Object(s.hb)(e,"Script"))return Object(s.Ab)(e);throw new Error("unsafe value used in a script context");case s.J.URL:return Object(s.rb)(e),Object(s.hb)(e,"URL")?Object(s.Ab)(e):Object(s.gb)(String(e));case s.J.RESOURCE_URL:if(Object(s.hb)(e,"ResourceURL"))return Object(s.Ab)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return Object(s.ib)(t)}bypassSecurityTrustStyle(t){return Object(s.lb)(t)}bypassSecurityTrustScript(t){return Object(s.kb)(t)}bypassSecurityTrustUrl(t){return Object(s.mb)(t)}bypassSecurityTrustResourceUrl(t){return Object(s.jb)(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(r.d))},t.\u0275prov=Object(s.Lb)({factory:function(){return R(Object(s.Zb)(s.o))},token:t,providedIn:"root"}),t})();const D=[{provide:s.C,useValue:r.z},{provide:s.D,useValue:function(){o.makeCurrent(),h.init()},multi:!0},{provide:r.d,useFactory:function(){return Object(s.yb)(document),document},deps:[]}],P=Object(s.U)(s.ab,"browser",D),$=[[],{provide:s.db,useValue:"root"},{provide:s.m,useFactory:function(){return new s.m},deps:[]},{provide:d,useClass:C,multi:!0,deps:[r.d,s.A,s.C]},{provide:d,useClass:N,multi:!0,deps:[r.d]},[],{provide:w,useClass:w,deps:[p,g,s.c]},{provide:s.G,useExisting:w},{provide:m,useExisting:g},{provide:g,useClass:g,deps:[r.d]},{provide:s.O,useClass:s.O,deps:[s.A]},{provide:p,useClass:p,deps:[d,s.A]},[]];let M=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:s.c,useValue:e.appId},{provide:u,useExisting:s.c},c]}}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(t,12))},t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({providers:$,imports:[r.c,s.f]}),t})();"undefined"!=typeof window&&window},cp0P:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("HDdC"),s=n("DH7j"),i=n("lJxs"),o=n("XoHu"),a=n("Cfvw");function l(...t){if(1===t.length){const e=t[0];if(Object(s.a)(e))return u(e,null);if(Object(o.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return u(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return u(t=1===t.length&&Object(s.a)(t[0])?t[0]:t,null).pipe(Object(i.a)(t=>e(...t)))}return u(t,null)}function u(t,e){return new r.a(n=>{const r=t.length;if(0===r)return void n.complete();const s=new Array(r);let i=0,o=0;for(let l=0;l<r;l++){const u=Object(a.a)(t[l]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,o++),s[l]=t},error:t=>n.error(t),complete:()=>{i++,i!==r&&c||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=s[n],t),{}):s),n.complete())}}))}})}},dRYV:function(t,e,n){"use strict";n.d(e,"a",function(){return i});const r={"application/excel":"application/excel.svg","application/msword":"application/doc.svg","application/note":"application/note.svg","application/pdf":"application/pdf.svg","application/powerpoint":"application/ppt.svg","application/vnd.ms-powerpoint":"application/ppt.svg","application/vnd.ms-excel":"application/xls.svg","application/stf-conversation":"application/stf-conversation.svg","application/stf-link":"application/stf-link.svg","application/stf-page":"application/stf-page.svg","application/stf-text":"application/stf-text.svg","application/ticket":"application/ticket.svg","application/zip":"application/zip.svg","application/vnd.oasis.opendocument.text":"application/vnd.oasis.opendocument.text.svg","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"application/xlsx.svg","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"application/doc.svg","application/vnd.openxmlformats-officedocument.presentationml.presentation":"application/ppt.svg","image/bmp":"image/bmp.svg","image/jpeg":"image/jpg.svg","image/pdf":"image/pdf.svg","image/svg+xml":"image/svg+xml.svg","image/zip":"image/zip.svg","image/gif":"image/gif.svg","image/jpg":"image/jpg.svg","image/png":"image/png.svg","image/txt":"image/txt.svg","text/html":"text/html.svg","text/plain":"text/plain.svg","text/rtf":"text/rtf.svg","text/csv":"text/csv.svg","unknown/dwg":"unknown/dwg.svg","unknown/msg":"unknown/msg.svg","unknown/mts":"unknown/mts.svg","video/mp4":"video/mp4.svg","video/quicktime":"video/mov.svg","audio/mpeg":"audio/mpeg.svg","media/video":"video/video.svg","media/video+srt":"video/video-cc.svg","stf/layout":"stf/layout.svg",file:"file.svg",email:"email.svg",generic:"application/generic.svg"};var s=n("8Y7J");let i=(()=>{class t{transform(t){return function(t){return r[t]?r[t]:r.generic}(t.toLowerCase())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Ob({name:"mimeIcon",type:t,pure:!0}),t})()},e4Wq:function(t,e,n){"use strict";function r(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(t){try{l(r.next(t))}catch(e){i(e)}}function a(t){try{l(r.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}l((r=r.apply(t,e||[])).next())})}n.d(e,"a",function(){return h});var s,i=n("8Y7J"),o=n("fwsW"),a=n("SVse");const l=new i.r("STORAGE_CONFIG_TOKEN");class u extends o.b{constructor(){super()}create(){return r(this,void 0,void 0,function*(){return this})}defineDriver(){return r(this,void 0,void 0,function*(){})}get driver(){return"noop"}get(t){return r(this,void 0,void 0,function*(){return null})}set(t,e){return r(this,void 0,void 0,function*(){})}remove(t){return r(this,void 0,void 0,function*(){})}clear(){return r(this,void 0,void 0,function*(){})}length(){return r(this,void 0,void 0,function*(){return 0})}keys(){return r(this,void 0,void 0,function*(){return[]})}forEach(t){return r(this,void 0,void 0,function*(){})}setEncryptionKey(t){}}function c(t){return Object(a.x)(this.platformId)?new u:new o.b(t)}let h=(()=>{let t=s=class{static forRoot(t=null){return{ngModule:s,providers:[{provide:l,useValue:t},{provide:o.b,useFactory:c,deps:[l]}]}}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Nb({type:t}),t.\u0275inj=i.Mb({}),t})()},e6bL:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,s=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(l){s=!0,i=l}finally{try{r||null==a.return||a.return()}finally{if(s)throw i}}return n}}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var p=String.fromCharCode,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",g={};function b(t,e){if(!g[t]){g[t]={};for(var n=0;n<t.length;n++)g[t][t.charAt(n)]=n}return g[t][e]}var y={compressToBase64:function(t){if(null==t)return"";var e=y._compress(t,6,function(t){return f.charAt(t)});switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:y._decompress(t.length,32,function(e){return b(f,t.charAt(e))})},compressToUTF16:function(t){return null==t?"":y._compress(t,15,function(t){return p(t+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:y._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(t){for(var e=y.compress(t),n=new Uint8Array(2*e.length),r=0,s=e.length;r<s;r++){var i=e.charCodeAt(r);n[2*r]=i>>>8,n[2*r+1]=i%256}return n},decompressFromUint8Array:function(t){if(null==t)return y.decompress(t);for(var e=new Array(t.length/2),n=0,r=e.length;n<r;n++)e[n]=256*t[2*n]+t[2*n+1];var s=[];return e.forEach(function(t){s.push(p(t))}),y.decompress(s.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":y._compress(t,6,function(t){return m.charAt(t)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),y._decompress(t.length,32,function(e){return b(m,t.charAt(e))}))},compress:function(t){return y._compress(t,16,function(t){return p(t)})},_compress:function(t,e,n){if(null==t)return"";var r,s,i,o={},a={},l="",u="",c="",h=2,d=3,p=2,f=[],m=0,g=0;for(i=0;i<t.length;i+=1)if(l=t.charAt(i),Object.prototype.hasOwnProperty.call(o,l)||(o[l]=d++,a[l]=!0),u=c+l,Object.prototype.hasOwnProperty.call(o,u))c=u;else{if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(r=0;r<p;r++)m<<=1,g==e-1?(g=0,f.push(n(m)),m=0):g++;for(s=c.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&s,g==e-1?(g=0,f.push(n(m)),m=0):g++,s>>=1}else{for(s=1,r=0;r<p;r++)m=m<<1|s,g==e-1?(g=0,f.push(n(m)),m=0):g++,s=0;for(s=c.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&s,g==e-1?(g=0,f.push(n(m)),m=0):g++,s>>=1}0==--h&&(h=Math.pow(2,p),p++),delete a[c]}else for(s=o[c],r=0;r<p;r++)m=m<<1|1&s,g==e-1?(g=0,f.push(n(m)),m=0):g++,s>>=1;0==--h&&(h=Math.pow(2,p),p++),o[u]=d++,c=String(l)}if(""!==c){if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(r=0;r<p;r++)m<<=1,g==e-1?(g=0,f.push(n(m)),m=0):g++;for(s=c.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&s,g==e-1?(g=0,f.push(n(m)),m=0):g++,s>>=1}else{for(s=1,r=0;r<p;r++)m=m<<1|s,g==e-1?(g=0,f.push(n(m)),m=0):g++,s=0;for(s=c.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&s,g==e-1?(g=0,f.push(n(m)),m=0):g++,s>>=1}0==--h&&(h=Math.pow(2,p),p++),delete a[c]}else for(s=o[c],r=0;r<p;r++)m=m<<1|1&s,g==e-1?(g=0,f.push(n(m)),m=0):g++,s>>=1;0==--h&&(h=Math.pow(2,p),p++)}for(s=2,r=0;r<p;r++)m=m<<1|1&s,g==e-1?(g=0,f.push(n(m)),m=0):g++,s>>=1;for(;;){if(m<<=1,g==e-1){f.push(n(m));break}g++}return f.join("")},decompress:function(t){return null==t?"":""==t?null:y._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(t,e,n){var r,s,i,o,a,l,u,c=[],h=4,d=4,f=3,m="",g=[],b={val:n(0),position:e,index:1};for(r=0;r<3;r+=1)c[r]=r;for(i=0,a=Math.pow(2,2),l=1;l!=a;)o=b.val&b.position,b.position>>=1,0==b.position&&(b.position=e,b.val=n(b.index++)),i|=(o>0?1:0)*l,l<<=1;switch(i){case 0:for(i=0,a=Math.pow(2,8),l=1;l!=a;)o=b.val&b.position,b.position>>=1,0==b.position&&(b.position=e,b.val=n(b.index++)),i|=(o>0?1:0)*l,l<<=1;u=p(i);break;case 1:for(i=0,a=Math.pow(2,16),l=1;l!=a;)o=b.val&b.position,b.position>>=1,0==b.position&&(b.position=e,b.val=n(b.index++)),i|=(o>0?1:0)*l,l<<=1;u=p(i);break;case 2:return""}for(c[3]=u,s=u,g.push(u);;){if(b.index>t)return"";for(i=0,a=Math.pow(2,f),l=1;l!=a;)o=b.val&b.position,b.position>>=1,0==b.position&&(b.position=e,b.val=n(b.index++)),i|=(o>0?1:0)*l,l<<=1;switch(u=i){case 0:for(i=0,a=Math.pow(2,8),l=1;l!=a;)o=b.val&b.position,b.position>>=1,0==b.position&&(b.position=e,b.val=n(b.index++)),i|=(o>0?1:0)*l,l<<=1;c[d++]=p(i),u=d-1,h--;break;case 1:for(i=0,a=Math.pow(2,16),l=1;l!=a;)o=b.val&b.position,b.position>>=1,0==b.position&&(b.position=e,b.val=n(b.index++)),i|=(o>0?1:0)*l,l<<=1;c[d++]=p(i),u=d-1,h--;break;case 2:return g.join("")}if(0==h&&(h=Math.pow(2,f),f++),c[u])m=c[u];else{if(u!==d)return null;m=s+s.charAt(0)}g.push(m),c[d++]=s+m.charAt(0),s=m,0==--h&&(h=Math.pow(2,f),f++)}}},v={DEBUG:!1,LIB_VERSION:"1.9.5"},_=Array.prototype,w=Object.prototype,x=_.slice,k=w.toString,S=w.hasOwnProperty,C="undefined"!=typeof window?window:{},I=C.navigator||{userAgent:""},E=C.document||{},O=I.userAgent,T=Function.prototype.bind,N=_.forEach,A=_.indexOf,R=Array.isArray,F={},D={trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},P=function(){if(v.DEBUG&&!D.isUndefined(window.console)&&window.console)try{window.console.log.apply(window.console,arguments)}catch(t){D.each(arguments,function(t){window.console.log(t)})}},$=function(){if(v.DEBUG&&!D.isUndefined(window.console)&&window.console){var t=["PostHog error:"].concat(Array.prototype.slice.call(arguments));try{window.console.error.apply(window.console,t)}catch(e){D.each(t,function(t){window.console.error(t)})}}},M=function(){if(!D.isUndefined(window.console)&&window.console){var t=["PostHog error:"].concat(Array.prototype.slice.call(arguments));try{window.console.error.apply(window.console,t)}catch(e){D.each(t,function(t){window.console.error(t)})}}};D.bind=function(t,e){var n,r;if(T&&t.bind===T)return T.apply(t,x.call(arguments,1));if(!D.isFunction(t))throw new TypeError;return n=x.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(x.call(arguments)));var s={};s.prototype=t.prototype;var i=new s;s.prototype=null;var o=t.apply(i,n.concat(x.call(arguments)));return Object(o)===o?o:i}},D.bind_instance_methods=function(t){for(var e in t)"function"==typeof t[e]&&(t[e]=D.bind(t[e],t))},D.each=function(t,e,n){if(null!=t)if(N&&t.forEach===N)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,s=t.length;r<s;r++)if(r in t&&e.call(n,t[r],r,t)===F)return}else for(var i in t)if(S.call(t,i)&&e.call(n,t[i],i,t)===F)return},D.extend=function(t){return D.each(x.call(arguments,1),function(e){for(var n in e)void 0!==e[n]&&(t[n]=e[n])}),t},D.isArray=R||function(t){return"[object Array]"===k.call(t)},D.isFunction=function(t){try{return/^\s*\bfunction\b/.test(t)}catch(Bt){return!1}},D.include=function(t,e){var n=!1;return null===t?n:A&&t.indexOf===A?-1!=t.indexOf(e):(D.each(t,function(t){if(n||(n=t===e))return F}),n)},D.includes=function(t,e){return-1!==t.indexOf(e)},D.isObject=function(t){return t===Object(t)&&!D.isArray(t)},D.isEmptyObject=function(t){if(D.isObject(t)){for(var e in t)if(S.call(t,e))return!1;return!0}return!1},D.isUndefined=function(t){return void 0===t},D.isString=function(t){return"[object String]"==k.call(t)},D.isDate=function(t){return"[object Date]"==k.call(t)},D.isNumber=function(t){return"[object Number]"==k.call(t)},D.encodeDates=function(t){return D.each(t,function(e,n){D.isDate(e)?t[n]=D.formatDate(e):D.isObject(e)&&(t[n]=D.encodeDates(e))}),t},D.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},D.formatDate=function(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())},D.safewrap=function(t){return function(){try{return t.apply(this,arguments)}catch(e){M("Implementation error. Please turn on debug and contact support@posthog.com."),v.DEBUG&&M(e)}}},D.safewrap_class=function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=D.safewrap(t.prototype[e[n]])},D.safewrap_instance_methods=function(t){for(var e in t)"function"==typeof t[e]&&(t[e]=D.safewrap(t[e]))},D.strip_empty_properties=function(t){var e={};return D.each(t,function(t,n){D.isString(t)&&t.length>0&&(e[n]=t)}),e};var L,j="undefined"!=typeof Symbol?Symbol("__deepCircularCopyInProgress__"):"__deepCircularCopyInProgress__";function z(t,e){return t!==Object(t)?e?e(t):t:j in t?void 0:(t[j]=!0,D.isArray(t)?(n=[],D.each(t,function(t){n.push(z(t,e))})):(n={},D.each(t,function(t,r){r!==j&&(n[r]=z(t,e))})),delete t[j],n);var n}function B(t){switch(r(t.className)){case"string":return t.className;case"object":return t.className.baseVal||t.getAttribute("class")||"";default:return""}}function V(t){var e="";return q(t)&&!Z(t)&&t.childNodes&&t.childNodes.length&&D.each(t.childNodes,function(t){H(t)&&t.textContent&&(e+=D.trim(t.textContent).split(/(\s+)/).filter(K).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),D.trim(e)}function U(t){return t&&1===t.nodeType}function W(t,e){return t&&t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function H(t){return t&&3===t.nodeType}D.copyAndTruncateStrings=function(t,e){return z(t,function(t){return"string"==typeof t&&null!==e&&(t=t.slice(0,e)),t})},D.base64Encode=function(t){var e,n,r,s,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=0,a=0,l="",u=[];if(!t)return t;t=D.utf8Encode(t);do{e=(s=t.charCodeAt(o++)<<16|t.charCodeAt(o++)<<8|t.charCodeAt(o++))>>12&63,n=s>>6&63,r=63&s,u[a++]=i.charAt(s>>18&63)+i.charAt(e)+i.charAt(n)+i.charAt(r)}while(o<t.length);switch(l=u.join(""),t.length%3){case 1:l=l.slice(0,-2)+"==";break;case 2:l=l.slice(0,-1)+"="}return l},D.utf8Encode=function(t){var e,n,r,s,i="";for(e=n=0,r=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,s=0;s<r;s++){var o=t.charCodeAt(s),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),null!==a&&(n>e&&(i+=t.substring(e,n)),i+=a,e=n=s+1)}return n>e&&(i+=t.substring(e,t.length)),i},D.UUID=(L=function(){for(var t=1*new Date,e=0;t==1*new Date;)e++;return t.toString(16)+e.toString(16)},function(){var t=(window.screen.height*window.screen.width).toString(16);return L()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var t,e,n=O,r=[],s=0;function i(t,e){var n,s=0;for(n=0;n<e.length;n++)s|=r[n]<<8*n;return t^s}for(t=0;t<n.length;t++)e=n.charCodeAt(t),r.unshift(255&e),r.length>=4&&(s=i(s,r),r=[]);return r.length>0&&(s=i(s,r)),s.toString(16)}()+"-"+t+"-"+L()}),D.isBlockedUA=function(t){return!!/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(t)},D.HTTPBuildQuery=function(t,e){var n,r,s=[];return D.isUndefined(e)&&(e="&"),D.each(t,function(t,e){n=encodeURIComponent(t.toString()),r=encodeURIComponent(e),s[s.length]=r+"="+n}),s.join(e)},D.getQueryParam=function(t,e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);if(null===n||n&&"string"!=typeof n[1]&&n[1].length)return"";var r=n[1];try{r=decodeURIComponent(r)}catch(s){$("Skipping decoding for malformed query param: "+r)}return r.replace(/\+/g," ")},D.getHashParam=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},D.register_event=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,r,s,i){if(e)if(e.addEventListener&&!s)e.addEventListener(n,r,!!i);else{var o="on"+n;e[o]=function(e,n,r){return function(s){if(s=s||t(window.event)){var i,o,a=!0;return D.isFunction(r)&&(i=r(s)),o=n.call(e,s),!1!==i&&!1!==o||(a=!1),a}}}(e,r,e[o])}else $("No valid element provided to register_event")}}(),D.info={campaignParams:function(){var t="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),e="",n={};return D.each(t,function(t){(e=D.getQueryParam(E.URL,t)).length&&(n[t]=e)}),n},searchEngine:function(t){return 0===t.search("https?://(.*)google.([^/?]*)")?"google":0===t.search("https?://(.*)bing.com")?"bing":0===t.search("https?://(.*)yahoo.com")?"yahoo":0===t.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(t){var e=D.info.searchEngine(t),n="yahoo"!=e?"q":"p",r={};if(null!==e){r.$search_engine=e;var s=D.getQueryParam(t,n);s.length&&(r.ph_keyword=s)}return r},browser:function(t,e,n){return e=e||"",n||D.includes(t," OPR/")?D.includes(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":D.includes(t,"IEMobile")||D.includes(t,"WPDesktop")?"Internet Explorer Mobile":D.includes(t,"SamsungBrowser/")?"Samsung Internet":D.includes(t,"Edge")||D.includes(t,"Edg/")?"Microsoft Edge":D.includes(t,"FBIOS")?"Facebook Mobile":D.includes(t,"Chrome")?"Chrome":D.includes(t,"CriOS")?"Chrome iOS":D.includes(t,"UCWEB")||D.includes(t,"UCBrowser")?"UC Browser":D.includes(t,"FxiOS")?"Firefox iOS":D.includes(e,"Apple")?D.includes(t,"Mobile")?"Mobile Safari":"Safari":D.includes(t,"Android")?"Android Mobile":D.includes(t,"Konqueror")?"Konqueror":D.includes(t,"Firefox")?"Firefox":D.includes(t,"MSIE")||D.includes(t,"Trident/")?"Internet Explorer":D.includes(t,"Gecko")?"Mozilla":""},browserVersion:function(t,e,n){var r={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[D.info.browser(t,e,n)];if(void 0===r)return null;var s=t.match(r);return s?parseFloat(s[s.length-2]):null},os:function(){var t=O;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":/CrOS/.test(t)?"Chrome OS":""},device:function(t){return/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"Windows Phone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Android/.test(t)&&!/Mobile/.test(t)?"Android Tablet":/Android/.test(t)?"Android":""},deviceType:function(t){var e=this.device(t);return"iPad"===e||"Android Tablet"===e?"Tablet":e?"Mobile":"Desktop"},referringDomain:function(t){var e=t.split("/");return e.length>=3?e[2]:""},properties:function(){return D.extend(D.strip_empty_properties({$os:D.info.os(),$browser:D.info.browser(O,I.vendor,window.opera),$device:D.info.device(O),$device_type:D.info.deviceType(O)}),{$current_url:window.location.href,$host:window.location.host,$pathname:window.location.pathname,$browser_version:D.info.browserVersion(O,I.vendor,window.opera),$screen_height:window.screen.height,$screen_width:window.screen.width,$lib:"web",$lib_version:v.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:D.timestamp()/1e3})},people_properties:function(){return D.extend(D.strip_empty_properties({$os:D.info.os(),$browser:D.info.browser(O,I.vendor,window.opera)}),{$browser_version:D.info.browserVersion(O,I.vendor,window.opera)})}},D.isObject=D.isObject,D.isBlockedUA=D.isBlockedUA,D.isEmptyObject=D.isEmptyObject,D.info=D.info,D.info.device=D.info.device,D.info.browser=D.info.browser,D.info.browserVersion=D.info.browserVersion,D.info.properties=D.info.properties;var G=["a","button","form","input","select","textarea","label"];function q(t){for(var e=t;e.parentNode&&!W(e,"body");e=e.parentNode){var n=B(e).split(" ");if(D.includes(n,"ph-sensitive")||D.includes(n,"ph-no-capture"))return!1}if(D.includes(B(t).split(" "),"ph-include"))return!0;var r=t.type||"";if("string"==typeof r)switch(r.toLowerCase()){case"hidden":case"password":return!1}var s=t.name||t.id||"";return"string"!=typeof s||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(s.replace(/[^a-zA-Z0-9]/g,""))}function Z(t){return!!(W(t,"input")&&"button"!=t.type||W(t,"select")||W(t,"textarea")||"true"===t.getAttribute("contenteditable"))}function K(t){if(null===t||D.isUndefined(t))return!1;if("string"==typeof t){if(t=D.trim(t),/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((t||"").replace(/[- ]/g,"")))return!1;if(/(^\d{3}-?\d{2}-?\d{4}$)/.test(t))return!1}return!0}function Y(t,e){var n=document.createElement("script");n.type="text/javascript",n.src=t,n.onload=e;var r=document.getElementsByTagName("script");r.length>0?r[0].parentNode.insertBefore(n,r[0]):document.body.appendChild(n)}var X=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.get_config("rageclick");s(this,t),this.clicks=[],this.instance=e,this.enabled=n}return o(t,[{key:"click",value:function(t,e,n){if(this.enabled){var r=this.clicks[this.clicks.length-1];r&&Math.abs(t-r.x)+Math.abs(e-r.y)<30&&n-r.timestamp<1e3?(this.clicks.push({x:t,y:e,timestamp:n}),3===this.clicks.length&&this.instance.capture("$rageclick")):this.clicks=[{x:t,y:e,timestamp:n}]}}}]),t}(),J={_initializedTokens:[],_previousElementSibling:function(t){if(t.previousElementSibling)return t.previousElementSibling;do{t=t.previousSibling}while(t&&!U(t));return t},_getPropertiesFromElement:function(t){var e=t.tagName.toLowerCase(),n={tag_name:e};G.indexOf(e)>-1&&(n.$el_text=V(t));var r=B(t);r.length>0&&(n.classes=r.split(" ").filter(function(t){return""!==t})),D.each(t.attributes,function(e){Z(t)&&-1===["name","id","class"].indexOf(e.name)||K(e.value)&&(n["attr__"+e.name]=e.value)});for(var s=1,i=1,o=t;o=this._previousElementSibling(o);)s++,o.tagName===t.tagName&&i++;return n.nth_child=s,n.nth_of_type=i,n},_getDefaultProperties:function(t){return{$event_type:t,$ce_version:1}},_extractCustomPropertyValue:function(t){var e=[];return D.each(document.querySelectorAll(t.css_selector),function(t){var n;["input","select"].indexOf(t.tagName.toLowerCase())>-1?n=t.value:t.textContent&&(n=t.textContent),K(n)&&e.push(n)}),e.join(", ")},_getCustomProperties:function(t){var e={};return D.each(this._customProperties,function(n){D.each(n.event_selectors,function(r){var s=document.querySelectorAll(r);D.each(s,function(r){D.includes(t,r)&&q(r)&&(e[n.name]=this._extractCustomPropertyValue(n))},this)},this)},this),e},_getEventTarget:function(t){return void 0===t.target?t.srcElement:t.target.shadowRoot?t.composedPath()[0]:t.target},_captureEvent:function(t,e){var n=this._getEventTarget(t);if(H(n)&&(n=n.parentNode),"click"===t.type&&this.rageclicks.click(t.clientX,t.clientY,(new Date).getTime()),function(t,e){if(!t||W(t,"html")||!U(t))return!1;for(var n=!1,r=[t],s=!0,i=t;i.parentNode&&!W(i,"body");)if(11!==i.parentNode.nodeType){if(!(s=i.parentNode))break;if(G.indexOf(s.tagName.toLowerCase())>-1)n=!0;else{var o=window.getComputedStyle(s);o&&"pointer"===o.getPropertyValue("cursor")&&(n=!0)}r.push(s),i=s}else r.push(i.parentNode.host),i=i.parentNode.host;var a=window.getComputedStyle(t);if(a&&"pointer"===a.getPropertyValue("cursor")&&"click"===e.type)return!0;var l=t.tagName.toLowerCase();switch(l){case"html":return!1;case"form":return"submit"===e.type;case"input":return"change"===e.type||"click"===e.type;case"select":case"textarea":return"change"===e.type||"click"===e.type;default:return n?"click"===e.type:"click"===e.type&&(G.indexOf(l)>-1||"true"===t.getAttribute("contenteditable"))}}(n,t)){for(var r=[n],s=n;s.parentNode&&!W(s,"body");)11!==s.parentNode.nodeType?(r.push(s.parentNode),s=s.parentNode):(r.push(s.parentNode.host),s=s.parentNode.host);var i,o=[],a=!1;if(D.each(r,function(t){var e=q(t);"a"===t.tagName.toLowerCase()&&(i=t.getAttribute("href"),i=e&&K(i)&&i);var n=B(t).split(" ");D.includes(n,"ph-no-capture")&&(a=!0),o.push(this._getPropertiesFromElement(t))},this),o[0].$el_text=V(n),i&&(o[0].attr__href=i),a)return!1;var l=D.extend(this._getDefaultProperties(t.type),{$elements:o},this._getCustomProperties(r));return e.capture("$autocapture",l),!0}},_navigate:function(t){window.location.href=t},_addDomEventHandlers:function(t){var e=D.bind(function(e){e=e||window.event,this._captureEvent(e,t)},this);D.register_event(document,"submit",e,!1,!0),D.register_event(document,"change",e,!1,!0),D.register_event(document,"click",e,!1,!0)},_customProperties:{},init:function(t){t.toolbar.maybeLoadEditor();var e=t.get_config("token");if(this._initializedTokens.indexOf(e)>-1)console.log('autocapture already initialized for token "'+e+'"');else{this._initializedTokens.push(e),this.rageclicks=new X(t);var n=D.bind(function(e){if(!document||!document.body)return console.log("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(function(){n(e)},500);if(t.toolbar.afterDecideResponse(e),t.sessionRecording.afterDecideResponse(e),e&&e.config&&!0===e.config.enable_collect_everything?(e.custom_properties&&(this._customProperties=e.custom_properties),this._addDomEventHandlers(t)):t.__autocapture_enabled=!1,e.featureFlags?t.persistence&&t.persistence.register({$active_feature_flags:e.featureFlags}):t.persistence&&t.persistence.unregister("$active_feature_flags"),e.supportedCompression){var r,s={},i=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=h(t))){n&&(t=n);var r=0,s=function(){};return{s:s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(e.supportedCompression);try{for(i.s();!(r=i.n()).done;)s[r.value]=!0}catch(o){i.e(o)}finally{i.f()}t.compression=s}else t.compression={}},this),r=JSON.stringify({token:e,distinct_id:t.get_distinct_id()}),s=D.base64Encode(r);t._send_request(t.get_config("api_host")+"/decide/",{data:s},{method:"POST"},t._prepare_callback(n))}},enabledForProject:function(t,e,n){e=D.isUndefined(e)?10:e,n=D.isUndefined(n)?10:n;for(var r=0,s=0;s<t.length;s++)r+=t.charCodeAt(s);return r%e<n},isBrowserSupported:function(){return D.isFunction(document.querySelectorAll)}};D.bind_instance_methods(J),D.safewrap_instance_methods(J);var Q=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,tt={get:function(t){try{for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var s=n[r];" "==s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(e))return decodeURIComponent(s.substring(e.length,s.length))}}catch(i){}return null},parse:function(t){var e;try{e=JSON.parse(tt.get(t))||{}}catch(n){}return e},set:function(t,e,n,r,s){try{var i="",o="",a="";if(r){var l=document.location.hostname.match(Q),u=l?l[0]:"";i=u?"; domain=."+u:""}if(n){var c=new Date;c.setTime(c.getTime()+24*n*60*60*1e3),o="; expires="+c.toGMTString()}s&&(a="; secure");var h=t+"="+encodeURIComponent(e)+o+"; path=/"+i+a;return document.cookie=h,h}catch(d){return}},remove:function(t,e){try{tt.set(t,"",-1,e)}catch(n){return}}},et=null,nt={is_supported:function(){if(null!==et)return et;var t=!0;try{var e="__mplssupport__";nt.set(e,"xyz"),"xyz"!==nt.get(e)&&(t=!1),nt.remove(e)}catch(n){t=!1}return t||$("localStorage unsupported; falling back to cookie store"),et=t,t},error:function(t){$("localStorage error: "+t)},get:function(t){try{return window.localStorage.getItem(t)}catch(e){nt.error(e)}return null},parse:function(t){try{return JSON.parse(nt.get(t))||{}}catch(e){}return null},set:function(t,e){try{window.localStorage.setItem(t,e)}catch(n){nt.error(n)}},remove:function(t){try{window.localStorage.removeItem(t)}catch(e){nt.error(e)}}},rt={},st={is_supported:function(){return!0},error:function(t){$("memoryStorage error: "+t)},parse:function(t){return rt[t]||null},set:function(t,e){rt[t]=e},remove:function(t){delete rt[t]}};function it(t,e){ft(!0,t,e)}function ot(t,e){ft(!1,t,e)}function at(t,e){return"1"===pt(t,e)}function lt(t,e){return!!function(t){if(t&&t.respectDnt){var e=t&&t.window||C,n=e.navigator||{},r=!1;return D.each([n.doNotTrack,n.msDoNotTrack,e.doNotTrack],function(t){D.includes([!0,1,"1","yes"],t)&&(r=!0)}),r}return!1}(e)||"0"===pt(t,e)}function ut(t,e){return mt(t,function(t){return this._get_config(t)},e)}function ct(t,e){ht(e=e||{}).remove(dt(t,e),!!e.crossSubdomainCookie,e.cookieDomain)}function ht(t){return"localStorage"===(t=t||{}).persistenceType?nt:tt}function dt(t,e){return((e=e||{}).persistencePrefix||"__ph_opt_in_out_")+t}function pt(t,e){return ht(e).get(dt(t,e))}function ft(t,e,n){D.isString(e)&&e.length?(ht(n=n||{}).set(dt(e,n),t?1:0,D.isNumber(n.cookieExpiration)?n.cookieExpiration:null,!!n.crossSubdomainCookie,!!n.secureCookie,!!n.crossSiteCookie,n.cookieDomain),n.capture&&t&&n.capture(n.captureEventName||"$opt_in",n.captureProperties,{send_immediately:!0})):console.error("gdpr."+(t?"optIn":"optOut")+" called with an invalid token")}function mt(t,e,n){return function(){var r=!1;try{var s=e.call(this,"token"),i=e.call(this,"respect_dnt"),o=e.call(this,"opt_out_capturing_persistence_type"),a=e.call(this,"opt_out_capturing_cookie_prefix"),l=e.call(this,"window");s&&(r=lt(s,{respectDnt:i,persistenceType:o,persistencePrefix:a,window:l}))}catch(c){n||console.error("Unexpected error when checking capturing opt-out status: "+c)}if(!r)return t.apply(this,arguments);var u=arguments[arguments.length-1];"function"==typeof u&&u(0)}}var gt={set_action:function(t,e){var n={},r={};return D.isObject(t)?D.each(t,function(t,e){this._is_reserved_property(e)||(r[e]=t)},this):r[t]=e,n.$set=r,n},set_once_action:function(t,e){var n={},r={};return D.isObject(t)?D.each(t,function(t,e){this._is_reserved_property(e)||(r[e]=t)},this):r[t]=e,n.$set_once=r,n}},bt=function(){};D.extend(bt.prototype,gt),bt.prototype._init=function(t){this._posthog=t},bt.prototype.set=ut(function(t,e,n){var r=this.set_action(t,e);return D.isObject(t)&&(n=e),this._get_config("save_referrer")&&this._posthog.persistence.update_referrer_info(document.referrer),r.$set=D.extend({},D.info.people_properties(),this._posthog.persistence.get_referrer_info(),r.$set),this._send_request(r,n)}),bt.prototype.set_once=ut(function(t,e,n){var r=this.set_once_action(t,e);return D.isObject(t)&&(n=e),this._send_request(r,n)}),bt.prototype.toString=function(){return this._posthog.toString()+".people"},bt.prototype._send_request=function(t,e){t.$token=this._get_config("token"),t.$distinct_id=this._posthog.get_distinct_id();var n=this._posthog.get_property("$device_id"),r=this._posthog.get_property("$user_id"),s=this._posthog.get_property("$had_persisted_distinct_id");n&&(t.$device_id=n),r&&(t.$user_id=r),s&&(t.$had_persisted_distinct_id=s);var i=D.encodeDates(t),o=D.copyAndTruncateStrings(i,this._get_config("properties_string_max_length")),a=JSON.stringify(i),l=D.base64Encode(a);return this._posthog._send_request(this._get_config("api_host")+"/engage/",{data:l},{},this._posthog._prepare_callback(e,o)),o},bt.prototype._get_config=function(t){return this._posthog.get_config(t)},bt.prototype._is_reserved_property=function(t){return"$distinct_id"===t||"$token"===t||"$device_id"===t||"$user_id"===t||"$had_persisted_distinct_id"===t},bt.prototype.set=bt.prototype.set,bt.prototype.set_once=bt.prototype.set_once,bt.prototype.toString=bt.prototype.toString;var yt=function(){function t(e){s(this,t),this.instance=e,this._override_warning=!1,this.flagCallReported={}}return o(t,[{key:"getFlags",value:function(){return this.instance.get_property("$override_feature_flags")?(this._override_warning||console.warn("[PostHog] Overriding feature flags! Feature flags from server were: "+JSON.stringify(this.instance.get_property("$active_feature_flags"))),this._override_warning=!0,this.instance.get_property("$override_feature_flags")):this.instance.get_property("$active_feature_flags")}},{key:"reloadFeatureFlags",value:function(){var t=this,e=this.instance.get_config("token"),n=JSON.stringify({token:e,distinct_id:this.instance.get_distinct_id()}),r=D.base64Encode(n);this.instance._send_request(this.instance.get_config("api_host")+"/decide/",{data:r},{method:"POST"},this.instance._prepare_callback(function(e){e.featureFlags?t.instance.persistence&&t.instance.persistence.register({$active_feature_flags:e.featureFlags}):t.instance.persistence&&t.instance.persistence.unregister("$active_feature_flags")}))}},{key:"isFeatureEnabled",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.getFlags())return console.warn('isFeatureEnabled for key "'+t+"\" failed. Feature flags didn't load in time."),!1;var n=this.getFlags().indexOf(t)>-1;return!e.send_event&&"send_event"in e||this.flagCallReported[t]||(this.flagCallReported[t]=!0,this.instance.capture("$feature_flag_called",{$feature_flag:t,$feature_flag_response:n})),n}},{key:"override",value:function(t){if(!1===t)return this.instance.persistence.unregister("$override_feature_flags");this.instance.persistence.register("$override_feature_flags",t)}}]),t}(),vt="$people_distinct_id",_t="__alias",wt="$session_recording_enabled",xt="$sesid",kt=["__mps","__mpso","__mpus","__mpa","__mpap","__mpr","__mpu",vt,_t,"__cmpns","__timers",wt,xt],St=function(t){this.props={},this.campaign_params_saved=!1,this.featureFlagEventHandlers=[],this.name=t.persistence_name?"ph_"+t.persistence_name:"ph_"+t.token+"_posthog";var e=t.persistence;"cookie"!==e&&"localStorage"!==e&&"memory"!==e&&(M("Unknown persistence type "+e+"; falling back to cookie"),e=t.persistence="cookie"),this.storage="localStorage"===e&&nt.is_supported()?nt:"memory"===e?st:tt,this.load(),this.update_config(t),this.save()};St.prototype.addFeatureFlagsHandler=function(t){return this.featureFlagEventHandlers.push(t),!0},St.prototype.receivedFeatureFlags=function(t){this.featureFlagEventHandlers.forEach(function(e){return e(t)})},St.prototype.properties=function(){var t={};return D.each(this.props,function(e,n){D.include(kt,n)||(t[n]=e)}),t},St.prototype.load=function(){if(!this.disabled){var t=this.storage.parse(this.name);t&&(this.props=D.extend({},t))}},St.prototype.save=function(){this.disabled||this.storage.set(this.name,JSON.stringify(this.props),this.expire_days,this.cross_subdomain,this.secure)},St.prototype.remove=function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)},St.prototype.clear=function(){this.remove(),this.props={}},St.prototype.register_once=function(t,e,n){return!!D.isObject(t)&&(void 0===e&&(e="None"),this.expire_days=void 0===n?this.default_expiry:n,t&&t.$active_feature_flags&&this.receivedFeatureFlags(t.$active_feature_flags),D.each(t,function(t,n){this.props.hasOwnProperty(n)&&this.props[n]!==e||(this.props[n]=t)},this),this.save(),!0)},St.prototype.register=function(t,e){return!!D.isObject(t)&&(this.expire_days=void 0===e?this.default_expiry:e,t&&t.$active_feature_flags&&this.receivedFeatureFlags(t.$active_feature_flags),D.extend(this.props,t),this.save(),!0)},St.prototype.unregister=function(t){t in this.props&&(delete this.props[t],this.save(),"$active_feature_flags"===t&&this.receivedFeatureFlags([]))},St.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(D.info.campaignParams()),this.campaign_params_saved=!0)},St.prototype.update_search_keyword=function(t){this.register(D.info.searchInfo(t))},St.prototype.update_referrer_info=function(t){this.register_once({$initial_referrer:t||"$direct",$initial_referring_domain:D.info.referringDomain(t)||"$direct"},""),this.register({$referrer:t||this.props.$referrer||"$direct",$referring_domain:D.info.referringDomain(t)||this.props.$referring_domain||"$direct"})},St.prototype.get_referrer_info=function(){return D.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},St.prototype.safe_merge=function(t){return D.each(this.props,function(e,n){n in t||(t[n]=e)}),t},St.prototype.update_config=function(t){this.default_expiry=this.expire_days=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie)},St.prototype.set_disabled=function(t){this.disabled=t,this.disabled?this.remove():this.save()},St.prototype.set_cross_subdomain=function(t){t!==this.cross_subdomain&&(this.cross_subdomain=t,this.remove(),this.save())},St.prototype.get_cross_subdomain=function(){return this.cross_subdomain},St.prototype.set_secure=function(t){t!==this.secure&&(this.secure=!!t,this.remove(),this.save())},St.prototype.set_event_timer=function(t,e){var n=this.props.__timers||{};n[t]=e,this.props.__timers=n,this.save()},St.prototype.remove_event_timer=function(t){var e=(this.props.__timers||{})[t];return D.isUndefined(e)||(delete this.props.__timers[t],this.save()),e};var Ct=function(){function t(e){s(this,t),this.instance=e,this.captureStarted=!1,this.snapshots=[],this.emit=!1,this.endpoint="/e/"}return o(t,[{key:"startRecordingIfEnabled",value:function(){this.instance.get_property(wt)&&this._startCapture()}},{key:"afterDecideResponse",value:function(t){this.instance.persistence&&this.instance.persistence.register(a({},wt,!!t.sessionRecording)),t.sessionRecording&&(t.sessionRecording.endpoint&&(this.endpoint=t.sessionRecording.endpoint),this.submitRecordings())}},{key:"submitRecordings",value:function(){var t=this;this.emit=!0,this._startCapture(),this.snapshots.forEach(function(e){return t._captureSnapshot(e)})}},{key:"_startCapture",value:function(){void 0!==Object.assign&&(this.captureStarted||this.instance.get_config("disable_session_recording")||(this.captureStarted=!0,Y(this.instance.get_config("api_host")+"/static/recorder.js?v="+v.LIB_VERSION,D.bind(this._onScriptLoaded,this))))}},{key:"_onScriptLoaded",value:function(){var t=this;window.rrweb.record({emit:function(e){var n,r,s,i,o={$snapshot_data:e,$session_id:(n=t.instance.persistence,r=e.timestamp,s=c(n.props.$sesid||[0,null],2),i=s[1],Math.abs(r-s[0])>18e5&&(i=D.UUID()),n.register(a({},xt,[r,i])),i)};t.instance._captureMetrics.incr("rrweb-record"),t.instance._captureMetrics.incr("rrweb-record-".concat(e.type)),t.emit?t._captureSnapshot(o):t.snapshots.push(o)},blockClass:"ph-no-capture",ignoreClass:"ph-ignore-input"}),this.instance._addCaptureHook(function(t){"$pageview"===t&&window.rrweb.record.addCustomEvent("$pageview",{href:window.location.href})})}},{key:"_captureSnapshot",value:function(t){this.instance.capture("$snapshot",t,{transport:"XHR",method:"POST",endpoint:this.endpoint,_forceCompression:!0,_noTruncate:!0,_batchKey:"sessionRecording",_metrics:{rrweb_full_snapshot:2===t.$snapshot_data.type}})}}]),t}(),It=function(){function t(e){s(this,t),this.instance=e}return o(t,[{key:"afterDecideResponse",value:function(t){var e=t.editorParams||(t.toolbarVersion?{toolbarVersion:t.toolbarVersion}:{});t.isAuthenticated&&e.toolbarVersion&&0===e.toolbarVersion.indexOf("toolbar")&&(this._loadEditor(u(u({},e),{},{apiURL:this.instance.get_config("api_host")})),this.instance.set_config({debug:!0}))}},{key:"maybeLoadEditor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.localStorage,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.history;try{var r,s=D.getHashParam(t.hash,"__posthog")||D.getHashParam(t.hash,"state"),i=s?JSON.parse(decodeURIComponent(s)):null,o=i&&("mpeditor"===i.action||"ph_authorize"===i.action);return o?(r=i)&&Object.keys(r).length>0&&(e.setItem("_postHogEditorParams",JSON.stringify(r)),i.desiredHash?t.hash=i.desiredHash:n?n.replaceState("",document.title,t.pathname+t.search):t.hash=""):delete(r=JSON.parse(e.getItem("_postHogEditorParams")||"{}")).userIntent,r.apiURL=this.instance.get_config("api_host"),!(!r.token||this.instance.get_config("token")!==r.token||(this._loadEditor(r),0))}catch(a){return!1}}},{key:"_loadEditor",value:function(t){var e=this;if(!window._postHogToolbarLoaded){window._postHogToolbarLoaded=!0;var n=t.jsURL||t.apiURL||this.instance.get_config("api_host");return Y(n+(n.endsWith("/")?"":"/")+"static/toolbar.js?_ts="+(new Date).getTime(),function(){window.ph_load_editor(t)}),D.register_event(window,"turbolinks:load",function(){window._postHogToolbarLoaded=!1,e._loadEditor(t)}),!0}return!1}}]),t}(),Et=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;s(this,t),this.captureMetrics=e,this.handlePollRequest=n,this.isPolling=!0,this._event_queue=[],this._empty_queue_count=0,this._poller=function(){},this._pollInterval=r}return o(t,[{key:"setPollInterval",value:function(t){this._pollInterval=t,this.isPolling&&this.poll()}},{key:"enqueue",value:function(t,e,n){this.captureMetrics.incr("batch-enqueue"),this._event_queue.push({url:t,data:e,options:n}),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var t=this;clearTimeout(this._poller),this._poller=setTimeout(function(){if(t._event_queue.length>0){var e=t.formatQueue(),n=function(n){var r=e[n],s=r.url,i=r.data,o=r.options;D.each(i,function(e,n){i[n].offset=Math.abs(i[n].timestamp-t.getTime()),delete i[n].timestamp}),t.handlePollRequest(s,i,o),t.captureMetrics.incr("batch-requests"),t.captureMetrics.incr("batch-requests-".concat(s.slice(s.length-2))),t.captureMetrics.incr("batch-handle",i.length),t.captureMetrics.incr("batch-handle-".concat(s.slice(s.length-2)),i.length)};for(var r in e)n(r);t._event_queue.length=0}else t._empty_queue_count++;t._empty_queue_count>4&&(t.isPolling=!1,t._empty_queue_count=0),t.isPolling&&t.poll()},this._pollInterval)}},{key:"updateUnloadMetrics",value:function(){var t=this.formatQueue();for(var e in t){var n=t[e],r=n.url,s=n.data;this.captureMetrics.incr("batch-unload-requests"),this.captureMetrics.incr("batch-unload-requests-".concat(r.slice(r.length-2))),this.captureMetrics.incr("batch-unload",s.length),this.captureMetrics.incr("batch-unload-".concat(r.slice(r.length-2)),s.length)}}},{key:"unload",value:function(){clearTimeout(this._poller);var t=this._event_queue.length>0?this.formatQueue():{};for(var e in this._event_queue.length=0,t){var n=t[e];this.handlePollRequest(e,n.data,u(u({},n.options),{},{transport:"sendbeacon"}))}}},{key:"formatQueue",value:function(){var t={};return D.each(this._event_queue,function(e){var n=e.url,r=e.data,s=e.options,i=(s?s._batchKey:null)||n;void 0===t[i]&&(t[i]={data:[],url:n,options:s}),s&&t[i].options&&t[i].options._metrics&&!t[i].options._metrics.rrweb_full_snapshot&&(t[i].options._metrics.rrweb_full_snapshot=s._metrics.rrweb_full_snapshot),t[i].data.push(r)}),t}},{key:"getTime",value:function(){return(new Date).getTime()}}]),t}(),Ot=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return(new Date).getTime()};s(this,t),this.enabled=e,this.capture=n,this.getTime=r,this.metrics={},this.requests={}}return o(t,[{key:"incr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.enabled&&(t="phjs-".concat(t),this.metrics[t]=(this.metrics[t]||0)+e)}},{key:"decr",value:function(t){this.enabled&&(t="phjs-".concat(t),this.metrics[t]=(this.metrics[t]||0)-1)}},{key:"startRequest",value:function(t){if(this.enabled){var e=D.UUID();return this.requests[e]=[this.getTime(),t],e}}},{key:"finishRequest",value:function(t){if(this.enabled&&this.requests[t]){var e=c(this.requests[t],2),n=e[0],r=e[1];return r.duration=this.getTime()-n,delete this.requests[t],r}}},{key:"markRequestFailed",value:function(t){this.enabled&&this.capture("$capture_failed_request",t)}},{key:"captureInProgressRequests",value:function(){var t=this;this.enabled&&Object.keys(this.requests).forEach(function(e){var n=t.finishRequest(e);t.markRequestFailed(u(u({},n),{},{type:"inflight_at_unload"}))})}}]),t}(),Tt=Uint8Array,Nt=Uint16Array,At=Uint32Array,Rt=new Tt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ft=new Tt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Dt=new Tt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Pt=function(t,e){for(var n=new Nt(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var s=new At(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return[n,s]},$t=Pt(Rt,2),Mt=$t[1];$t[0][28]=258,Mt[258]=28;for(var Lt=Pt(Ft,0)[1],jt=new Nt(32768),zt=0;zt<32768;++zt){var Bt=(43690&zt)>>>1|(21845&zt)<<1;jt[zt]=((65280&(Bt=(61680&(Bt=(52428&Bt)>>>2|(13107&Bt)<<2))>>>4|(3855&Bt)<<4))>>>8|(255&Bt)<<8)>>>1}var Vt=function(t,e,n){for(var r=t.length,s=0,i=new Nt(e);s<r;++s)++i[t[s]-1];var o,a=new Nt(e);for(s=0;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;if(n){o=new Nt(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var u=s<<4|t[s],c=e-t[s],h=a[t[s]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)o[jt[h]>>>l]=u}else for(o=new Nt(r),s=0;s<r;++s)o[s]=jt[a[t[s]-1]++]>>>15-t[s];return o},Ut=new Tt(288);for(zt=0;zt<144;++zt)Ut[zt]=8;for(zt=144;zt<256;++zt)Ut[zt]=9;for(zt=256;zt<280;++zt)Ut[zt]=7;for(zt=280;zt<288;++zt)Ut[zt]=8;var Wt=new Tt(32);for(zt=0;zt<32;++zt)Wt[zt]=5;var Ht=Vt(Ut,9,0),Gt=Vt(Wt,5,0),qt=function(t){return(t/8>>0)+(7&t&&1)},Zt=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var r=new(t instanceof Nt?Nt:t instanceof At?At:Tt)(n-e);return r.set(t.subarray(e,n)),r},Kt=function(t,e,n){var r=e/8>>0;t[r]|=n<<=7&e,t[r+1]|=n>>>8},Yt=function(t,e,n){var r=e/8>>0;t[r]|=n<<=7&e,t[r+1]|=n>>>8,t[r+2]|=n>>>16},Xt=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,i=n.slice();if(!s)return[new Tt(0),0];if(1==s){var o=new Tt(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(t,e){return t.f-e.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,h=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=s-1;)a=n[n[u].f<n[h].f?u++:h++],l=n[u!=c&&n[u].f<n[h].f?u++:h++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var d=i[0].s;for(r=1;r<s;++r)i[r].s>d&&(d=i[r].s);var p=new Nt(d+1),f=Jt(n[c-1],p,0);if(f>e){r=0;var m=0,g=f-e,b=1<<g;for(i.sort(function(t,e){return p[e.s]-p[t.s]||t.f-e.f});r<s;++r){var y=i[r].s;if(!(p[y]>e))break;m+=b-(1<<f-p[y]),p[y]=e}for(m>>>=g;m>0;){var v=i[r].s;p[v]<e?m-=1<<e-p[v]++-1:++r}for(;r>=0&&m;--r){var _=i[r].s;p[_]==e&&(--p[_],++m)}f=e}return[new Tt(p),f]},Jt=function t(e,n,r){return-1==e.s?Math.max(t(e.l,n,r+1),t(e.r,n,r+1)):n[e.s]=r},Qt=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Nt(++e),r=0,s=t[0],i=1,o=function(t){n[r++]=t},a=1;a<=e;++a)if(t[a]==s&&a!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=t[a]}return[n.subarray(0,r),e]},te=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},ee=function(t,e,n){var r=n.length,s=qt(e+2);t[s]=255&r,t[s+1]=r>>>8,t[s+2]=255^t[s],t[s+3]=255^t[s+1];for(var i=0;i<r;++i)t[s+i+4]=n[i];return 8*(s+4+r)},ne=function(t,e,n,r,s,i,o,a,l,u,c){Kt(e,c++,n),++s[256];for(var h=Xt(s,15),d=h[0],p=h[1],f=Xt(i,15),m=f[0],g=f[1],b=Qt(d),y=b[0],v=b[1],_=Qt(m),w=_[0],x=_[1],k=new Nt(19),S=0;S<y.length;++S)k[31&y[S]]++;for(S=0;S<w.length;++S)k[31&w[S]]++;for(var C=Xt(k,7),I=C[0],E=C[1],O=19;O>4&&!I[Dt[O-1]];--O);var T,N,A,R,F=u+5<<3,D=te(s,Ut)+te(i,Wt)+o,P=te(s,d)+te(i,m)+o+14+3*O+te(k,I)+(2*k[16]+3*k[17]+7*k[18]);if(F<=D&&F<=P)return ee(e,c,t.subarray(l,l+u));if(Kt(e,c,1+(P<D)),c+=2,P<D){T=Vt(d,p,0),N=d,A=Vt(m,g,0),R=m;var $=Vt(I,E,0);for(Kt(e,c,v-257),Kt(e,c+5,x-1),Kt(e,c+10,O-4),c+=14,S=0;S<O;++S)Kt(e,c+3*S,I[Dt[S]]);c+=3*O;for(var M=[y,w],L=0;L<2;++L){var j=M[L];for(S=0;S<j.length;++S)Kt(e,c,$[z=31&j[S]]),c+=I[z],z>15&&(Kt(e,c,j[S]>>>5&127),c+=j[S]>>>12)}}else T=Ht,N=Ut,A=Gt,R=Wt;for(S=0;S<a;++S)if(r[S]>255){var z;Yt(e,c,T[257+(z=r[S]>>>18&31)]),c+=N[z+257],z>7&&(Kt(e,c,r[S]>>>23&31),c+=Rt[z]);var B=31&r[S];Yt(e,c,A[B]),c+=R[B],B>3&&(Yt(e,c,r[S]>>>5&8191),c+=Ft[B])}else Yt(e,c,T[r[S]]),c+=N[r[S]];return Yt(e,c,T[256]),c+N[256]},re=new At([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),se=function(){for(var t=new At(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),ie=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8};function oe(t,e){void 0===e&&(e={});var n=function(){var t=4294967295;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=se[255&n^e[r]]^n>>>8;t=n},d:function(){return 4294967295^t}}}(),r=t.length;n.p(t);var s,i,o,a,l=(a=10+((s=e).filename&&s.filename.length+1||0),8,function(t,e,n,r,s,i){var o=t.length,a=new Tt(r+o+5*(1+Math.floor(o/7e3))+8),l=a.subarray(r,a.length-8),u=0;if(!e||o<8)for(var c=0;c<=o;c+=65535){var h=c+65535;h<o?u=ee(l,u,t.subarray(c,h)):(l[c]=i,u=ee(l,u,t.subarray(c,o)))}else{for(var d=re[e-1],p=d>>>13,f=8191&d,m=(1<<n)-1,g=new Nt(32768),b=new Nt(m+1),y=Math.ceil(n/3),v=2*y,_=function(e){return(t[e]^t[e+1]<<y^t[e+2]<<v)&m},w=new At(25e3),x=new Nt(288),k=new Nt(32),S=0,C=0,I=(c=0,0),E=0,O=0;c<o;++c){var T=_(c),N=32767&c,A=b[T];if(g[N]=A,b[T]=N,E<=c){var R=o-c;if((S>7e3||I>24576)&&R>423){u=ne(t,l,0,w,x,k,C,I,O,c-O,u),I=S=C=0,O=c;for(var F=0;F<286;++F)x[F]=0;for(F=0;F<30;++F)k[F]=0}var D=2,P=0,$=f,M=N-A&32767;if(R>2&&T==_(c-M))for(var L=Math.min(p,R)-1,j=Math.min(32767,c),z=Math.min(258,R);M<=j&&--$&&N!=A;){if(t[c+D]==t[c+D-M]){for(var B=0;B<z&&t[c+B]==t[c+B-M];++B);if(B>D){if(D=B,P=M,B>L)break;var V=Math.min(M,B-2),U=0;for(F=0;F<V;++F){var W=c-M+F+32768&32767,H=W-g[W]+32768&32767;H>U&&(U=H,A=W)}}}M+=(N=A)-(A=g[N])+32768&32767}if(P){w[I++]=268435456|Mt[D]<<18|Lt[P];var G=31&Mt[D],q=31&Lt[P];C+=Rt[G]+Ft[q],++x[257+G],++k[q],E=c+D,++S}else w[I++]=t[c],++x[t[c]]}}u=ne(t,l,i,w,x,k,C,I,O,c-O,u)}return Zt(a,0,r+qt(u)+8)}(i=t,null==(o=e).level?6:o.level,null==o.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(i.length)))):12+o.mem,a,0,!0)),u=l.length;return function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:9==e.level?2:0,t[9]=3,0!=e.mtime&&ie(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var r=0;r<=n.length;++r)t[r+10]=n.charCodeAt(r)}}(l,e),ie(l,u-8,n.d()),ie(l,u-4,r),l}function ae(t,e){var n=t.length;if(!e&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(t);for(var r=new Tt(t.length+(t.length>>>1)),s=0,i=function(t){r[s++]=t},o=0;o<n;++o){if(s+5>r.length){var a=new Tt(s+8+(n-o<<1));a.set(r),r=a}var l=t.charCodeAt(o);l<128||e?i(l):l<2048?(i(192|l>>>6),i(128|63&l)):l>55295&&l<57344?(i(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),i(128|l>>>12&63),i(128|l>>>6&63),i(128|63&l)):(i(224|l>>>12),i(128|l>>>6&63),i(128|63&l))}return Zt(r,0,s)}var le,ue,ce=function t(e,n){if(n.blob)return new Blob([e.buffer],{type:"text/plain"});if(n.sendBeacon){var r=t(e,{method:"POST"});return new Blob([r],{type:"application/x-www-form-urlencoded"})}return"POST"!==n.method?null:(s=Array.isArray(e)?"data="+encodeURIComponent(e):"data="+encodeURIComponent(e.data),e.compression&&(s+="&compression="+e.compression),s);var s},he=function(t,e,n,r,s,i){var o=new XMLHttpRequest;o.open(r.method,t,!0);var a=ce(e,r);s.incr("_send_request"),s.incr("_send_request_inflight");var l=s.startRequest(u({data_size:D.isString(e)?e.length:a.length,endpoint:t.slice(t.length-2)},r._metrics));D.each(n,function(t,e){o.setRequestHeader(e,t)}),"POST"!==r.method||r.blob||o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.withCredentials=!0,o.onreadystatechange=function(){if(4===o.readyState){s.incr("xhr-response"),s.incr("xhr-response-".concat(o.status)),s.decr("_send_request_inflight");var t=s.finishRequest(l);if(200===o.status){if(i){var e;try{e=JSON.parse(o.responseText)}catch(a){return void $(a)}i(e)}}else{var n="Bad HTTP status: "+o.status+" "+o.statusText;$(n),s.markRequestFailed(u(u({},t),{},{type:"non_200",status:o.status,statusText:o.statusText})),i&&i(r.verbose?{status:0,error:n}:0)}}},o.send(a)},de=function(){},pe={},fe="posthog",me=C.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,ge=!me&&-1===O.indexOf("MSIE")&&-1===O.indexOf("Mozilla"),be=function(){},ye=function(t,e,n){var r,s=n===fe?ue:ue[n];if(s&&0===le)r=s;else{if(s&&!D.isArray(s))return void $("You have already initialized "+n);r=new be}return r._init(t,e,n),r.people=new bt,r.people._init(r),r.featureFlags=new yt(r),r.feature_flags=r.featureFlags,r.toolbar=new It(r),r.sessionRecording=new Ct(r),r.sessionRecording.startRecordingIfEnabled(),v.DEBUG=v.DEBUG||r.get_config("debug"),r.__autocapture_enabled=r.get_config("autocapture"),r.get_config("autocapture")&&(J.enabledForProject(r.get_config("token"),100,100)?J.isBrowserSupported()?J.init(r):(r.__autocapture_enabled=!1,P("Disabling Automatic Event Collection because this browser is not supported")):(r.__autocapture_enabled=!1,P("Not in active bucket: disabling Automatic Event Collection."))),!D.isUndefined(s)&&D.isArray(s)&&(r._execute_array.call(r.people,s.people),r._execute_array(s)),r};function ve(t){C.console.warn("WARNING! posthog."+t+" is deprecated and will be removed soon! Please use posthog."+t.split("captureing").join("capturing")+' instead (without the "e")!')}be.prototype.init=function(t,e,n){if(D.isUndefined(n))$("You must name your new library: init(token, config, name)");else{if(n!==fe){var r=ye(t,e,n);return ue[n]=r,r._loaded(),r}$("You must initialize the main posthog object right after you include the PostHog js snippet")}},be.prototype._init=function(t,e,n){this.__loaded=!0,this.config={},this._triggered_notifs=[],this.compression={},this.set_config(D.extend({},{api_host:"https://app.posthog.com",api_method:"POST",api_transport:"XHR",autocapture:!0,rageclick:!1,cross_subdomain_cookie:-1===E.location.hostname.indexOf("herokuapp.com"),persistence:"cookie",persistence_name:"",cookie_name:"",loaded:function(){},store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,capture_pageview:!0,debug:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:"https:"===C.location.protocol,ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,property_blacklist:[],sanitize_properties:null,xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,_onCapture:function(){},_capture_metrics:!1},e,{name:n,token:t,callback_fn:(n===fe?n:"posthog."+n)+"._jsc"})),this._jsc=function(){},this._captureMetrics=new Ot(this.get_config("_capture_metrics"),D.bind(this.capture,this)),this._requestQueue=new Et(this._captureMetrics,D.bind(this._handle_queued_event,this)),this.__captureHooks=[],this.__request_queue=[],this.persistence=new St(this.config),this._gdpr_init();var r=D.UUID();this.get_distinct_id()||this.register_once({distinct_id:r,$device_id:r},""),C.addEventListener&&C.addEventListener("unload",this._handle_unload.bind(this))},be.prototype._loaded=function(){this.get_config("loaded")(this),this._start_queue_if_opted_in(),this.get_config("capture_pageview")&&this.capture_pageview()},be.prototype._start_queue_if_opted_in=function(){this.has_opted_out_capturing()||this.get_config("request_batching")&&this._requestQueue.poll()},be.prototype._dom_loaded=function(){this.has_opted_out_capturing()||D.each(this.__request_queue,function(t){this._send_request.apply(this,t)},this),delete this.__request_queue,this._start_queue_if_opted_in()},be.prototype._prepare_callback=function(t,e){if(D.isUndefined(t))return null;if(me)return function(n){t(n,e)};var n=this._jsc,r=""+Math.floor(1e8*Math.random()),s=this.get_config("callback_fn")+"["+r+"]";return n[r]=function(s){delete n[r],t(s,e)},s},be.prototype._handle_unload=function(){this.get_config("request_batching")?(this.get_config("capture_pageview")&&this.capture("$pageleave"),this.get_config("_capture_metrics")&&(this._requestQueue.updateUnloadMetrics(),this.capture("$capture_metrics",this._captureMetrics.metrics),this._captureMetrics.captureInProgressRequests()),this._requestQueue.unload()):this.get_config("capture_pageview")&&this.capture("$pageleave",null,{transport:"sendbeacon"})},be.prototype._handle_queued_event=function(t,e,n){var r=JSON.stringify(e);this.__compress_and_send_json_request(t,r,n||pe,de)},be.prototype.__compress_and_send_json_request=function(t,e,n,r){var s,i=c(function(t,e,n){return"lz64"===t?[{data:y.compressToBase64(e),compression:"lz64"},n]:"gzip-js"===t?[oe(ae(e),{mtime:0}),u(u({},n),{},{blob:!0,urlQueryArgs:{compression:"gzip-js"}})]:[{data:D.base64Encode(e)},n]}((s=this.compression)["gzip-js"]?"gzip-js":s.lz64?"lz64":"base64",e,n),2);this._send_request(t,i[0],i[1],r)},be.prototype._send_request=function(t,e,n,r){if(ge)this.__request_queue.push(arguments);else{var s={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")};n=D.extend(s,n||{}),me||(n.method="GET");var i=C.navigator.sendBeacon&&"sendbeacon"===n.transport.toLowerCase(),o=n.urlQueryArgs||{};if(o.ip=this.get_config("ip")?1:0,o._=(new Date).getTime().toString(),t+="?"+D.HTTPBuildQuery(o),D.isObject(e)&&this.get_config("img")){var a=E.createElement("img");a.src=t,E.body.appendChild(a)}else if(i)C.navigator.sendBeacon(t,ce(e,u(u({},n),{},{sendBeacon:!0})));else if(me)try{he(t,e,this.get_config("xhr_headers"),n,this._captureMetrics,r)}catch(h){$(h)}else{var l=E.createElement("script");l.type="text/javascript",l.async=!0,l.defer=!0,l.src=t;var c=E.getElementsByTagName("script")[0];c.parentNode.insertBefore(l,c)}}},be.prototype._execute_array=function(t){var e,n=[],r=[],s=[];D.each(t,function(t){t&&(D.isArray(e=t[0])?s.push(t):"function"==typeof t?t.call(this):D.isArray(t)&&"alias"===e?n.push(t):D.isArray(t)&&-1!==e.indexOf("capture")&&"function"==typeof this[e]?s.push(t):r.push(t))},this);var i=function(t,e){D.each(t,function(t){if(D.isArray(t[0])){var n=e;D.each(t,function(t){n=n[t[0]].apply(n,t.slice(1))})}else this[t[0]].apply(this,t.slice(1))},e)};i(n,this),i(r,this),i(s,this)},be.prototype.push=function(t){this._execute_array([t])},be.prototype.capture=mt(function(t,e,n,r){this._captureMetrics.incr("capture"),"$snapshot"===t&&this._captureMetrics.incr("snapshot"),r||"function"!=typeof n||(r=n,n=null);var s=(n=n||pe).transport;if(s&&(n.transport=s),"function"!=typeof r?r=de:C.console.warn("WARNING! Calling posthog.capture with a callback is deprecated and will be removed soon!"),D.isUndefined(t)||"string"!=typeof t)$("No event name provided to posthog.capture");else{if(!D.isBlockedUA(O)){var i=this.persistence.remove_event_timer(t);this.persistence.update_search_keyword(E.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(E.referrer);var o={event:t,properties:this._calculate_event_properties(t,e,i)};"$identify"===t&&n.$set&&(o.$set=n.$set),o=D.copyAndTruncateStrings(o,n._noTruncate?null:this.get_config("properties_string_max_length")),this.get_config("debug")&&P("PostHog.js send",o);var a=JSON.stringify(o),l=this.get_config("api_host")+(n.endpoint||"/e/"),u=this._prepare_callback(r,o),c=r!==de||n!==pe;return!this.get_config("request_batching")||c&&!n._batchKey?this.__compress_and_send_json_request(l,a,n,u):(o.timestamp=new Date,this._requestQueue.enqueue(l,o,n)),this._invokeCaptureHooks(t),o}r(0)}},function(t){return this.get_config(t)},void 0),be.prototype._addCaptureHook=function(t){this.__captureHooks.push(t)},be.prototype._invokeCaptureHooks=function(t){this.config._onCapture(t),D.each(this.__captureHooks,function(e){return e(t)})},be.prototype._calculate_event_properties=function(t,e,n){var r=e||{};if(r.token=this.get_config("token"),"$snapshot"===t){var s=this.persistence.properties();return r.distinct_id=s.distinct_id,r}if(!D.isUndefined(n)){var i=(new Date).getTime()-n;r.$duration=parseFloat((i/1e3).toFixed(3))}r=D.extend({},D.info.properties(),this.persistence.properties(),r);var o=this.get_config("property_blacklist");D.isArray(o)?D.each(o,function(t){delete r[t]}):$("Invalid value for property_blacklist config: "+o);var a=this.get_config("sanitize_properties");return a&&(r=a(r,t)),r},be.prototype.capture_pageview=function(t){D.isUndefined(t)&&(t=E.location.href),this.capture("$pageview")},be.prototype.register=function(t,e){this.persistence.register(t,e)},be.prototype.register_once=function(t,e,n){this.persistence.register_once(t,e,n)},be.prototype.unregister=function(t){this.persistence.unregister(t)},be.prototype._register_single=function(t,e){var n={};n[t]=e,this.register(n)},be.prototype.isFeatureEnabled=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.feature_flags.isFeatureEnabled(t,e)},be.prototype.reloadFeatureFlags=function(){return this.feature_flags.reloadFeatureFlags()},be.prototype.onFeatureFlags=function(t){this.persistence.addFeatureFlagsHandler(t);var e=this.feature_flags.getFlags();e&&t(e)},be.prototype.identify=function(t,e,n){if(t){this._captureMetrics.incr("identify");var r=this.get_distinct_id();this.register({$user_id:t}),this.get_property("$device_id")||this.register_once({$had_persisted_distinct_id:!0,$device_id:r},""),t!==r&&t!==this.get_property(_t)&&(this.unregister(_t),this.register({distinct_id:t})),t===r||this.get_property("$device_id")&&r!==this.get_property("$device_id")?(e&&this.people.set(e),n&&this.people.set_once(n)):this.capture("$identify",{distinct_id:t,$anon_distinct_id:r},{$set:e||{}},{$set_once:n||{}}),this.reloadFeatureFlags()}else $("Unique user id has not been set in posthog.identify")},be.prototype.reset=function(t){var e=this.get_property("$device_id");this.persistence.clear();var n=D.UUID();this.register_once({distinct_id:n,$device_id:t?n:e},"")},be.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},be.prototype.alias=function(t,e){if(t===this.get_property(vt))return M("Attempting to create alias for existing People user - aborting."),-2;var n=this;return D.isUndefined(e)&&(e=this.get_distinct_id()),t!==e?(this._register_single(_t,t),this.capture("$create_alias",{alias:t,distinct_id:e},function(){n.identify(t)})):($("alias matches current distinct_id - skipping api call."),this.identify(t),-1)},be.prototype.set_config=function(t){D.isObject(t)&&(D.extend(this.config,t),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),localStorage&&"true"===localStorage.getItem("ph_debug")&&(this.config.debug=!0),v.DEBUG=v.DEBUG||this.get_config("debug"))},be.prototype.get_config=function(t){return this.config[t]},be.prototype.get_property=function(t){return this.persistence.props[t]},be.prototype.toString=function(){var t=this.get_config("name");return t!==fe&&(t="posthog."+t),t},be.prototype._gdpr_init=function(){"localStorage"===this.get_config("opt_out_capturing_persistence_type")&&nt.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_capturing()||!this.get_config("opt_out_capturing_by_default")&&!tt.get("ph_optout")||(tt.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.get_config("opt_out_persistence_by_default")}))},be.prototype._gdpr_update_persistence=function(t){var e;if(t&&t.clear_persistence)e=!0;else{if(!t||!t.enable_persistence)return;e=!1}this.get_config("disable_persistence")||this.persistence.disabled===e||this.persistence.set_disabled(e)},be.prototype._gdpr_call_func=function(t,e){return e=D.extend({capture:D.bind(this.capture,this),persistence_type:this.get_config("opt_out_capturing_persistence_type"),cookie_prefix:this.get_config("opt_out_capturing_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),secure_cookie:this.get_config("secure_cookie")},e),nt.is_supported()||"localStorage"!==e.persistence_type||(e.persistence_type="cookie"),t(this.get_config("token"),{capture:e.capture,captureEventName:e.capture_event_name,captureProperties:e.capture_properties,persistenceType:e.persistence_type,persistencePrefix:e.cookie_prefix,cookieExpiration:e.cookie_expiration,crossSubdomainCookie:e.cross_subdomain_cookie,secureCookie:e.secure_cookie})},be.prototype.opt_in_capturing=function(t){t=D.extend({enable_persistence:!0},t),this._gdpr_call_func(it,t),this._gdpr_update_persistence(t)},be.prototype.opt_in_captureing=function(t){ve("opt_in_captureing"),this.opt_in_capturing(t)},be.prototype.opt_out_capturing=function(t){t=D.extend({clear_persistence:!0},t),this._gdpr_call_func(ot,t),this._gdpr_update_persistence(t)},be.prototype.opt_out_captureing=function(t){ve("opt_out_captureing"),this.opt_out_capturing(t)},be.prototype.has_opted_in_capturing=function(t){return this._gdpr_call_func(at,t)},be.prototype.has_opted_in_captureing=function(t){return ve("has_opted_in_captureing"),this.has_opted_in_capturing(t)},be.prototype.has_opted_out_capturing=function(t){return this._gdpr_call_func(lt,t)},be.prototype.has_opted_out_captureing=function(t){return ve("has_opted_out_captureing"),this.has_opted_out_capturing(t)},be.prototype.clear_opt_in_out_capturing=function(t){t=D.extend({enable_persistence:!0},t),this._gdpr_call_func(ct,t),this._gdpr_update_persistence(t)},be.prototype.clear_opt_in_out_captureing=function(t){ve("clear_opt_in_out_captureing"),this.clear_opt_in_out_capturing(t)},be.prototype.sentry_integration=function(t,e,n,r){this.name="posthog-js",this.setupOnce=function(s){s(function(s){if("error"!==s.level||!t.__loaded)return s;s.tags||(s.tags={}),s.tags["PostHog URL"]=t.config.api_host+"/person/"+t.get_distinct_id();var i={$sentry_event_id:s.event_id,$sentry_exception:s.exception};return e&&n&&(i.$sentry_url=(r||"https://sentry.io/organizations/")+e+"/issues/?project="+n+"&query="+s.event_id),t.capture("$exception",i),s})}},be.prototype.debug=function(t){!1===t?(C.console.log("You've disabled debug mode."),localStorage&&localStorage.setItem("ph_debug",void 0),this.set_config({debug:!1})):(C.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))},be.prototype.decodeLZ64=y.decompressFromBase64,be.prototype.init=be.prototype.init,be.prototype.reset=be.prototype.reset,be.prototype.capture=be.prototype.capture,be.prototype.capture_pageview=be.prototype.capture_pageview,be.prototype.register=be.prototype.register,be.prototype.register_once=be.prototype.register_once,be.prototype.unregister=be.prototype.unregister,be.prototype.identify=be.prototype.identify,be.prototype.alias=be.prototype.alias,be.prototype.set_config=be.prototype.set_config,be.prototype.get_config=be.prototype.get_config,be.prototype.get_property=be.prototype.get_property,be.prototype.get_distinct_id=be.prototype.get_distinct_id,be.prototype.toString=be.prototype.toString,be.prototype.opt_out_captureing=be.prototype.opt_out_captureing,be.prototype.opt_in_captureing=be.prototype.opt_in_captureing,be.prototype.has_opted_out_captureing=be.prototype.has_opted_out_captureing,be.prototype.has_opted_in_captureing=be.prototype.has_opted_in_captureing,be.prototype.clear_opt_in_out_captureing=be.prototype.clear_opt_in_out_captureing,be.prototype.opt_out_capturing=be.prototype.opt_out_capturing,be.prototype.opt_in_capturing=be.prototype.opt_in_capturing,be.prototype.has_opted_out_capturing=be.prototype.has_opted_out_capturing,be.prototype.has_opted_in_capturing=be.prototype.has_opted_in_capturing,be.prototype.clear_opt_in_out_capturing=be.prototype.clear_opt_in_out_capturing,be.prototype.isFeatureEnabled=be.prototype.isFeatureEnabled,be.prototype.reloadFeatureFlags=be.prototype.reloadFeatureFlags,be.prototype.onFeatureFlags=be.prototype.onFeatureFlags,be.prototype.decodeLZ64=be.prototype.decodeLZ64,be.prototype.SentryIntegration=be.prototype.sentry_integration,be.prototype.debug=be.prototype.debug,be.prototype.LIB_VERSION=v.LIB_VERSION,St.prototype.properties=St.prototype.properties,St.prototype.update_search_keyword=St.prototype.update_search_keyword,St.prototype.update_referrer_info=St.prototype.update_referrer_info,St.prototype.get_cross_subdomain=St.prototype.get_cross_subdomain,St.prototype.clear=St.prototype.clear,D.safewrap_class(be,["identify"]);var _e={},we=(le=0,(ue=new be).init=function(t,e,n){if(n)return ue[n]||(ue[n]=_e[n]=ye(t,e,n),ue[n]._loaded()),ue[n];var r=ue;_e.posthog?r=_e.posthog:t&&((r=ye(t,e,fe))._loaded(),_e.posthog=r),ue=r,1===le&&(C.posthog=ue),D.each(_e,function(t,e){e!==fe&&(ue[e]=t)}),ue._=D},ue.init(),function(){function t(){t.done||(t.done=!0,ge=!1,D.each(_e,function(t){t._dom_loaded()}))}if(E.addEventListener)"complete"===E.readyState?t():E.addEventListener("DOMContentLoaded",t,!1);else if(E.attachEvent){E.attachEvent("onreadystatechange",t);var e=!1;try{e=null===C.frameElement}catch(n){}E.documentElement.doScroll&&e&&function e(){try{E.documentElement.doScroll("left")}catch(n){return void setTimeout(e,1)}t()}()}D.register_event(C,"load",t,!0)}(),ue);e.a=we},eIep:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("lJxs"),s=n("Cfvw"),i=n("zx2A");function o(t,e){return"function"==typeof e?n=>n.pipe(o((n,i)=>Object(s.a)(t(n,i)).pipe(Object(r.a)((t,r)=>e(n,t,i,r))))):e=>e.lift(new a(t))}class a{constructor(t){this.project=t}call(t,e){return e.subscribe(new l(t,this.project))}}class l extends i.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new i.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(i.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}},ehcP:function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r=n("8Y7J");const s=["text"],i=["primary","secondary","destructive","contrast","basic","black","gray"],o=["small","medium-low","medium-high","","large"],a=["regular","semibold"],l=["","pd-l","pd-xl"];let u=(()=>{class t{constructor(){this.color="primary",this.size="",this.weight="",this.padding="",this.border=!1,this.disabled=!1,this.ariaLabel="",this.icon="",this.type="",this.ariaControls="",this.ariaExpanded=!1,this.hasFocus=new r.n,this.buttonStyle={"stf-button":!0,"stf-button-primary":!0,"stf-button-secondary":!1,"stf-button-destructive":!1,"stf-button-small":!1,"stf-button-large":!1,"stf-button-accent":!1,"stf-button-link":!1,"stf-button-position":!1,"stf-button-type":!1,"stf-button-regular":!1,"stf-button-semibold":!1,"stf-button-pd-l":!1,"stf-button-pd-xl":!1,active:!1},this.isDisabled=!1,this.buttonLabel="",this.hasBorder=!1}ngAfterContentInit(){setTimeout(()=>{this.textElement&&(this.buttonLabel=this.textElement.nativeElement.textContent.trim(),this.ariaLabel||(this.ariaLabel=this.buttonLabel))},0)}onChanges(t){t.color&&t.color.currentValue&&i.forEach(e=>{const n=this.getClassFromInput("color",e,i);this.buttonStyle[n]=e===t.color.currentValue}),t.size&&t.size.currentValue&&o.forEach(e=>{const n=this.getClassFromInput("size",e,o);this.buttonStyle[n]=e===t.size.currentValue}),t.weight&&t.weight.currentValue&&a.forEach(e=>{const n=this.getClassFromInput("weight",e,a);this.buttonStyle[n]=e===t.weight.currentValue}),t.padding&&t.padding.currentValue&&l.forEach(e=>{const n=this.getClassFromInput("padding",e,l);this.buttonStyle[n]=e===t.padding.currentValue}),t.border&&(this.buttonStyle["stf-button-accent"]=this.isPropertyLikeTrue("border")),t.active&&(this.buttonStyle.active=this.isPropertyLikeTrue("active")),t.disabled&&(this.isDisabled=this.isPropertyLikeTrue("disabled"))}getClassFromInput(t,e,n){return-1===n.indexOf(e)?(console.error(`Invalid ${t}: ${e}. Possible values: ${n.join(", ")}.`),""):this.getButtonClass(e)}getButtonClass(t){return`stf-button-${t}`}isPropertyLikeTrue(t){return null!=this[t]&&!1!==this[t]}get disablePointerEvent(){return this.isDisabled?"none":""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Kb({type:t,viewQuery:function(t,e){if(1&t&&r.Lc(s,1),2&t){let t;r.sc(t=r.ec())&&(e.textElement=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&r.Cc("pointer-events",e.disablePointerEvent)},inputs:{color:"color",size:"size",weight:"weight",padding:"padding",border:"border",disabled:"disabled",ariaLabel:"ariaLabel",icon:"icon",type:"type",ariaControls:"ariaControls",ariaExpanded:"ariaExpanded"},outputs:{hasFocus:"hasFocus"}}),t})();var c=n("SVse"),h=n("tHmd"),d=n("TSSN");function p(t,e){if(1&t&&r.Qb(0,"svg-icon",5),2&t){const t=r.hc();r.nc("src","assets/icons/"+t.icon+".svg")}}const f=["*"];let m=0,g=(()=>{class t extends u{constructor(){super(...arguments),this.checkedType="button",this.fullWidth=!1}ngOnInit(){this.id=this.id?`${this.id}-button`:"button-"+m++}ngOnChanges(t){this.onChanges(t),t.type&&-1!==["button","submit","reset"].indexOf(t.type.currentValue)&&(this.checkedType=this.type)}onClick(t){"submit"!==this.type&&t.preventDefault()}}return t.\u0275fac=function(e){return b(e||t)},t.\u0275cmp=r.Jb({type:t,selectors:[["stf-button"]],hostVars:2,hostBindings:function(t,e){2&t&&r.Hb("full-width",e.fullWidth)},inputs:{id:"id",form:"form",active:"active",minWidth:"minWidth",fullWidth:"fullWidth"},features:[r.Bb,r.Cb],ngContentSelectors:f,decls:7,vars:15,consts:[["tabindex","0",3,"ngClass","disabled","type","id","click"],["tabindex","-1",1,"stf-button-wrapper"],["class","stf-button-icon",3,"src",4,"ngIf"],[1,"stf-button-label"],["text",""],[1,"stf-button-icon",3,"src"]],template:function(t,e){1&t&&(r.mc(),r.Vb(0,"button",0),r.dc("click",function(t){return e.onClick(t)}),r.ic(1,"translate"),r.Vb(2,"span",1),r.Fc(3,p,1,1,"svg-icon",2),r.Vb(4,"span",3,4),r.lc(6),r.Ub(),r.Ub(),r.Ub()),2&t&&(r.Cc("min-width",e.minWidth?e.minWidth:null),r.nc("ngClass",e.buttonStyle)("disabled",e.isDisabled)("type",e.checkedType)("id",e.id),r.Fb("aria-label",r.jc(1,13,e.ariaLabel))("aria-controls",e.ariaControls)("aria-expanded",e.ariaExpanded)("form",e.form),r.Eb(3),r.nc("ngIf",e.icon),r.Eb(1),r.Hb("stf-sr",e.icon))},directives:[c.l,c.n,h.b],pipes:[d.c],styles:['stf-button{display:inline-block}stf-button.full-width{display:block}stf-button.full-width .stf-button{width:100%}.stf-button{-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(34,151,199,.25);background:transparent;border:0;border-radius:4px;box-sizing:border-box;cursor:pointer;display:inline-block;font-family:var(--stf-font-family);font-weight:var(--stf-font-weight-bold);margin:0 auto;outline:0;padding:0;vertical-align:middle;width:auto}.stf-button:hover{background:rgba(236,77,148,.05);border-color:rgba(236,77,148,.05);transition:all .33s cubic-bezier(.4,0,.2,1)}.stf-button:active{background:rgba(236,77,148,.1);border-color:rgba(236,77,148,.1);transition:all .67s cubic-bezier(.6,1,.8,1.4)}.stf-button.active{background:rgba(var(--stf-secondary-light),.25);border-color:rgba(var(--stf-secondary-light),.25);transition:all .33s cubic-bezier(.4,0,.2,1)}.stf-button:focus{background:rgba(236,77,148,.05)}.stf-button-icon{padding-right:10px}.stf-button-icon svg{fill:currentColor;stroke:currentColor;stroke-width:.0234375rem;height:18px;vertical-align:middle;width:18px}.stf-button-wrapper{align-items:center;border-radius:100px;display:inline-flex;font-size:var(--stf-font-size-medium);height:36px;justify-content:center;letter-spacing:0;line-height:var(--stf-line-height-xlarge);padding:0 12px;position:relative;width:100%}.stf-button.stf-button-pd-l .stf-button-wrapper{padding-left:24px;padding-right:24px}.stf-button.stf-button-pd-xl .stf-button-wrapper{padding-left:36px;padding-right:36px}.stf-button-accent .stf-button-label{display:inline-block;min-width:108px;white-space:nowrap}.stf-button-label:not(.stf-sr)+svg{margin-left:12px!important;margin-right:0!important}.stf-button .stf-avatar{fill:currentColor;stroke:currentColor;stroke-width:.0234375rem;height:36px;margin:-.5rem -18px -6px;transition:background-color .25s ease;width:36px}.stf-button .stf-avatar:hover{background:rgba(236,77,148,.275)}.stf-button .stf-avatar .stf-avatar-abbr{color:var(--stf-primary);cursor:pointer}.stf-button .stf-avatar.stf-avatar-small{height:27px;margin:-.25rem -12px -3px;width:27px}.stf-button.stf-button-basic{background-color:var(--stf-gray-background);border-radius:4px;box-shadow:var(--stf-shadow-button);color:var(---stf-black)}.stf-button.stf-button-basic:hover{background-color:var(--stf-white);color:var(--stf-black)}.stf-button.stf-button-basic:active{background-color:var(--stf-gray-background);box-shadow:inset 3px 3px 3px var(--stf-secondary-light);color:var(--stf-black)}.stf-button.stf-button-primary{background-color:var(--stf-secondary);border-radius:4px;color:var(--stf-white)}.stf-button.stf-button-primary:active,.stf-button.stf-button-primary:hover{background-color:var(--stf-secondary-lighter);color:var(--stf-secondary)}.stf-button.stf-button-primary:active{box-shadow:inset 3px 3px 3px var(--stf-secondary-light)}.stf-button.stf-button-secondary{background-color:var(--stf-primary);color:var(--stf-white)}.stf-button.stf-button-secondary:active,.stf-button.stf-button-secondary:hover{background-color:var(--stf-primary-lighter);color:var(--stf-primary)}.stf-button.stf-button-destructive{color:var(--stf-primary)}.stf-button.stf-button-destructive:hover{color:#b60051}.stf-button.stf-button-destructive:active{color:#cc005b}.stf-button.stf-button-contrast{color:#fff}.stf-button.stf-button-contrast:hover{color:#fbfaf8}.stf-button.stf-button-contrast:active{color:#f7f6f5}.stf-button.stf-button-gray{background-color:#303030;color:var(--stf-white)}.stf-button.stf-button-gray:active,.stf-button.stf-button-gray:hover{background-color:#565656}.stf-button.stf-button-black{background-color:var(--stf-black);color:var(--stf-white)}.stf-button.stf-button-black:active,.stf-button.stf-button-black:hover{background-color:rgba(0,0,0,.7)}.stf-button.stf-button-accent,.stf-button.stf-button-accent:active,.stf-button.stf-button-accent:hover{box-shadow:inset 0 0 0 1.5px currentColor}.stf-button.stf-button-accent.stf-button-small,.stf-button.stf-button-accent.stf-button-small:active,.stf-button.stf-button-accent.stf-button-small:hover{box-shadow:inset 0 0 0 1px currentColor}.stf-button.stf-button-accent.stf-button-large,.stf-button.stf-button-accent.stf-button-large:active,.stf-button.stf-button-accent.stf-button-large:hover{box-shadow:inset 0 0 0 2px currentColor}.stf-button.stf-button-accent.stf-button-primary:hover{background-color:var(--stf-secondary-contrast);box-shadow:inset 0 0 0 1px var(--stf-secondary-contrast);color:var(--stf-white)}.stf-button.stf-button-accent.stf-button-primary:active{background-color:#00648d;box-shadow:inset 0 0 0 1px #00648d;color:var(--stf-white)}.stf-button.stf-button-accent.stf-button-secondary:hover{background-color:var(--stf-primary-contrast);box-shadow:inset 0 0 0 1px var(--stf-primary-contrast);color:var(--stf-white)}.stf-button.stf-button-accent.stf-button-secondary:active{background-color:var(--stf-primary-dark);box-shadow:inset 0 0 0 1px var(--stf-primary-dark);color:#fff}.stf-button.stf-button-accent.stf-button-destructive:hover{background-color:#cc005b;box-shadow:inset 0 0 0 1px #cc005b;color:#fff}.stf-button.stf-button-accent.stf-button-destructive:active{background-color:#b60051;box-shadow:inset 0 0 0 1px #b60051;color:#fff}.stf-button.stf-button-small .stf-button-wrapper{display:block;font-size:var(--stf-font-size-ssmall);height:30px;letter-spacing:.03em;line-height:var(--stf-line-height-m);padding:9px 12px}.stf-button.stf-button-pd-l .stf-button.stf-button-small .stf-button-wrapper{padding-left:24px;padding-right:24px}.stf-button.stf-button-pd-xl .stf-button.stf-button-small .stf-button-wrapper{padding-left:36px;padding-right:36px}.stf-button.stf-button-small .stf-button-icon svg{height:12px;margin-left:6px;margin-top:-1.5px;width:12px}.stf-button.stf-button-medium-low .stf-button-wrapper{height:32px}.stf-button.stf-button-medium-high .stf-button-wrapper{height:40px}.stf-button.stf-button-large .stf-button-wrapper{height:48px;padding:0 24px}.stf-button.stf-button-pd-l .stf-button.stf-button-large .stf-button-wrapper{padding-left:36px;padding-right:36px}.stf-button.stf-button-pd-xl .stf-button.stf-button-large .stf-button-wrapper{padding-left:48px;padding-right:48px}.stf-button-regular{font-weight:var(--stf-font-weight-regular)}.stf-button-semibold{font-weight:var(--stf-font-weight-semibold)}.stf-button:active:disabled,.stf-button:disabled,.stf-button:hover:disabled{background:var(--stf-gray-disabled-2);color:var(--stf-white);cursor:default;pointer-events:none}.stf-button-link{display:inline-block;font-size:inherit;font-weight:bolder;line-height:inherit;vertical-align:baseline;white-space:normal}.stf-button-link:hover{background:transparent;border-color:transparent}.stf-button-link .stf-button-wrapper.inline{border-radius:3px;display:inline;line-height:inherit;margin:-6px 0;outline:0;padding:0 3px}.stf-button-link .stf-button-wrapper.inline:active,.stf-button-link .stf-button-wrapper.inline:hover{text-decoration:underline}@-webkit-keyframes focus-ring{0%{box-shadow:0 0 0 12px rgba(34,151,199,0)}to{box-shadow:0 0 0 3px rgba(34,151,199,.5)}}@keyframes focus-ring{0%{box-shadow:0 0 0 12px rgba(34,151,199,0)}to{box-shadow:0 0 0 3px rgba(34,151,199,.5)}}.stf-button:focus>.stf-button-wrapper{-webkit-animation-duration:.33s;animation-duration:.33s;-webkit-animation-name:focus-ring;animation-name:focus-ring;box-shadow:0 0 0 3px rgba(34,151,199,.5);outline:0}.stf-button:not(:-moz-focusring):focus>.stf-button-wrapper{outline:0}.stf-button::-moz-focus-inner,.stf-button button::-moz-focus-outer{border:0}.stf-button-wrapper:focus,.stf-button:focus{outline:0}a.stf-button-link:focus,a.stf-button:focus{-webkit-animation:none;animation:none;box-shadow:none}.stf-button-large.stf-button-accent:disabled,.stf-button.stf-button-accent:disabled{border-image-outset:0 0 0 0;border-image-repeat:round round;border-image-slice:27 27 27 27 fill;border-image-source:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDY0IDY0Ij4KICA8ZyBmaWxsPSIjREVFN0U5IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgPGNpcmNsZSBjeD0iMzIiIGN5PSIxIiByPSIxIi8+CiAgICA8Y2lyY2xlIGN4PSIzMiIgY3k9IjYzIiByPSIxIi8+CiAgICA8Y2lyY2xlIGN4PSIxIiBjeT0iMzIiIHI9IjEiLz4KICAgIDxjaXJjbGUgY3g9IjYzIiBjeT0iMzIiIHI9IjEiLz4KICAgIDxjaXJjbGUgY3g9IjM3IiBjeT0iMSIgcj0iMSIvPgogICAgPGNpcmNsZSBjeD0iNDIiIGN5PSIxLjUiIHI9IjEiLz4KICAgIDxjaXJjbGUgY3g9IjQ3IiBjeT0iMyIgcj0iMSIvPgogICAgPGNpcmNsZSBjeD0iNTEuNSIgY3k9IjUuNSIgcj0iMSIvPgogICAgPGNpcmNsZSBjeD0iNTUuNSIgY3k9IjguNSIgcj0iMSIvPgogICAgPGNpcmNsZSBjeD0iNjMiIGN5PSIyNyIgcj0iMSIvPgogICAgPGNpcmNsZSBjeD0iNjIuNSIgY3k9IjIyIiByPSIxIi8+CiAgICA8Y2lyY2xlIGN4PSI2MSIgY3k9IjE3IiByPSIxIi8+CiAgICA8Y2lyY2xlIGN4PSI1OC41IiBjeT0iMTIuNSIgcj0iMSIvPgogICAgPGNpcmNsZSBjeD0iNjMiIGN5PSIzNyIgcj0iMSIgdHJhbnNmb3JtPSJyb3RhdGUoOTAgNjMgMzcpIi8+CiAgICA8Y2lyY2xlIGN4PSI2Mi41IiBjeT0iNDIiIHI9IjEiIHRyYW5zZm9ybT0icm90YXRlKDkwIDYyLjUgNDIpIi8+CiAgICA8Y2lyY2xlIGN4PSI2MSIgY3k9IjQ3IiByPSIxIiB0cmFuc2Zvcm09InJvdGF0ZSg5MCA2MSA0NykiLz4KICAgIDxjaXJjbGUgY3g9IjU4LjUiIGN5PSI1MS41IiByPSIxIiB0cmFuc2Zvcm09InJvdGF0ZSg5MCA1OC41IDUxLjUpIi8+CiAgICA8Y2lyY2xlIGN4PSI1NS41IiBjeT0iNTUuNSIgcj0iMSIgdHJhbnNmb3JtPSJyb3RhdGUoOTAgNTUuNSA1NS41KSIvPgogICAgPGNpcmNsZSBjeD0iMzciIGN5PSI2MyIgcj0iMSIgdHJhbnNmb3JtPSJyb3RhdGUoOTAgMzcgNjMpIi8+CiAgICA8Y2lyY2xlIGN4PSI0MiIgY3k9IjYyLjUiIHI9IjEiIHRyYW5zZm9ybT0icm90YXRlKDkwIDQyIDYyLjUpIi8+CiAgICA8Y2lyY2xlIGN4PSI0NyIgY3k9IjYxIiByPSIxIiB0cmFuc2Zvcm09InJvdGF0ZSg5MCA0NyA2MSkiLz4KICAgIDxjaXJjbGUgY3g9IjUxLjUiIGN5PSI1OC41IiByPSIxIiB0cmFuc2Zvcm09InJvdGF0ZSg5MCA1MS41IDU4LjUpIi8+CiAgICA8Y2lyY2xlIGN4PSIxIiBjeT0iMjciIHI9IjEiIHRyYW5zZm9ybT0icm90YXRlKC05MCAxIDI3KSIvPgogICAgPGNpcmNsZSBjeD0iMS41IiBjeT0iMjIiIHI9IjEiIHRyYW5zZm9ybT0icm90YXRlKC05MCAxLjUgMjIpIi8+CiAgICA8Y2lyY2xlIGN4PSIzIiBjeT0iMTciIHI9IjEiIHRyYW5zZm9ybT0icm90YXRlKC05MCAzIDE3KSIvPgogICAgPGNpcmNsZSBjeD0iNS41IiBjeT0iMTIuNSIgcj0iMSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDUuNSAxMi41KSIvPgogICAgPGNpcmNsZSBjeD0iOC41IiBjeT0iOC41IiByPSIxIiB0cmFuc2Zvcm09InJvdGF0ZSgtOTAgOC41IDguNSkiLz4KICAgIDxjaXJjbGUgY3g9IjI3IiBjeT0iMSIgcj0iMSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDI3IDEpIi8+CiAgICA8Y2lyY2xlIGN4PSIyMiIgY3k9IjEuNSIgcj0iMSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDIyIDEuNSkiLz4KICAgIDxjaXJjbGUgY3g9IjE3IiBjeT0iMyIgcj0iMSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDE3IDMpIi8+CiAgICA8Y2lyY2xlIGN4PSIxMi41IiBjeT0iNS41IiByPSIxIiB0cmFuc2Zvcm09InJvdGF0ZSgtOTAgMTIuNSA1LjUpIi8+CiAgICA8Y2lyY2xlIGN4PSIyNyIgY3k9IjYzIiByPSIxIiB0cmFuc2Zvcm09InJvdGF0ZSgtMTgwIDI3IDYzKSIvPgogICAgPGNpcmNsZSBjeD0iMjIiIGN5PSI2Mi41IiByPSIxIiB0cmFuc2Zvcm09InJvdGF0ZSgtMTgwIDIyIDYyLjUpIi8+CiAgICA8Y2lyY2xlIGN4PSIxNyIgY3k9IjYxIiByPSIxIiB0cmFuc2Zvcm09InJvdGF0ZSgtMTgwIDE3IDYxKSIvPgogICAgPGNpcmNsZSBjeD0iMTIuNSIgY3k9IjU4LjUiIHI9IjEiIHRyYW5zZm9ybT0icm90YXRlKC0xODAgMTIuNSA1OC41KSIvPgogICAgPGNpcmNsZSBjeD0iOC41IiBjeT0iNTUuNSIgcj0iMSIgdHJhbnNmb3JtPSJyb3RhdGUoLTE4MCA4LjUgNTUuNSkiLz4KICAgIDxjaXJjbGUgY3g9IjEiIGN5PSIzNyIgcj0iMSIgdHJhbnNmb3JtPSJyb3RhdGUoLTE4MCAxIDM3KSIvPgogICAgPGNpcmNsZSBjeD0iMS41IiBjeT0iNDIiIHI9IjEiIHRyYW5zZm9ybT0icm90YXRlKC0xODAgMS41IDQyKSIvPgogICAgPGNpcmNsZSBjeD0iMyIgY3k9IjQ3IiByPSIxIiB0cmFuc2Zvcm09InJvdGF0ZSgtMTgwIDMgNDcpIi8+CiAgICA8Y2lyY2xlIGN4PSI1LjUiIGN5PSI1MS41IiByPSIxIiB0cmFuc2Zvcm09InJvdGF0ZSgtMTgwIDUuNSA1MS41KSIvPgogIDwvZz4KPC9zdmc+Cg==");border-image-width:27px 27px 27px 27px;box-shadow:none}.stf-notifications-content-empty{align-items:center;background:var(--stf-white);display:flex;flex-flow:column;height:100%;justify-content:center}.stf-notifications-content-empty svg{fill:var(--stf-black);height:48px;width:48px}.stf-notifications-content-empty h3{margin:0 0 12px;text-align:center}'],encapsulation:2}),t})();const b=r.Xb(g)},euyF:function(t,e,n){(function(t){var r;!function(t,s,i){function o(t){var e=this;e.next=function(){var t,n,r=e.w,s=e.X,i=e.i;return e.w=r=r+1640531527|0,n=s[i+34&127],t=s[i=i+1&127],n^=n<<13,t^=t<<17,n=s[i]=(n^=n>>>15)^(t^=t>>>12),e.i=i,n+(r^r>>>16)|0},function(t,e){var n,r,s,i,o,a=[],l=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,l=Math.max(l,e.length)),s=0,i=-32;i<l;++i)e&&(r^=e.charCodeAt((i+32)%e.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(s=0==(n=a[127&i]^=r+(o=o+1640531527|0))?s+1:0);for(s>=128&&(a[127&(e&&e.length||0)]=-1),s=127,i=512;i>0;--i)r=a[s+34&127],n=a[s=s+1&127],r^=r<<13,n^=n<<17,a[s]=(r^=r>>>15)^(n^=n>>>12);t.w=o,t.X=a,t.i=s}(e,t)}function a(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function l(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,r&&(r.X&&a(r,n),s.state=function(){return a(n,{})}),s}s&&s.exports?s.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(e,n,e,s))||(s.exports=r):this.xor4096=l}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},fwsW:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a});var r=n("oAJy"),s=n.n(r);const i={SecureStorage:"ionicSecureStorage",IndexedDB:s.a.INDEXEDDB,LocalStorage:s.a.LOCALSTORAGE},o={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[i.SecureStorage,i.IndexedDB,i.LocalStorage]};class a{constructor(t=o){this._db=null,this._secureStorageDriver=null;const e=Object.assign(o,t||{});this._config=e}async create(){const t=s.a.createInstance(this._config);return this._db=t,await t.setDriver(this._config.driverOrder||[]),this}async defineDriver(t){return t._driver===i.SecureStorage&&(this._secureStorageDriver=t),s.a.defineDriver(t)}get driver(){var t;return(null===(t=this._db)||void 0===t?void 0:t.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(t){return this.assertDb(),this._db.getItem(t)}set(t,e){return this.assertDb().setItem(t,e)}remove(t){return this.assertDb().removeItem(t)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(t){return this.assertDb().iterate(t)}setEncryptionKey(t){var e;if("ionicSecureStorage"!==this.driver)throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available");null===(e=this._secureStorageDriver)||void 0===e||e.setEncryptionKey(t)}}},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("2fFW"),s=n("NJ4a");const i={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(s.a)(t)},complete(){}}},gXqq:function(t,e,n){"use strict";n.d(e,"d",function(){return c}),n.d(e,"h",function(){return h.a}),n.d(e,"e",function(){return Y}),n.d(e,"b",function(){return J}),n.d(e,"f",function(){return Q}),n.d(e,"c",function(){return pt}),n.d(e,"a",function(){return mt}),n.d(e,"g",function(){return g}),n.d(e,"i",function(){return p});var r=n("SVse"),s=n("u9T3"),i=n("9s9I"),o=n("TSSN"),a=n("tHmd"),l=n("gy9y"),u=n("8Y7J");let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.Nb({type:t}),t.\u0275inj=u.Mb({imports:[[i.a,a.a,r.c,s.a,l.b,o.b.forChild()]]}),t})();var h=n("IJgD"),d=n("NrYi");let p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.Nb({type:t}),t.\u0275inj=u.Mb({imports:[[r.c,s.a]]}),t})();var f=n("Tj54"),m=n("s7LF");let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.Nb({type:t}),t.\u0275inj=u.Mb({imports:[[r.c,o.b.forChild(),s.a,a.a,f.b,i.d,m.n,l.b]]}),t})();var b=n("Oh6u");let y=(()=>{class t{constructor(t){this.stateService=t,this.getTitle=t=>t.title.length>160?`${t.title.substr(0,160)} ...`:t.title,this.getSummary=t=>t&&t.summary&&t.summary.length>1300?`${t.summary.substr(0,1300)} ...`:t.summary,this.getFirstUser=t=>{let e=null;return t.users&&t.users.length>0&&(e=t.users[0]),e}}getMainImage(t){return t&&t.thumbnail?`${this.stateService.getContextUrl()}/${t.id}/@download${t.thumbnail}`:"assets/images/default_image.jpg"}getTags(t){const e=[];return t&&t.tags&&t.tags.forEach(t=>{const n=t.split("/");"l"===n[0]&&""!==n[2]&&e.push(n[2])}),e}getEntitiesTags(t){const e=[];return t&&t.tags&&t.tags.forEach(t=>{const n=t.split("/");"e"===n[0]&&""!==n[1]&&e.push(n[1])}),e}getFormateNameEntities(t,e,n){let r=null;const s=this.getEntitiesTags(t);return s.length>0&&(r={},n.forEach(t=>{r[t]=[]}),e.elements.map(t=>{s.includes(t.title)&&r[t.value].push(t.title)})),r}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(b.j))},t.\u0275prov=u.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=n("iInd"),_=n("VDRc"),w=n("zuBV"),x=n("YrdD"),k=n("dRYV"),S=n("u93l"),C=n("GXSh"),I=n("G1b6");function E(t,e){if(1&t){const t=u.Wb();u.Vb(0,"svg-icon",17),u.dc("click",function(e){return u.xc(t),u.hc(2).onClickTitle(e)}),u.ic(1,"assetUrl"),u.Ub()}2&t&&u.nc("src",u.jc(1,1,"assets/icons/"+e.ngIf))}function O(t,e){1&t&&u.Qb(0,"div",18)}function T(t,e){if(1&t){const t=u.Wb();u.Vb(0,"div",24,25),u.dc("click",function(){u.xc(t);const n=e.$implicit;return u.hc(3).goToSemanticResult(n)}),u.ic(2,"sanitizeTags"),u.Ub()}if(2&t){const t=e.$implicit,n=u.tc(1);u.Hb("multiline",n.clientHeight>65),u.nc("innerHTML",u.jc(2,3,t.text),u.yc)}}function N(t,e){if(1&t){const t=u.Wb();u.Vb(0,"div",26),u.Vb(1,"button",27),u.dc("click",function(){return u.xc(t),u.hc(3).expandSemantic=!0}),u.Qb(2,"span",28),u.Vb(3,"span"),u.Hc(4),u.ic(5,"translate"),u.Ub(),u.Ub(),u.Ub()}2&t&&(u.Eb(4),u.Ic(u.jc(5,1,"search.more_results")))}function A(t,e){if(1&t&&(u.Vb(0,"div",19),u.Qb(1,"div",20),u.Vb(2,"div",21),u.Hc(3),u.ic(4,"translate"),u.Ub(),u.Fc(5,T,3,5,"div",22),u.Fc(6,N,6,3,"div",23),u.Ub()),2&t){const t=u.hc(2);u.Eb(3),u.Ic(u.jc(4,3,"search.title.semanticresults")),u.Eb(2),u.nc("ngForOf",t.item.vector.slice(0,t.expandSemantic?10:3)),u.Eb(1),u.nc("ngIf",t.item.vector.length>3&&!t.expandSemantic)}}function R(t,e){if(1&t){const t=u.Wb();u.Vb(0,"div",31,32),u.dc("click",function(){u.xc(t);const n=e.$implicit;return u.hc(3).goToParagraph(n)}),u.ic(2,"sanitizeTags"),u.Ub()}if(2&t){const t=e.$implicit,n=u.tc(1);u.Hb("multiline",n.clientHeight>65),u.nc("innerHTML",u.jc(2,3,t.body),u.yc)}}function F(t,e){if(1&t){const t=u.Wb();u.Vb(0,"div",26),u.Vb(1,"button",27),u.dc("click",function(){return u.xc(t),u.hc(3).expandParagraphs=!0}),u.Qb(2,"span",28),u.Vb(3,"span"),u.Hc(4),u.ic(5,"translate"),u.Ub(),u.Ub(),u.Ub()}2&t&&(u.Eb(4),u.Ic(u.jc(5,1,"search.more_results")))}function D(t,e){if(1&t&&(u.Vb(0,"div",29),u.Qb(1,"div",20),u.Vb(2,"div",21),u.Hc(3),u.ic(4,"translate"),u.Ub(),u.Fc(5,R,3,5,"div",30),u.Fc(6,F,6,3,"div",23),u.Ub()),2&t){const t=u.hc(2);u.Eb(3),u.Ic(u.jc(4,3,"autocomplete.section.paragraph")),u.Eb(2),u.nc("ngForOf",t.item.paragraphs.slice(0,t.expandParagraphs?10:3)),u.Eb(1),u.nc("ngIf",t.item.paragraphs.length>3&&!t.expandParagraphs)}}function P(t,e){1&t&&u.Qb(0,"img",34),2&t&&u.nc("src",e.ngIf,u.zc)}function $(t,e){if(1&t&&(u.Tb(0),u.Fc(1,P,1,1,"img",33),u.ic(2,"getfile"),u.Sb()),2&t){const t=u.hc(2);u.Eb(1),u.nc("ngIf",u.jc(2,1,t.getMainImage(t.item)))}}function M(t,e){if(1&t&&(u.Vb(0,"div",35),u.Vb(1,"div",36),u.Hc(2),u.ic(3,"translate"),u.Ub(),u.Qb(4,"div",37),u.ic(5,"sanitizeTags"),u.Ub()),2&t){const t=u.hc(2);u.Hb("has-image",null==t.item?null:t.item.thumbnail),u.Eb(2),u.Ic(u.jc(3,4,"resource.summary")),u.Eb(2),u.nc("innerHTML",u.jc(5,6,t.item.summary),u.yc)}}function L(t,e){if(1&t&&(u.Vb(0,"div",39),u.Qb(1,"stf-render-tags",40),u.Ub()),2&t){const t=u.hc().ngIf;u.Eb(1),u.nc("tags",t)}}function j(t,e){if(1&t&&(u.Tb(0),u.Fc(1,L,2,1,"div",38),u.Sb()),2&t){const t=e.ngIf;u.Eb(1),u.nc("ngIf",t.length>0)}}function z(t,e){if(1&t){const t=u.Wb();u.Vb(0,"div",1),u.Vb(1,"div",2),u.Vb(2,"div",3),u.Vb(3,"div",4),u.Fc(4,E,2,3,"svg-icon",5),u.ic(5,"mimeIcon"),u.Ub(),u.Vb(6,"div",6),u.Vb(7,"div",7),u.Vb(8,"div",8),u.dc("click",function(e){return u.xc(t),u.hc().onClickTitle(e)}),u.ic(9,"sanitizeTags"),u.Ub(),u.Ub(),u.Vb(10,"div",9),u.Qb(11,"stf-user",10),u.Fc(12,O,1,0,"div",11),u.Vb(13,"div"),u.Hc(14),u.ic(15,"date"),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Fc(16,A,7,5,"div",12),u.Fc(17,D,7,5,"div",13),u.Ub(),u.Vb(18,"div",14),u.Fc(19,$,3,3,"ng-container",15),u.Fc(20,M,6,8,"div",16),u.Fc(21,j,2,1,"ng-container",15),u.Ub(),u.Ub()}if(2&t){const t=u.hc();u.Eb(4),u.nc("ngIf",u.jc(5,10,t.item.icon)),u.Eb(4),u.nc("innerHTML",u.kc(9,12,t.item.title,!0),u.yc),u.Eb(3),u.nc("id",t.searchUtilsService.getFirstUser(t.item)),u.Eb(1),u.nc("ngIf",t.searchUtilsService.getFirstUser(t.item)&&t.item.modified),u.Eb(2),u.Jc("",u.kc(15,15,t.item.modified,"dd - LL - yyyy")," "),u.Eb(2),u.nc("ngIf",t.item.vector.length>0),u.Eb(1),u.nc("ngIf",t.item.paragraphs.length>0),u.Eb(2),u.nc("ngIf",null==t.item?null:t.item.thumbnail),u.Eb(1),u.nc("ngIf",t.item.summary),u.Eb(1),u.nc("ngIf",t.searchUtilsService.getTags(t.item))}}let B=(()=>{class t{constructor(t,e,n){this.searchUtilsService=t,this.stateService=e,this.router=n,this.clickItem=new u.n,this.expandParagraphs=!1,this.expandSemantic=!1,this.goToResource=t=>{this.clickItem.emit({resourceId:this.item.id,position:this.position,searchTerm:t,itemType:"list"})}}ngOnInit(){}onClickTitle(t){t.preventDefault(),this.goToResource(this.searchTerm)}goToSemanticResult(t){const e=(this.extractEmphasis(t.text)||"").split(/\s+/).slice(0,4).join(" ");this.goToResource(e)}goToParagraph(t){this.clickItem.emit({resourceId:this.item.id,position:this.position,searchTerm:this.searchTerm,itemType:"list",paragraph:{init:t.init,source:t.source}})}extractEmphasis(t){let e=null;var n=t.match(/<em>((.|\n)*?)<\/em>/);return n&&n.length>1&&(e=n[1].replace("\n","").trim()),e}getMainImage(t){return`${this.stateService.getContextUrl()}/${t.id}/@download${t.thumbnail}`}}return t.\u0275fac=function(e){return new(e||t)(u.Pb(y),u.Pb(b.j),u.Pb(v.e))},t.\u0275cmp=u.Jb({type:t,selectors:[["stf-resource-list-item"]],inputs:{item:"item",position:"position",searchTerm:"searchTerm"},outputs:{clickItem:"clickItem"},decls:1,vars:1,consts:[["fxLayout","row","class","resource-list-item-container",4,"ngIf"],["fxLayout","row",1,"resource-list-item-container"],["fxFlex","1 1 0","fxLayout","column"],["fxFlex","0 0 auto","fxLayout","row",1,"resource-list-item-header"],["fxFlex","0 0 auto",1,"resource-list-item-icon"],[3,"src","click",4,"ngIf"],["fxFlex","1 1 0"],[1,"resource-list-item-title-wrapper"],[1,"resource-list-item-title",3,"innerHTML","click"],["fxLayout","row","fxLayoutAlign","start center",1,"resource-list-item-info"],["only_name","",3,"id"],["class","resource-list-item-divider",4,"ngIf"],["class","resource-list-item-semantic","fxFlex","0 0 auto",4,"ngIf"],["class","resource-list-item-paragraphs","fxFlex","1 1 auto",4,"ngIf"],["fxFlex","0 0 400px",1,"resource-list-item-right"],[4,"ngIf"],["class","resource-list-item-summary",3,"has-image",4,"ngIf"],[3,"src","click"],[1,"resource-list-item-divider"],["fxFlex","0 0 auto",1,"resource-list-item-semantic"],[1,"resource-list-item-separator"],[1,"resource-list-item-subtitle"],["class","resource-list-item-vector",3,"innerHTML","multiline","click",4,"ngFor","ngForOf"],["class","resource-list-item-expand",4,"ngIf"],[1,"resource-list-item-vector",3,"innerHTML","click"],["vector",""],[1,"resource-list-item-expand"],[1,"resource-list-item-expand-button",3,"click"],[1,"resource-list-item-expand-arrow"],["fxFlex","1 1 auto",1,"resource-list-item-paragraphs"],["class","resource-list-item-paragraph",3,"innerHTML","multiline","click",4,"ngFor","ngForOf"],[1,"resource-list-item-paragraph",3,"innerHTML","click"],["paragraph",""],["class","resource-list-item-image",3,"src",4,"ngIf"],[1,"resource-list-item-image",3,"src"],[1,"resource-list-item-summary"],[1,"resource-list-item-summary-title"],[1,"resource-list-item-summary-text",3,"innerHTML"],["class","resource-list-item-summary-tags",4,"ngIf"],[1,"resource-list-item-summary-tags"],["size","small",3,"tags"]],template:function(t,e){1&t&&u.Fc(0,z,22,18,"div",0),2&t&&u.nc("ngIf",e.item)},directives:[r.n,_.d,_.b,_.c,w.a,a.b,r.m,x.a],pipes:[k.a,S.a,r.e,C.a,o.c,I.a],styles:['.resource-list-item-container[_ngcontent-%COMP%]{background:var(--stf-white);box-shadow:var(--stf-resource-list-item-box-shadow,none);margin-bottom:50px}.resource-list-item-header[_ngcontent-%COMP%]{padding-right:50px;padding-top:25px}.resource-list-item-icon[_ngcontent-%COMP%]{margin-top:5px;text-align:center;width:80px}.resource-list-item-icon[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{cursor:pointer;margin-left:6px}.resource-list-item-title-wrapper[_ngcontent-%COMP%]{max-width:40vw;overflow-x:hidden}.resource-list-item-title[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;font-size:21px;font-weight:var(--stf-font-weight-bold);line-height:1.2;margin:0 0 5px}.resource-list-item-info[_ngcontent-%COMP%]{font-size:var(--stf-font-size-ssmall);font-style:italic;margin-bottom:14px}.resource-list-item-divider[_ngcontent-%COMP%]{background-color:#000;height:12px;margin:0 6px;width:1px}.resource-list-item-separator[_ngcontent-%COMP%]{background-color:#000;height:1px}.resource-list-item-subtitle[_ngcontent-%COMP%]{font-weight:var(--stf-font-weight-bold);margin-top:22px;text-transform:uppercase}.resource-list-item-paragraphs[_ngcontent-%COMP%], .resource-list-item-semantic[_ngcontent-%COMP%]{padding:0 50px 10px 80px}.resource-list-item-paragraph[_ngcontent-%COMP%], .resource-list-item-vector[_ngcontent-%COMP%]{background-image:repeating-linear-gradient(90deg,#aaa,#aaa 1px,transparent 0,transparent 5px,#aaa 0);background-position:bottom;background-repeat:no-repeat;background-size:100% 2px;cursor:pointer;padding:17px 0}.resource-list-item-paragraph[_ngcontent-%COMP%]:last-child, .resource-list-item-vector[_ngcontent-%COMP%]:last-child{background-image:none;padding-bottom:22px}.resource-list-item-paragraph[_ngcontent-%COMP%]:hover, .resource-list-item-vector[_ngcontent-%COMP%]:hover{position:relative}.resource-list-item-paragraph[_ngcontent-%COMP%]:hover:before, .resource-list-item-vector[_ngcontent-%COMP%]:hover:before{background-color:var(--stf-primary);bottom:10px;content:"";left:-80px;position:absolute;top:10px;width:4px}.resource-list-item-paragraph.multiline[_ngcontent-%COMP%]:hover:before, .resource-list-item-vector.multiline[_ngcontent-%COMP%]:hover:before{bottom:17px;top:17px}.resource-list-item-expand[_ngcontent-%COMP%]{padding:17px 0}.resource-list-item-expand-button[_ngcontent-%COMP%]{-webkit-appearance:none;background:transparent;border:none;color:inherit;cursor:pointer;font:inherit;font-style:italic;font-weight:var(--stf-font-weight-light);margin:0;padding:0;width:auto}.resource-list-item-expand-button[_ngcontent-%COMP%]:hover{text-decoration:underline}.resource-list-item-expand-arrow[_ngcontent-%COMP%]{border-bottom:4px solid transparent;border-left:5px solid #000;border-top:4px solid transparent;display:inline-block;height:0;margin-right:5px;width:0}.resource-list-item-right[_ngcontent-%COMP%]{border-left:3px solid #f7f7f8;padding:35px 30px}.resource-list-item-right[_ngcontent-%COMP%]:empty{border-left:0}.resource-list-item-image[_ngcontent-%COMP%]{height:192px;-o-object-fit:cover;object-fit:cover;-o-object-position:center top;object-position:center top;width:340px}.resource-list-item-summary[_ngcontent-%COMP%]{margin:0 0 20px}.resource-list-item-summary.has-image[_ngcontent-%COMP%]{margin-top:60px}.resource-list-item-summary-text[_ngcontent-%COMP%]{-webkit-line-clamp:6;-webkit-box-orient:vertical;color:rgba(0,0,0,.7);display:-webkit-box;overflow:hidden;text-overflow:ellipsis}.resource-list-item-summary-title[_ngcontent-%COMP%]{font-style:italic;font-weight:var(--stf-font-weight-semibold);margin-bottom:8px}.resource-list-item-summary-tags[_ngcontent-%COMP%]{margin-top:20px}.resource-list-item-vector[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], em[_ngcontent-%COMP%]{font-weight:var(--stf-font-weight-semibold)}'],changeDetection:0}),t})();var V=n("8LU1");function U(t,e){1&t&&u.Qb(0,"div",6)}function W(t,e){if(1&t&&(u.Tb(0),u.Vb(1,"div",1),u.Vb(2,"div",2),u.Qb(3,"stf-user",3),u.Ub(),u.Fc(4,U,1,0,"div",4),u.Vb(5,"div",5),u.Hc(6),u.ic(7,"date"),u.Ub(),u.Ub(),u.Sb()),2&t){const t=u.hc();u.Eb(1),u.Hb("resource-metadata-info-small",t.small),u.Eb(2),u.nc("id",t.searchUtilsService.getFirstUser(t.item)),u.Eb(1),u.nc("ngIf",t.searchUtilsService.getFirstUser(t.item)&&t.item.modified),u.Eb(2),u.Jc("",u.kc(7,5,t.item.modified,"dd - LL - yyyy")," ")}}let H=(()=>{class t{constructor(t){this.searchUtilsService=t,this.item=void 0,this._small=!1}get small(){return this._small}set small(t){this._small=Object(V.b)(t)}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(u.Pb(y))},t.\u0275cmp=u.Jb({type:t,selectors:[["app-resource-item-metadata"]],inputs:{item:"item",small:"small"},decls:1,vars:1,consts:[[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center",1,"resource-metadata-info"],["fxFlex","1 1 auto",1,"text-truncate"],["only_name","",3,"id"],["fxFlex","0 0 auto","class","resource-metadata-info-divider",4,"ngIf"],["fxFlex","0 0 auto"],["fxFlex","0 0 auto",1,"resource-metadata-info-divider"]],template:function(t,e){1&t&&u.Fc(0,W,8,8,"ng-container",0),2&t&&u.nc("ngIf",e.item)},directives:[r.n,_.d,_.c,_.b,w.a],pipes:[r.e],styles:[".resource-metadata-info-small[_ngcontent-%COMP%]{font-size:var(--stf-font-size-ssmall);font-style:italic}.resource-metadata-info-divider[_ngcontent-%COMP%]{background-color:#000;height:1em;margin:0 7px;width:1px}"]}),t})();function G(t,e){1&t&&u.Qb(0,"img",12),2&t&&u.nc("src",e.ngIf,u.zc)}function q(t,e){if(1&t){const t=u.Wb();u.Tb(0),u.Vb(1,"div",1),u.dc("click",function(){return u.xc(t),u.hc().onClick()}),u.Vb(2,"div",2),u.Vb(3,"div"),u.Vb(4,"div",3),u.Fc(5,G,1,1,"img",4),u.ic(6,"getfile"),u.Ub(),u.Vb(7,"div",5),u.Vb(8,"div",6),u.Qb(9,"stf-render-tags",7),u.Ub(),u.Qb(10,"div",8),u.ic(11,"sanitizeTags"),u.Vb(12,"div",9),u.Hc(13),u.Ub(),u.Ub(),u.Ub(),u.Vb(14,"div",10),u.Qb(15,"app-resource-item-metadata",11),u.Ub(),u.Ub(),u.Ub(),u.Sb()}if(2&t){const t=u.hc();u.Eb(5),u.nc("ngIf",u.jc(6,5,t.searchUtilsService.getMainImage(t.item))),u.Eb(4),u.nc("tags",t.searchUtilsService.getTags(t.item)),u.Eb(1),u.nc("innerHTML",u.kc(11,7,t.searchUtilsService.getTitle(t.item),!0),u.yc),u.Eb(3),u.Ic(t.item.summary),u.Eb(2),u.nc("item",t.item)}}let Z=(()=>{class t{constructor(t){this.searchUtilsService=t,this.item=void 0,this.clickItem=new u.n,this._active=!1}get active(){return this._active}set active(t){this._active=Object(V.b)(t)}ngOnInit(){}onClick(){this.clickItem.emit({resourceId:this.item.id,searchTerm:"",position:this.position,itemType:"grid"})}}return t.\u0275fac=function(e){return new(e||t)(u.Pb(y))},t.\u0275cmp=u.Jb({type:t,selectors:[["stf-resource-grid-item"]],inputs:{item:"item",active:"active",position:"position"},outputs:{clickItem:"clickItem"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"resource-grid-item",3,"click"],["fxLayout","column","fxLayoutAlign","space-between start",1,"resource-grid-item-content"],[1,"resource-grid-item-image"],[3,"src",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start",1,"resource-grid-item-body-container"],[1,"resource-grid-item-tags"],[3,"tags"],[1,"resource-grid-item-title",3,"innerHTML"],[1,"resource-grid-item-summary"],[1,"resource-grid-item-metadata"],[3,"item"],[3,"src"]],template:function(t,e){1&t&&u.Fc(0,q,16,10,"ng-container",0),2&t&&u.nc("ngIf",e.item)},directives:[r.n,_.d,_.c,x.a,H],pipes:[I.a,S.a],styles:[".resource-grid-item[_ngcontent-%COMP%]{background-color:var(--stf-white);box-shadow:var(--stf-resource-grid-item-box-shadow,none);cursor:pointer;height:100%;margin-bottom:10px;margin-top:10px;position:relative}.resource-grid-item[_ngcontent-%COMP%]:hover{box-shadow:4px 4px 0 var(--stf-primary)}.resource-grid-item-content[_ngcontent-%COMP%]{background:var(--stf-white);height:100%;position:relative;z-index:10}.resource-grid-item-image[_ngcontent-%COMP%]{height:180px;overflow-y:hidden;width:100%}.resource-grid-item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.resource-grid-item-body-container[_ngcontent-%COMP%]{min-height:185px;padding:20px 20px 5px}.resource-grid-item-metadata[_ngcontent-%COMP%]{padding:5px 20px 20px}.resource-grid-item-attribute[_ngcontent-%COMP%]{margin-top:8px}.resource-grid-item-created[_ngcontent-%COMP%], .resource-grid-item-user[_ngcontent-%COMP%]{margin-left:20px}.resource-grid-item-tags[_ngcontent-%COMP%]{max-height:42px;transition:max-height 1s linear}.resource-grid-item-tags[_ngcontent-%COMP%], .resource-grid-item-tags[_ngcontent-%COMP%]:hover{background:#fff;display:flex;min-height:42px;overflow-x:hidden;overflow-y:hidden;position:absolute}.resource-grid-item-tags[_ngcontent-%COMP%]:hover{max-height:300px;transition:max-height 3s linear}.resource-grid-item-title[_ngcontent-%COMP%]{font-weight:var(--stf-font-weight-bold);margin-bottom:10px;padding-top:42px}.resource-grid-item-summary[_ngcontent-%COMP%]{height:80px;overflow-y:hidden}"],changeDetection:0}),t})(),K=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Jb({type:t,selectors:[["stf-no-results"]],decls:6,vars:6,consts:[[1,"no-results-container"],[1,"no-results-title"],[1,"no-results-body",3,"innerHTML"]],template:function(t,e){1&t&&(u.Vb(0,"div",0),u.Vb(1,"div",1),u.Hc(2),u.ic(3,"translate"),u.Ub(),u.Qb(4,"div",2),u.ic(5,"translate"),u.Ub()),2&t&&(u.Eb(2),u.Jc(" ",u.jc(3,2,"empty.title")," "),u.Eb(2),u.nc("innerHTML",u.jc(5,4,"empty.body"),u.yc))},pipes:[o.c],styles:[".no-results-container[_ngcontent-%COMP%]{background:#fff;padding:20px}.no-results-title[_ngcontent-%COMP%]{font-size:var(--stf-font-size-xxlarge);font-weight:var(--stf-font-weight-bold);margin-bottom:12px}"]}),t})(),Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.Nb({type:t}),t.\u0275inj=u.Mb({imports:[[r.c,o.b.forChild(),s.a,a.a,g,l.b,p,i.c]]}),t})();u.Ac(d.a,[r.n,r.m,B,Z,K],[o.c]);class X{constructor(t){this.paragraphs=[],this.semanticSearch=[],this.id=t}}class J{constructor(t){this.results=[],this.simpleResults=[],this.fullResults=[],this.extraResults=[],this.totalResults=0;const e=this.mergeResults(t),n=this.sortResults(e);this.simpleResults=this.resultsToItems(n.simpleResults),this.fullResults=this.resultsToItems(n.fullResults),this.results=this.fullResults.concat(this.simpleResults),this.totalResults=this.results.length}mergeResults(t){var e,n,r,s,i;const o=[];return null===(e=t.search.results)||void 0===e||e.forEach(t=>{const e=o.find(e=>e.id===t.id);if(e)e.bm25=t;else{const e=new X(t.id);e.bm25=t,o.push(e)}}),null===(r=null===(n=t.paragraphs)||void 0===n?void 0:n.results)||void 0===r||r.forEach(t=>{const e=o.find(e=>e.id===t.id);if(e)e.paragraphs.push(t);else{const e=new X(t.id);e.paragraphs.push(t),o.push(e)}}),null===(i=null===(s=t.flaps)||void 0===s?void 0:s.possible_results_text)||void 0===i||i.forEach(t=>{const e=o.find(e=>e.id===t.id);if(e)e.semanticSearch.push(t);else{const e=new X(t.id);e.semanticSearch.push(t),o.push(e)}}),o}sortResults(t){const e={section1:[],section2:[],section3:[],section4:[],section5:[],section6:[],section7:[]};return t.forEach(t=>{const n=t.bm25,r=t.paragraphs.length>0,s=t.semanticSearch.length>0;n&&r&&s?e.section1.push(t):n&&r?e.section2.push(t):r&&s?e.section3.push(t):n&&s?e.section4.push(t):r?e.section5.push(t):n?e.section6.push(t):e.section7.push(t)}),{fullResults:e.section1.concat(e.section2).concat(e.section3).concat(e.section4).concat(e.section5),simpleResults:e.section6.concat(e.section7)}}resultsToItems(t){return t.map(t=>{let e;return t.bm25&&(e=new b.b,e.loadBrain(t.bm25)),t.paragraphs.length>0&&(e=e||this.paragraphToItem(t.paragraphs[0]),t.paragraphs.forEach(t=>{e.addParagraph(t)})),t.semanticSearch.length>0&&(e=e||this.semanticToItem(t.semanticSearch[0]),t.semanticSearch.forEach(t=>{e.addVector(t)})),e})}paragraphToItem(t){const e=new b.b;return e.id=t.id,e.title=t.title,e.thumbnail=t.thumbnail,e.icon=t.icon,e.tags=t.tags,e.origin=t.origin,e.users=t.users,e.modified=t.modified,e.created=t.created,e}semanticToItem(t){const e=new b.b;return e.id=t.id,e.title=t.title,e.thumbnail=t.thumbnail,e.icon=t.icon,e}addResults(t){var e;((null===(e=t.results)||void 0===e?void 0:e.map(t=>{const e=new b.b;return e.loadBrain(t),e}))||[]).forEach(t=>{this.results.some(e=>e.id===t.id)||this.extraResults.push(t)})}}let Q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.Nb({type:t}),t.\u0275inj=u.Mb({imports:[[a.a,r.c,s.a,o.b.forChild()]]}),t})();n("9BqC"),n("Dxy4");var tt=n("iELJ"),et=n("ehcP");function nt(t,e){if(1&t&&(u.Tb(0),u.Hc(1),u.ic(2,"translate"),u.Sb()),2&t){const t=u.hc();u.Eb(1),u.Ic(u.jc(2,1,t.data.title))}}function rt(t,e){if(1&t&&(u.Tb(0),u.Hc(1),u.ic(2,"async"),u.Sb()),2&t){const t=u.hc();u.Eb(1),u.Ic(u.jc(2,1,t.data.title$))}}function st(t,e){if(1&t&&(u.Tb(0),u.Hc(1),u.ic(2,"translate"),u.Sb()),2&t){const t=u.hc();u.Eb(1),u.Ic(u.jc(2,1,t.data.message))}}function it(t,e){if(1&t&&(u.Tb(0),u.Hc(1),u.ic(2,"async"),u.Sb()),2&t){const t=u.hc();u.Eb(1),u.Ic(u.jc(2,1,t.data.message$))}}function ot(t,e){if(1&t&&(u.Vb(0,"div"),u.Hc(1),u.ic(2,"translate"),u.Ub()),2&t){const t=e.$implicit;u.Eb(1),u.Ic(u.jc(2,1,t))}}function at(t,e){if(1&t&&(u.Tb(0),u.Fc(1,ot,3,3,"div",9),u.Sb()),2&t){const t=u.hc();u.Eb(1),u.nc("ngForOf",t.data.messages)}}function lt(t,e){1&t&&(u.Tb(0),u.Hc(1),u.ic(2,"translate"),u.Sb()),2&t&&(u.Eb(1),u.Ic(u.jc(2,1,"generic.accept")))}function ut(t,e){if(1&t&&(u.Tb(0),u.Hc(1),u.ic(2,"translate"),u.Sb()),2&t){const t=u.hc();u.Eb(1),u.Ic(u.jc(2,1,t.data.confirmText))}}function ct(t,e){1&t&&(u.Tb(0),u.Hc(1),u.ic(2,"translate"),u.Sb()),2&t&&(u.Eb(1),u.Ic(u.jc(2,1,"generic.cancel")))}function ht(t,e){if(1&t&&(u.Tb(0),u.Hc(1),u.ic(2,"translate"),u.Sb()),2&t){const t=u.hc(2);u.Eb(1),u.Ic(u.jc(2,1,t.data.cancelText))}}function dt(t,e){if(1&t){const t=u.Wb();u.Vb(0,"stf-button",10),u.dc("click",function(){return u.xc(t),u.hc().onNoClick()}),u.Fc(1,ct,3,3,"ng-container",3),u.Fc(2,ht,3,3,"ng-container",3),u.Ub()}if(2&t){const t=u.hc();u.nc("minWidth",t.data.minWidthButtons),u.Eb(1),u.nc("ngIf",!t.data.cancelText),u.Eb(1),u.nc("ngIf",t.data.cancelText)}}let pt=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}onYesClick(){this.dialogRef.close(!0)}onNoClick(){this.dialogRef.close(!1)}}return t.\u0275fac=function(e){return new(e||t)(u.Pb(tt.f),u.Pb(tt.a))},t.\u0275cmp=u.Jb({type:t,selectors:[["stf-confirm"]],decls:17,vars:13,consts:[[1,"confirm-modal"],["cdkFocusInitial","",1,"close-button",3,"click"],["src","assets/icons/close-modal.svg"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center"],[1,"message"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px"],["weight","semibold",3,"color","minWidth","click"],["color","basic","weight","semibold",3,"minWidth","click",4,"ngIf"],[4,"ngFor","ngForOf"],["color","basic","weight","semibold",3,"minWidth","click"]],template:function(t,e){1&t&&(u.Vb(0,"div",0),u.Vb(1,"button",1),u.dc("click",function(){return e.onNoClick()}),u.ic(2,"translate"),u.Qb(3,"svg-icon",2),u.Ub(),u.Vb(4,"h1"),u.Fc(5,nt,3,3,"ng-container",3),u.Fc(6,rt,3,3,"ng-container",3),u.Ub(),u.Vb(7,"div",4),u.Vb(8,"div",5),u.Fc(9,st,3,3,"ng-container",3),u.Fc(10,it,3,3,"ng-container",3),u.Fc(11,at,2,1,"ng-container",3),u.Ub(),u.Ub(),u.Vb(12,"div",6),u.Vb(13,"stf-button",7),u.dc("click",function(){return e.onYesClick()}),u.Fc(14,lt,3,3,"ng-container",3),u.Fc(15,ut,3,3,"ng-container",3),u.Ub(),u.Fc(16,dt,3,3,"stf-button",8),u.Ub(),u.Ub()),2&t&&(u.Eb(1),u.Fb("ariaLabel",u.jc(2,11,"generic.close")),u.Eb(4),u.nc("ngIf",e.data.title),u.Eb(1),u.nc("ngIf",e.data.title$),u.Eb(3),u.nc("ngIf",e.data.message),u.Eb(1),u.nc("ngIf",e.data.message$),u.Eb(1),u.nc("ngIf",e.data.messages),u.Eb(2),u.nc("color",e.data.onlyConfirm?"basic":"secondary")("minWidth",e.data.minWidthButtons),u.Eb(1),u.nc("ngIf",!e.data.confirmText),u.Eb(1),u.nc("ngIf",e.data.confirmText),u.Eb(1),u.nc("ngIf",!e.data.onlyConfirm))},directives:[a.b,r.n,_.d,_.c,_.e,et.a,r.m],pipes:[o.c,r.b],styles:[".confirm-modal[_ngcontent-%COMP%]{padding-bottom:22px;padding-top:25px;position:relative}.close-button[_ngcontent-%COMP%]{background:none;border:0;cursor:pointer;padding:0;position:absolute;right:-7px;top:-5px}h1[_ngcontent-%COMP%]{font-size:var(--stf-font-size-title);font-weight:var(--stf-font-weight-bold);margin:0}.message[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{text-align:center}.message[_ngcontent-%COMP%]{line-height:1.5;margin:1em 0 3em;width:85%}"]}),t})();var ft=n("rJgo");let mt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.Nb({type:t}),t.\u0275inj=u.Mb({imports:[[r.c,ft.b]]}),t})();n("q8q0")},gtzJ:function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n("pHgn"),s=n("9/Zf"),i=Object(s.b)(),o="Sentry Logger ",a=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&Object(s.a)(function(){i.console.log(o+"[Log]: "+t.join(" "))})},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&Object(s.a)(function(){i.console.warn(o+"[Warn]: "+t.join(" "))})},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&Object(s.a)(function(){i.console.error(o+"[Error]: "+t.join(" "))})},t}();i.__SENTRY__=i.__SENTRY__||{};var l,u=i.__SENTRY__.logger||(i.__SENTRY__.logger=new a),c=n("9AQC");!function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"}(l||(l={}));var h=function(){function t(t){var e=this;this._state=l.PENDING,this._handlers=[],this._resolve=function(t){e._setResult(l.RESOLVED,t)},this._reject=function(t){e._setResult(l.REJECTED,t)},this._setResult=function(t,n){e._state===l.PENDING&&(Object(c.d)(n)?n.then(e._resolve,e._reject):(e._state=t,e._value=n,e._executeHandlers()))},this._attachHandler=function(t){e._handlers=e._handlers.concat(t),e._executeHandlers()},this._executeHandlers=function(){if(e._state!==l.PENDING){var t=e._handlers.slice();e._handlers=[],t.forEach(function(t){t.done||(e._state===l.RESOLVED&&t.onfulfilled&&t.onfulfilled(e._value),e._state===l.REJECTED&&t.onrejected&&t.onrejected(e._value),t.done=!0)})}};try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}return t.resolve=function(e){return new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.all=function(e){return new t(function(n,r){if(Array.isArray(e))if(0!==e.length){var s=e.length,i=[];e.forEach(function(e,o){t.resolve(e).then(function(t){i[o]=t,0==(s-=1)&&n(i)}).then(null,r)})}else n([]);else r(new TypeError("Promise.all requires an array as input."))})},t.prototype.then=function(e,n){var r=this;return new t(function(t,s){r._attachHandler({done:!1,onfulfilled:function(n){if(e)try{return void t(e(n))}catch(r){return void s(r)}else t(n)},onrejected:function(e){if(n)try{return void t(n(e))}catch(r){return void s(r)}else s(e)}})})},t.prototype.catch=function(t){return this.then(function(t){return t},t)},t.prototype.finally=function(e){var n=this;return new t(function(t,r){var s,i;return n.then(function(t){i=!1,s=t,e&&e()},function(t){i=!0,s=t,e&&e()}).then(function(){i?r(s):t(s)})})},t.prototype.toString=function(){return"[object SyncPromise]"},t}(),d=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=Object(r.c)(e._breadcrumbs),n._tags=Object(r.a)({},e._tags),n._extra=Object(r.a)({},e._extra),n._contexts=Object(r.a)({},e._contexts),n._user=e._user,n._level=e._level,n._span=e._span,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=Object(r.c)(e._eventProcessors)),n},t.prototype.addScopeListener=function(t){this._scopeListeners.push(t)},t.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},t.prototype.setUser=function(t){return this._user=t||{},this._notifyScopeListeners(),this},t.prototype.setTags=function(t){return this._tags=Object(r.a)(Object(r.a)({},this._tags),t),this._notifyScopeListeners(),this},t.prototype.setTag=function(t,e){var n;return this._tags=Object(r.a)(Object(r.a)({},this._tags),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(t){return this._extra=Object(r.a)(Object(r.a)({},this._extra),t),this._notifyScopeListeners(),this},t.prototype.setExtra=function(t,e){var n;return this._extra=Object(r.a)(Object(r.a)({},this._extra),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(t){return this._fingerprint=t,this._notifyScopeListeners(),this},t.prototype.setLevel=function(t){return this._level=t,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(t){return this._transactionName=t,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(t){return this.setTransactionName(t)},t.prototype.setContext=function(t,e){var n;return this._contexts=Object(r.a)(Object(r.a)({},this._contexts),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var t=this.getSpan();if(t&&t.spanRecorder&&t.spanRecorder.spans[0])return t.spanRecorder.spans[0]},t.prototype.update=function(e){if(!e)return this;if("function"==typeof e){var n=e(this);return n instanceof t?n:this}return e instanceof t?(this._tags=Object(r.a)(Object(r.a)({},this._tags),e._tags),this._extra=Object(r.a)(Object(r.a)({},this._extra),e._extra),this._contexts=Object(r.a)(Object(r.a)({},this._contexts),e._contexts),e._user&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint)):Object(c.a)(e)&&(e=e,this._tags=Object(r.a)(Object(r.a)({},this._tags),e.tags),this._extra=Object(r.a)(Object(r.a)({},this._extra),e.extra),this._contexts=Object(r.a)(Object(r.a)({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._span=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(t,e){var n=Object(r.a)({timestamp:Object(s.d)()},t);return this._breadcrumbs=void 0!==e&&e>=0?Object(r.c)(this._breadcrumbs,[n]).slice(-e):Object(r.c)(this._breadcrumbs,[n]),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(t,e){return this._extra&&Object.keys(this._extra).length&&(t.extra=Object(r.a)(Object(r.a)({},this._extra),t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=Object(r.a)(Object(r.a)({},this._tags),t.tags)),this._user&&Object.keys(this._user).length&&(t.user=Object(r.a)(Object(r.a)({},this._user),t.user)),this._contexts&&Object.keys(this._contexts).length&&(t.contexts=Object(r.a)(Object(r.a)({},this._contexts),t.contexts)),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span&&(t.contexts=Object(r.a)({trace:this._span.getTraceContext()},t.contexts)),this._applyFingerprint(t),t.breadcrumbs=Object(r.c)(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,this._notifyEventProcessors(Object(r.c)(function(){var t=Object(s.b)();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}(),this._eventProcessors),t,e)},t.prototype._notifyEventProcessors=function(t,e,n,s){var i=this;return void 0===s&&(s=0),new h(function(o,a){var l=t[s];if(null===e||"function"!=typeof l)o(e);else{var u=l(Object(r.a)({},e),n);Object(c.d)(u)?u.then(function(e){return i._notifyEventProcessors(t,e,n,s+1).then(o)}).then(null,a):i._notifyEventProcessors(t,u,n,s+1).then(o).then(null,a)}})},t.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,setTimeout(function(){t._scopeListeners.forEach(function(e){e(t)}),t._notifyingListeners=!1}))},t.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},t}(),p=function(){function t(t,e,n){void 0===e&&(e=new d),void 0===n&&(n=3),this._version=n,this._stack=[],this._stack.push({client:t,scope:e}),this.bindClient(t)}return t.prototype.isOlderThan=function(t){return this._version<t},t.prototype.bindClient=function(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()},t.prototype.pushScope=function(){var t=this.getStack(),e=d.clone(t.length>0?t[t.length-1].scope:void 0);return this.getStack().push({client:this.getClient(),scope:e}),e},t.prototype.popScope=function(){return void 0!==this.getStack().pop()},t.prototype.withScope=function(t){var e=this.pushScope();try{t(e)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(t,e){var n=this._lastEventId=Object(s.e)(),i=e;if(!e){var o=void 0;try{throw new Error("Sentry syntheticException")}catch(t){o=t}i={originalException:t,syntheticException:o}}return this._invokeClient("captureException",t,Object(r.a)(Object(r.a)({},i),{event_id:n})),n},t.prototype.captureMessage=function(t,e,n){var i=this._lastEventId=Object(s.e)(),o=n;if(!n){var a=void 0;try{throw new Error(t)}catch(l){a=l}o={originalException:t,syntheticException:a}}return this._invokeClient("captureMessage",t,e,Object(r.a)(Object(r.a)({},o),{event_id:i})),i},t.prototype.captureEvent=function(t,e){var n=this._lastEventId=Object(s.e)();return this._invokeClient("captureEvent",t,Object(r.a)(Object(r.a)({},e),{event_id:n})),n},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(t,e){var n=this.getStackTop();if(n.scope&&n.client){var i=n.client.getOptions&&n.client.getOptions()||{},o=i.beforeBreadcrumb,a=void 0===o?null:o,l=i.maxBreadcrumbs,u=void 0===l?100:l;if(!(u<=0)){var c=Object(s.d)(),h=Object(r.a)({timestamp:c},t),d=a?Object(s.a)(function(){return a(h,e)}):h;null!==d&&n.scope.addBreadcrumb(d,Math.min(u,100))}}},t.prototype.setUser=function(t){var e=this.getStackTop();e.scope&&e.scope.setUser(t)},t.prototype.setTags=function(t){var e=this.getStackTop();e.scope&&e.scope.setTags(t)},t.prototype.setExtras=function(t){var e=this.getStackTop();e.scope&&e.scope.setExtras(t)},t.prototype.setTag=function(t,e){var n=this.getStackTop();n.scope&&n.scope.setTag(t,e)},t.prototype.setExtra=function(t,e){var n=this.getStackTop();n.scope&&n.scope.setExtra(t,e)},t.prototype.setContext=function(t,e){var n=this.getStackTop();n.scope&&n.scope.setContext(t,e)},t.prototype.configureScope=function(t){var e=this.getStackTop();e.scope&&e.client&&t(e.scope)},t.prototype.run=function(t){var e=m(this);try{t(this)}finally{m(e)}},t.prototype.getIntegration=function(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(n){return u.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},t.prototype.startSpan=function(t){return this._callExtensionMethod("startSpan",t)},t.prototype.startTransaction=function(t){return this._callExtensionMethod("startTransaction",t)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype._invokeClient=function(t){for(var e,n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var i=this.getStackTop();i&&i.client&&i.client[t]&&(e=i.client)[t].apply(e,Object(r.c)(n,[i.scope]))},t.prototype._callExtensionMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=f(),s=r.__SENTRY__;if(s&&s.extensions&&"function"==typeof s.extensions[t])return s.extensions[t].apply(this,e);u.warn("Extension method "+t+" couldn't be found, doing nothing.")},t}();function f(){var t=Object(s.b)();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function m(t){var e=f(),n=y(e);return v(e,t),n}function g(){var t=f();return b(t)&&!y(t).isOlderThan(3)||v(t,new p),Object(s.c)()?function(t){try{var e=f().__SENTRY__;if(!e||!e.extensions||!e.extensions.domain)return y(t);var n=e.extensions.domain.active;if(!n)return y(t);if(!b(n)||y(n).isOlderThan(3)){var r=y(t).getStackTop();v(n,new p(r.client,d.clone(r.scope)))}return y(n)}catch(s){return y(t)}}(t):y(t)}function b(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function y(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new p),t.__SENTRY__.hub}function v(t,e){return!!t&&(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0)}function _(t){!function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var s=g();if(s&&s[t])return s[t].apply(s,Object(r.c)(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}("configureScope",t)}},gy9y:function(t,e,n){"use strict";n.d(e,"a",function(){return r.a}),n.d(e,"c",function(){return c}),n.d(e,"b",function(){return h}),n("3hTW");var r=n("M1BV"),s=n("qJj6"),i=(n("IheW"),n("8Y7J")),o=n("lJxs");n("G8sH"),n("fwsW");class a{constructor(t){"error"in t?this.errors=t.error:this.actions=t}isError(){return void 0!==this.errors}}n("PjsD"),n("2Vo4");var l=n("SVse");n("e6bL"),n("GS7A"),n("iInd"),n("pLZG"),n("IzEk");var u=n("z6cu");let c=(()=>{class t{constructor(t,e){this.api=t,this.config=e}validate(t){if(t){const e=this.config.getAPIURL()+"/@magic?token="+t;return this.api.post(e,{},!1,void 0).pipe(Object(o.a)(t=>new a(t)))}return Object(u.a)("Empty token")}getTempToken(t=!1){const e=t?"/@token":"/@wstoken",n=this.config.getAPIURL()+e;return this.api.get(n,!0,void 0).pipe(Object(o.a)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(i.Zb(r.a),i.Zb(s.a))},t.\u0275prov=i.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();n("JIr8"),n("EY2u"),n("cUpR"),n("G1b6"),n("u93l"),n("GXSh");let h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Nb({type:t}),t.\u0275inj=i.Mb({imports:[[l.c]]}),t})()},iELJ:function(t,e,n){"use strict";n.d(e,"a",function(){return E}),n.d(e,"b",function(){return R}),n.d(e,"c",function(){return $}),n.d(e,"d",function(){return P}),n.d(e,"e",function(){return M}),n.d(e,"f",function(){return C}),n.d(e,"g",function(){return D});var r=n("1O3W"),s=n("1z/I"),i=n("8Y7J"),o=n("UhP/"),a=n("9gLZ"),l=n("SVse"),u=n("XNiG"),c=n("NXyV"),h=n("LRne"),d=n("pLZG"),p=n("IzEk"),f=n("JX91"),m=n("GS7A"),g=n("Ht+U"),b=n("YEUz");function y(t,e){}class v{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const _={dialogContainer:Object(m.p)("dialogContainer",[Object(m.m)("void, exit",Object(m.n)({opacity:0,transform:"scale(0.7)"})),Object(m.m)("enter",Object(m.n)({transform:"none"})),Object(m.o)("* => enter",Object(m.e)("150ms cubic-bezier(0, 0, 0.2, 1)",Object(m.n)({transform:"none",opacity:1}))),Object(m.o)("* => void, * => exit",Object(m.e)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Object(m.n)({opacity:0})))])};let w=(()=>{class t extends s.a{constructor(t,e,n,r,s,o){super(),this._elementRef=t,this._focusTrapFactory=e,this._changeDetectorRef=n,this._config=s,this._focusMonitor=o,this._animationStateChanged=new i.n,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=t=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(t)),this._ariaLabelledBy=s.ariaLabelledBy||null,this._document=r}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const e=this._getActiveElement(),n=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==n&&!n.contains(e)||(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=this._getActiveElement())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,e=this._getActiveElement();return t===e||t.contains(e)}_getActiveElement(){var t;const e=this._document.activeElement;return(null===(t=null==e?void 0:e.shadowRoot)||void 0===t?void 0:t.activeElement)||e}}return t.\u0275fac=function(e){return new(e||t)(i.Pb(i.l),i.Pb(b.e),i.Pb(i.h),i.Pb(l.d,8),i.Pb(v),i.Pb(b.d))},t.\u0275dir=i.Kb({type:t,viewQuery:function(t,e){if(1&t&&i.Lc(s.b,3),2&t){let t;i.sc(t=i.ec())&&(e._portalOutlet=t.first)}},features:[i.Bb]}),t})(),x=(()=>{class t extends w{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:e}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:e}))}_onAnimationStart({toState:t,totalTime:e}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:e}):"exit"!==t&&"void"!==t||this._animationStateChanged.next({state:"closing",totalTime:e})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return k(e||t)},t.\u0275cmp=i.Jb({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,e){1&t&&i.Dc("@dialogContainer.start",function(t){return e._onAnimationStart(t)})("@dialogContainer.done",function(t){return e._onAnimationDone(t)}),2&t&&(i.Yb("id",e._id),i.Fb("role",e._config.role)("aria-labelledby",e._config.ariaLabel?null:e._ariaLabelledBy)("aria-label",e._config.ariaLabel)("aria-describedby",e._config.ariaDescribedBy||null),i.Ec("@dialogContainer",e._state))},features:[i.Bb],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&i.Fc(0,y,0,0,"ng-template",0)},directives:[s.b],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[_.dialogContainer]}}),t})();const k=i.Xb(x);let S=0;class C{constructor(t,e,n="mat-dialog-"+S++){this._overlayRef=t,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new u.a,this._afterClosed=new u.a,this._beforeClosed=new u.a,this._state=0,e._id=n,e._animationStateChanged.pipe(Object(d.a)(t=>"opened"===t.state),Object(p.a)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(Object(d.a)(t=>"closed"===t.state),Object(p.a)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(Object(d.a)(t=>t.keyCode===g.e&&!this.disableClose&&!Object(g.o)(t))).subscribe(t=>{t.preventDefault(),I(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():I(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Object(d.a)(t=>"closing"===t.state),Object(p.a)(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function I(t,e,n){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=e),t.close(n)}const E=new i.r("MatDialogData"),O=new i.r("mat-dialog-default-options"),T=new i.r("mat-dialog-scroll-strategy"),N={provide:T,deps:[r.a],useFactory:function(t){return()=>t.scrollStrategies.block()}};let A=(()=>{class t{constructor(t,e,n,r,s,i,o,a,l){this._overlay=t,this._injector=e,this._defaultOptions=n,this._parentDialog=r,this._overlayContainer=s,this._dialogRefConstructor=o,this._dialogContainerType=a,this._dialogDataToken=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new u.a,this._afterOpenedAtThisLevel=new u.a,this._ariaHiddenElements=new Map,this.afterAllClosed=Object(c.a)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Object(f.a)(void 0))),this._scrollStrategy=i}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,e){(e=function(t,e){return Object.assign(Object.assign({},e),t)}(e,this._defaultOptions||new v)).id&&this.getDialogById(e.id);const n=this._createOverlay(e),r=this._attachDialogContainer(n,e),s=this._attachDialogContent(t,r,n,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(s),s.afterClosed().subscribe(()=>this._removeOpenDialog(s)),this.afterOpened.next(s),r._initializeWithAttachedContent(),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const e=this._getOverlayConfig(t);return this._overlay.create(e)}_getOverlayConfig(t){const e=new r.b({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}_attachDialogContainer(t,e){const n=i.s.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:v,useValue:e}]}),r=new s.c(this._dialogContainerType,e.viewContainerRef,n,e.componentFactoryResolver);return t.attach(r).instance}_attachDialogContent(t,e,n,r){const o=new this._dialogRefConstructor(n,e,r.id);if(t instanceof i.N)e.attachTemplatePortal(new s.f(t,null,{$implicit:r.data,dialogRef:o}));else{const n=this._createInjector(r,o,e),i=e.attachComponentPortal(new s.c(t,r.viewContainerRef,n));o.componentInstance=i.instance}return o.updateSize(r.width,r.height).updatePosition(r.position),o}_createInjector(t,e,n){const r=t&&t.viewContainerRef&&t.viewContainerRef.injector,s=[{provide:this._dialogContainerType,useValue:n},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:e}];return!t.direction||r&&r.get(a.b,null)||s.push({provide:a.b,useValue:{value:t.direction,change:Object(h.a)()}}),i.s.create({parent:r||this._injector,providers:s})}_removeOpenDialog(t){const e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const e=t.parentElement.children;for(let n=e.length-1;n>-1;n--){let r=e[n];r===t||"SCRIPT"===r.nodeName||"STYLE"===r.nodeName||r.hasAttribute("aria-live")||(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let e=t.length;for(;e--;)t[e].close()}}return t.\u0275fac=function(e){return new(e||t)(i.Pb(r.a),i.Pb(i.s),i.Pb(void 0),i.Pb(void 0),i.Pb(r.c),i.Pb(void 0),i.Pb(i.P),i.Pb(i.P),i.Pb(i.r))},t.\u0275dir=i.Kb({type:t}),t})(),R=(()=>{class t extends A{constructor(t,e,n,r,s,i,o){super(t,e,r,i,o,s,C,x,E)}}return t.\u0275fac=function(e){return new(e||t)(i.Zb(r.a),i.Zb(i.s),i.Zb(l.i,8),i.Zb(O,8),i.Zb(T),i.Zb(t,12),i.Zb(r.c))},t.\u0275prov=i.Lb({token:t,factory:t.\u0275fac}),t})(),F=0,D=(()=>{class t{constructor(t,e,n){this._dialogRef=t,this._elementRef=e,this._dialog=n,this.id="mat-dialog-title-"+F++}ngOnInit(){this._dialogRef||(this._dialogRef=function(t,e){let n=t.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-dialog-container");)n=n.parentElement;return n?e.find(t=>t.id===n.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return t.\u0275fac=function(e){return new(e||t)(i.Pb(C,8),i.Pb(i.l),i.Pb(R))},t.\u0275dir=i.Kb({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,e){2&t&&i.Yb("id",e.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),t})(),P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Kb({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),t})(),$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Kb({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Nb({type:t}),t.\u0275inj=i.Mb({providers:[R,N],imports:[[r.d,s.e,o.a],o.a]}),t})()},iInd:function(t,e,n){"use strict";n.d(e,"a",function(){return Zt}),n.d(e,"b",function(){return G}),n.d(e,"c",function(){return H}),n.d(e,"d",function(){return W}),n.d(e,"e",function(){return mn}),n.d(e,"f",function(){return In}),n.d(e,"g",function(){return gn});var r=n("SVse"),s=n("8Y7J"),i=n("Cfvw"),o=n("LRne"),a=n("2Vo4"),l=n("itXk"),u=n("HDdC");const c=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var h=n("GyhO"),d=n("NXyV"),p=n("EY2u"),f=n("EQ5u"),m=n("XNiG"),g=n("lJxs"),b=n("eIep"),y=n("IzEk"),v=n("JX91"),_=n("Kqap"),w=n("pLZG"),x=n("JIr8"),k=n("bOdf"),S=n("7o/Q"),C=n("4I5i");function I(t){return function(e){return 0===t?Object(p.b)():e.lift(new E(t))}}class E{constructor(t){if(this.total=t,this.total<0)throw new C.a}call(t,e){return e.subscribe(new O(t,this.total))}}class O extends S.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<n;s++){const s=e++%n;t.next(r[s])}}t.complete()}}function T(t=R){return e=>e.lift(new N(t))}class N{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new A(t,this.errorFactory))}}class A extends S.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function R(){return new c}function F(t=null){return e=>e.lift(new D(t))}class D{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new P(t,this.defaultValue))}}class P extends S.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var $=n("SpAZ");function M(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(w.a)((e,n)=>t(e,n,r)):$.a,Object(y.a)(1),n?F(e):T(()=>new c))}var L=n("5+tZ"),j=n("vkgz"),z=n("x+ZX"),B=n("nYR2"),V=n("bHdf");class U{constructor(t,e){this.id=t,this.url=e}}class W extends U{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class H extends U{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class G extends U{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class q extends U{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Z extends U{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K extends U{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y extends U{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class X extends U{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J extends U{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class tt{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class et{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nt{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rt{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class st{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class it{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ot="primary";class at{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function lt(t){return new at(t)}function ut(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function ct(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const s={};for(let i=0;i<r.length;i++){const e=r[i],n=t[i];if(e.startsWith(":"))s[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:s}}function ht(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(s=n[i],!dt(t[s],e[s]))return!1;return!0}function dt(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function pt(t){return Array.prototype.concat.apply([],t)}function ft(t){return t.length>0?t[t.length-1]:null}function mt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function gt(t){return Object(s.ub)(t)?t:Object(s.vb)(t)?Object(i.a)(Promise.resolve(t)):Object(o.a)(t)}function bt(t,e,n){return n?function(t,e){return ht(t,e)}(t.queryParams,e.queryParams)&&yt(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>dt(t[n],e[n]))}(t.queryParams,e.queryParams)&&vt(t.root,e.root)}function yt(t,e){if(!St(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!yt(t.children[n],e.children[n]))return!1}return!0}function vt(t,e){return _t(t,e,e.segments)}function _t(t,e,n){if(t.segments.length>n.length)return!!St(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!St(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!vt(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!St(t.segments,r)&&!!t.children.primary&&_t(t.children.primary,e,s)}}class wt{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return Et.serialize(this)}}class xt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,mt(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ot(this)}}class kt{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=lt(this.parameters)),this._parameterMap}toString(){return Pt(this)}}function St(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Ct{}class It{parse(t){const e=new zt(t);return new wt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Tt(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${At(e)}=${At(t)}`).join("&"):`${At(e)}=${At(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Et=new It;function Ot(t){return t.segments.map(t=>Pt(t)).join("/")}function Tt(t,e){if(!t.hasChildren())return Ot(t);if(e){const e=t.children.primary?Tt(t.children.primary,!1):"",n=[];return mt(t.children,(t,e)=>{e!==ot&&n.push(`${e}:${Tt(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return mt(t.children,(t,r)=>{r===ot&&(n=n.concat(e(t,r)))}),mt(t.children,(t,r)=>{r!==ot&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===ot?[Tt(t.children.primary,!1)]:[`${n}:${Tt(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Ot(t)}/${e[0]}`:`${Ot(t)}/(${e.join("//")})`}}function Nt(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function At(t){return Nt(t).replace(/%3B/gi,";")}function Rt(t){return Nt(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ft(t){return decodeURIComponent(t)}function Dt(t){return Ft(t.replace(/\+/g,"%20"))}function Pt(t){return`${Rt(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Rt(t)}=${Rt(e[t])}`).join("")}`;var e}const $t=/^[^\/()?;=#]+/;function Mt(t){const e=t.match($t);return e?e[0]:""}const Lt=/^[^=?&#]+/,jt=/^[^?&#]+/;class zt{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xt([],{}):new xt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new xt(t,e)),n}parseSegment(){const t=Mt(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new kt(Ft(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Mt(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Mt(this.remaining);t&&(n=t,this.capture(n))}t[Ft(e)]=Ft(n)}parseQueryParam(t){const e=function(t){const e=t.match(Lt);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(jt);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Dt(e),s=Dt(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Mt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;n.indexOf(":")>-1?(s=n.substr(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=ot);const i=this.parseChildren();e[s]=1===Object.keys(i).length?i.primary:new xt([],i),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Bt{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Vt(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Vt(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Ut(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Ut(t,this._root).map(t=>t.value)}}function Vt(t,e){if(t===e.value)return e;for(const n of e.children){const e=Vt(t,n);if(e)return e}return null}function Ut(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Ut(t,n);if(r.length)return r.unshift(e),r}return[]}class Wt{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ht(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Gt extends Bt{constructor(t,e){super(t),this.snapshot=e,Jt(this,t)}toString(){return this.snapshot.toString()}}function qt(t,e){const n=function(t,e){const n=new Yt([],{},{},"",{},ot,e,null,t.root,-1,{});return new Xt("",new Wt(n,[]))}(t,e),r=new a.a([new kt("",{})]),s=new a.a({}),i=new a.a({}),o=new a.a({}),l=new a.a(""),u=new Zt(r,s,o,l,i,ot,e,n.root);return u.snapshot=n.root,new Gt(new Wt(u,[]),n)}class Zt{constructor(t,e,n,r,s,i,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(g.a)(t=>lt(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(g.a)(t=>lt(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Kt(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Yt{constructor(t,e,n,r,s,i,o,a,l,u,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Xt extends Bt{constructor(t,e){super(e),this.url=t,Jt(this,e)}toString(){return Qt(this._root)}}function Jt(t,e){e.value._routerState=t,e.children.forEach(e=>Jt(t,e))}function Qt(t){const e=t.children.length>0?` { ${t.children.map(Qt).join(", ")} } `:"";return`${t.value}${e}`}function te(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ht(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ht(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ht(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ht(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function ee(t,e){var n,r;return ht(t.params,e.params)&&St(n=t.url,r=e.url)&&n.every((t,e)=>ht(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||ee(t.parent,e.parent))}function ne(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const s=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return ne(t,e,r);return ne(t,e)})}(t,e,n);return new Wt(r,s)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return re(e,t),t}}const n=new Zt(new a.a((r=e.value).url),new a.a(r.params),new a.a(r.queryParams),new a.a(r.fragment),new a.a(r.data),r.outlet,r.component,r),s=e.children.map(e=>ne(t,e));return new Wt(n,s)}var r}function re(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)re(t.children[n],e.children[n])}function se(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ie(t){return"object"==typeof t&&null!=t&&t.outlets}function oe(t,e,n,r,s){let i={};return r&&mt(r,(t,e)=>{i[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new wt(n.root===t?e:ae(n.root,t,e),i,s)}function ae(t,e,n){const r={};return mt(t.children,(t,s)=>{r[s]=t===e?n:ae(t,e,n)}),new xt(t.segments,r)}class le{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&se(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(ie);if(r&&r!==ft(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ue{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ce(t,e,n){if(t||(t=new xt([],{})),0===t.segments.length&&t.hasChildren())return he(t,e,n);const r=function(t,e,n){let r=0,s=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;s<t.segments.length;){if(r>=n.length)return i;const e=t.segments[s],o=n[r];if(ie(o))break;const a=`${o}`,l=r<n.length-1?n[r+1]:null;if(s>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!me(a,l,e))return i;r+=2}else{if(!me(a,{},e))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(t,e,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new xt(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new xt(t.segments.slice(r.pathIndex),t.children),he(e,0,s)}return r.match&&0===s.length?new xt(t.segments,{}):r.match&&!t.hasChildren()?de(t,e,n):r.match?he(t,0,s):de(t,e,n)}function he(t,e,n){if(0===n.length)return new xt(t.segments,{});{const r=function(t){return ie(t[0])?t[0].outlets:{[ot]:t}}(n),s={};return mt(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(s[r]=ce(t.children[r],e,n))}),mt(t.children,(t,e)=>{void 0===r[e]&&(s[e]=t)}),new xt(t.segments,s)}}function de(t,e,n){const r=t.segments.slice(0,e);let s=0;for(;s<n.length;){const i=n[s];if(ie(i)){const t=pe(i.outlets);return new xt(r,t)}if(0===s&&se(n[0])){r.push(new kt(t.segments[e].path,fe(n[0]))),s++;continue}const o=ie(i)?i.outlets.primary:`${i}`,a=s<n.length-1?n[s+1]:null;o&&a&&se(a)?(r.push(new kt(o,fe(a))),s+=2):(r.push(new kt(o,{})),s++)}return new xt(r,{})}function pe(t){const e={};return mt(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=de(new xt([],{}),0,t))}),e}function fe(t){const e={};return mt(t,(t,n)=>e[n]=`${t}`),e}function me(t,e,n){return t==n.path&&ht(e,n.parameters)}class ge{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),te(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Ht(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),mt(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Ht(t);for(const i of Object.keys(s))this.deactivateRouteAndItsChildren(s[i],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Ht(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new st(t.value.snapshot))}),t.children.length&&this.forwardEvent(new nt(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(te(r),r===s)if(r.component){const s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),be(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),s=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=s,e.outlet&&e.outlet.activateWith(r,s),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function be(t){te(t.value),t.children.forEach(be)}class ye{constructor(t,e){this.routes=t,this.module=e}}function ve(t){return"function"==typeof t}function _e(t){return t instanceof wt}const we=Symbol("INITIAL_VALUE");function xe(){return Object(b.a)(t=>Object(l.b)(t.map(t=>t.pipe(Object(y.a)(1),Object(v.a)(we)))).pipe(Object(_.a)((t,e)=>{let n=!1;return e.reduce((t,r,s)=>{if(t!==we)return t;if(r===we&&(n=!0),!n){if(!1===r)return r;if(s===e.length-1||_e(r))return r}return t},t)},we),Object(w.a)(t=>t!==we),Object(g.a)(t=>_e(t)?t:!0===t),Object(y.a)(1)))}let ke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Jb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&s.Qb(0,"router-outlet")},directives:function(){return[gn]},encapsulation:2}),t})();function Se(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Ce(r,Ie(e,r))}}function Ce(t,e){t.children&&Se(t.children,e)}function Ie(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Ee(t){const e=t.children&&t.children.map(Ee),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ot&&(n.component=ke),n}function Oe(t){return t.outlet||ot}function Te(t,e){const n=t.filter(t=>Oe(t)===e);return n.push(...t.filter(t=>Oe(t)!==e)),n}const Ne={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ae(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Ne):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(e.matcher||ct)(n,t,e);if(!s)return Object.assign({},Ne);const i={};mt(s.posParams,(t,e)=>{i[e]=t.path});const o=s.consumed.length>0?Object.assign(Object.assign({},i),s.consumed[s.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:o,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function Re(t,e,n,r,s="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Fe(t,e,n)&&Oe(n)!==ot)}(t,n,r)){const s=new xt(e,function(t,e,n,r){const s={};s.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const i of n)if(""===i.path&&Oe(i)!==ot){const n=new xt([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,s[Oe(i)]=n}return s}(t,e,r,new xt(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Fe(t,e,n))}(t,n,r)){const i=new xt(t.segments,function(t,e,n,r,s,i){const o={};for(const a of r)if(Fe(t,n,a)&&!s[Oe(a)]){const n=new xt([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===i?t.segments.length:e.length,o[Oe(a)]=n}return Object.assign(Object.assign({},s),o)}(t,e,n,r,t.children,s));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}const i=new xt(t.segments,t.children);return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}function Fe(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function De(t,e,n,r){return!!(Oe(t)===r||r!==ot&&Fe(e,n,t))&&("**"===t.path||Ae(e,t,n).matched)}function Pe(t,e,n){return 0===e.length&&!t.children[n]}class $e{constructor(t){this.segmentGroup=t||null}}class Me{constructor(t){this.urlTree=t}}function Le(t){return new u.a(e=>e.error(new $e(t)))}function je(t){return new u.a(e=>e.error(new Me(t)))}function ze(t){return new u.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Be{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(s.y)}apply(){const t=Re(this.urlTree.root,[],[],this.config).segmentGroup,e=new xt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,ot).pipe(Object(g.a)(t=>this.createUrlTree(Ve(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Object(x.a)(t=>{if(t instanceof Me)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof $e)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,ot).pipe(Object(g.a)(e=>this.createUrlTree(Ve(e),t.queryParams,t.fragment))).pipe(Object(x.a)(t=>{if(t instanceof $e)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new xt([],{[ot]:t}):t;return new wt(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(g.a)(t=>new xt([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return Object(i.a)(r).pipe(Object(k.a)(r=>{const s=n.children[r],i=Te(e,r);return this.expandSegmentGroup(t,i,s,r).pipe(Object(g.a)(t=>({segment:t,outlet:r})))}),Object(_.a)((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(w.a)((e,n)=>t(e,n,r)):$.a,I(1),n?F(e):T(()=>new c))}())}expandSegment(t,e,n,r,s,a){return Object(i.a)(n).pipe(Object(k.a)(i=>this.expandSegmentAgainstRoute(t,e,n,i,r,s,a).pipe(Object(x.a)(t=>{if(t instanceof $e)return Object(o.a)(null);throw t}))),M(t=>!!t),Object(x.a)((t,n)=>{if(t instanceof c||"EmptyError"===t.name){if(Pe(e,r,s))return Object(o.a)(new xt([],{}));throw new $e(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,s,i,o){return De(r,e,s,i)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i):Le(e):Le(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?je(s):this.lineralizeSegments(n,s).pipe(Object(L.a)(n=>{const s=new xt(n,{});return this.expandSegment(t,s,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i){const{matched:o,consumedSegments:a,lastChild:l,positionalParamSegments:u}=Ae(e,r,s);if(!o)return Le(e);const c=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?je(c):this.lineralizeSegments(r,c).pipe(Object(L.a)(r=>this.expandSegment(t,e,n,r.concat(s.slice(l)),i,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(o.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(g.a)(t=>(n._loadedConfig=t,new xt(r,{})))):Object(o.a)(new xt(r,{}));const{matched:i,consumedSegments:a,lastChild:l}=Ae(e,n,r);if(!i)return Le(e);const u=r.slice(l);return this.getChildConfig(t,n,r).pipe(Object(L.a)(t=>{const r=t.module,i=t.routes,{segmentGroup:l,slicedSegments:c}=Re(e,a,u,i),h=new xt(l.segments,l.children);if(0===c.length&&h.hasChildren())return this.expandChildren(r,i,h).pipe(Object(g.a)(t=>new xt(a,t)));if(0===i.length&&0===c.length)return Object(o.a)(new xt(a,{}));const d=Oe(n)===s;return this.expandSegment(r,h,i,c,d?ot:s,!0).pipe(Object(g.a)(t=>new xt(a.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(o.a)(new ye(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(o.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(L.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(g.a)(t=>(e._loadedConfig=t,t))):function(t){return new u.a(e=>e.error(ut(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(o.a)(new ye([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(o.a)(!0);const s=r.map(r=>{const s=t.get(r);let i;if(function(t){return t&&ve(t.canLoad)}(s))i=s.canLoad(e,n);else{if(!ve(s))throw new Error("Invalid CanLoad guard");i=s(e,n)}return gt(i)});return Object(o.a)(s).pipe(xe(),Object(j.a)(t=>{if(!_e(t))return;const e=ut(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(g.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(o.a)(n);if(r.numberOfChildren>1||!r.children.primary)return ze(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new wt(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return mt(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const s=t.substring(1);n[r]=e[s]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let i={};return mt(e.children,(e,s)=>{i[s]=this.createSegmentGroup(t,e,n,r)}),new xt(s,i)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Ve(t){const e={};for(const n of Object.keys(t.children)){const r=Ve(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new xt(t.segments.concat(e.segments),e.children)}return t}(new xt(t.segments,e))}class Ue{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class We{constructor(t,e){this.component=t,this.route=e}}function He(t,e,n){const r=t._root;return qe(r,e?e._root:null,n,[r.value])}function Ge(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function qe(t,e,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=Ht(e);return t.children.forEach(t=>{!function(t,e,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!St(t.url,e.url);case"pathParamsOrQueryParamsChange":return!St(t.url,e.url)||!ht(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ee(t,e)||!ht(t.queryParams,e.queryParams);case"paramsChange":default:return!ee(t,e)}}(o,i,i.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new Ue(r)):(i.data=o.data,i._resolvedData=o._resolvedData),qe(t,e,i.component?a?a.children:null:n,r,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new We(a.outlet.component,o))}else o&&Ze(e,a,s),s.canActivateChecks.push(new Ue(r)),qe(t,null,i.component?a?a.children:null:n,r,s)}(t,i[t.value.outlet],n,r.concat([t.value]),s),delete i[t.value.outlet]}),mt(i,(t,e)=>Ze(t,n.getContext(e),s)),s}function Ze(t,e,n){const r=Ht(t),s=t.value;mt(r,(t,r)=>{Ze(t,s.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new We(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class Ke{}function Ye(t){return new u.a(e=>e.error(t))}class Xe{constructor(t,e,n,r,s,i){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=i}recognize(){const t=Re(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,ot);if(null===e)return null;const n=new Yt([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ot,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Wt(n,e),s=new Xt(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const e=t.value,n=Kt(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const s of Object.keys(e.children)){const r=e.children[s],i=Te(t,s),o=this.processSegmentGroup(i,r,s);if(null===o)return null;n.push(...o)}const r=Qe(n);return r.sort((t,e)=>t.value.outlet===ot?-1:e.value.outlet===ot?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const s of t){const t=this.processSegmentAgainstRoute(s,e,n,r);if(null!==t)return t}return Pe(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!De(t,e,n,r))return null;let s,i=[],o=[];if("**"===t.path){const r=n.length>0?ft(n).parameters:{};s=new Yt(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,nn(t),Oe(t),t.component,t,tn(e),en(e)+n.length,rn(t))}else{const r=Ae(e,t,n);if(!r.matched)return null;i=r.consumedSegments,o=n.slice(r.lastChild),s=new Yt(i,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,nn(t),Oe(t),t.component,t,tn(e),en(e)+i.length,rn(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:u}=Re(e,i,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const t=this.processChildren(a,l);return null===t?null:[new Wt(s,t)]}if(0===a.length&&0===u.length)return[new Wt(s,[])];const c=Oe(t)===r,h=this.processSegment(a,l,u,c?ot:r);return null===h?null:[new Wt(s,h)]}}function Je(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Qe(t){const e=[],n=new Set;for(const r of t){if(!Je(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Qe(r.children);e.push(new Wt(r.value,t))}return e.filter(t=>!n.has(t))}function tn(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function en(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function nn(t){return t.data||{}}function rn(t){return t.resolve||{}}function sn(t){return Object(b.a)(e=>{const n=t(e);return n?Object(i.a)(n).pipe(Object(g.a)(()=>e)):Object(o.a)(e)})}class on extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const an=new s.r("ROUTES");class ln{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(g.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new ye(pt(r.injector.get(an,void 0,s.q.Self|s.q.Optional)).map(Ee),r)}),Object(x.a)(t=>{throw e._loader$=void 0,t}));return e._loader$=new f.a(n,()=>new m.a).pipe(Object(z.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(i.a)(this.loader.load(t)):gt(t()).pipe(Object(L.a)(t=>t instanceof s.w?Object(o.a)(t):Object(i.a)(this.compiler.compileModuleAsync(t))))}}class un{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new cn,this.attachRef=null}}class cn{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new un,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class hn{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function dn(t){throw t}function pn(t,e,n){return e.parse("/")}function fn(t,e){return Object(o.a)(null)}let mn=(()=>{class t{constructor(t,e,n,r,i,o,l,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new m.a,this.errorHandler=dn,this.malformedUriErrorHandler=pn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:fn,afterPreactivation:fn},this.urlHandlingStrategy=new hn,this.routeReuseStrategy=new on,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=i.get(s.y),this.console=i.get(s.cb);const c=i.get(s.A);this.isNgZoneEnabled=c instanceof s.A&&s.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new wt(new xt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ln(o,l,t=>this.triggerEvent(new Q(t)),t=>this.triggerEvent(new tt(t))),this.routerState=qt(this.currentUrlTree,this.rootComponentType),this.transitions=new a.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Object(w.a)(t=>0!==t.id),Object(g.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Object(b.a)(t=>{let n=!1,r=!1;return Object(o.a)(t).pipe(Object(j.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Object(b.a)(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(o.a)(t).pipe(Object(b.a)(t=>{const n=this.transitions.getValue();return e.next(new W(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?p.a:Promise.resolve(t)}),(r=this.ngModule.injector,s=this.configLoader,i=this.urlSerializer,a=this.config,Object(b.a)(t=>function(t,e,n,r,s){return new Be(t,e,n,r,s).apply()}(r,s,i,t.extractedUrl,a).pipe(Object(g.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(j.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,s){return Object(L.a)(i=>function(t,e,n,r,s="emptyOnly",i="legacy"){try{const a=new Xe(t,e,n,r,s,i).recognize();return null===a?Ye(new Ke):Object(o.a)(a)}catch(a){return Ye(a)}}(t,e,i.urlAfterRedirects,n(i.urlAfterRedirects),r,s).pipe(Object(g.a)(t=>Object.assign(Object.assign({},i),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(j.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Z(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,s,i,a;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:s,restoredState:i,extras:a}=t,l=new W(n,this.serializeUrl(r),s,i);e.next(l);const u=qt(r,this.rootComponentType).snapshot;return Object(o.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},a),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),p.a}),sn(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),Object(j.a)(t=>{const e=new K(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(g.a)(t=>Object.assign(Object.assign({},t),{guards:He(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(L.a)(n=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:a,canDeactivateChecks:l}}=n;return 0===l.length&&0===a.length?Object(o.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(i.a)(t).pipe(Object(L.a)(t=>function(t,e,n,r,s){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||0===i.length)return Object(o.a)(!0);const a=i.map(i=>{const o=Ge(i,e,s);let a;if(function(t){return t&&ve(t.canDeactivate)}(o))a=gt(o.canDeactivate(t,e,n,r));else{if(!ve(o))throw new Error("Invalid CanDeactivate guard");a=gt(o(t,e,n,r))}return a.pipe(M())});return Object(o.a)(a).pipe(xe())}(t.component,t.route,n,e,r)),M(t=>!0!==t,!0))}(l,r,s,t).pipe(Object(L.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(i.a)(e).pipe(Object(k.a)(e=>Object(h.a)(function(t,e){return null!==t&&e&&e(new et(t)),Object(o.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new rt(t)),Object(o.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Object(d.a)(()=>{const s=e.guards.map(s=>{const i=Ge(s,e.node,n);let o;if(function(t){return t&&ve(t.canActivateChild)}(i))o=gt(i.canActivateChild(r,t));else{if(!ve(i))throw new Error("Invalid CanActivateChild guard");o=gt(i(r,t))}return o.pipe(M())});return Object(o.a)(s).pipe(xe())}));return Object(o.a)(s).pipe(xe())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(o.a)(!0);const s=r.map(r=>Object(d.a)(()=>{const s=Ge(r,e,n);let i;if(function(t){return t&&ve(t.canActivate)}(s))i=gt(s.canActivate(e,t));else{if(!ve(s))throw new Error("Invalid CanActivate guard");i=gt(s(e,t))}return i.pipe(M())}));return Object(o.a)(s).pipe(xe())}(t,e.route,n))),M(t=>!0!==t,!0))}(r,a,t,e):Object(o.a)(n)),Object(g.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(j.a)(t=>{if(_e(t.guardsResult)){const e=ut(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Y(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Object(w.a)(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new G(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),sn(t=>{if(t.guards.canActivateChecks.length)return Object(o.a)(t).pipe(Object(j.a)(t=>{const e=new X(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(b.a)(t=>{let n=!1;return Object(o.a)(t).pipe((r=this.paramsInheritanceStrategy,s=this.ngModule.injector,Object(L.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(o.a)(t);let a=0;return Object(i.a)(n).pipe(Object(k.a)(t=>function(t,e,n,r){return function(t,e,n,r){const s=Object.keys(t);if(0===s.length)return Object(o.a)({});const a={};return Object(i.a)(s).pipe(Object(L.a)(s=>function(t,e,n,r){const s=Ge(t,e,r);return gt(s.resolve?s.resolve(e,n):s(e,n))}(t[s],e,n,r).pipe(Object(j.a)(t=>{a[s]=t}))),I(1),Object(L.a)(()=>Object.keys(a).length===s.length?Object(o.a)(a):p.a))}(t._resolve,t,e,r).pipe(Object(g.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Kt(t,n).resolve),null)))}(t.route,e,r,s)),Object(j.a)(()=>a++),I(1),Object(L.a)(e=>a===n.length?Object(o.a)(t):p.a))})),Object(j.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new G(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,s}),Object(j.a)(t=>{const e=new J(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),sn(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),Object(g.a)(t=>{const e=function(t,e,n){const r=ne(t,e._root,n?n._root:void 0);return new Gt(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(j.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,a=this.routeReuseStrategy,l=t=>this.triggerEvent(t),Object(g.a)(t=>(new ge(a,t.targetRouterState,t.currentRouterState,l).activate(s),t))),Object(j.a)({next(){n=!0},complete(){n=!0}}),Object(B.a)(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new G(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Object(x.a)(n=>{if(r=!0,(s=n)&&s.ngNavigationCancelingError){const r=_e(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const s=new G(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(s),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new q(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(i){t.reject(i)}}var s;return p.a}));var s,a,l}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,s={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(s.state=t)}this.scheduleNavigation(r,t,n,s)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Se(t),this.config=t.map(Ee),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:s,queryParamsHandling:i,preserveFragment:o}=e,a=n||this.routerState.root,l=o?this.currentUrlTree.fragment:s;let u=null;switch(i){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,r,s){if(0===n.length)return oe(e.root,e.root,e,r,s);const i=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new le(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,s)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return mt(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===s?(r.split("/").forEach((r,s)=>{0==s&&"."===r||(0==s&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new le(n,e,r)}(n);if(i.toRoot())return oe(e.root,new xt([],{}),e,r,s);const o=function(t,e,n){if(t.isAbsolute)return new ue(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new ue(t,t===e.root,0)}const r=se(t.commands[0])?0:1;return function(t,e,n){let r=t,s=e,i=n;for(;i>s;){if(i-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new ue(r,!1,s-i)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(i,e,t),a=o.processChildren?he(o.segmentGroup,o.index,i.commands):ce(o.segmentGroup,o.index,i.commands);return oe(o.segmentGroup,a,e,r,s)}(a,this.currentUrlTree,t,u,l)}navigateByUrl(t,e={skipLocationChange:!1}){const n=_e(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(_e(t))return bt(this.currentUrlTree,t,e);const n=this.parseUrl(t);return bt(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new H(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,s){if(this.disposed)return Promise.resolve(!1);const i=this.getTransition(),o="imperative"!==e&&"imperative"===(null==i?void 0:i.source),a=(this.lastSuccessfulId===i.id||this.currentNavigation?i.rawUrl:i.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let l,u,c;s?(l=s.resolve,u=s.reject,c=s.promise):c=new Promise((t,e)=>{l=t,u=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const s=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(s)||e?this.location.replaceState(s,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(s,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(s.P),s.Zb(Ct),s.Zb(cn),s.Zb(r.i),s.Zb(s.s),s.Zb(s.x),s.Zb(s.i),s.Zb(void 0))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})(),gn=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new s.n,this.deactivateEvents=new s.n,this.name=r||ot,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,s=new bn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,s),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(cn),s.Pb(s.R),s.Pb(s.j),s.ac("name"),s.Pb(s.h))},t.\u0275dir=s.Kb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class bn{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Zt?this.route:t===cn?this.childContexts:this.parent.get(t,e)}}class yn{}class vn{preload(t,e){return Object(o.a)(null)}}let _n=(()=>{class t{constructor(t,e,n,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new ln(e,n,e=>t.triggerEvent(new Q(e)),e=>t.triggerEvent(new tt(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(w.a)(t=>t instanceof H),Object(k.a)(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(s.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(i.a)(n).pipe(Object(V.a)(),Object(g.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(o.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(L.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(mn),s.Zb(s.x),s.Zb(s.i),s.Zb(s.s),s.Zb(yn))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})(),wn=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof W?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof H&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof it&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new it(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(mn),s.Zb(r.v),s.Zb(void 0))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})();const xn=new s.r("ROUTER_CONFIGURATION"),kn=new s.r("ROUTER_FORROOT_GUARD"),Sn=[r.i,{provide:Ct,useClass:It},{provide:mn,useFactory:function(t,e,n,s,i,o,a,l={},u,c){const h=new mn(null,t,e,n,s,i,o,pt(a));if(u&&(h.urlHandlingStrategy=u),c&&(h.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(l,h),l.enableTracing){const t=Object(r.A)();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Ct,cn,r.i,s.s,s.x,s.i,an,xn,[class{},new s.B],[class{},new s.B]]},cn,{provide:Zt,useFactory:function(t){return t.routerState.root},deps:[mn]},{provide:s.x,useClass:s.M},_n,vn,class{preload(t,e){return e().pipe(Object(x.a)(()=>Object(o.a)(null)))}},{provide:xn,useValue:{enableTracing:!1}}];function Cn(){return new s.z("Router",mn)}let In=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Sn,Nn(e),{provide:kn,useFactory:Tn,deps:[[mn,new s.B,new s.L]]},{provide:xn,useValue:n||{}},{provide:r.j,useFactory:On,deps:[r.t,[new s.p(r.a),new s.B],xn]},{provide:wn,useFactory:En,deps:[mn,r.v,xn]},{provide:yn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:vn},{provide:s.z,multi:!0,useFactory:Cn},[An,{provide:s.d,multi:!0,useFactory:Rn,deps:[An]},{provide:Dn,useFactory:Fn,deps:[An]},{provide:s.b,multi:!0,useExisting:Dn}]]}}static forChild(e){return{ngModule:t,providers:[Nn(e)]}}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(kn,8),s.Zb(mn,8))},t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({}),t})();function En(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new wn(t,e,n)}function On(t,e,n={}){return n.useHash?new r.f(t,e):new r.s(t,e)}function Tn(t){return"guarded"}function Nn(t){return[{provide:s.a,multi:!0,useValue:t},{provide:an,multi:!0,useValue:t}]}let An=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new m.a}appInitializer(){return this.injector.get(r.h,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(mn),r=this.injector.get(xn);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(o.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(xn),n=this.injector.get(_n),r=this.injector.get(wn),i=this.injector.get(mn),o=this.injector.get(s.g);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(s.s))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})();function Rn(t){return t.appInitializer.bind(t)}function Fn(t){return t.bootstrapListener.bind(t)}const Dn=new s.r("Router Initializer")},ie1u:function(t,e,n){(function(t){var r;!function(t,s,i){function o(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,s=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^s,s=s-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^s,e.a=s-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function a(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function l(t,e){var n=new o(t),r=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,r&&("object"==typeof r&&a(r,n),s.state=function(){return a(n,{})}),s}s&&s.exports?s.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(e,n,e,s))||(s.exports=r):this.tychei=l}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},itXk:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});var r=n("z+Ro"),s=n("DH7j"),i=n("l7GE"),o=n("ZUHj"),a=n("yCtX");const l={};function u(...t){let e,n;return Object(r.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(s.a)(t[0])&&(t=t[0]),Object(a.a)(t,n).lift(new c(e))}class c{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new h(t,this.resultSelector))}}class h extends i.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(l),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(o.a)(this,e,void 0,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,s=this.toRespond?r[n]===l?--this.toRespond:this.toRespond:0;r[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC"),s=n("quSY");function i(t,e){return new r.a(n=>{const r=new s.a;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},jtHE:function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r=n("XNiG"),s=n("3N8a");class i extends s.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class a extends o.a{}const l=new a(i);var u=n("quSY"),c=n("7o/Q"),h=n("WMd4");class d extends c.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(d.dispatch,this.delay,new p(t,this.destination)))}_next(t){this.scheduleMessage(h.a.createNext(t))}_error(t){this.scheduleMessage(h.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(h.a.createComplete()),this.unsubscribe()}}class p{constructor(t,e){this.notification=t,this.destination=e}}var f=n("9ppp"),m=n("Ylt2");class g extends r.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),super.next(t)}nextTimeWindow(t){this._events.push(new b(this._getNow(),t)),this._trimBufferThenGetEvents(),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=n.length;let i;if(this.closed)throw new f.a;if(this.isStopped||this.hasError?i=u.a.EMPTY:(this.observers.push(t),i=new m.a(this,t)),r&&t.add(t=new d(t,r)),e)for(let o=0;o<s&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<s&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),i}_getNow(){return(this.scheduler||l).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,s=r.length;let i=0;for(;i<s&&!(t-r[i].time<n);)i++;return s>e&&(i=Math.max(i,s-e)),i>0&&r.splice(0,i),r}}class b{constructor(t,e){this.time=t,this.value=e}}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},l7GE:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");class s extends r.a{notifyNext(t,e,n,r,s){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function s(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new i(t,e))}}class i{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mCNh:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return i});var r=n("SpAZ");function s(...t){return i(t)}function i(t){return 0===t.length?r.a:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}},mrSG:function(t,e,n){"use strict";function r(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(t){try{l(r.next(t))}catch(e){i(e)}}function a(t){try{l(r.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}l((r=r.apply(t,e||[])).next())})}n.d(e,"a",function(){return r})},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},nFlj:function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty;function s(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}function i(t){try{return encodeURIComponent(t)}catch(e){return null}}e.stringify=function(t,e){e=e||"";var n,s,o=[];for(s in"string"!=typeof e&&(e="?"),t)if(r.call(t,s)){if((n=t[s])||null!=n&&!isNaN(n)||(n=""),s=i(s),n=i(n),null===s||null===n)continue;o.push(s+"="+n)}return o.length?e+o.join("&"):""},e.parse=function(t){for(var e,n=/([^=?#&]+)=?([^&]*)/g,r={};e=n.exec(t);){var i=s(e[1]),o=s(e[2]);null===i||null===o||i in r||(r[i]=o)}return r}},nYR2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q"),s=n("quSY");function i(t){return e=>e.lift(new o(t))}class o{constructor(t){this.callback=t}call(t,e){return e.subscribe(new a(t,this.callback))}}class a extends r.a{constructor(t,e){super(t),this.add(new s.a(e))}}},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},oAJy:function(t,e,n){t.exports=function t(e,n,r){function s(o,a){if(!n[o]){if(!e[o]){if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[o]={exports:{}};e[o][0].call(u.exports,function(t){return s(e[o][1][t]||t)},u,u.exports,t,e,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(t,e,n){(function(t){"use strict";var n,r,s=t.MutationObserver||t.WebKitMutationObserver;if(s){var i=0,o=new s(c),a=t.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var l=new t.MessageChannel;l.port1.onmessage=c,n=function(){l.port2.postMessage(0)}}var u=[];function c(){var t,e;r=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}r=!1}e.exports=function(t){1!==u.push(t)||r||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var r=t(1);function s(){}var i={},o=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==s&&p(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){r(function(){var r;try{r=e(n)}catch(s){return i.reject(t,s)}r===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,r)})}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function r(e){n||(n=!0,i.reject(t,e))}function s(e){n||(n=!0,i.resolve(t,e))}var o=f(function(){e(s,r)});"error"===o.status&&r(o.value)}function f(t,e){var n={};try{n.value=t(e),n.status="success"}catch(r){n.status="error",n.value=r}return n}e.exports=u,u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===o)return this;var n=new this.constructor(s);return this.state!==l?h(n,this.state===a?t:e,this.outcome):this.queue.push(new c(n,t,e)),n},c.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){i.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},i.resolve=function(t,e){var n=f(d,e);if("error"===n.status)return i.reject(t,n.value);var r=n.value;if(r)p(t,r);else{t.state=a,t.outcome=e;for(var s=-1,o=t.queue.length;++s<o;)t.queue[s].callFulfilled(e)}return t},i.reject=function(t,e){t.state=o,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:i.resolve(new this(s),t)},u.reject=function(t){var e=new this(s);return i.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,l=-1,u=new this(s);++l<n;)c(t[l],l);return u;function c(t,s){e.resolve(t).then(function(t){o[s]=t,++a!==n||r||(r=!0,i.resolve(u,o))},function(t){r||(r=!0,i.reject(u,t))})}},u.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);for(var r=-1,o=new this(s);++r<e;)this.resolve(t[r]).then(function(t){n||(n=!0,i.resolve(o,t))},function(t){n||(n=!0,i.reject(o,t))});return o}},{1:1}],3:[function(t,e,n){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function i(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(s){if("TypeError"!==s.name)throw s;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var o=Promise;function a(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function l(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function u(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function c(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",d=void 0,p={},f=Object.prototype.toString,m="readonly",g="readwrite";function b(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),s=0;s<e;s++)r[s]=t.charCodeAt(s);return n}function y(t){var e=p[t.name],n={};n.promise=new o(function(t,e){n.resolve=t,n.reject=e}),e.deferredOperations.push(n),e.dbReady=e.dbReady?e.dbReady.then(function(){return n.promise}):n.promise}function v(t){var e=p[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function _(t,e){var n=p[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function w(t,e){return new o(function(n,r){if(p[t.name]=p[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return n(t.db);y(t),t.db.close()}var i=[t.name];e&&i.push(t.version);var o=s.open.apply(s,i);e&&(o.onupgradeneeded=function(e){var n=o.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(h)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),o.onerror=function(t){t.preventDefault(),r(o.error)},o.onsuccess=function(){n(o.result),v(t)}})}function x(t){return w(t,!1)}function k(t){return w(t,!0)}function S(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version>t.db.version;if(t.version<t.db.version&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),r||n){if(n){var s=t.db.version+1;s>t.version&&(t.version=s)}return!0}return!1}function C(t){return i([b(atob(t.data))],{type:t.type})}function I(t){return t&&t.__local_forage_encoded_blob}function E(t){var e=this,n=e._initReady().then(function(){var t=p[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return l(n,t,t),n}function O(t,e,n,r){void 0===r&&(r=1);try{var s=t.db.transaction(t.storeName,e);n(null,s)}catch(i){if(r>0&&(!t.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return o.resolve().then(function(){if(!t.db||"NotFoundError"===i.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),k(t)}).then(function(){return function(t){y(t);for(var e=p[t.name],n=e.forages,r=0;r<n.length;r++){var s=n[r];s._dbInfo.db&&(s._dbInfo.db.close(),s._dbInfo.db=null)}return t.db=null,x(t).then(function(e){return t.db=e,S(t)?k(t):e}).then(function(r){t.db=e.db=r;for(var s=0;s<n.length;s++)n[s]._dbInfo.db=r}).catch(function(e){throw _(t,e),e})}(t).then(function(){O(t,e,n,r-1)})}).catch(n);n(i)}}var T={_driver:"asyncStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]=t[r];var s=p[n.name];s||(p[n.name]=s={forages:[],db:null,dbReady:null,deferredOperations:[]}),s.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=E);var i=[];function a(){return o.resolve()}for(var l=0;l<s.forages.length;l++){var u=s.forages[l];u!==e&&i.push(u._initReady().catch(a))}var c=s.forages.slice(0);return o.all(i).then(function(){return n.db=s.db,x(n)}).then(function(t){return n.db=t,S(n,e._defaultConfig.version)?k(n):t}).then(function(t){n.db=s.db=t,e._dbInfo=n;for(var r=0;r<c.length;r++){var i=c[r];i!==e&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}})},_support:function(){try{if(!s||!s.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(n){return!1}}(),iterate:function(t,e){var n=this,r=new o(function(e,r){n.ready().then(function(){O(n._dbInfo,m,function(s,i){if(s)return r(s);try{var o=i.objectStore(n._dbInfo.storeName).openCursor(),a=1;o.onsuccess=function(){var n=o.result;if(n){var r=n.value;I(r)&&(r=C(r));var s=t(r,n.key,a++);void 0!==s?e(s):n.continue()}else e()},o.onerror=function(){r(o.error)}}catch(l){r(l)}})}).catch(r)});return a(r,e),r},getItem:function(t,e){var n=this;t=u(t);var r=new o(function(e,r){n.ready().then(function(){O(n._dbInfo,m,function(s,i){if(s)return r(s);try{var o=i.objectStore(n._dbInfo.storeName).get(t);o.onsuccess=function(){var t=o.result;void 0===t&&(t=null),I(t)&&(t=C(t)),e(t)},o.onerror=function(){r(o.error)}}catch(a){r(a)}})}).catch(r)});return a(r,e),r},setItem:function(t,e,n){var r=this;t=u(t);var s=new o(function(n,s){var a;r.ready().then(function(){return a=r._dbInfo,"[object Blob]"===f.call(e)?function(t){return"boolean"==typeof d?o.resolve(d):function(t){return new o(function(e){var n=t.transaction(h,g),r=i([""]);n.objectStore(h).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}}).catch(function(){return!1})}(t).then(function(t){return d=t})}(a.db).then(function(t){return t?e:(n=e,new o(function(t,e){var r=new FileReader;r.onerror=e,r.onloadend=function(e){var r=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)}));var n}):e}).then(function(e){O(r._dbInfo,g,function(i,o){if(i)return s(i);try{var a=o.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var l=a.put(e,t);o.oncomplete=function(){void 0===e&&(e=null),n(e)},o.onabort=o.onerror=function(){s(l.error?l.error:l.transaction.error)}}catch(u){s(u)}})}).catch(s)});return a(s,n),s},removeItem:function(t,e){var n=this;t=u(t);var r=new o(function(e,r){n.ready().then(function(){O(n._dbInfo,g,function(s,i){if(s)return r(s);try{var o=i.objectStore(n._dbInfo.storeName).delete(t);i.oncomplete=function(){e()},i.onerror=function(){r(o.error)},i.onabort=function(){r(o.error?o.error:o.transaction.error)}}catch(a){r(a)}})}).catch(r)});return a(r,e),r},clear:function(t){var e=this,n=new o(function(t,n){e.ready().then(function(){O(e._dbInfo,g,function(r,s){if(r)return n(r);try{var i=s.objectStore(e._dbInfo.storeName).clear();s.oncomplete=function(){t()},s.onabort=s.onerror=function(){n(i.error?i.error:i.transaction.error)}}catch(o){n(o)}})}).catch(n)});return a(n,t),n},length:function(t){var e=this,n=new o(function(t,n){e.ready().then(function(){O(e._dbInfo,m,function(r,s){if(r)return n(r);try{var i=s.objectStore(e._dbInfo.storeName).count();i.onsuccess=function(){t(i.result)},i.onerror=function(){n(i.error)}}catch(o){n(o)}})}).catch(n)});return a(n,t),n},key:function(t,e){var n=this,r=new o(function(e,r){t<0?e(null):n.ready().then(function(){O(n._dbInfo,m,function(s,i){if(s)return r(s);try{var o=i.objectStore(n._dbInfo.storeName),a=!1,l=o.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===t||a?e(n.key):(a=!0,n.advance(t)):e(null)},l.onerror=function(){r(l.error)}}catch(u){r(u)}})}).catch(r)});return a(r,e),r},keys:function(t){var e=this,n=new o(function(t,n){e.ready().then(function(){O(e._dbInfo,m,function(r,s){if(r)return n(r);try{var i=s.objectStore(e._dbInfo.storeName).openKeyCursor(),o=[];i.onsuccess=function(){var e=i.result;e?(o.push(e.key),e.continue()):t(o)},i.onerror=function(){n(i.error)}}catch(a){n(a)}})}).catch(n)});return a(n,t),n},dropInstance:function(t,e){e=c.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,i=this;if(t.name){var l=t.name===n.name&&i._dbInfo.db?o.resolve(i._dbInfo.db):x(t).then(function(e){var n=p[t.name],r=n.forages;n.db=e;for(var s=0;s<r.length;s++)r[s]._dbInfo.db=e;return e});r=l.then(t.storeName?function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;y(t);var r=p[t.name],i=r.forages;e.close();for(var a=0;a<i.length;a++){var l=i[a];l._dbInfo.db=null,l._dbInfo.version=n}return new o(function(e,r){var i=s.open(t.name,n);i.onerror=function(t){i.result.close(),r(t)},i.onupgradeneeded=function(){i.result.deleteObjectStore(t.storeName)},i.onsuccess=function(){var t=i.result;t.close(),e(t)}}).then(function(t){r.db=t;for(var e=0;e<i.length;e++){var n=i[e];n._dbInfo.db=t,v(n._dbInfo)}}).catch(function(e){throw(_(t,e)||o.resolve()).catch(function(){}),e})}}:function(e){y(t);var n=p[t.name],r=n.forages;e.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;return new o(function(e,n){var r=s.deleteDatabase(t.name);r.onerror=r.onblocked=function(t){var e=r.result;e&&e.close(),n(t)},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}}).then(function(t){n.db=t;for(var e=0;e<r.length;e++)v(r[e]._dbInfo)}).catch(function(e){throw(_(t,e)||o.resolve()).catch(function(){}),e})})}else r=o.reject("Invalid arguments");return a(r,e),r}},N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=/^~~local_forage_type~([^~]+)~/,R="__lfsc__:",F=R.length,D="arbf",P="blob",$="si08",M="ui08",L="uic8",j="si16",z="si32",B="ur16",V="ui32",U="fl32",W="fl64",H=F+D.length,G=Object.prototype.toString;function q(t){var e,n,r,s,i,o=.75*t.length,a=t.length,l=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var u=new ArrayBuffer(o),c=new Uint8Array(u);for(e=0;e<a;e+=4)n=N.indexOf(t[e]),r=N.indexOf(t[e+1]),s=N.indexOf(t[e+2]),i=N.indexOf(t[e+3]),c[l++]=n<<2|r>>4,c[l++]=(15&r)<<4|s>>2,c[l++]=(3&s)<<6|63&i;return u}function Z(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=N[n[e]>>2],r+=N[(3&n[e])<<4|n[e+1]>>4],r+=N[(15&n[e+1])<<2|n[e+2]>>6],r+=N[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var K={serialize:function(t,e){var n="";if(t&&(n=G.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===G.call(t.buffer))){var r,s=R;t instanceof ArrayBuffer?(r=t,s+=D):(r=t.buffer,"[object Int8Array]"===n?s+=$:"[object Uint8Array]"===n?s+=M:"[object Uint8ClampedArray]"===n?s+=L:"[object Int16Array]"===n?s+=j:"[object Uint16Array]"===n?s+=B:"[object Int32Array]"===n?s+=z:"[object Uint32Array]"===n?s+=V:"[object Float32Array]"===n?s+=U:"[object Float64Array]"===n?s+=W:e(new Error("Failed to get type for BinaryArray"))),e(s+Z(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n="~~local_forage_type~"+t.type+"~"+Z(this.result);e("__lfsc__:blob"+n)},i.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(o){console.error("Couldn't convert value into a JSON string: ",t),e(null,o)}},deserialize:function(t){if(t.substring(0,F)!==R)return JSON.parse(t);var e,n=t.substring(H),r=t.substring(F,H);if(r===P&&A.test(n)){var s=n.match(A);e=s[1],n=n.substring(s[0].length)}var o=q(n);switch(r){case D:return o;case P:return i([o],{type:e});case $:return new Int8Array(o);case M:return new Uint8Array(o);case L:return new Uint8ClampedArray(o);case j:return new Int16Array(o);case B:return new Uint16Array(o);case z:return new Int32Array(o);case V:return new Uint32Array(o);case U:return new Float32Array(o);case W:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:q,bufferToString:Z};function Y(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function X(t,e,n,r,s,i){t.executeSql(n,r,s,function(t,o){o.code===o.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],function(t,a){a.rows.length?i(t,o):Y(t,e,function(){t.executeSql(n,r,s,i)},i)},i):i(t,o)},i)}function J(t,e,n,r){var s=this;t=u(t);var i=new o(function(i,o){s.ready().then(function(){void 0===e&&(e=null);var a=e,l=s._dbInfo;l.serializer.serialize(e,function(e,u){u?o(u):l.db.transaction(function(n){X(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[t,e],function(){i(a)},function(t,e){o(e)})},function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void i(J.apply(s,[t,a,n,r-1]));o(e)}})})}).catch(o)});return a(i,n),i}function Q(t){return new o(function(e,n){t.transaction(function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(n,r){for(var s=[],i=0;i<r.rows.length;i++)s.push(r.rows.item(i).name);e({db:t,storeNames:s})},function(t,e){n(e)})},function(t){n(t)})})}var tt={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!=typeof t[r]?t[r].toString():t[r];var s=new o(function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(s){return r(s)}n.db.transaction(function(s){Y(s,n,function(){e._dbInfo=n,t()},function(t,e){r(e)})},r)});return n.serializer=K,s},_support:"function"==typeof openDatabase,iterate:function(t,e){var n=this,r=new o(function(e,r){n.ready().then(function(){var s=n._dbInfo;s.db.transaction(function(n){X(n,s,"SELECT * FROM "+s.storeName,[],function(n,r){for(var i=r.rows,o=i.length,a=0;a<o;a++){var l=i.item(a),u=l.value;if(u&&(u=s.serializer.deserialize(u)),void 0!==(u=t(u,l.key,a+1)))return void e(u)}e()},function(t,e){r(e)})})}).catch(r)});return a(r,e),r},getItem:function(t,e){var n=this;t=u(t);var r=new o(function(e,r){n.ready().then(function(){var s=n._dbInfo;s.db.transaction(function(n){X(n,s,"SELECT * FROM "+s.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=s.serializer.deserialize(r)),e(r)},function(t,e){r(e)})})}).catch(r)});return a(r,e),r},setItem:function(t,e,n){return J.apply(this,[t,e,n,1])},removeItem:function(t,e){var n=this;t=u(t);var r=new o(function(e,r){n.ready().then(function(){var s=n._dbInfo;s.db.transaction(function(n){X(n,s,"DELETE FROM "+s.storeName+" WHERE key = ?",[t],function(){e()},function(t,e){r(e)})})}).catch(r)});return a(r,e),r},clear:function(t){var e=this,n=new o(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){X(e,r,"DELETE FROM "+r.storeName,[],function(){t()},function(t,e){n(e)})})}).catch(n)});return a(n,t),n},length:function(t){var e=this,n=new o(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){X(e,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(e,n){var r=n.rows.item(0).c;t(r)},function(t,e){n(e)})})}).catch(n)});return a(n,t),n},key:function(t,e){var n=this,r=new o(function(e,r){n.ready().then(function(){var s=n._dbInfo;s.db.transaction(function(n){X(n,s,"SELECT key FROM "+s.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)},function(t,e){r(e)})})}).catch(r)});return a(r,e),r},keys:function(t){var e=this,n=new o(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){X(e,r,"SELECT key FROM "+r.storeName,[],function(e,n){for(var r=[],s=0;s<n.rows.length;s++)r.push(n.rows.item(s).key);t(r)},function(t,e){n(e)})})}).catch(n)});return a(n,t),n},dropInstance:function(t,e){e=c.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,s=this;return a(r=t.name?new o(function(e){var r;r=t.name===n.name?s._dbInfo.db:openDatabase(t.name,"","",0),e(t.storeName?{db:r,storeNames:[t.storeName]}:Q(r))}).then(function(t){return new o(function(e,n){t.db.transaction(function(r){function s(t){return new o(function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(t,e){n(e)})})}for(var i=[],a=0,l=t.storeNames.length;a<l;a++)i.push(s(t.storeNames[a]));o.all(i).then(function(){e()}).catch(function(t){n(t)})},function(t){n(t)})})}):o.reject("Invalid arguments"),e),r}};function et(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}var nt={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=et(t,this._defaultConfig),!function(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(e){return!0}}()||localStorage.length>0?(this._dbInfo=e,e.serializer=K,o.resolve()):o.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=n.ready().then(function(){for(var e=n._dbInfo,r=e.keyPrefix,s=r.length,i=localStorage.length,o=1,a=0;a<i;a++){var l=localStorage.key(a);if(0===l.indexOf(r)){var u=localStorage.getItem(l);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,l.substring(s),o++)))return u}}});return a(r,e),r},getItem:function(t,e){var n=this;t=u(t);var r=n.ready().then(function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r});return a(r,e),r},setItem:function(t,e,n){var r=this;t=u(t);var s=r.ready().then(function(){void 0===e&&(e=null);var n=e;return new o(function(s,i){var o=r._dbInfo;o.serializer.serialize(e,function(e,r){if(r)i(r);else try{localStorage.setItem(o.keyPrefix+t,e),s(n)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||i(a),i(a)}})})});return a(s,n),s},removeItem:function(t,e){var n=this;t=u(t);var r=n.ready().then(function(){localStorage.removeItem(n._dbInfo.keyPrefix+t)});return a(r,e),r},clear:function(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}});return a(n,t),n},length:function(t){var e=this.keys().then(function(t){return t.length});return a(e,t),e},key:function(t,e){var n=this,r=n.ready().then(function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(s){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e});return a(r,e),r},keys:function(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo,n=localStorage.length,r=[],s=0;s<n;s++){var i=localStorage.key(s);0===i.indexOf(t.keyPrefix)&&r.push(i.substring(t.keyPrefix.length))}return r});return a(n,t),n},dropInstance:function(t,e){if(e=c.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,s=this;return a(r=t.name?new o(function(e){e(t.storeName?et(t,s._defaultConfig):t.name+"/")}).then(function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}}):o.reject("Invalid arguments"),e),r}},rt=function(t,e){for(var n=t.length,r=0;r<n;){if((s=t[r])===(i=e)||"number"==typeof s&&"number"==typeof i&&isNaN(s)&&isNaN(i))return!0;r++}var s,i;return!1},st=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},it={},ot={},at={INDEXEDDB:T,WEBSQL:tt,LOCALSTORAGE:nt},lt=[at.INDEXEDDB._driver,at.WEBSQL._driver,at.LOCALSTORAGE._driver],ut=["dropInstance"],ct=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ut),ht={description:"",driver:lt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function dt(t,e){t[e]=function(){var n=arguments;return t.ready().then(function(){return t[e].apply(t,n)})}}function pt(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(arguments[0][n]=st(e[n])?e[n].slice():e[n])}return arguments[0]}var ft=new(function(){function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),at)if(at.hasOwnProperty(n)){var r=at[n],s=r._driver;this[n]=s,it[s]||this.defineDriver(r)}this._defaultConfig=pt({},ht),this._config=pt({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":r(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new o(function(e,n){try{var r=t._driver,s=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(s);for(var i=ct.concat("_initStorage"),l=0,u=i.length;l<u;l++){var c=i[l];if((!rt(ut,c)||t[c])&&"function"!=typeof t[c])return void n(s)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=o.reject(e);return a(n,arguments[arguments.length-1]),n}},n=0,r=ut.length;n<r;n++){var s=ut[n];t[s]||(t[s]=e(s))}}();var h=function(n){it[r]&&console.info("Redefining LocalForage driver: "+r),it[r]=t,ot[r]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(h,n):h(!!t._support):h(!0)}catch(d){n(d)}});return l(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=it[t]?o.resolve(it[t]):o.reject(new Error("Driver not found."));return l(r,e,n),r},t.prototype.getSerializer=function(t){var e=o.resolve(K);return l(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return l(n,t,t),n},t.prototype.setDriver=function(t,e,n){var r=this;st(t)||(t=[t]);var s=this._getSupportedDrivers(t);function i(){r._config.driver=r.driver()}function a(t){return r._extend(t),i(),r._ready=r._initStorage(r._config),r._ready}var u=null!==this._driverSet?this._driverSet.catch(function(){return o.resolve()}):o.resolve();return this._driverSet=u.then(function(){var t=s[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then(function(t){r._driver=t._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(t){return function(){var e=0;return function n(){for(;e<t.length;){var s=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(s).then(a).catch(n)}i();var l=new Error("No available storage method found.");return r._driverSet=o.reject(l),r._driverSet}()}}(s)})}).catch(function(){i();var t=new Error("No available storage method found.");return r._driverSet=o.reject(t),r._driverSet}),l(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!ot[t]},t.prototype._extend=function(t){pt(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var s=t[n];this.supports(s)&&e.push(s)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=ct.length;t<e;t++)dt(this,ct[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=ft},{3:3}]},{},[4])(4)},oB13:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EQ5u");function s(t,e){return function(n){let s;if(s="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new i(s,e));const o=Object.create(n,r.b);return o.source=n,o.subjectFactory=s,o}}class i{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:n}=this,r=this.subjectFactory(),s=n(r).subscribe(t);return s.add(e.subscribe(r)),s}}},omvX:function(t,e,n){"use strict";n.d(e,"a",function(){return Ae}),n.d(e,"b",function(){return Fe});var r=n("8Y7J"),s=n("cUpR"),i=n("GS7A");function o(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function a(t){switch(t.length){case 0:return new i.d;case 1:return t[0];default:return new i.r(t)}}function l(t,e,n,r,s={},o={}){const a=[],l=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,h=r&&c||{};Object.keys(t).forEach(n=>{let r=n,l=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,a),l){case i.s:l=s[n];break;case i.a:l=o[n];break;default:l=e.normalizeStyleValue(n,r,l,a)}h[r]=l}),r||l.push(h),c=h,u=n}),a.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${a.join(t)}`)}return l}function u(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&c(n,"start",t)));break;case"done":t.onDone(()=>r(n&&c(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&c(n,"destroy",t)))}}function c(t,e,n){const r=n.totalTime,s=h(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),i=t._data;return null!=i&&(s._data=i),s}function h(t,e,n,r,s="",i=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:s,totalTime:i,disabled:!!o}}function d(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function p(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let f=(t,e)=>!1,m=(t,e)=>!1,g=(t,e,n)=>[];const b=o();(b||"undefined"!=typeof Element)&&(f=(t,e)=>t.contains(e),m=(()=>{if(b||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):m}})(),g=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let y=null,v=!1;function _(t){y||(y=("undefined"!=typeof document?document.body:null)||{},v=!!y.style&&"WebkitAppearance"in y.style);let e=!0;return y.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in y.style,!e&&v)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in y.style),e}const w=m,x=f,k=g;function S(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let C=(()=>{class t{validateStyleProperty(t){return _(t)}matchesElement(t,e){return w(t,e)}containsElement(t,e){return x(t,e)}query(t,e,n){return k(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,s,o=[],a){return new i.d(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),I=(()=>{class t{}return t.NOOP=new C,t})();const E="ng-enter",O="ng-leave",T="ng-trigger",N=".ng-trigger",A="ng-animating",R=".ng-animating";function F(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:D(parseFloat(e[1]),e[2])}function D(t,e){switch(e){case"s":return 1e3*t;default:return t}}function P(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,s=0,i="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=D(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(s=D(parseFloat(o),n[4]));const a=n[5];a&&(i=a)}else r=t;if(!n){let n=!1,i=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(i,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:s,easing:i}}(t,e,n)}function $(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function M(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else $(t,n);return n}function L(t,e,n){return n?e+":"+n+";":""}function j(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=L(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=L(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function z(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const s=Z(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[s]),t.style[s]=e[r]}),o()&&j(t))}function B(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Z(e);t.style[n]=""}),o()&&j(t))}function V(t){return Array.isArray(t)?1==t.length?t[0]:Object(i.k)(t):t}const U=new RegExp("{{\\s*(.+?)\\s*}}","g");function W(t){let e=[];if("string"==typeof t){let n;for(;n=U.exec(t);)e.push(n[1]);U.lastIndex=0}return e}function H(t,e,n){const r=t.toString(),s=r.replace(U,(t,r)=>{let s=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),s=""),s.toString()});return s==r?t:s}function G(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const q=/-+([a-z0-9])/g;function Z(t){return t.replace(q,(...t)=>t[1].toUpperCase())}function K(t,e){return 0===t||0===e}function Y(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let i=e[0],o=[];if(r.forEach(t=>{i.hasOwnProperty(t)||o.push(t),i[t]=n[t]}),o.length)for(var s=1;s<e.length;s++){let n=e[s];o.forEach(function(e){n[e]=J(t,e)})}}return e}function X(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function J(t,e){return window.getComputedStyle(t)[e]}const Q="*";function tt(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const s=r[1],i=r[2],o=r[3];e.push(rt(s,o)),"<"!=i[0]||s==Q&&o==Q||e.push(rt(o,s))}(t,n,e)):n.push(t),n}const et=new Set(["true","1"]),nt=new Set(["false","0"]);function rt(t,e){const n=et.has(t)||nt.has(t),r=et.has(e)||nt.has(e);return(s,i)=>{let o=t==Q||t==s,a=e==Q||e==i;return!o&&n&&"boolean"==typeof s&&(o=s?et.has(t):nt.has(t)),!a&&r&&"boolean"==typeof i&&(a=i?et.has(e):nt.has(e)),o&&a}}const st=new RegExp("s*:selfs*,?","g");function it(t,e,n){return new ot(t).build(e,n)}class ot{constructor(t){this._driver=t}build(t,e){const n=new at(e);return this._resetContextStyleTimingState(n),X(this,V(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],i=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,s.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const s=this.visitTransition(t,e);n+=s.queryCount,r+=s.depCount,i.push(s)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:s,transitions:i,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,i=r||{};if(n.styles.forEach(t=>{if(lt(t)){const e=t;Object.keys(e).forEach(t=>{W(e[t]).forEach(t=>{i.hasOwnProperty(t)||s.add(t)})})}}),s.size){const n=G(s.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=X(this,V(t.animation),e);return{type:1,matchers:tt(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:ut(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>X(this,t,e)),options:ut(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(t=>{e.currentTime=n;const s=X(this,t,e);return r=Math.max(r,e.currentTime),s});return e.currentTime=r,{type:3,steps:s,options:ut(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return ct(P(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=ct(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||P(r,e),ct(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let s=t.styles?t.styles:Object(i.n)({});if(5==s.type)r=this.visitKeyframes(s,e);else{let s=t.styles,o=!1;if(!s){o=!0;const t={};n.easing&&(t.easing=n.easing),s=Object(i.n)(t)}e.currentTime+=n.duration+n.delay;const a=this.visitStyle(s,e);a.isEmptyStep=o,r=a}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==i.a?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,s=null;return n.forEach(t=>{if(lt(t)){const e=t,n=e.easing;if(n&&(s=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:s,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const i=e.collectedStyles[e.currentQuerySelector],o=i[n];let a=!0;o&&(s!=r&&s>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${r}ms"`),a=!1),s=o.startTime),a&&(i[n]={startTime:s,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},s=W(t);s.length&&s.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const s=[];let i=!1,o=!1,a=0;const l=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let l=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(lt(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(lt(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),u=0;return null!=l&&(r++,u=n.offset=l),o=o||u<0||u>1,i=i||u<a,a=u,s.push(u),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),i&&e.errors.push("Please ensure that all keyframe offsets are in order");const u=t.steps.length;let c=0;r>0&&r<u?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(c=1/(u-1));const h=u-1,d=e.currentTime,p=e.currentAnimateTimings,f=p.duration;return l.forEach((t,r)=>{const i=c>0?r==h?1:c*r:s[r],o=i*f;e.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(t,e),t.offset=i,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:X(this,V(t.animation),e),options:ut(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:ut(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ut(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,i]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(st,"")),[t=t.replace(/@\*/g,N).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,R),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,d(e.collectedStyles,e.currentQuerySelector,{});const o=X(this,V(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:i,animation:o,originalSelector:t.selector,options:ut(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:P(t.timings,e.errors,!0);return{type:12,animation:X(this,V(t.animation),e),timings:n,options:null}}}class at{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function lt(t){return!Array.isArray(t)&&"object"==typeof t}function ut(t){var e;return t?(t=$(t)).params&&(t.params=(e=t.params)?$(e):null):t={},t}function ct(t,e,n){return{duration:t,delay:e,easing:n}}function ht(t,e,n,r,s,i,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:s,delay:i,totalTime:s+i,easing:o,subTimeline:a}}class dt{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const pt=new RegExp(":enter","g"),ft=new RegExp(":leave","g");function mt(t,e,n,r,s,i={},o={},a,l,u=[]){return(new gt).buildKeyframes(t,e,n,r,s,i,o,a,l,u)}class gt{buildKeyframes(t,e,n,r,s,i,o,a,l,u=[]){l=l||new dt;const c=new yt(t,e,l,r,s,u,[]);c.options=a,c.currentTimeline.setStyles([i],null,c.errors,a),X(this,n,c);const h=c.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,c.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[ht(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,i=this._visitSubInstructions(n,r,r.options);s!=i&&e.transformIntoNewTimeline(i)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const s=null!=n.duration?F(n.duration):null,i=null!=n.delay?F(n.delay):null;return 0!==s&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,s,i);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),X(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=bt);const t=F(s.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>X(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?F(t.options.delay):0;t.steps.forEach(i=>{const o=e.createSubContext(t.options);s&&o.delayNextStep(s),X(this,i,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return P(e.params?H(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,i=e.createSubContext().currentTimeline;i.easing=n.easing,t.styles.forEach(t=>{i.forwardTime((t.offset||0)*s),i.setStyles(t.styles,t.easing,e.errors,e.options),i.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(i),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?F(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=bt);let i=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);s&&o.delayNextStep(s),n===e.element&&(a=o.currentTimeline),X(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),i=Math.max(i,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(i),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,i=Math.abs(s.duration),o=i*(e.currentQueryTotal-1);let a=i*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=e.currentTimeline;a&&l.delayNextStep(a);const u=l.currentTime;X(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const bt={};class yt{constructor(t,e,n,r,s,i,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=i,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bt,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new vt(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=F(n.duration)),null!=n.delay&&(r.delay=F(n.delay));const s=n.params;if(s){let t=r.params;t||(t=this.options.params={}),Object.keys(s).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=H(s[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new yt(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=bt,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},s=new _t(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,i){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(pt,"."+this._enterClassName)).replace(ft,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return s||0!=o.length||i.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class vt{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new vt(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||i.a,this._currentKeyframe[t]=i.a}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const s=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=i.a})):M(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=H(o[t],s,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:i.a),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((s,o)=>{const a=M(s,!0);Object.keys(a).forEach(n=>{const r=a[n];r==i.s?t.add(n):r==i.a&&e.add(n)}),n||(a.offset=o/this.duration),r.push(a)});const s=t.size?G(t.values()):[],o=e.size?G(e.values()):[];if(n){const t=r[0],e=$(t);t.offset=0,e.offset=1,r=[t,e]}return ht(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class _t extends vt{constructor(t,e,n,r,s,i,o=!1){super(t,e,i.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=o,this.timings={duration:i.duration,delay:i.delay,easing:i.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],i=n+e,o=e/i,a=M(t[0],!1);a.offset=0,s.push(a);const l=M(t[0],!1);l.offset=wt(o),s.push(l);const u=t.length-1;for(let r=1;r<=u;r++){let o=M(t[r],!1);o.offset=wt((e+o.offset*n)/i),s.push(o)}n=i,e=0,r="",t=s}return ht(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function wt(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class xt{}class kt extends xt{normalizePropertyName(t,e){return Z(t)}normalizeStyleValue(t,e,n,r){let s="";const i=n.toString().trim();if(St[e]&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return i+s}}const St=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Ct(t,e,n,r,s,i,o,a,l,u,c,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:s,fromState:n,fromStyles:i,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:h,errors:d}}const It={};class Et{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,s){return t.some(t=>t(e,n,r,s))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],s=this._stateStyles[t],i=r?r.buildStyles(e,n):{};return s?s.buildStyles(e,n):i}build(t,e,n,r,s,i,o,a,l,u){const c=[],h=this.ast.options&&this.ast.options.params||It,p=this.buildStyles(n,o&&o.params||It,c),f=a&&a.params||It,m=this.buildStyles(r,f,c),g=new Set,b=new Map,y=new Map,v="void"===r,_={params:Object.assign(Object.assign({},h),f)},w=u?[]:mt(t,e,this.ast.animation,s,i,p,m,_,l,c);let x=0;if(w.forEach(t=>{x=Math.max(t.duration+t.delay,x)}),c.length)return Ct(e,this._triggerName,n,r,v,p,m,[],[],b,y,x,c);w.forEach(t=>{const n=t.element,r=d(b,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const s=d(y,n,{});t.postStyleProps.forEach(t=>s[t]=!0),n!==e&&g.add(n)});const k=G(g.values());return Ct(e,this._triggerName,n,r,v,p,m,w,k,b,y,x)}}class Ot{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=$(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const s=t;Object.keys(s).forEach(t=>{let i=s[t];i.length>1&&(i=H(i,r,e)),n[t]=i})}}),n}}class Tt{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Ot(t.style,t.options&&t.options.params||{})}),Nt(this.states,"true","1"),Nt(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Et(t,e,this.states))}),this.fallbackTransition=new Et(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(s=>s.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Nt(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const At=new dt;class Rt{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=it(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,s=l(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations[t];let o;const l=new Map;if(s?(o=mt(this._driver,e,s,E,O,{},{},n,At,r),o.forEach(t=>{const e=d(l,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);l.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,i.a)})});const u=a(o.map(t=>{const e=l.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=u,u.onDestroy(()=>this.destroy(t)),this.players.push(u),u}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const s=h(e,"","","");return u(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Ft="ng-animate-queued",Dt="ng-animate-disabled",Pt=".ng-animate-disabled",$t=[],Mt={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Lt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class jt{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=$(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const zt="void",Bt=new jt(zt);class Vt{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Kt(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(s=n)&&"done"!=s)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var s;const i=d(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};i.push(o);const a=d(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Kt(t,T),Kt(t,"ng-trigger-"+e),a[e]=Bt),()=>{this._engine.afterFlush(()=>{const t=i.indexOf(o);t>=0&&i.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),i=new Wt(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(Kt(t,T),Kt(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const l=new jt(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[e]=l,a||(a=Bt),l.value!==zt&&a.value===l.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let s=0;s<n.length;s++){const r=n[s];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,l.params)){const e=[],n=s.matchStyles(a.value,a.params,e),r=s.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{B(t,n),z(t,r)})}return}const u=d(this._engine.playersByElement,t,[]);u.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let c=s.matchTransition(a.value,l.value,t,l.params),h=!1;if(!c){if(!r)return;c=s.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:c,fromState:a,toState:l,player:i,isFallbackTransition:h}),h||(Kt(t,Ft),i.onStart(()=>{Yt(t,Ft)})),i.onDone(()=>{let e=this.players.indexOf(i);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(i);t>=0&&n.splice(t,1)}}),this.players.push(i),u.push(i),i}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,N,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t);if(s){const i=[];if(Object.keys(s).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,zt,r);n&&i.push(n)}}),i.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&a(i).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const s=e.name;if(r.has(s))return;r.add(s);const i=this._triggers[s].fallbackTransition,o=n[s]||Bt,a=new jt(zt),l=new Wt(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:i,fromState:o,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Mt||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Kt(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,i=this._elementListeners.get(s);i&&i.forEach(e=>{if(e.name==n.triggerName){const r=h(s,n.triggerName,n.fromState.value,n.toState.value);r._data=t,u(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Ut{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Vt(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let s=n;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,e)){this._namespaceList.splice(s+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const s=n[t[r]].namespaceId;if(s){const t=this._fetchNamespace(s);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(Ht(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Ht(e))return;const s=e.__ng_removed;if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Kt(t,Dt)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Yt(t,Dt))}removeNode(t,e,n,r){if(Ht(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,s){return Ht(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,N,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,R,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return a(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Mt,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,Pt)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Pt,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Kt(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?a(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new dt,r=[],s=new Map,o=[],l=new Map,u=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(t=>{h.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)h.add(e[n])});const p=this.bodyNode,f=Array.from(this.statesByElement.keys()),m=Zt(f,this.collectedEnterElements),g=new Map;let b=0;m.forEach((t,e)=>{const n=E+b++;g.set(e,n),t.forEach(t=>Kt(t,n))});const y=[],v=new Set,_=new Set;for(let i=0;i<this.collectedLeaveElements.length;i++){const t=this.collectedLeaveElements[i],e=t.__ng_removed;e&&e.setForRemoval&&(y.push(t),v.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>v.add(t)):_.add(t))}const w=new Map,x=Zt(f,Array.from(v));x.forEach((t,e)=>{const n=O+b++;w.set(e,n),t.forEach(t=>Kt(t,n))}),t.push(()=>{m.forEach((t,e)=>{const n=g.get(e);t.forEach(t=>Yt(t,n))}),x.forEach((t,e)=>{const n=w.get(e);t.forEach(t=>Yt(t,n))}),y.forEach(t=>{this.processLeaveNode(t)})});const k=[],S=[];for(let i=this._namespaceList.length-1;i>=0;i--)this._namespaceList[i].drainQueuedTransitions(e).forEach(t=>{const e=t.player,s=t.element;if(k.push(e),this.collectedEnterElements.length){const t=s.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const i=!p||!this.driver.containsElement(p,s),a=w.get(s),h=g.get(s),f=this._buildInstruction(t,n,h,a,i);if(f.errors&&f.errors.length)S.push(f);else{if(i)return e.onStart(()=>B(s,f.fromStyles)),e.onDestroy(()=>z(s,f.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>B(s,f.fromStyles)),e.onDestroy(()=>z(s,f.toStyles)),void r.push(e);f.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(s,f.timelines),o.push({instruction:f,player:e,element:s}),f.queriedElements.forEach(t=>d(l,t,[]).push(e)),f.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=u.get(e);t||u.set(e,t=new Set),n.forEach(e=>t.add(e))}}),f.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=c.get(e);r||c.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(S.length){const t=[];S.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),k.forEach(t=>t.destroy()),this.reportError(t)}const C=new Map,I=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(I.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,C))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{d(C,e,[]).push(t),t.destroy()})});const T=y.filter(t=>Qt(t,u,c)),N=new Map;qt(N,this.driver,_,c,i.a).forEach(t=>{Qt(t,u,c)&&T.push(t)});const A=new Map;m.forEach((t,e)=>{qt(A,this.driver,new Set(t),u,i.s)}),T.forEach(t=>{const e=N.get(t),n=A.get(t);N.set(t,Object.assign(Object.assign({},e),n))});const F=[],D=[],P={};o.forEach(t=>{const{element:e,player:i,instruction:o}=t;if(n.has(e)){if(h.has(e))return i.onDestroy(()=>z(e,o.toStyles)),i.disabled=!0,i.overrideTotalTime(o.totalTime),void r.push(i);let t=P;if(I.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=I.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>I.set(e,t))}const n=this._buildAnimation(i.namespaceId,o,C,s,A,N);if(i.setRealPlayer(n),t===P)F.push(i);else{const e=this.playersByElement.get(t);e&&e.length&&(i.parentPlayer=a(e)),r.push(i)}}else B(e,o.fromStyles),i.onDestroy(()=>z(e,o.toStyles)),D.push(i),h.has(e)&&r.push(i)}),D.forEach(t=>{const e=s.get(t.element);if(e&&e.length){const n=a(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let i=0;i<y.length;i++){const t=y[i],e=t.__ng_removed;if(Yt(t,O),e&&e.hasAnimation)continue;let n=[];if(l.size){let e=l.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,R,!0);for(let t=0;t<r.length;t++){let e=l.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Xt(this,t,r):this.processLeaveNode(t)}return y.length=0,F.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),F}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let i=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(i=e)}else{const e=this.playersByElement.get(t);if(e){const t=!s||s==zt;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&i.push(e)})}}return(n||r)&&(i=i.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),i}_beforeAnimationBuild(t,e,n){const r=e.element,s=e.isRemovalTransition?void 0:t,i=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,l=d(n,t,[]);this._getPreviousPlayers(t,a,s,i,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}B(r,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){const u=e.triggerName,c=e.element,h=[],p=new Set,f=new Set,m=e.timelines.map(e=>{const a=e.element;p.add(a);const d=a.__ng_removed;if(d&&d.removedBeforeQueried)return new i.d(e.duration,e.delay);const m=a!==c,g=function(t){const e=[];return Jt(t,e),e}((n.get(a)||$t).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===a),b=s.get(a),y=o.get(a),v=l(0,this._normalizer,0,e.keyframes,b,y),_=this._buildPlayer(e,v,g);if(e.subTimeline&&r&&f.add(a),m){const e=new Wt(t,u,a);e.setRealPlayer(_),h.push(e)}return _});h.forEach(t=>{d(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),p.forEach(t=>Kt(t,A));const g=a(m);return g.onDestroy(()=>{p.forEach(t=>Yt(t,A)),z(c,e.toStyles)}),f.forEach(t=>{d(r,t,[]).push(g)}),g}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new i.d(t.duration,t.delay)}}class Wt{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new i.d,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>u(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){d(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Ht(t){return t&&1===t.nodeType}function Gt(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function qt(t,e,n,r,s){const i=[];n.forEach(t=>i.push(Gt(t)));const o=[];r.forEach((n,r)=>{const i={};n.forEach(t=>{const n=i[t]=e.computeStyle(r,t,s);n&&0!=n.length||(r.__ng_removed=Lt,o.push(r))}),t.set(r,i)});let a=0;return n.forEach(t=>Gt(t,i[a++])),o}function Zt(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),s=new Map;function i(t){if(!t)return 1;let e=s.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:i(o),s.set(t,e),e}return e.forEach(t=>{const e=i(t);1!==e&&n.get(e).push(t)}),n}function Kt(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Yt(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Xt(t,e,n){a(n).onDone(()=>t.processLeaveNode(e))}function Jt(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof i.r?Jt(r.players,e):e.push(r)}}function Qt(t,e,n){const r=n.get(t);if(!r)return!1;let s=e.get(t);return s?r.forEach(t=>s.add(t)):e.set(t,r),n.delete(t),!0}class te{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Ut(t,e,n),this._timelineEngine=new Rt(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,s){const i=t+"-"+r;let o=this._triggerCache[i];if(!o){const t=[],e=it(this._driver,s,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new Tt(t,e)}(r,e),this._triggerCache[i]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,s]=p(n);this._timelineEngine.command(t,e,s,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[t,r]=p(n);return this._timelineEngine.listen(t,e,r,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ee(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=re(e[0]),e.length>1&&(r=re(e[e.length-1]))):e&&(n=re(e)),n||r?new ne(t,n,r):null}let ne=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=t.initialStylesByElement.get(e);s||t.initialStylesByElement.set(e,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&z(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(z(this._element,this._initialStyles),this._endStyles&&(z(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(B(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(B(this._element,this._endStyles),this._endStyles=null),z(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function re(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const s=n[r];se(s)&&(e=e||{},e[s]=t[s])}return e}function se(t){return"display"===t||"position"===t}const ie="animation",oe="animationend";class ae{constructor(t,e,n,r,s,i,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=s,this._fillMode=i,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=pe(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),de(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),he(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){le(this._element,this._name,"paused")}resume(){le(this._element,this._name,"running")}setPosition(t){const e=ue(this._element,this._name);this._position=t*this._duration,de(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),he(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=pe(t,"").split(","),r=ce(n,e);r>=0&&(n.splice(r,1),de(t,"",n.join(",")))}(this._element,this._name))}}function le(t,e,n){de(t,"PlayState",n,ue(t,e))}function ue(t,e){const n=pe(t,"");return n.indexOf(",")>0?ce(n.split(","),e):ce([n],e)}function ce(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function he(t,e,n){n?t.removeEventListener(oe,e):t.addEventListener(oe,e)}function de(t,e,n,r){const s=ie+e;if(null!=r){const e=t.style[s];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[s]=n}function pe(t,e){return t.style[ie+e]||""}class fe{constructor(t,e,n,r,s,i,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=s,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=i||"linear",this.totalTime=r+s,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ae(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:J(this.element,n))})}this.currentSnapshot=t}}class me extends i.d{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=S(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class ge{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return _(t)}matchesElement(t,e){return w(t,e)}containsElement(t,e){return x(t,e)}query(t,e,n){return k(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>S(t));let r=`@keyframes ${e} {\n`,s="";n.forEach(t=>{s=" ";const e=parseFloat(t.offset);r+=`${s}${100*e}% {\n`,s+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${s}animation-timing-function: ${n};\n`));default:return void(r+=`${s}${e}: ${n};\n`)}}),r+=`${s}}\n`}),r+="}\n";const i=document.createElement("style");return i.textContent=r,i}animate(t,e,n,r,s,i=[],o){const a=i.filter(t=>t instanceof fe),l={};K(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const u=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Y(t,e,l));if(0==n)return new me(t,u);const c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(h);const d=ee(t,e),p=new fe(t,e,c,n,r,s,u,d);return p.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),p}}class be{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:J(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class ye{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(ve().toString()),this._cssKeyframesDriver=new ge}validateStyleProperty(t){return _(t)}matchesElement(t,e){return w(t,e)}containsElement(t,e){return x(t,e)}query(t,e,n){return k(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,s,i=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,s,i);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(a.easing=s);const l={},u=i.filter(t=>t instanceof be);K(n,r)&&u.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const c=ee(t,e=Y(t,e=e.map(t=>M(t,!1)),l));return new be(t,e,a,c)}}function ve(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var _e=n("SVse");let we=(()=>{class t extends i.b{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.S.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Object(i.k)(t):t;return Se(this._renderer,null,e,"register",[n]),new xe(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.G),r.Zb(_e.d))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();class xe extends i.c{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new ke(this._id,t,e||{},this._renderer)}}class ke{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Se(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Se(t,e,n,r,s){return t.setProperty(e,`@@${n}:${r}`,s)}const Ce="@",Ie="@.disabled";let Ee=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Oe("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,t);const i=e=>{Array.isArray(e)?e.forEach(i):this.engine.registerTrigger(r,s,t,e.name,e)};return e.data.animation.forEach(i),new Te(this,s,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.G),r.Zb(te),r.Zb(r.A))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();class Oe{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==Ce&&e==Ie?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Te extends Oe{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==Ce?"."==e.charAt(1)&&e==Ie?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==Ce){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let s=e.substr(1),i="";return s.charAt(0)!=Ce&&([s,i]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,i,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Ne=(()=>{class t extends te{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(_e.d),r.Zb(I),r.Zb(xt))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const Ae=new r.r("AnimationModuleType"),Re=[{provide:I,useFactory:function(){return"function"==typeof ve()?new ye:new ge}},{provide:Ae,useValue:"BrowserAnimations"},{provide:i.b,useClass:we},{provide:xt,useFactory:function(){return new kt}},{provide:te,useClass:Ne},{provide:r.G,useFactory:function(t,e,n){return new Ee(t,e,n)},deps:[s.d,te,r.A]}];let Fe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:Re,imports:[s.a]}),t})()},pHgn:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return o});var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(t){try{l(r.next(t))}catch(e){i(e)}}function a(t){try{l(r.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}l((r=r.apply(t,e||[])).next())})}function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,s,i=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return o}function o(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t}},"pJ3+":function(t,e,n){var r;!function(s,i){var o,a=this,l=256,u=i.pow(l,6),c=i.pow(2,52),h=2*c,d=255;function p(t,e,n){var r=[],d=b(g((e=1==e?{entropy:!0}:e||{}).entropy?[t,y(s)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(l):(t=new Uint8Array(l),(a.crypto||a.msCrypto).getRandomValues(t)),y(t)}catch(r){var e=a.navigator,n=e&&e.plugins;return[+new Date,a,n,a.screen,y(s)]}}():t,3),r),p=new f(r),v=function(){for(var t=p.g(6),e=u,n=0;t<c;)t=(t+n)*l,e*=l,n=p.g(1);for(;t>=h;)t/=2,e/=2,n>>>=1;return(t+n)/e};return v.int32=function(){return 0|p.g(4)},v.quick=function(){return p.g(4)/4294967296},v.double=v,b(y(p.S),s),(e.pass||n||function(t,e,n,r){return r&&(r.S&&m(r,p),t.state=function(){return m(p,{})}),n?(i.random=t,e):t})(v,d,"global"in e?e.global:this==i,e.state)}function f(t){var e,n=t.length,r=this,s=0,i=r.i=r.j=0,o=r.S=[];for(n||(t=[n++]);s<l;)o[s]=s++;for(s=0;s<l;s++)o[s]=o[i=d&i+t[s%n]+(e=o[s])],o[i]=e;(r.g=function(t){for(var e,n=0,s=r.i,i=r.j,o=r.S;t--;)e=o[s=d&s+1],n=n*l+o[d&(o[s]=o[i=d&i+e])+(o[i]=e)];return r.i=s,r.j=i,n})(l)}function m(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function g(t,e){var n,r=[],s=typeof t;if(e&&"object"==s)for(n in t)try{r.push(g(t[n],e-1))}catch(i){}return r.length?r:"string"==s?t:t+"\0"}function b(t,e){for(var n,r=t+"",s=0;s<r.length;)e[d&s]=d&(n^=19*e[d&s])+r.charCodeAt(s++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(i.seedrandom=p,b(i.random(),s),t.exports){t.exports=p;try{o=n(3)}catch(v){}}else void 0===(r=(function(){return p}).call(e,n,e,t))||(t.exports=r)}([],Math)},pJ6O:function(t,e,n){(function(t){var r;!function(t,s,i){function o(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function l(t,e){var n=new o(t),r=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,r&&("object"==typeof r&&a(r,n),s.state=function(){return a(n,{})}),s}s&&s.exports?s.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(e,n,e,s))||(s.exports=r):this.xorwow=l}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},pLZG:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function s(t,e){return function(n){return n.lift(new i(t,e))}}class i{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.predicate,this.thisArg))}}class o extends r.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}},q8q0:function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("8LU1"),s=n("8Y7J"),i=n("SVse"),o=n("VDRc"),a=n("tHmd"),l=n("GXSh");function u(t,e){}function c(t,e){if(1&t&&(s.Tb(0),s.Fc(1,u,0,0,"ng-template",2),s.Sb()),2&t){s.hc();const t=s.tc(3);s.Eb(1),s.nc("ngTemplateOutlet",t)}}function h(t,e){}function d(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"button",3),s.dc("click",function(){return s.xc(t),s.hc().onClick()}),s.Fc(2,h,0,0,"ng-template",2),s.Ub(),s.Sb()}if(2&t){const t=s.hc(),e=s.tc(3);s.Eb(1),s.Fb("aria-checked",t._selected),s.Eb(1),s.nc("ngTemplateOutlet",e)}}function p(t,e){if(1&t){const t=s.Wb();s.Vb(0,"svg-icon",6),s.dc("click",function(){return s.xc(t),s.hc(2).onClickIcon()}),s.ic(1,"assetUrl"),s.Ub()}2&t&&s.nc("src",s.jc(1,1,"assets/icons/cross.svg"))}function f(t,e){if(1&t&&(s.Vb(0,"div",4),s.Vb(1,"span"),s.Hc(2),s.Ub(),s.Fc(3,p,2,3,"svg-icon",5),s.Ub()),2&t){const t=s.hc();s.Gb("tag-component tag-component-"+t.size),s.Hb("tag-component-secondary",t._secondary)("tag-component-contrast",t._contrast)("selected",t._selected),s.Eb(2),s.Jc(" ",t.tag," "),s.Eb(1),s.nc("ngIf",t.deleteIcon&&!t.asToggleButton)}}let m=(()=>{class t{constructor(){this.tag="",this.deleteIcon=!1,this.size="normal",this.asToggleButton=!1,this.clickIcon=new s.n,this.selectedChange=new s.n,this._secondary=!1,this._contrast=!1,this._selected=!1}get secondary(){return this._secondary}set secondary(t){this._secondary=Object(r.b)(t)}get contrast(){return this._contrast}set contrast(t){this._contrast=Object(r.b)(t)}get selected(){return this._selected}set selected(t){this._selected=Object(r.b)(t)}ngOnInit(){}onClick(){this.selectedChange.emit()}onClickIcon(){this.clickIcon.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Jb({type:t,selectors:[["stf-tag"]],inputs:{tag:"tag",deleteIcon:"deleteIcon",size:"size",asToggleButton:"asToggleButton",secondary:"secondary",contrast:"contrast",selected:"selected"},outputs:{clickIcon:"clickIcon",selectedChange:"selectedChange"},decls:4,vars:2,consts:[[4,"ngIf"],["tagContent",""],[3,"ngTemplateOutlet"],["role","checkbox",3,"click"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","tag-component-icon","fxLayout","row","fxLayoutAlign","start center",3,"src","click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center",1,"tag-component-icon",3,"src","click"]],template:function(t,e){1&t&&(s.Fc(0,c,2,1,"ng-container",0),s.Fc(1,d,3,2,"ng-container",0),s.Fc(2,f,4,10,"ng-template",null,1,s.Gc)),2&t&&(s.nc("ngIf",!e.asToggleButton),s.Eb(1),s.nc("ngIf",e.asToggleButton))},directives:[i.n,i.r,o.d,o.c,a.b],pipes:[l.a],styles:[".tag-component[_ngcontent-%COMP%]{background:var(--stf-primary-lighter);border-radius:5px;max-width:300px;min-height:30px;padding:0 6px;position:relative}.tag-component.selected[_ngcontent-%COMP%]{border:1px solid var(--stf-primary)}.tag-component-icon[_ngcontent-%COMP%]{cursor:pointer}.tag-component-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--stf-primary);background-color:#fff;border:1px solid var(--stf-primary);border-radius:25px;height:auto;position:absolute;right:-4px;top:-4px;width:12px}.tag-component[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--stf-primary);font-size:14px}.tag-component-secondary[_ngcontent-%COMP%]{background:var(--stf-secondary-lighter)}.tag-component-secondary.selected[_ngcontent-%COMP%]{border:1px solid var(--stf-secondary)}.tag-component-secondary.tag-component-contrast[_ngcontent-%COMP%]{background:#e6e6f9}.tag-component-secondary[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--stf-blue);border:1px solid var(--stf-blue)}.tag-component-secondary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--stf-blue)}.tag-component-large[_ngcontent-%COMP%]{min-height:33px;padding:0 12px}.tag-component-large[_ngcontent-%COMP%]   .tag-component-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{right:-4px;top:-8px;width:17px}.tag-component-large[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:var(--stf-font-size-xxlarge)}.tag-component-small[_ngcontent-%COMP%]{border-radius:2px;min-height:20px;padding:0 16px}.tag-component-small[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:var(--stf-font-size-ssmall)}button[_ngcontent-%COMP%]{-webkit-appearance:none;background:transparent;border:none;color:inherit;cursor:pointer;font:inherit;margin:0;padding:0;width:auto}"]}),t})()},qJj6:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("8Y7J"),s=n("3hTW"),i=n("e6bL"),o=n("SVse");let a=(()=>{class t{constructor(t,e,n,r){this.enviromentConf=t,this.apiConfig=e,this.platformLocation=n,this.isBrowser=!1,this.config=this.apiConfig.getConfig(),this.staticConf=this.enviromentConf,this.isBrowser=Object(o.w)(r),this.isBrowser&&this.config.backend.posthog_key&&this.config.backend.posthog_host&&i.a.init(this.config.backend.posthog_key,{api_host:this.config.backend.posthog_host,autocapture:!0,capture_pageview:!0})}getRelativeAPI(t){return t.replace(this.config.backend.api,"")}getAPIURL(){return this.config.backend.api}getAppName(){return this.config.backend.app}getRecaptchaKey(){return this.config.backend.siteKey}getEnvironment(){return this.config.backend.sentry_environment}getAnalyticsKey(){return this.config.backend.analytics}getEditorUrl(){var t;return null===(t=this.config.stashify)||void 0===t?void 0:t.editor}getEmailDomain(){var t;return null===(t=this.config.stashify)||void 0===t?void 0:t.email_domain}getSocialLogin(){return this.staticConf.backend.social_login}getBaseAssetUrl(){return this.staticConf.base_asset_url}getAllowdHostsRedirect(){return this.config.backend.allowed_hosts_redirect||[]}getNewApi(){return!!this.staticConf.backend.new_api}getOAuthLogin(){return!!this.staticConf.backend.oauth_login}getSAMLLogin(){return!!this.config.backend.saml_login}getLocales(){return this.staticConf.locales||[]}getVersion(){return this.config.version}}return t.\u0275fac=function(e){return new(e||t)(r.Zb("staticEnviromentConfiguration"),r.Zb(s.a),r.Zb(o.t),r.Zb(r.C))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),s=n("XoHu"),i=n("n6bG");const o=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:u,_subscriptions:c}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(i.a)(u)){a&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){e=h instanceof o?l(h.errors):[h]}}if(Object(r.a)(c)){let t=-1,n=c.length;for(;++t<n;){const n=c[t];if(Object(s.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(l(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function l(t){return t.reduce((t,e)=>t.concat(e instanceof o?e.errors:e),[])}},rJgo:function(t,e,n){"use strict";n.d(e,"a",function(){return W}),n.d(e,"b",function(){return Y}),n.d(e,"c",function(){return Z});var r=n("YEUz"),s=n("8LU1"),i=n("Ht+U"),o=n("8Y7J"),a=n("XNiG"),l=n("quSY"),u=n("VRyK"),c=n("LRne"),h=n("7Hc7"),d=n("JX91"),p=n("eIep"),f=n("IzEk"),m=n("pLZG"),g=n("1G5W"),b=n("D0XW"),y=n("7o/Q"),v=n("WMd4");function _(t,e=b.a){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new w(r,e))}class w{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new x(t,this.delay,this.scheduler))}}class x extends y.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,s=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(s);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(x.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new k(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(v.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(v.a.createComplete()),this.unsubscribe()}}class k{constructor(t,e){this.time=t,this.notification=e}}var S=n("GS7A"),C=n("1z/I"),I=n("SVse"),E=n("UhP/"),O=n("1O3W"),T=n("SCoL"),N=n("7KAL"),A=n("9gLZ");const R=["mat-menu-item",""],F=["*"];function D(t,e){if(1&t){const t=o.Wb();o.Vb(0,"div",0),o.dc("keydown",function(e){return o.xc(t),o.hc()._handleKeydown(e)})("click",function(){return o.xc(t),o.hc().closed.emit("click")})("@transformMenu.start",function(e){return o.xc(t),o.hc()._onAnimationStart(e)})("@transformMenu.done",function(e){return o.xc(t),o.hc()._onAnimationDone(e)}),o.Vb(1,"div",1),o.lc(2),o.Ub(),o.Ub()}if(2&t){const t=o.hc();o.nc("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),o.Fb("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const P={transformMenu:Object(S.p)("transformMenu",[Object(S.m)("void",Object(S.n)({opacity:0,transform:"scale(0.8)"})),Object(S.o)("void => enter",Object(S.e)("120ms cubic-bezier(0, 0, 0.2, 1)",Object(S.n)({opacity:1,transform:"scale(1)"}))),Object(S.o)("* => void",Object(S.e)("100ms 25ms linear",Object(S.n)({opacity:0})))]),fadeInItems:Object(S.p)("fadeInItems",[Object(S.m)("showing",Object(S.n)({opacity:1})),Object(S.o)("void => *",[Object(S.n)({opacity:0}),Object(S.e)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},$=new o.r("MatMenuContent"),M=new o.r("MAT_MENU_PANEL");class L{}const j=Object(E.e)(Object(E.f)(L));let z=(()=>{class t extends j{constructor(t,e,n,r){super(),this._elementRef=t,this._focusMonitor=n,this._parentMenu=r,this.role="menuitem",this._hovered=new a.a,this._focused=new a.a,this._highlighted=!1,this._triggersSubmenu=!1,r&&r.addItem&&r.addItem(this)}focus(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t,e;const n=this._elementRef.nativeElement.cloneNode(!0),r=n.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<r.length;s++){const e=r[s];null===(t=e.parentNode)||void 0===t||t.removeChild(e)}return(null===(e=n.textContent)||void 0===e?void 0:e.trim())||""}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(o.l),o.Pb(I.d),o.Pb(r.d),o.Pb(M,8))},t.\u0275cmp=o.Jb({type:t,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,e){1&t&&o.dc("click",function(t){return e._checkDisabled(t)})("mouseenter",function(){return e._handleMouseEnter()}),2&t&&(o.Fb("role",e.role)("tabindex",e._getTabIndex())("aria-disabled",e.disabled.toString())("disabled",e.disabled||null),o.Hb("mat-menu-item",!0)("mat-menu-item-highlighted",e._highlighted)("mat-menu-item-submenu-trigger",e._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[o.Bb],attrs:R,ngContentSelectors:F,decls:2,vars:2,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"]],template:function(t,e){1&t&&(o.mc(),o.lc(0),o.Qb(1,"div",0)),2&t&&(o.Eb(1),o.nc("matRippleDisabled",e.disableRipple||e.disabled)("matRippleTrigger",e._getHostElement()))},directives:[E.b],encapsulation:2,changeDetection:0}),t})();const B=new o.r("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let V=0,U=(()=>{class t{constructor(t,e,n){this._elementRef=t,this._ngZone=e,this._defaultOptions=n,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new o.E,this._tabSubscription=l.a.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new a.a,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new o.n,this.close=this.closed,this.panelId="mat-menu-panel-"+V++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Object(s.b)(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Object(s.b)(t)}set panelClass(t){const e=this._previousPanelClass;e&&e.length&&e.split(" ").forEach(t=>{this._classList[t]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(t=>{this._classList[t]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new r.c(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Object(d.a)(this._directDescendantItems),Object(p.a)(t=>Object(u.a)(...t.map(t=>t._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Object(d.a)(this._directDescendantItems),Object(p.a)(t=>Object(u.a)(...t.map(t=>t._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const e=t.keyCode,n=this._keyManager;switch(e){case i.e:Object(i.o)(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case i.g:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case i.i:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:e!==i.l&&e!==i.b||n.setFocusOrigin("keyboard"),n.onKeydown(t)}}focusFirstItem(t="program"){this.lazyContent?this._ngZone.onStable.pipe(Object(f.a)(1)).subscribe(()=>this._focusFirstItem(t)):this._focusFirstItem(t)}_focusFirstItem(t){const e=this._keyManager;if(e.setFocusOrigin(t).setFirstItemActive(),!e.activeItem&&this._directDescendantItems.length){let t=this._directDescendantItems.first._getHostElement().parentElement;for(;t;){if("menu"===t.getAttribute("role")){t.focus();break}t=t.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const e=`mat-elevation-z${Math.min(4+t,24)}`,n=Object.keys(this._classList).find(t=>t.startsWith("mat-elevation-z"));n&&n!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[e]=!0,this._previousElevation=e)}setPositionClasses(t=this.xPosition,e=this.yPosition){const n=this._classList;n["mat-menu-before"]="before"===t,n["mat-menu-after"]="after"===t,n["mat-menu-above"]="above"===e,n["mat-menu-below"]="below"===e}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Object(d.a)(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(t=>t._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(o.l),o.Pb(o.A),o.Pb(B))},t.\u0275dir=o.Kb({type:t,contentQueries:function(t,e,n){if(1&t&&(o.Ib(n,$,1),o.Ib(n,z,1),o.Ib(n,z,0)),2&t){let t;o.sc(t=o.ec())&&(e.lazyContent=t.first),o.sc(t=o.ec())&&(e._allItems=t),o.sc(t=o.ec())&&(e.items=t)}},viewQuery:function(t,e){if(1&t&&o.Lc(o.N,1),2&t){let t;o.sc(t=o.ec())&&(e.templateRef=t.first)}},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),t})(),W=(()=>{class t extends U{constructor(t,e,n){super(t,e,n)}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(o.l),o.Pb(o.A),o.Pb(B))},t.\u0275cmp=o.Jb({type:t,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,e){2&t&&o.Fb("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[o.Db([{provide:M,useExisting:t}]),o.Bb],ngContentSelectors:F,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,e){1&t&&(o.mc(),o.Fc(0,D,3,6,"ng-template"))},directives:[I.l],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:"";display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[P.transformMenu,P.fadeInItems]},changeDetection:0}),t})();const H=new o.r("mat-menu-scroll-strategy"),G={provide:H,deps:[O.a],useFactory:function(t){return()=>t.scrollStrategies.reposition()}},q=Object(T.e)({passive:!0});let Z=(()=>{class t{constructor(t,e,n,s,i,a,u,c){this._overlay=t,this._element=e,this._viewContainerRef=n,this._menuItemInstance=a,this._dir=u,this._focusMonitor=c,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=l.a.EMPTY,this._hoverSubscription=l.a.EMPTY,this._menuCloseSubscription=l.a.EMPTY,this._handleTouchStart=t=>{Object(r.h)(t)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new o.n,this.onMenuOpen=this.menuOpened,this.menuClosed=new o.n,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=i instanceof U?i:void 0,e.nativeElement.addEventListener("touchstart",this._handleTouchStart,q),a&&(a._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(t=>{this._destroyMenu(t),"click"!==t&&"tab"!==t||!this._parentMaterialMenu||this._parentMaterialMenu.closed.emit(t)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,q),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),e=t.getConfig();this._setPosition(e.positionStrategy),e.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof U&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,e):this._element.nativeElement.focus(e)}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const e=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),!this.restoreFocus||"keydown"!==t&&this._openedBy&&this.triggersSubmenu()||this.focus(this._openedBy),this._openedBy=void 0,e instanceof U?(e._resetAnimation(),e.lazyContent?e._animationDone.pipe(Object(m.a)(t=>"void"===t.toState),Object(f.a)(1),Object(g.a)(e.lazyContent._attached)).subscribe({next:()=>e.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),e.lazyContent&&e.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,e=this.menu.parentMenu;for(;e;)t++,e=e.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new O.b({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(t=>{this.menu.setPositionClasses("start"===t.connectionPair.overlayX?"after":"before","top"===t.connectionPair.overlayY?"below":"above")})}_setPosition(t){let[e,n]="before"===this.menu.xPosition?["end","start"]:["start","end"],[r,s]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[i,o]=[r,s],[a,l]=[e,n],u=0;this.triggersSubmenu()?(l=e="before"===this.menu.xPosition?"start":"end",n=a="end"===e?"start":"end",u="bottom"===r?8:-8):this.menu.overlapTrigger||(i="top"===r?"bottom":"top",o="top"===s?"bottom":"top"),t.withPositions([{originX:e,originY:i,overlayX:a,overlayY:r,offsetY:u},{originX:n,originY:i,overlayX:l,overlayY:r,offsetY:u},{originX:e,originY:o,overlayX:a,overlayY:s,offsetY:-u},{originX:n,originY:o,overlayX:l,overlayY:s,offsetY:-u}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),e=this._overlayRef.detachments(),n=this._parentMaterialMenu?this._parentMaterialMenu.closed:Object(c.a)(),r=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Object(m.a)(t=>t!==this._menuItemInstance),Object(m.a)(()=>this._menuOpen)):Object(c.a)();return Object(u.a)(t,n,r,e)}_handleMousedown(t){Object(r.g)(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const e=t.keyCode;e!==i.d&&e!==i.j||(this._openedBy="keyboard"),this.triggersSubmenu()&&(e===i.i&&"ltr"===this.dir||e===i.g&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Object(m.a)(t=>t===this._menuItemInstance&&!t.disabled),_(0,h.a)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof U&&this.menu._isAnimating?this.menu._animationDone.pipe(Object(f.a)(1),_(0,h.a),Object(g.a)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return this._portal&&this._portal.templateRef===this.menu.templateRef||(this._portal=new C.f(this.menu.templateRef,this._viewContainerRef)),this._portal}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(O.a),o.Pb(o.l),o.Pb(o.R),o.Pb(H),o.Pb(M,8),o.Pb(z,10),o.Pb(A.b,8),o.Pb(r.d))},t.\u0275dir=o.Kb({type:t,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:["aria-haspopup","true",1,"mat-menu-trigger"],hostVars:2,hostBindings:function(t,e){1&t&&o.dc("mousedown",function(t){return e._handleMousedown(t)})("keydown",function(t){return e._handleKeydown(t)})("click",function(t){return e._handleClick(t)}),2&t&&o.Fb("aria-expanded",e.menuOpen||null)("aria-controls",e.menuOpen?e.menu.panelId:null)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]}),t})(),K=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Nb({type:t}),t.\u0275inj=o.Mb({providers:[G],imports:[E.a]}),t})(),Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Nb({type:t}),t.\u0275inj=o.Mb({providers:[G],imports:[[I.c,E.a,E.c,O.d,K],N.b,E.a,K]}),t})()},s7LF:function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return O}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return It}),n.d(e,"e",function(){return dt}),n.d(e,"f",function(){return ct}),n.d(e,"g",function(){return St}),n.d(e,"h",function(){return m}),n.d(e,"i",function(){return u}),n.d(e,"j",function(){return R}),n.d(e,"k",function(){return F}),n.d(e,"l",function(){return it}),n.d(e,"m",function(){return gt}),n.d(e,"n",function(){return Ct}),n.d(e,"o",function(){return xt}),n.d(e,"p",function(){return ot}),n.d(e,"q",function(){return _t});var r=n("8Y7J"),s=n("SVse"),i=n("Cfvw"),o=n("cp0P"),a=n("lJxs");class l{}const u=new r.r("NgValueAccessor"),c={provide:u,useExisting:Object(r.X)(()=>h),multi:!0};let h=(()=>{class t extends l{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.F),r.Pb(r.l))},t.\u0275dir=r.Kb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.dc("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.Db([c]),r.Bb]}),t})();const d={provide:u,useExisting:Object(r.X)(()=>f),multi:!0},p=new r.r("CompositionEventMode");let f=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Object(s.A)()?Object(s.A)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.F),r.Pb(r.l),r.Pb(p,8))},t.\u0275dir=r.Kb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.dc("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.Db([d])]}),t})();const m=new r.r("NgValidators"),g=new r.r("NgAsyncValidators");function b(t){return null!=t}function y(t){const e=Object(r.vb)(t)?Object(i.a)(t):t;return Object(r.ub)(e),e}function v(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function _(t,e){return e.map(e=>e(t))}function w(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function x(t){return null!=t?function(t){if(!t)return null;const e=t.filter(b);return 0==e.length?null:function(t){return v(_(t,e))}}(w(t)):null}function k(t){return null!=t?function(t){if(!t)return null;const e=t.filter(b);return 0==e.length?null:function(t){const n=_(t,e).map(y);return Object(o.a)(n).pipe(Object(a.a)(v))}}(w(t)):null}function S(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function C(t){return t._rawValidators}function I(t){return t._rawAsyncValidators}let E=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=x(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=k(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Kb({type:t}),t})(),O=(()=>{class t extends E{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return T(e||t)},t.\u0275dir=r.Kb({type:t,features:[r.Bb]}),t})();const T=r.Xb(O);class N extends E{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class A{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let R=(()=>{class t extends A{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(N,2))},t.\u0275dir=r.Kb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Hb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.Bb]}),t})(),F=(()=>{class t extends A{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(O,10))},t.\u0275dir=r.Kb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Hb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.Bb]}),t})();function D(t,e){return[...e.path,t]}function P(t,e){L(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&z(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&z(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function $(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),j(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function M(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function L(t,e,n){const r=C(t);null!==e.validator?t.setValidators(S(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const s=I(t);if(null!==e.asyncValidator?t.setAsyncValidators(S(s,e.asyncValidator)):"function"==typeof s&&t.setAsyncValidators([s]),n){const n=()=>t.updateValueAndValidity();M(e._rawValidators,n),M(e._rawAsyncValidators,n)}}function j(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=C(t);if(Array.isArray(n)&&n.length>0){const s=n.filter(t=>t!==e.validator);s.length!==n.length&&(r=!0,t.setValidators(s))}}if(null!==e.asyncValidator){const n=I(t);if(Array.isArray(n)&&n.length>0){const s=n.filter(t=>t!==e.asyncValidator);s.length!==n.length&&(r=!0,t.setAsyncValidators(s))}}}if(n){const t=()=>{};M(e._rawValidators,t),M(e._rawAsyncValidators,t)}return r}function z(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function B(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function V(t,e){if(!e)return null;let n,r,s;return Array.isArray(e),e.forEach(t=>{t.constructor===f?n=t:Object.getPrototypeOf(t.constructor)===l?r=t:s=t}),s||r||n||null}function U(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const W="VALID",H="INVALID",G="PENDING",q="DISABLED";function Z(t){return(J(t)?t.validators:t)||null}function K(t){return Array.isArray(t)?x(t):t||null}function Y(t,e){return(J(e)?e.asyncValidators:t)||null}function X(t){return Array.isArray(t)?k(t):t||null}function J(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Q{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=K(this._rawValidators),this._composedAsyncValidatorFn=X(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===W}get invalid(){return this.status===H}get pending(){return this.status==G}get disabled(){return this.status===q}get enabled(){return this.status!==q}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=K(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=X(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=G,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=q,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=W,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==W&&this.status!==G||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?q:W}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=G,this._hasOwnPendingAsyncValidator=!0;const e=y(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof et?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof nt&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?q:this.errors?H:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(G)?G:this._anyControlsHaveStatus(H)?H:W}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){J(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class tt extends Q{constructor(t=null,e,n){super(Z(e),Y(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){U(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){U(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class et extends Q{constructor(t,e,n){super(Z(e),Y(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof tt?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class nt extends Q{constructor(t,e,n){super(Z(e),Y(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof tt?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const rt={provide:N,useExisting:Object(r.X)(()=>it)},st=(()=>Promise.resolve(null))();let it=(()=>{class t extends N{constructor(t,e,n,s){super(),this.control=new tt,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=V(0,s)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),B(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?D(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){P(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){st.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;st.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(O,9),r.Pb(m,10),r.Pb(g,10),r.Pb(u,10))},t.\u0275dir=r.Kb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.Db([rt]),r.Bb,r.Cb]}),t})(),ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Kb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),at=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})();const lt=new r.r("NgModelWithFormControlWarning"),ut={provide:O,useExisting:Object(r.X)(()=>ct)};let ct=(()=>{class t extends O{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(j(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return P(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){$(t.control||null,t,!1),U(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&($(e||null,t),n instanceof tt&&(P(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){L(t,e,!1)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return j(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){L(this.form,this,!1),this._oldForm&&j(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(m,10),r.Pb(g,10))},t.\u0275dir=r.Kb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.dc("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.Db([ut]),r.Bb,r.Cb]}),t})();const ht={provide:N,useExisting:Object(r.X)(()=>dt)};let dt=(()=>{class t extends N{constructor(t,e,n,s,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=V(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),B(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return D(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(O,13),r.Pb(m,10),r.Pb(g,10),r.Pb(u,10),r.Pb(lt,8))},t.\u0275dir=r.Kb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.Db([ht]),r.Bb,r.Cb]}),t._ngModelWarningSentOnce=!1,t})();const pt={provide:u,useExisting:Object(r.X)(()=>mt),multi:!0};function ft(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let mt=(()=>{class t extends l{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=ft(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.F),r.Pb(r.l))},t.\u0275dir=r.Kb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.dc("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.Db([pt]),r.Bb]}),t})(),gt=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(ft(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.F),r.Pb(mt,9))},t.\u0275dir=r.Kb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const bt={provide:u,useExisting:Object(r.X)(()=>vt),multi:!0};function yt(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let vt=(()=>{class t extends l{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),s=this._getOptionValue(r.value);n.push(s)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.F),r.Pb(r.l))},t.\u0275dir=r.Kb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.dc("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.Db([bt]),r.Bb]}),t})(),_t=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(yt(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(yt(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.F),r.Pb(vt,9))},t.\u0275dir=r.Kb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const wt={provide:m,useExisting:Object(r.X)(()=>xt),multi:!0};let xt=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(t){return null==(e=t.value)||0===e.length?{required:!0}:null;var e}(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Kb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.Fb("required",e.required?"":null)},inputs:{required:"required"},features:[r.Db([wt])]}),t})(),kt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[at]]}),t})(),St=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[kt]}),t})(),Ct=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:lt,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[kt]}),t})(),It=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,s=null,i=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(s=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(s=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new et(n,{asyncValidators:i,updateOn:r,validators:s})}control(t,e,n){return new tt(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new nt(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof tt||t instanceof et||t instanceof nt?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Lb)({factory:function(){return new t},token:t,providedIn:Ct}),t})()},t8gH:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("+zAX"),s=n("8Y7J");let i=(()=>{class t{constructor(t){this.config=t}transform(t){return(this.config.getBaseAssetUrl()||"")+t}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(r.a))},t.\u0275pipe=s.Ob({name:"assetUrl",type:t,pure:!0}),t})()},tHmd:function(t,e,n){"use strict";n.d(e,"a",function(){return _}),n.d(e,"b",function(){return v});var r=n("8Y7J"),s=n("SVse"),i=n("LRne"),o=n("z6cu"),a=n("lJxs"),l=n("vkgz"),u=n("JIr8"),c=n("nYR2"),h=n("w1tV"),d=n("IheW");const p=["*"];class f{}let m=(()=>{class t extends f{constructor(t){super(),this.http=t}getSvg(t){return this.http.get(t,{responseType:"text"})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(d.a))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const g=new r.r("SERVER_URL");let b=(()=>{class t{constructor(t,e,n,r){this.loader=t,this.platformId=e,this.serverUrl=n,this._document=r,this.iconsByUrl=new Map,this.iconsLoadingByUrl=new Map,this.document=this._document}addSvg(t,e){if(!this.iconsByUrl.has(t)){const n=this.document.createElement("DIV");n.innerHTML=e;const r=n.querySelector("svg");this.iconsByUrl.set(t,r)}}loadSvg(t,e=t){if(this.serverUrl&&null===t.match(/^(http(s)?):/)&&(e=t=this.serverUrl+t),this.iconsByUrl.has(e))return Object(i.a)(this.iconsByUrl.get(e));if(this.iconsLoadingByUrl.has(e))return this.iconsLoadingByUrl.get(e);const n=this.loader.getSvg(t).pipe(Object(a.a)(t=>{const e=this.document.createElement("DIV");return e.innerHTML=t,e.querySelector("svg")}),Object(l.a)(t=>this.iconsByUrl.set(e,t)),Object(u.a)(t=>(console.error(t),Object(o.a)(t))),Object(c.a)(()=>this.iconsLoadingByUrl.delete(e)),Object(h.a)());return this.iconsLoadingByUrl.set(e,n),n}getSvgByName(t){return this.iconsByUrl.has(t)?Object(i.a)(this.iconsByUrl.get(t)):this.iconsLoadingByUrl.has(t)?this.iconsLoadingByUrl.get(t):Object(o.a)(`No svg with name '${t}' has been loaded`)}unloadSvg(t){this.iconsByUrl.has(t)&&this.iconsByUrl.delete(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(f),r.Zb(r.C),r.Zb(g,8),r.Zb(s.d,8))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const y={provide:b,deps:[[new r.B,new r.L,b],f,[r.C],[new r.B,g],[new r.B,s.d]],useFactory:function(t,e,n,r,s){return t||new b(e,n,r,s)}};let v=(()=>{class t{constructor(t,e,n,r,s){this.element=t,this.differs=e,this.renderer=n,this.iconReg=r,this.cdr=s,this.stretch=!1,this.applyClass=!1,this.applyCss=!1,this.loaded=!1}set svgStyle(t){this._svgStyle=t,!this.differ&&t&&(this.differ=this.differs.find(t).create())}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}ngOnChanges(t){const e=this.element.nativeElement.firstChild;(t.src||t.name)&&(this.loaded&&this.destroy(),this.init()),t.stretch&&this.stylize(),t.applyClass&&(this.applyClass?this.setClass(e,null,this.klass):this.setClass(e,this.klass,null)),t.svgClass&&this.setClass(e,t.svgClass.previousValue,t.svgClass.currentValue),t.klass&&(this.setClass(this.element.nativeElement,t.klass.previousValue,t.klass.currentValue),this.setClass(e,t.klass.previousValue,this.applyClass?t.klass.currentValue:null)),t.viewBox&&(this.loaded&&this.destroy(),this.init()),t.applyCss&&(console.warn("applyCss deprecated since 9.1.0, will be removed in 10.0.0"),console.warn("use applyClass instead")),t.svgAriaLabel&&this.doAria(t.svgAriaLabel.currentValue)}ngDoCheck(){if(this.svg&&this.differ){const t=this.differ.diff(this._svgStyle);t&&this.applyChanges(t)}}init(){this.name?this.icnSub=this.iconReg.getSvgByName(this.name).subscribe(this.initSvg.bind(this)):this.src?this.icnSub=this.iconReg.loadSvg(this.src).subscribe(this.initSvg.bind(this)):(this.element.nativeElement.innerHTML="",this.cdr.markForCheck())}initSvg(t){this.loaded||(this.setSvg(t),this.resetDiffer())}destroy(){this.svg=void 0,this.differ=void 0,this.loaded=!1,this.icnSub&&this.icnSub.unsubscribe()}resetDiffer(){this._svgStyle&&!this.differ&&(this.differ=this.differs.find(this._svgStyle).create())}setSvg(t){if(!this.loaded&&t){this.svg=t;const e=t.cloneNode(!0),n=this.element.nativeElement;if(n.innerHTML="",this.renderer.appendChild(n,e),this.loaded=!0,this.copyNgContentAttribute(n,e),this.klass&&this.applyClass&&this.setClass(n.firstChild,null,this.klass),this.svgClass&&this.setClass(n.firstChild,null,this.svgClass),this.viewBox)if("auto"===this.viewBox){const t=e.getAttribute("width"),n=e.getAttribute("height");n&&t&&(this.renderer.setAttribute(e,"viewBox",`0 0 ${t} ${n}`),this.renderer.removeAttribute(e,"width"),this.renderer.removeAttribute(e,"height"))}else""!==this.viewBox&&(this.renderer.setAttribute(e,"viewBox",this.viewBox),this.renderer.removeAttribute(e,"width"),this.renderer.removeAttribute(e,"height"));this.stylize(),void 0===this.svgAriaLabel&&n.firstChild.hasAttribute("aria-label")||this.doAria(this.svgAriaLabel||""),this.cdr.markForCheck()}}copyNgContentAttribute(t,e){const n=t.attributes,r=n.length;for(let s=0;s<r;s+=1){const t=n.item(s);if(t.name.startsWith("_ngcontent")){this.setNgContentAttribute(e,t.name);break}}}setNgContentAttribute(t,e){this.renderer.setAttribute(t,e,"");const n=t.childNodes.length;for(let r=0;r<n;r+=1){const n=t.childNodes[r];n instanceof Element&&this.setNgContentAttribute(n,e)}}stylize(){if(this.svg){const t=this.element.nativeElement.firstChild;!0===this.stretch?this.renderer.setAttribute(t,"preserveAspectRatio","none"):!1===this.stretch&&this.renderer.removeAttribute(t,"preserveAspectRatio")}}applyChanges(t){t.forEachRemovedItem(t=>this.setStyle(t.key,null)),t.forEachAddedItem(t=>this.setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this.setStyle(t.key,t.currentValue))}setStyle(t,e){const[n,r]=t.split("."),s=this.element.nativeElement.firstChild;null!==(e=null!==e&&r?`${e}${r}`:e)?this.renderer.setStyle(s,n,e):this.renderer.removeStyle(s,n)}setClass(t,e,n){if(t){if(e){const n=Array.isArray(e)?e:e.split(" ");for(const e of n)this.renderer.removeClass(t,e)}if(n){const e=Array.isArray(n)?n:n.split(" ");for(const n of e)this.renderer.addClass(t,n)}}}doAria(t){const e=this.element.nativeElement.firstChild;e&&(""===t?(this.renderer.setAttribute(e,"aria-hidden","true"),this.renderer.removeAttribute(e,"aria-label")):(this.renderer.removeAttribute(e,"aria-hidden"),this.renderer.setAttribute(e,"aria-label",t)))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.u),r.Pb(r.F),r.Pb(b),r.Pb(r.h))},t.\u0275cmp=r.Jb({type:t,selectors:[["svg-icon"]],inputs:{stretch:"stretch",applyClass:"applyClass",applyCss:"applyCss",svgStyle:"svgStyle",src:"src",name:"name",svgClass:"svgClass",klass:["class","klass"],viewBox:"viewBox",svgAriaLabel:"svgAriaLabel"},features:[r.Cb],ngContentSelectors:p,decls:1,vars:0,template:function(t,e){1&t&&(r.mc(),r.lc(0))},encapsulation:2}),t})(),_=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[y,e.loader||{provide:f,useClass:m}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[s.c]]}),t})()},u93l:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("8Y7J");let s=(()=>{class t{transform(t,e=!1){return null==t?t:e?t.trim().replace(/<n>|<br>|<br\/>/g," "):t.trim().replace(/<n>/g," ")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Ob({name:"sanitizeTags",type:t,pure:!0}),t})()},u9T3:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("8Y7J"),s=n("SVse"),i=n("/q54"),o=n("ura0"),a=n("VDRc");n("8LU1"),new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map;let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[i.c]]}),t})();new r.Q("11.0.0-beta.33");let u=(()=>{class t{constructor(t,e){Object(s.x)(e)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,n=[]){return{ngModule:t,providers:e.serverLoaded?[{provide:i.e,useValue:Object.assign(Object.assign({},i.d),e)},{provide:i.a,useValue:n,multi:!0},{provide:i.h,useValue:!0}]:[{provide:i.e,useValue:Object.assign(Object.assign({},i.d),e)},{provide:i.a,useValue:n,multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(i.h),r.Zb(r.C))},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[a.f,o.c,l],a.f,o.c,l]}),t})()},uDSp:function(t,e,n){"use strict";n.r(e);var r=n("cUpR"),s=n("8Y7J"),i=n("SVse"),o=n("omvX"),a=n("IheW"),l=n("jtHE"),u=n("VRyK"),c=n("eIep"),h=n("lJxs");const d={schedule(t,e){const n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if("undefined"==typeof window)return d.schedule(t,0);if(void 0===window.requestAnimationFrame)return d.schedule(t,16);const e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};let p;function f(t,e,n){let r=n;return function(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}(t)&&e.some((e,n)=>!("*"===e||!function(t,e){if(!p){const t=Element.prototype;p=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&p.call(t,e)}(t,e)||(r=n,0))),r}class m{constructor(t,e){this.componentFactory=e.get(s.j).resolveComponentFactory(t)}create(t){return new g(this.componentFactory,t)}}class g{constructor(t,e){this.componentFactory=t,this.injector=e,this.eventEmitters=new l.a(1),this.events=this.eventEmitters.pipe(Object(c.a)(t=>Object(u.a)(...t))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:t})=>t)),this.ngZone=this.injector.get(s.A),this.elementZone="undefined"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(t){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(t)})}disconnect(){this.runInZone(()=>{null!==this.componentRef&&null===this.scheduledDestroyFn&&(this.scheduledDestroyFn=d.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(t){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(t):this.componentRef.instance[t])}setInputValue(t,e){this.runInZone(()=>{var n,r;null!==this.componentRef?((n=e)!==(r=this.getInputValue(t))&&(n==n||r==r)||void 0===e&&this.unchangedInputs.has(t))&&(this.recordInputChange(t,e),this.unchangedInputs.delete(t),this.hasInputChanges=!0,this.componentRef.instance[t]=e,this.scheduleDetectChanges()):this.initialInputValues.set(t,e)})}initializeComponent(t){const e=s.s.create({providers:[],parent:this.injector}),n=function(t,e){const n=t.childNodes,r=e.map(()=>[]);let s=-1;e.some((t,e)=>"*"===t&&(s=e,!0));for(let i=0,o=n.length;i<o;++i){const t=n[i],o=f(t,e,s);-1!==o&&r[o].push(t)}return r}(t,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(e,n,t),this.viewChangeDetectorRef=this.componentRef.injector.get(s.h),this.implementsOnChanges="function"==typeof this.componentRef.instance.ngOnChanges,this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(s.g).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:t})=>{this.initialInputValues.has(t)&&this.setInputValue(t,this.initialInputValues.get(t))}),this.initialInputValues.clear()}initializeOutputs(t){const e=this.componentFactory.outputs.map(({propName:e,templateName:n})=>t.instance[e].pipe(Object(h.a)(t=>({name:n,value:t}))));this.eventEmitters.next(e)}callNgOnChanges(t){if(!this.implementsOnChanges||null===this.inputChanges)return;const e=this.inputChanges;this.inputChanges=null,t.instance.ngOnChanges(e)}markViewForCheck(t){this.hasInputChanges&&(this.hasInputChanges=!1,t.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=d.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(t,e){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const n=this.inputChanges[t];if(n)return void(n.currentValue=e);const r=this.unchangedInputs.has(t),i=r?void 0:this.getInputValue(t);this.inputChanges[t]=new s.K(i,e,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(t){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(t):t()}}class b extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}new s.Q("11.2.12");var y=n("TSSN");class v{constructor(t,e="/assets/i18n/",n=".json"){this.http=t,this.prefix=e,this.suffix=n}getTranslation(t){return this.http.get(`${this.prefix}${t}${this.suffix}`)}}var _=n("e4Wq"),w=n("tHmd"),x=n("u9T3"),k=n("UhP/"),S=n("8LU1"),C=n("SCoL");function I(t,e){if(1&t&&(s.gc(),s.Qb(0,"circle",3)),2&t){const t=s.hc();s.Cc("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),s.Fb("r",t._getCircleRadius())}}function E(t,e){if(1&t&&(s.gc(),s.Qb(0,"circle",3)),2&t){const t=s.hc();s.Cc("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),s.Fb("r",t._getCircleRadius())}}function O(t,e){if(1&t&&(s.gc(),s.Qb(0,"circle",3)),2&t){const t=s.hc();s.Cc("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),s.Fb("r",t._getCircleRadius())}}function T(t,e){if(1&t&&(s.gc(),s.Qb(0,"circle",3)),2&t){const t=s.hc();s.Cc("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),s.Fb("r",t._getCircleRadius())}}const N=".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n";class A{constructor(t){this._elementRef=t}}const R=Object(k.d)(A,"primary"),F=new s.r("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});let D=(()=>{class t extends R{constructor(e,n,r,s,i){super(e),this._elementRef=e,this._document=r,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const o=t._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),o.has(r.head)||o.set(r.head,new Set([100])),this._fallbackAnimation=n.EDGE||n.TRIDENT,this._noopAnimations="NoopAnimations"===s&&!!i&&!i._forceAnimations,i&&(i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=Object(S.e)(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Object(S.e)(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Object(S.e)(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=Object(C.c)(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const e=this._styleRoot,n=this._diameter,r=t._diameters;let s=r.get(e);if(!s||!s.has(n)){const t=this._document.createElement("style");t.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),t.textContent=this._getAnimationText(),e.appendChild(t),s||(s=new Set,r.set(e,s)),s.add(n)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(s.l),s.Pb(C.a),s.Pb(i.d,8),s.Pb(o.a,8),s.Pb(F))},t.\u0275cmp=s.Jb({type:t,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(s.Fb("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),s.Cc("width",e.diameter,"px")("height",e.diameter,"px"),s.Hb("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[s.Bb],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(s.gc(),s.Vb(0,"svg",0),s.Fc(1,I,1,9,"circle",1),s.Fc(2,E,1,7,"circle",2),s.Ub()),2&t&&(s.Cc("width",e.diameter,"px")("height",e.diameter,"px"),s.nc("ngSwitch","indeterminate"===e.mode),s.Fb("viewBox",e._getViewBox()),s.Eb(1),s.nc("ngSwitchCase",!0),s.Eb(1),s.nc("ngSwitchCase",!1))},directives:[i.p,i.q],styles:[N],encapsulation:2,changeDetection:0}),t._diameters=new WeakMap,t})(),P=(()=>{class t extends D{constructor(t,e,n,r,s){super(t,e,n,r,s),this.mode="indeterminate"}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(s.l),s.Pb(C.a),s.Pb(i.d,8),s.Pb(o.a,8),s.Pb(F))},t.\u0275cmp=s.Jb({type:t,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(t,e){2&t&&(s.Cc("width",e.diameter,"px")("height",e.diameter,"px"),s.Hb("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color"},features:[s.Bb],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(s.gc(),s.Vb(0,"svg",0),s.Fc(1,O,1,9,"circle",1),s.Fc(2,T,1,7,"circle",2),s.Ub()),2&t&&(s.Cc("width",e.diameter,"px")("height",e.diameter,"px"),s.nc("ngSwitch","indeterminate"===e.mode),s.Fb("viewBox",e._getViewBox()),s.Eb(1),s.nc("ngSwitchCase",!0),s.Eb(1),s.nc("ngSwitchCase",!1))},directives:[i.p,i.q],styles:[N],encapsulation:2,changeDetection:0}),t})(),$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({imports:[[k.a,i.c],k.a]}),t})();var M=n("Oh6u"),L=n("QpMS");const j={production:!0,backend:{sentry_url:"",sentry_backends:[""],social_login:!1},base_asset_url:"https://demo.nuclia.io/"};var z=n("fwsW"),B=n("XNiG");let V=(()=>{class t extends i.j{constructor(){super(),this.internalBaseHref="/",this.internalPath="/",this.internalTitle="",this.urlChanges=[],this._subject=new s.n,this.stateChanges=[]}simulatePopState(t){this.internalPath=t,this._subject.emit(new U(this.path()))}path(t=!1){return this.internalPath}prepareExternalUrl(t){return t.startsWith("/")&&this.internalBaseHref.endsWith("/")?this.internalBaseHref+t.substring(1):this.internalBaseHref+t}pushState(t,e,n,r){this.stateChanges.push(t),this.internalTitle=e;const s=n+(r.length>0?"?"+r:"");this.internalPath=s;const i=this.prepareExternalUrl(s);this.urlChanges.push(i)}replaceState(t,e,n,r){this.stateChanges[(this.stateChanges.length||1)-1]=t,this.internalTitle=e;const s=n+(r.length>0?"?"+r:"");this.internalPath=s;const i=this.prepareExternalUrl(s);this.urlChanges.push("replace: "+i)}onPopState(t){this._subject.subscribe({next:t})}getBaseHref(){return this.internalBaseHref}back(){this.urlChanges.length>0&&(this.urlChanges.pop(),this.stateChanges.pop(),this.simulatePopState(this.urlChanges.length>0?this.urlChanges[this.urlChanges.length-1]:""))}forward(){throw"not implemented"}getState(){return this.stateChanges[(this.stateChanges.length||1)-1]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})();class U{constructor(t){this.newUrl=t,this.pop=!0,this.type="popstate"}}var W=n("gXqq"),H=n("1G5W"),G=n("aTZX"),q=n("iInd");function Z(t,e){1&t&&(s.Vb(0,"div",6),s.Qb(1,"mat-spinner"),s.Ub())}function K(t,e){if(1&t&&(s.Vb(0,"div",3),s.Vb(1,"div",4),s.Qb(2,"router-outlet"),s.Ub(),s.Fc(3,Z,2,0,"div",5),s.Ub()),2&t){const t=s.hc().ngIf;s.Eb(1),s.Cc("display",t.loading?"none":"block"),s.Eb(2),s.nc("ngIf",t.loading)}}function Y(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div",7),s.dc("click",function(){return s.xc(t),s.hc(2).appService.closeModal()}),s.Ub()}}function X(t,e){if(1&t&&(s.Tb(0),s.Fc(1,K,4,3,"div",1),s.Fc(2,Y,1,0,"div",2),s.Sb()),2&t){const t=e.ngIf;s.Eb(1),s.nc("ngIf",t.open),s.Eb(1),s.nc("ngIf",t.open)}}const J=function(t,e){return{loading:t,open:e}};let Q=(()=>{class t{constructor(t){this.appService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(G.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["flaps-modal"]],decls:3,vars:8,consts:[[4,"ngIf"],["class","flaps-search-modal",4,"ngIf"],["class","flaps-search-overlay",3,"click",4,"ngIf"],[1,"flaps-search-modal"],[1,"flaps-search-content"],["class","flaps-search-loading",4,"ngIf"],[1,"flaps-search-loading"],[1,"flaps-search-overlay",3,"click"]],template:function(t,e){1&t&&(s.Fc(0,X,3,2,"ng-container",0),s.ic(1,"async"),s.ic(2,"async")),2&t&&s.nc("ngIf",s.rc(5,J,s.jc(1,1,e.appService.loadingSearch),s.jc(2,3,e.appService.isOpenModal)))},directives:[i.n,q.g,P],pipes:[i.b],styles:[".flaps-search-modal[_ngcontent-%COMP%]{z-index:9999}.flaps-search-modal[_ngcontent-%COMP%], .flaps-search-overlay[_ngcontent-%COMP%]{bottom:0;left:0;position:fixed;right:0;top:0}.flaps-search-overlay[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6);z-index:9998}.flaps-search-content[_ngcontent-%COMP%]{height:100%}.flaps-search-close[_ngcontent-%COMP%]{-webkit-appearance:none;background:transparent;border:none;color:inherit;cursor:pointer;font:inherit;margin:0;padding:0;position:fixed;right:80px;top:80px;width:auto}.flaps-search-loading[_ngcontent-%COMP%]{align-items:center;display:flex;height:100%;justify-content:center;width:100%}"]}),t})();var tt=n("t8gH");let et=(()=>{class t{constructor(){this.clickButton=new s.n}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Jb({type:t,selectors:[["flaps-start-button"]],outputs:{clickButton:"clickButton"},decls:10,vars:6,consts:[[1,"start-button",3,"click"],[1,"start-button-icon",3,"src"],[1,"start-button-container"],[1,"start-button-cta"],[1,"start-button-by"],[1,"start-button-logo",3,"src"]],template:function(t,e){1&t&&(s.Vb(0,"button",0),s.dc("click",function(){return e.clickButton.emit()}),s.Qb(1,"svg-icon",1),s.ic(2,"assetUrl"),s.Vb(3,"span",2),s.Vb(4,"span",3),s.Hc(5,"Find your doc!"),s.Ub(),s.Vb(6,"span",4),s.Hc(7,"by"),s.Ub(),s.Qb(8,"svg-icon",5),s.ic(9,"assetUrl"),s.Ub(),s.Ub()),2&t&&(s.Eb(1),s.nc("src",s.jc(2,2,"assets/icons/lupa.svg")),s.Eb(7),s.nc("src",s.jc(9,4,"assets/logos/logo_text.svg")))},directives:[w.b],pipes:[tt.a],styles:[".start-button[_ngcontent-%COMP%]{-webkit-appearance:none;background:transparent;border:1px solid grey;border-radius:20px;color:inherit;cursor:pointer;font:inherit;font-family:var(--stf-font-family);margin:0;padding:1px 11px 2px;transition:.15s;width:auto}.start-button[_ngcontent-%COMP%]:hover{border-color:var(--stf-primary)}.start-button-container[_ngcontent-%COMP%]{margin:0 18px}.start-button-icon[_ngcontent-%COMP%]{vertical-align:-3px}.start-button-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#000;height:auto;width:13px}.start-button-cta[_ngcontent-%COMP%]{font-size:var(--stf-font-size-ssmall);font-weight:var(--stf-font-weight-bold)}.start-button-by[_ngcontent-%COMP%]{font-size:9px;font-weight:var(--stf-font-weight-light);margin:0 3px}.start-button-logo[_ngcontent-%COMP%]{vertical-align:-3px}.start-button-logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:auto;width:42px}"]}),t})(),nt=(()=>{class t{constructor(){this.clickButton=new s.n}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Jb({type:t,selectors:[["flaps-floating-button"]],outputs:{clickButton:"clickButton"},decls:9,vars:3,consts:[[1,"floating-button",3,"click"],[1,"floating-button-logo"],[3,"src"],[1,"floating-button-text"],[1,"floating-button-cta"],[1,"floating-button-by"]],template:function(t,e){1&t&&(s.Vb(0,"button",0),s.dc("click",function(){return e.clickButton.emit()}),s.Vb(1,"div",1),s.Qb(2,"svg-icon",2),s.ic(3,"assetUrl"),s.Ub(),s.Vb(4,"div",3),s.Vb(5,"span",4),s.Hc(6,"Find your doc!"),s.Ub(),s.Vb(7,"span",5),s.Hc(8,"by Nuclia"),s.Ub(),s.Ub(),s.Ub()),2&t&&(s.Eb(2),s.nc("src",s.jc(3,1,"assets/logos/symbol.svg")))},directives:[w.b],pipes:[tt.a],styles:[".floating-button[_ngcontent-%COMP%]{-webkit-appearance:none;background:transparent;border:none;color:inherit;cursor:pointer;font:inherit;left:0;margin:0;padding:0;position:fixed;top:65px;width:auto;z-index:9990}.floating-button-logo[_ngcontent-%COMP%]{background-color:var(--stf-primary);border:1px solid var(--stf-primary);border-bottom-right-radius:20px;border-left:0;border-top-right-radius:20px;height:40px;position:relative;text-align:right;transition:background-color .15s;width:57px;z-index:2}.floating-button-logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:28px;margin:6px 8px 0 0;width:auto}.floating-button-logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff;transition:fill .15s}.floating-button-text[_ngcontent-%COMP%]{font-family:var(--stf-font-family);left:100%;opacity:1;opacity:0;padding-left:12px;position:absolute;top:10px;transform:translateX(-100%);transition:transform .2s,opacity .2s;white-space:nowrap;z-index:1}.floating-button-cta[_ngcontent-%COMP%]{color:#000;font-size:var(--stf-font-size-ssmall);font-weight:var(--stf-font-weight-bold)}.floating-button-by[_ngcontent-%COMP%]{color:grey;font-size:var(--stf-font-size-ssmall);font-weight:var(--stf-font-weight-light);margin-left:5px}.floating-button[_ngcontent-%COMP%]:hover   .floating-button-logo[_ngcontent-%COMP%]{background-color:#fff}.floating-button[_ngcontent-%COMP%]:hover   .floating-button-logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--stf-primary)}.floating-button[_ngcontent-%COMP%]:hover   .floating-button-text[_ngcontent-%COMP%]{opacity:1;transform:translateX(0)}"]}),t})();function rt(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div",1),s.Vb(1,"flaps-start-button",2),s.dc("clickButton",function(){return s.xc(t),s.hc().appService.showInput()}),s.Ub(),s.Ub()}}function st(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div",1),s.Vb(1,"flaps-floating-button",2),s.dc("clickButton",function(){return s.xc(t),s.hc().appService.showInput()}),s.Ub(),s.Ub()}}let it=(()=>{class t{constructor(t,e,n,r,s,i,o,a,l,u,c){this.appService=t,this.stashService=e,this.stateService=n,this.storage=r,this.router=s,this.translateService=i,this.resolver=o,this.injector=a,this.app=l,this.renderer2=u,this.document=c,this.disableScrollbar="true",this.unsubscribeAll=new B.a}ngOnInit(){this.initStash(),this.initTranslate(),this.addModal(),this.setupScrollbar()}initStash(){this.storage.create(),this.stashService.getStash(this.at,this.account,this.kb).subscribe(t=>{this.stateService.setStash(t),this.stateService.setStateData({db:this.at,account:this.account,stash:this.kb})},t=>{console.error(`Knowledge box "${this.kb}" cannot be retrieved`)})}initTranslate(){this.translateService.setDefaultLang("en");const t=this.translateService.getBrowserLang();let e;e=this.lang&&M.g.supportedLanguages().indexOf(this.lang)>-1?this.lang:t&&M.g.supportedLanguages().indexOf(t)>-1?t:"en",this.translateService.use(e)}addModal(){let t=this.resolver.resolveComponentFactory(Q),e=document.createElement("div");this.document.body.appendChild(e);const n=t.create(this.injector,[],e);this.app.attachView(n.hostView)}setupScrollbar(){this.appService.isOpenModal.pipe(Object(H.a)(this.unsubscribeAll)).subscribe(t=>{const e="flaps-disable-scrollbar";"true"===this.disableScrollbar&&(t?(this.renderer2.addClass(this.document.documentElement,e),this.renderer2.addClass(this.document.body,e)):(this.renderer2.removeClass(this.document.documentElement,e),this.renderer2.removeClass(this.document.body,e)))})}open(){this.appService.setOpenModal(!0)}close(){this.appService.setOpenModal(!1)}ngOnDestroy(){this.unsubscribeAll&&(this.unsubscribeAll.next(),this.unsubscribeAll.complete())}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(G.a),s.Pb(M.i),s.Pb(M.j),s.Pb(z.b),s.Pb(q.e),s.Pb(y.d),s.Pb(s.j),s.Pb(s.s),s.Pb(s.g),s.Pb(s.F),s.Pb(i.d))},t.\u0275cmp=s.Jb({type:t,selectors:[["flaps-root"]],inputs:{at:"at",account:"account",kb:"kb",lang:"lang",token:"token",type:"type",disableScrollbar:"disableScrollbar"},decls:2,vars:2,consts:[["class","flaps-search",4,"ngIf"],[1,"flaps-search"],[3,"clickButton"]],template:function(t,e){1&t&&(s.Fc(0,rt,2,0,"div",0),s.Fc(1,st,2,0,"div",0)),2&t&&(s.nc("ngIf","button"===e.type),s.Eb(1),s.nc("ngIf","floating"===e.type))},directives:[i.n,et,nt],styles:[".flaps-search[_ngcontent-%COMP%]{display:inline-block}"]}),t})();var ot=n("VDRc"),at=n("NrYi");let lt=(()=>{class t{constructor(t,e,n){this.appService=t,this.route=e,this.router=n,this.searchTerm=this.route.snapshot.queryParams.q,this.route.data.subscribe(t=>{this.results=new W.b(t.search)})}onClickItem(t){this.appService.showResource(t,{searchTerm:this.searchTerm,pageType:"search-grid"})}ngOnInit(){}close(){this.appService.closeModal()}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(G.a),s.Pb(q.a),s.Pb(q.e))},t.\u0275cmp=s.Jb({type:t,selectors:[["flaps-widget-search-grid"]],decls:9,vars:8,consts:[["fxLayout","column",1,"search-grid-container"],["fxFlex","0 0 auto","fxLayout","row","fxLayoutAlign","space-between end",1,"search-grid-container-header"],[1,"search-grid-container-title"],["mat-icon-button","",1,"search-grid-container-close",3,"click"],["src","assets/icons/close-white.svg"],["fxFlex","1 1 auto",1,"search-grid-container-content"],[3,"results","page","size","searchTerm","showTitles","clickItem"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.Vb(2,"div",2),s.Hc(3),s.ic(4,"translate"),s.Ub(),s.Vb(5,"button",3),s.dc("click",function(){return e.close()}),s.Qb(6,"svg-icon",4),s.Ub(),s.Ub(),s.Vb(7,"div",5),s.Vb(8,"stf-search-grid",6),s.dc("clickItem",function(t){return e.onClickItem(t)}),s.Ub(),s.Ub(),s.Ub()),2&t&&(s.Eb(3),s.Ic(s.jc(4,6,"search.title.results")),s.Eb(5),s.nc("results",e.results)("page",0)("size",10)("searchTerm",e.searchTerm)("showTitles",!1))},directives:[ot.d,ot.b,ot.c,w.b,at.a],pipes:[y.c],styles:[".search-grid-container[_ngcontent-%COMP%]{height:100%}.search-grid-container-header[_ngcontent-%COMP%]{height:14.6%;margin:0 10%;max-height:130px;min-height:89px;padding-bottom:32px}.search-grid-container-title[_ngcontent-%COMP%]{color:#fff;font-size:var(--stf-font-size-title);font-weight:var(--stf-font-weight-bold);line-height:1}.search-grid-container-close[_ngcontent-%COMP%]{-webkit-appearance:none;background:transparent;border:none;color:inherit;cursor:pointer;font:inherit;margin:0 10px 0 0;padding:0;width:auto}.search-grid-container-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.search-grid-container-content[_ngcontent-%COMP%]{overflow-y:auto;padding:0 10% 60px}.search-grid-container-content[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:transparent;height:12px;width:12px}.search-grid-container-content[_ngcontent-%COMP%]::-webkit-scrollbar:hover{background-color:rgba(0,0,0,.12)}.search-grid-container-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border:2px solid transparent;border-radius:12px;box-shadow:inset 0 0 0 12px hsla(0,0%,85.9%,.73)}.search-grid-container-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:active{border-radius:12px;box-shadow:inset 0 0 0 12px hsla(0,0%,85.9%,.95)}"]}),t})();var ut=n("IJgD");let ct=(()=>{class t{constructor(t){this.el=t}ngAfterViewInit(){setTimeout(()=>{this.el.nativeElement.focus()},0)}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(s.l))},t.\u0275dir=s.Kb({type:t,selectors:[["","stfAutoFocus",""]]}),t})();var ht=n("u93l"),dt=n("GXSh");function pt(t,e){1&t&&(s.Qb(0,"svg-icon",12),s.ic(1,"assetUrl")),2&t&&s.nc("src",s.jc(1,1,"assets/icons/previous.svg"))}function ft(t,e){1&t&&(s.Qb(0,"svg-icon",12),s.ic(1,"assetUrl")),2&t&&s.nc("src",s.jc(1,1,"assets/icons/eyeglass.svg"))}function mt(t,e){if(1&t&&(s.Vb(0,"div",10),s.Fc(1,pt,2,3,"svg-icon",11),s.Fc(2,ft,2,3,"svg-icon",11),s.Ub()),2&t){const t=s.hc().$implicit;s.Eb(1),s.nc("ngIf","previous"===t.icon),s.Eb(1),s.nc("ngIf","eyeglass"===t.icon)}}function gt(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div",7),s.dc("click",function(){s.xc(t);const n=e.$implicit,r=s.hc(2).$implicit;return s.hc(2).searchbarService.onClickAutocomplete(n,r)}),s.Fc(1,mt,3,2,"div",8),s.Qb(2,"div",9),s.ic(3,"sanitizeTags"),s.Ub()}if(2&t){const t=e.$implicit,n=e.index,r=s.hc(2),i=r.index,o=r.$implicit,a=s.hc(2);s.Hb("selected_prediction",a.selected&&n===a.selected.index&&i===a.selected.sectionIndex)("autocomplete-option-paragraph",a.isParagraph(o)),s.Eb(1),s.nc("ngIf",t.icon),s.Eb(1),s.nc("innerHTML",s.jc(3,6,t.value),s.yc)}}function bt(t,e){1&t&&s.Qb(0,"div",13)}function yt(t,e){if(1&t&&(s.Tb(0),s.Vb(1,"div"),s.Vb(2,"div",4),s.Vb(3,"strong"),s.Hc(4),s.ic(5,"uppercase"),s.ic(6,"translate"),s.Ub(),s.Ub(),s.Fc(7,gt,4,8,"div",5),s.Ub(),s.Fc(8,bt,1,0,"div",6),s.Sb()),2&t){const t=s.hc(),e=t.$implicit,n=t.last;s.Eb(4),s.Ic(s.jc(5,3,s.jc(6,5,e.name_i18n))),s.Eb(3),s.nc("ngForOf",e.values),s.Eb(1),s.nc("ngIf",!n)}}function vt(t,e){if(1&t&&(s.Vb(0,"div"),s.Fc(1,yt,9,7,"ng-container",3),s.Ub()),2&t){const t=e.$implicit;s.Eb(1),s.nc("ngIf",t.values.length>0)}}function _t(t,e){if(1&t&&(s.Vb(0,"div",1),s.Fc(1,vt,2,1,"div",2),s.ic(2,"async"),s.Ub()),2&t){const t=s.hc();s.Eb(1),s.nc("ngForOf",s.jc(2,1,t.searchbarService.autocompletes))}}let wt=(()=>{class t{constructor(t){this.searchbarService=t,this.unsubscribeAll=new B.a,this.selected=null,this.searchbarService.selected.pipe(Object(H.a)(this.unsubscribeAll)).subscribe(t=>{this.selected=t})}isParagraph(t){return t.name===M.a.PARAGRAPH}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(ut.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["stf-autocomplete"]],decls:2,vars:3,consts:[["class","autocomplete",4,"ngIf"],[1,"autocomplete"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"autocomplete-title"],["class","autocomplete-option","fxLayout","row","fxLayoutAlign","start center",3,"selected_prediction","autocomplete-option-paragraph","click",4,"ngFor","ngForOf"],["class","autocomplete-divider",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center",1,"autocomplete-option",3,"click"],["class","autocomplete-option-icon","fxFlex","0 0 auto",4,"ngIf"],[3,"innerHTML"],["fxFlex","0 0 auto",1,"autocomplete-option-icon"],[3,"src",4,"ngIf"],[3,"src"],[1,"autocomplete-divider"]],template:function(t,e){1&t&&(s.Fc(0,_t,3,3,"div",0),s.ic(1,"async")),2&t&&s.nc("ngIf",s.jc(1,1,e.searchbarService.showAutocomplete))},directives:[i.n,i.m,ot.d,ot.c,ot.b,w.b],pipes:[i.b,i.u,y.c,ht.a,dt.a],styles:[".autocomplete[_ngcontent-%COMP%]{background:#fff;box-shadow:2px 2px 15px rgba(0,0,0,.16);padding:20px 36px}.autocomplete[_ngcontent-%COMP%]   .selected_prediction[_ngcontent-%COMP%]{background:rgba(0,0,0,.1)}.autocomplete-title[_ngcontent-%COMP%]{font-size:var(--stf-font-size-xlarge);margin-bottom:4px}.autocomplete-option[_ngcontent-%COMP%]{cursor:pointer;overflow:hidden;padding-bottom:4px;padding-top:4px;text-overflow:ellipsis;white-space:nowrap}.autocomplete-option[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}.autocomplete-option-paragraph[_ngcontent-%COMP%]{-webkit-line-clamp:3;-webkit-box-orient:vertical;display:-webkit-box;line-height:1.3;overflow:hidden;padding-bottom:7px;padding-top:7px;text-overflow:ellipsis;white-space:normal}.autocomplete-option-icon[_ngcontent-%COMP%]{margin-right:10px;opacity:.3}.autocomplete-option-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.autocomplete-divider[_ngcontent-%COMP%]{border-top:1px solid #000;height:1px;margin:20px 0}"]}),t})(),xt=(()=>{class t{constructor(t){this.searchbarService=t,this.search=new s.n,this.searchParagraph=new s.n,this.unsubscribeAll=new B.a,this.searchbarService.search.pipe(Object(H.a)(this.unsubscribeAll)).subscribe(t=>{this.onSearch(t)}),this.searchbarService.searchParagraph.pipe(Object(H.a)(this.unsubscribeAll)).subscribe(t=>{this.onSearchParagraph(t)})}ngOnInit(){}onSearch(t){this.search.emit(t)}onSearchParagraph(t){this.searchParagraph.emit(t)}ngOnDestroy(){this.unsubscribeAll&&(this.unsubscribeAll.next(),this.unsubscribeAll.complete())}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(ut.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["stf-searchbar"]],inputs:{maxHeight:"maxHeight"},outputs:{search:"search",searchParagraph:"searchParagraph"},decls:6,vars:8,consts:[[1,"searchbar"],["type","text","autocomplete","off","autocapitalize","off","stfAutoFocus","",3,"placeholder","value","changeValue","keydown","keydown.enter","keyup"],[1,"searchbar-autocomplete"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Vb(1,"input",1),s.dc("changeValue",function(t){return e.searchbarService.setSearchTerm(t.target.value)})("keydown",function(t){return e.searchbarService.onKeyDown(t)})("keydown.enter",function(){return e.searchbarService.onEnterPressed()})("keyup",function(t){return e.searchbarService.onKeyUp(t.target.value)}),s.ic(2,"translate"),s.ic(3,"async"),s.Ub(),s.Vb(4,"div",2),s.Qb(5,"stf-autocomplete"),s.Ub(),s.Ub()),2&t&&(s.Eb(1),s.nc("placeholder",s.jc(2,4,"searchbar.help"))("value",s.jc(3,6,e.searchbarService.searchTerm)),s.Eb(3),s.Cc("max-height",e.maxHeight))},directives:[ct,wt],pipes:[y.c,i.b],styles:[".searchbar[_ngcontent-%COMP%]{position:relative}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;color:inherit;font-family:inherit;font-size:var(--stf-font-size-title);font-weight:var(--stf-font-weight-light);height:65px;padding:0 26px;width:100%}.searchbar-autocomplete[_ngcontent-%COMP%]{margin-top:8px;overflow-y:auto}"]}),t})();const kt=["container"];let St=(()=>{class t{constructor(t,e,n,r,s){this.appService=t,this.route=e,this.searchbarService=n,this.renderer2=r,this.document=s,this.handleClick=t=>{this.checkClickOutside(t)}}ngOnInit(){this.searchbarService.clearAutocompletes();const t=this.route.snapshot.queryParams.q;t&&this.searchbarService.setSearchTerm(t)}ngAfterViewInit(){setTimeout(()=>{this.document.addEventListener("click",this.handleClick,!0)},0)}onSearch(t){this.appService.search(t)}onSearchParagraph(t){this.appService.showResource(t,{searchTerm:t.searchTerm,pageType:"input"})}checkClickOutside(t){var e;!(null===(e=this.container)||void 0===e?void 0:e.nativeElement.contains(t.target))&&this.appService.closeModal()}ngOnDestroy(){this.document.removeEventListener("click",this.handleClick,!0)}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(G.a),s.Pb(q.a),s.Pb(W.h),s.Pb(s.F),s.Pb(i.d))},t.\u0275cmp=s.Jb({type:t,selectors:[["flaps-input"]],viewQuery:function(t,e){if(1&t&&s.Lc(kt,1),2&t){let t;s.sc(t=s.ec())&&(e.container=t.first)}},features:[s.Db([W.h])],decls:12,vars:3,consts:[[1,"input-container"],[1,"input-container-header"],["container",""],["maxHeight","50vh",3,"search","searchParagraph"],[1,"input-container-footer"],[1,"input-container-footer-cta"],[1,"input-container-footer-by"],[1,"input-container-footer-logo",3,"src"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Qb(1,"div",1),s.Vb(2,"div",null,2),s.Vb(4,"stf-searchbar",3),s.dc("search",function(t){return e.onSearch(t)})("searchParagraph",function(t){return e.onSearchParagraph(t)}),s.Ub(),s.Vb(5,"div",4),s.Vb(6,"span",5),s.Hc(7,"Find your doc!"),s.Ub(),s.Vb(8,"span",6),s.Hc(9," by "),s.Ub(),s.Qb(10,"svg-icon",7),s.ic(11,"assetUrl"),s.Ub(),s.Ub(),s.Ub()),2&t&&(s.Eb(10),s.nc("src",s.jc(11,1,"assets/logos/logo_text.svg")))},directives:[xt,w.b],pipes:[tt.a],styles:[".input-container[_ngcontent-%COMP%]{height:100%;margin:0 auto;width:610px}.input-container-header[_ngcontent-%COMP%]{height:14.6%;max-height:130px;min-height:89px}.input-container-footer[_ngcontent-%COMP%]{background-color:#e5e5e5;color:rgba(0,0,0,.4);padding:8px 24px 10px;text-align:right}.input-container-footer-cta[_ngcontent-%COMP%]{font-size:var(--stf-font-size-ssmall);font-weight:var(--stf-font-weight-bold)}.input-container-footer-by[_ngcontent-%COMP%]{font-size:9px;font-weight:var(--stf-font-weight-light);margin:0 3px}.input-container-footer-logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{vertical-align:-4px;width:46px}"]}),t})();var Ct=n("cp0P");let It=(()=>{class t{constructor(t,e){this.searchService=t,this.stateService=e}resolve(t,e){const n=this.stateService.getStateData(),r=null==n?void 0:n.db,s=null==n?void 0:n.account,i=null==n?void 0:n.stash,o=t.queryParamMap.get("q"),a=this.searchService.search(r,s,i,o,0,0,[],[],[],[]),l=this.searchService.flaps(r,s,i,o,5),u=this.searchService.paragraph({db:r,account:s,stash:i,query:o,size:5,from:0,tags:[],fast:!1});return Object(Ct.a)({search:a,flaps:l,paragraphs:u})}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(M.h),s.Zb(M.j))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Et=[{path:"",component:(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Jb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&s.Rb(0)},encapsulation:2}),t})()},{path:"input",component:St},{path:"search",component:lt,resolve:{search:It}},{path:"resource",loadChildren:()=>Promise.all([n.e(3),n.e(4)]).then(n.bind(null,"Mcfc")).then(t=>t.ResourceModule),data:{preload:!0}}],Ot={onSameUrlNavigation:"reload",scrollPositionRestoration:"enabled"};let Tt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({imports:[[q.f.forRoot(Et,Ot)],q.f]}),t})();class Nt{constructor(){}init(){}getConfig(){return{version:"0.1",backend:{app:"widget",api:"https://flaps.io/api",siteKey:"",analytics:"",sentry_environment:"",posthog_key:"",posthog_host:""},stashify:{editor:"",email_domain:""}}}}function At(t,e){return new v(t,e.getBaseAssetUrl()+"/assets/i18n/",".json")}let Rt=(()=>{class t{constructor(t){this.injector=t;const e=function(t,e){const n=function(t,e){return e.get(s.j).resolveComponentFactory(t).inputs}(t,e.injector),r=e.strategyFactory||new m(t,e.injector),i=function(t){const e={};return t.forEach(({propName:t,templateName:n})=>{var r;e[(r=n,r.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`))]=t}),e}(n);class o extends b{constructor(t){super(),this.injector=t}get ngElementStrategy(){if(!this._ngElementStrategy){const t=this._ngElementStrategy=r.create(this.injector||e.injector);n.forEach(({propName:e})=>{if(!this.hasOwnProperty(e))return;const n=this[e];delete this[e],t.setInputValue(e,n)})}return this._ngElementStrategy}attributeChangedCallback(t,e,n,r){this.ngElementStrategy.setInputValue(i[t],n)}connectedCallback(){let t=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),t=!0),this.ngElementStrategy.connect(this),t||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(t=>{const e=function(t,e,n){if("function"!=typeof CustomEvent){const r=t.createEvent("CustomEvent");return r.initCustomEvent(e,!1,!1,n),r}return new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:n})}(this.ownerDocument,t.name,t.value);this.dispatchEvent(e)})}}return o.observedAttributes=Object.keys(i),n.forEach(({propName:t})=>{Object.defineProperty(o.prototype,t,{get(){return this.ngElementStrategy.getInputValue(t)},set(e){this.ngElementStrategy.setInputValue(t,e)},configurable:!0,enumerable:!0})}),o}(it,{injector:t});customElements.define("flaps-find-your-docs",e)}ngDoBootstrap(){}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(s.s))},t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({providers:[M.h,{provide:M.k,useValue:!0},{provide:i.j,useClass:V},{provide:"staticEnviromentConfiguration",useValue:j},{provide:L.c,useClass:Nt},{provide:L.j,useValue:{isFeatureEnabled:(t,e)=>{e(!0)}}},{provide:L.i,useValue:{show:()=>{}}},{provide:i.a,useValue:"https://demo.nuclia.io/"}],imports:[[r.a,o.b,a.b,Tt,W.d,W.e,$,w.a.forRoot(),x.a,L.h,_.a.forRoot({name:"__flaps",driverOrder:[z.a.IndexedDB,z.a.LocalStorage]}),y.b.forRoot({loader:{provide:y.a,useFactory:At,deps:[a.a,L.e]}})]]}),t})();j.production&&Object(s.W)(),r.c().bootstrapModule(Rt).catch(t=>console.error(t));const Ft={at:void 0,account:void 0,kb:void 0,lang:void 0,floating:!1,button:void 0,disableScrollbar:!0},Dt=[{name:"at",type:"string"},{name:"account",type:"string"},{name:"kb",type:"string"}];window.initFindYourDocs=function(t){const e=Object.assign({},Ft,t);Dt.forEach(t=>{e.hasOwnProperty(t.name)&&typeof e[t.name]===t.type||console.log(`Error initializing FindYourDocs: missing option "${t.name}"`)});const n=e,r=document.createElement("flaps-find-your-docs");if(r.setAttribute("at",n.at),r.setAttribute("account",n.account),r.setAttribute("kb",n.kb),n.lang&&"string"==typeof n.lang&&r.setAttribute("lang",n.lang),n.disableScrollbar||r.setAttribute("disable-scrollbar","false"),n.floating)r.setAttribute("type","floating"),document.body.appendChild(r);else if(n.button){r.setAttribute("type","button");const t=document.querySelector(n.button);t&&t.appendChild(r)}const s=r;return{open:()=>{s.open()},close:()=>{s.close()}}}},uDiL:function(t,e,n){(function(t){var r;!function(t,s,i){function o(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function l(t,e){var n=new o(t),r=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,r&&("object"==typeof r&&a(r,n),s.state=function(){return a(n,{})}),s}s&&s.exports?s.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(e,n,e,s))||(s.exports=r):this.xor128=l}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},ura0:function(t,e,n){"use strict";n.d(e,"c",function(){return v}),n.d(e,"a",function(){return c}),n.d(e,"b",function(){return b});var r=n("8Y7J"),s=n("SVse"),i=n("/q54"),o=n("8LU1"),a=n("1G5W");n("cUpR"),new Map;let l=(()=>{class t extends i.b{constructor(t,e,n,r,i,o,a){super(t,null,e,n),this.ngClassInstance=a,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new s.l(r,i,t,o)),this.init(),this.setValue("","")}set klass(t){this.ngClassInstance.klass=t,this.setValue(t,"")}updateWithValue(t){this.ngClassInstance.ngClass=t,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(i.j),r.Pb(i.f),r.Pb(r.t),r.Pb(r.u),r.Pb(r.F),r.Pb(s.l,10))},t.\u0275dir=r.Kb({type:t,inputs:{klass:["class","klass"]},features:[r.Bb]}),t})();const u=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let c=(()=>{class t extends l{constructor(){super(...arguments),this.inputs=u}}return t.\u0275fac=function(e){return h(e||t)},t.\u0275dir=r.Kb({type:t,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[r.Bb]}),t})();const h=r.Xb(c);let d=(()=>{class t extends i.i{buildStyles(t,e){return{display:"true"===t?e.display||(e.isServer?"initial":""):"none"}}}return t.\u0275fac=function(e){return p(e||t)},t.\u0275prov=Object(r.Lb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const p=r.Xb(d);let f=(()=>{class t extends i.b{constructor(t,e,n,r,s,i,o){super(t,e,n,r),this.layoutConfig=s,this.platformId=i,this.serverModuleLoaded=o,this.DIRECTIVE_KEY="show-hide",this.display="",this.hasLayout=!1,this.hasFlexChild=!1}ngAfterViewInit(){this.trackExtraTriggers();const t=Array.from(this.nativeElement.children);for(let n=0;n<t.length;n++)if(this.marshal.hasValue(t[n],"flex")){this.hasFlexChild=!0;break}m.has(this.nativeElement)?this.display=m.get(this.nativeElement):(this.display=this.getDisplayStyle(),m.set(this.nativeElement,this.display)),this.init();const e=this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY,"");void 0===e||""===e?this.setValue(!0,""):this.triggerUpdate()}ngOnChanges(t){Object.keys(t).forEach(e=>{if(-1!==this.inputs.indexOf(e)){const n=e.split("."),r=n.slice(1).join("."),s=t[e].currentValue;let i=""===s||0!==s&&Object(o.b)(s);"fxHide"===n[0]&&(i=!i),this.setValue(i,r)}})}trackExtraTriggers(){this.hasLayout=this.marshal.hasValue(this.nativeElement,"layout"),["layout","layout-align"].forEach(t=>{this.marshal.trackValue(this.nativeElement,t).pipe(Object(a.a)(this.destroySubject)).subscribe(this.triggerUpdate.bind(this))})}getDisplayStyle(){return this.hasLayout||this.hasFlexChild&&this.layoutConfig.addFlexToParent?"flex":this.styler.lookupStyle(this.nativeElement,"display",!0)}updateWithValue(t=!0){if(""===t)return;const e=Object(s.x)(this.platformId);this.addStyles(t?"true":"false",{display:this.display,isServer:e}),e&&this.serverModuleLoaded&&this.nativeElement.style.setProperty("display",""),this.marshal.triggerUpdate(this.parentElement,"layout-gap")}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(d),r.Pb(i.j),r.Pb(i.f),r.Pb(i.e),r.Pb(r.C),r.Pb(i.h))},t.\u0275dir=r.Kb({type:t,features:[r.Bb,r.Cb]}),t})();const m=new WeakMap,g=["fxShow","fxShow.print","fxShow.xs","fxShow.sm","fxShow.md","fxShow.lg","fxShow.xl","fxShow.lt-sm","fxShow.lt-md","fxShow.lt-lg","fxShow.lt-xl","fxShow.gt-xs","fxShow.gt-sm","fxShow.gt-md","fxShow.gt-lg","fxHide","fxHide.print","fxHide.xs","fxHide.sm","fxHide.md","fxHide.lg","fxHide.xl","fxHide.lt-sm","fxHide.lt-md","fxHide.lt-lg","fxHide.lt-xl","fxHide.gt-xs","fxHide.gt-sm","fxHide.gt-md","fxHide.gt-lg"];let b=(()=>{class t extends f{constructor(){super(...arguments),this.inputs=g}}return t.\u0275fac=function(e){return y(e||t)},t.\u0275dir=r.Kb({type:t,selectors:[["","fxShow",""],["","fxShow.print",""],["","fxShow.xs",""],["","fxShow.sm",""],["","fxShow.md",""],["","fxShow.lg",""],["","fxShow.xl",""],["","fxShow.lt-sm",""],["","fxShow.lt-md",""],["","fxShow.lt-lg",""],["","fxShow.lt-xl",""],["","fxShow.gt-xs",""],["","fxShow.gt-sm",""],["","fxShow.gt-md",""],["","fxShow.gt-lg",""],["","fxHide",""],["","fxHide.print",""],["","fxHide.xs",""],["","fxHide.sm",""],["","fxHide.md",""],["","fxHide.lg",""],["","fxHide.xl",""],["","fxHide.lt-sm",""],["","fxHide.lt-md",""],["","fxHide.lt-lg",""],["","fxHide.lt-xl",""],["","fxHide.gt-xs",""],["","fxHide.gt-sm",""],["","fxHide.gt-md",""],["","fxHide.gt-lg",""]],inputs:{fxShow:"fxShow","fxShow.print":"fxShow.print","fxShow.xs":"fxShow.xs","fxShow.sm":"fxShow.sm","fxShow.md":"fxShow.md","fxShow.lg":"fxShow.lg","fxShow.xl":"fxShow.xl","fxShow.lt-sm":"fxShow.lt-sm","fxShow.lt-md":"fxShow.lt-md","fxShow.lt-lg":"fxShow.lt-lg","fxShow.lt-xl":"fxShow.lt-xl","fxShow.gt-xs":"fxShow.gt-xs","fxShow.gt-sm":"fxShow.gt-sm","fxShow.gt-md":"fxShow.gt-md","fxShow.gt-lg":"fxShow.gt-lg",fxHide:"fxHide","fxHide.print":"fxHide.print","fxHide.xs":"fxHide.xs","fxHide.sm":"fxHide.sm","fxHide.md":"fxHide.md","fxHide.lg":"fxHide.lg","fxHide.xl":"fxHide.xl","fxHide.lt-sm":"fxHide.lt-sm","fxHide.lt-md":"fxHide.lt-md","fxHide.lt-lg":"fxHide.lt-lg","fxHide.lt-xl":"fxHide.lt-xl","fxHide.gt-xs":"fxHide.gt-xs","fxHide.gt-sm":"fxHide.gt-sm","fxHide.gt-md":"fxHide.gt-md","fxHide.gt-lg":"fxHide.gt-lg"},features:[r.Bb]}),t})();const y=r.Xb(b);let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[i.c]]}),t})()},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7o/Q");function s(){}var i=n("n6bG");function o(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new l(t,this.nextOrObserver,this.error,this.complete))}}class l extends r.a{constructor(t,e,n,r){super(t),this._tapNext=s,this._tapError=s,this._tapComplete=s,this._tapError=n||s,this._tapComplete=r||s,Object(i.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||s,this._tapError=e.error||s,this._tapComplete=e.complete||s)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("oB13"),s=n("x+ZX"),i=n("XNiG");function o(){return new i.a}function a(){return t=>Object(s.a)()(Object(r.a)(o)(t))}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function s(){return function(t){return t.lift(new i(t))}}class i{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new o(t,n),s=e.subscribe(r);return r.closed||(r.connection=n.connect()),s}}class o extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},xgIS:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),s=n("DH7j"),i=n("n6bG"),o=n("lJxs");function a(t,e,n,u){return Object(i.a)(n)&&(u=n,n=void 0),u?a(t,e,n).pipe(Object(o.a)(t=>Object(s.a)(t)?u(...t):u(t))):new r.a(r=>{l(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function l(t,e,n,r,s){let i;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,s),i=()=>r.removeEventListener(e,n,s)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),i=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),i=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let i=0,o=t.length;i<o;i++)l(t[i],e,n,r,s)}r.add(i)}},xutz:function(t,e,n){"use strict";(function(t){var r=n("XqMk"),s="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=s&&"object"==typeof t&&t&&!t.nodeType&&t,o=i&&i.exports===s&&r.a.process,a=function(){try{return i&&i.require&&i.require("util").types||o&&o.binding&&o.binding("util")}catch(t){}}();e.a=a}).call(this,n("3UD+")(t))},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),s=n("ngJS"),i=n("jZKg");function o(t,e){return e?Object(i.a)(t,e):new r.a(Object(s.a)(t))}},yuCN:function(t,e,n){(function(t){var r;!function(t,s,i){function o(t){var e=this;e.next=function(){var t,n,r=e.x,s=e.i;return t=r[s],n=(t^=t>>>7)^t<<24,n^=(t=r[s+1&7])^t>>>10,n^=(t=r[s+3&7])^t>>>3,n^=(t=r[s+4&7])^t<<7,t=r[s+7&7],r[s]=n^=(t^=t<<13)^t<<9,e.i=s+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function a(t,e){return e.x=t.x.slice(),e.i=t.i,e}function l(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,r&&(r.x&&a(r,n),s.state=function(){return a(n,{})}),s}s&&s.exports?s.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(e,n,e,s))||(s.exports=r):this.xorshift7=l}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC");function s(t,e){return new r.a(e?n=>e.schedule(i,0,{error:t,subscriber:n}):e=>e.error(t))}function i({error:t,subscriber:e}){e.error(t)}},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zuBV:function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("8LU1"),s=n("Oh6u"),i=n("XNiG"),o=n("1G5W"),a=n("8Y7J"),l=n("SVse");function u(t,e){if(1&t&&a.Qb(0,"img",3),2&t){const t=a.hc(2);a.nc("src",t.picture,a.zc)}}function c(t,e){if(1&t&&(a.Tb(0),a.Fc(1,u,1,1,"img",2),a.Sb()),2&t){const t=a.hc(),e=a.tc(3);a.Eb(1),a.nc("ngIf",""!==t.picture&&null!=t.picture)("ngIfElse",e)}}function h(t,e){if(1&t&&(a.Vb(0,"span"),a.Hc(1),a.Ub()),2&t){const t=a.hc();a.Eb(1),a.Ic(t.name)}}function d(t,e){if(1&t&&(a.Vb(0,"span",5),a.Hc(1),a.Ub()),2&t){const t=a.hc(2);a.Eb(1),a.Jc(" ",t.avatarText," ")}}function p(t,e){if(1&t&&a.Fc(0,d,2,1,"span",4),2&t){const t=a.hc();a.nc("ngIf",t.avatarText)}}const f=["#1abc9c","#3498db","#f1c40f","#8e44ad","#e74c3c","#d35400","#2c3e50","#7f8c8d"];let m=(()=>{class t{constructor(t,e){this.user=t,this.cd=e,this._show_name=!0,this._only_name=!1,this.avatarColors=f,this.unsubscribeAll=new i.a}get only_name(){return this._only_name}set only_name(t){this._only_name=Object(r.b)(t)}get show_name(){return this._show_name}set show_name(t){this._show_name=Object(r.b)(t),this.alt_name=this._show_name?void 0:this.name}getRandomColor(t){if(!t)return"transparent";const e=this.calculateAsciiCode(t);return this.avatarColors[e%this.avatarColors.length]}calculateAsciiCode(t){return t.split("").map(t=>t.charCodeAt(0)).reduce((t,e)=>t+e)}getInitials(t,e){const n=t?t.trim():null;if(!n)return"";const r=n.split(" ");return this.constructInitials(e&&e<r.length?r.slice(0,e):r)}constructInitials(t){return t&&t.length?t.filter(t=>t&&t.length>0).map(t=>t[0].toUpperCase()).join(""):""}ngOnInit(){var t;if(this._show_name&&(this.alt_name=void 0),null===(t=this.id)||void 0===t?void 0:t.startsWith("sa:")){const t=this.id.split(":");this.name=`Service account ${t[2]}`,this.avatarText=`S${this.getInitials(t[2],1)}`}else this.id&&this.user.user(this.id).pipe(Object(o.a)(this.unsubscribeAll)).subscribe(t=>{t&&(this.name=t.first_name||"undefined",""===t.picture||null==t.picture?this.avatarText=this.getInitials(this.name,2):this.picture=t.picture,this.cd.markForCheck())},t=>{404===t.status&&(this.name="Not found",this.avatarText="--",this.cd.markForCheck())});this.cd.markForCheck()}ngOnDestroy(){this.unsubscribeAll&&(this.unsubscribeAll.next(),this.unsubscribeAll.complete())}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(s.l),a.Pb(a.h))},t.\u0275cmp=a.Jb({type:t,selectors:[["stf-user"]],inputs:{id:"id",only_name:"only_name",show_name:"show_name"},decls:4,vars:2,consts:[[4,"ngIf"],["textAvatar",""],["class","mini_picture_user",3,"src",4,"ngIf","ngIfElse"],[1,"mini_picture_user",3,"src"],["class","mini_picture_user text",4,"ngIf"],[1,"mini_picture_user","text"]],template:function(t,e){1&t&&(a.Fc(0,c,2,2,"ng-container",0),a.Fc(1,h,2,1,"span",0),a.Fc(2,p,1,1,"ng-template",null,1,a.Gc)),2&t&&(a.nc("ngIf",!e.only_name),a.Eb(1),a.nc("ngIf",e.show_name))},directives:[l.n],styles:[".mini_picture_user[_ngcontent-%COMP%]{background-color:var(--stf-black);border-radius:10em;display:inline-block;margin-right:10px;vertical-align:middle;width:25px}.mini_picture_user.text[_ngcontent-%COMP%]{color:#fff;height:30px;padding:5px;text-align:center;width:30px}"],changeDetection:0}),t})()},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return l});var r=n("7o/Q"),s=n("HDdC"),i=n("SeVD");class o extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function l(t,e){if(!e.closed)return t instanceof s.a?t.subscribe(e):Object(i.a)(t)(e)}}});